From fabricecolin at mail.berlios.de  Sun Aug  3 11:04:41 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 3 Aug 2008 11:04:41 +0200
Subject: [Pinot-svn] r1315 - trunk/IndexSearch/XesamGLib
Message-ID: <200808030904.m7394fKX026890@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-03 11:04:32 +0200 (Sun, 03 Aug 2008)
New Revision: 1315

Modified:
   trunk/IndexSearch/XesamGLib/XesamEngine.cpp
Log:
Use xesam:language and xesam:relevancyRating.
It's not clear in what language the languages list is supposed to be, so we
assume it's in the locale language.


Modified: trunk/IndexSearch/XesamGLib/XesamEngine.cpp
===================================================================
--- trunk/IndexSearch/XesamGLib/XesamEngine.cpp	2008-07-26 06:10:28 UTC (rev 1314)
+++ trunk/IndexSearch/XesamGLib/XesamEngine.cpp	2008-08-03 09:04:32 UTC (rev 1315)
@@ -93,8 +93,26 @@
 	{
 		docInfo.setType(pType);
 	}
-	// FIXME: xesam_g_hit_get_string(pHit, "xesam:language");
 
+	const GValue *pValue = xesam_g_hit_get_field(pHit, "xesam:language");
+	if ((pValue != NULL) &&
+		(G_VALUE_TYPE(pValue) == G_TYPE_STRV))
+	{
+		gchar **pLanguages = (char **)g_value_get_boxed(pValue);
+
+		if ((pLanguages != NULL) &&
+			(pLanguages[0] != NULL))
+		{
+			string language(pLanguages[0]);
+
+			// Use the first language specified, assuming it's in the locale
+#ifdef DEBUG
+			cout << "XesamEngine::pushHit: language " << language << endl;
+#endif
+			docInfo.setLanguage(language);
+		}
+	}
+
 	const gchar *pTimestamp = xesam_g_hit_get_string(pHit, "xesam:contentModified");
 	if (pTimestamp != NULL)
 	{
@@ -112,9 +130,19 @@
 	{
 		docInfo.setExtract(pExtract);
 	}
-	// FIXME: no score field ?
-	docInfo.setScore((float )(100 - hitNum));
 
+	pValue = xesam_g_hit_get_field(pHit, "xesam:relevancyRating");
+	if ((pValue != NULL) &&
+		(G_VALUE_TYPE(pValue) == G_TYPE_FLOAT))
+	{
+		docInfo.setScore((float )g_value_get_float(pValue));
+	}
+	else
+	{
+		// Assume hits are sorted by relevancy
+		docInfo.setScore((float )(100 - hitNum));
+	}
+
 	// Push into the results list
 	resultsList.push_back(docInfo);
 }



From fabricecolin at mail.berlios.de  Sun Aug  3 11:09:17 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 3 Aug 2008 11:09:17 +0200
Subject: [Pinot-svn] r1316 - trunk/IndexSearch/Xapian
Message-ID: <200808030909.m7399H8n027044@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-03 11:09:13 +0200 (Sun, 03 Aug 2008)
New Revision: 1316

Modified:
   trunk/IndexSearch/Xapian/XapianEngine.cpp
Log:
The flag QueryParser::FLAG_BOOLEAN_ANY_CASE causes more problems than it's worth,
especially when queries are pieces of text pasted from elsewhere.


Modified: trunk/IndexSearch/Xapian/XapianEngine.cpp
===================================================================
--- trunk/IndexSearch/Xapian/XapianEngine.cpp	2008-08-03 09:04:32 UTC (rev 1315)
+++ trunk/IndexSearch/Xapian/XapianEngine.cpp	2008-08-03 09:09:13 UTC (rev 1316)
@@ -541,8 +541,7 @@
 
 	// Parse the query string with all necessary options
 	unsigned int flags = Xapian::QueryParser::FLAG_BOOLEAN|Xapian::QueryParser::FLAG_PHRASE|
-		Xapian::QueryParser::FLAG_LOVEHATE|Xapian::QueryParser::FLAG_BOOLEAN_ANY_CASE|
-		Xapian::QueryParser::FLAG_PURE_NOT;
+		Xapian::QueryParser::FLAG_LOVEHATE|Xapian::QueryParser::FLAG_PURE_NOT;
 	if (minimal == false)
 	{
 		flags |= Xapian::QueryParser::FLAG_WILDCARD;



From fabricecolin at mail.berlios.de  Sun Aug  3 15:02:53 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 3 Aug 2008 15:02:53 +0200
Subject: [Pinot-svn] r1317 - trunk/UI/GTK2/src
Message-ID: <200808031302.m73D2rWB003575@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-03 15:02:29 +0200 (Sun, 03 Aug 2008)
New Revision: 1317

Modified:
   trunk/UI/GTK2/src/WorkerThreads.cpp
Log:
Time retrieveUrl().


Modified: trunk/UI/GTK2/src/WorkerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.cpp	2008-08-03 09:09:13 UTC (rev 1316)
+++ trunk/UI/GTK2/src/WorkerThreads.cpp	2008-08-03 13:02:29 UTC (rev 1317)
@@ -38,6 +38,7 @@
 #include "MIMEScanner.h"
 #include "StringManip.h"
 #include "TimeConverter.h"
+#include "Timer.h"
 #include "Url.h"
 #include "HtmlFilter.h"
 #include "FilterUtils.h"
@@ -1402,6 +1403,7 @@
 	}
 	else if (m_done == false)
 	{
+		Timer collectTimer;
 		PinotSettings &settings = PinotSettings::getInstance();
 
 		// Set up the proxy
@@ -1416,7 +1418,11 @@
 			m_pDownloader->setSetting("proxytype", settings.m_proxyType);
 		}
 
+		collectTimer.start();
+
 		m_pDoc = m_pDownloader->retrieveUrl(m_docInfo);
+
+		cout << "Retrieved " << m_docInfo.getLocation() << " in " << collectTimer.stop() << " ms" << endl;
 	}
 
 	if (m_pDoc == NULL)



From fabricecolin at mail.berlios.de  Sun Aug  3 17:22:43 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 3 Aug 2008 17:22:43 +0200
Subject: [Pinot-svn] r1318 - trunk/UI/GTK2/src
Message-ID: <200808031522.m73FMhO0024245@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-03 17:22:35 +0200 (Sun, 03 Aug 2008)
New Revision: 1318

Added:
   trunk/UI/GTK2/src/UniqueApplication.cpp
   trunk/UI/GTK2/src/UniqueApplication.h
Modified:
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
Log:
Moved code that enforced the daemon's uniqueness to UniqueApplication and
prepare for an eventual switch to Unique (http://www.gnome.org/~ebassi/source/).


Added: trunk/UI/GTK2/src/UniqueApplication.cpp
===================================================================
--- trunk/UI/GTK2/src/UniqueApplication.cpp	2008-08-03 13:02:29 UTC (rev 1317)
+++ trunk/UI/GTK2/src/UniqueApplication.cpp	2008-08-03 15:22:35 UTC (rev 1318)
@@ -0,0 +1,177 @@
+/*
+ *  Copyright 2008 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#include <sys/types.h>
+#include <signal.h>
+#include <unistd.h>
+#include <errno.h>
+#include <iostream>
+#include <fstream>
+#include <sstream>
+
+#include "UniqueApplication.h"
+
+using std::cout;
+using std::cerr;
+using std::endl;
+using std::string;
+using std::fstream;
+using std::stringstream;
+
+UniqueApplication::UniqueApplication(const string &name)
+{
+#ifdef HAVE_UNIQUE
+	m_pApp = unique_app_new(name.c_str(), NULL);
+#ifdef DEBUG
+	if (m_pApp != NULL)
+	{
+		cout << "UniqueApplication: registered" << endl;
+	}
+	else
+	{
+		cout << "UniqueApplication: failed to register" << endl;
+	}
+#endif
+#endif
+}
+
+UniqueApplication::~UniqueApplication()
+{
+#ifdef HAVE_UNIQUE
+	if (m_pApp != NULL)
+	{
+		g_object_unref(m_pApp);
+	}
+#endif
+}
+
+bool UniqueApplication::isRunning(void)
+{
+#ifdef HAVE_UNIQUE
+	if ((m_pApp != NULL) &&
+		(unique_app_is_running(m_pApp) == TRUE))
+	{
+		return true;
+	}
+#endif
+
+	return false;
+}
+
+bool UniqueApplication::isRunning(const string &pidFileName, const string &processName)
+{
+	fstream pidFile;
+
+	// Open the PID file
+	pidFile.open(pidFileName.c_str(), std::ios::in);
+	if (pidFile.is_open() == false)
+	{
+		// The application may still be running even though the PID file doesn't exist
+		if (isRunning() == true)
+		{
+			return true;
+		}
+		// Keep going
+	}
+	else
+	{
+		pid_t processID = 0;
+		bool stillRunning = false, processDied = false;
+
+		pidFile >> processID;
+		pidFile.close();
+
+		// Is another process running ?
+		if (processID > 0)
+		{
+#ifdef HAVE_UNIQUE
+			if (m_pApp != NULL)
+			{
+				if (unique_app_is_running(m_pApp) == TRUE)
+				{
+					// It's still running
+					stillRunning = true;
+				}
+				else
+				{
+					// It most likely died
+					processDied = true;
+				}
+			}
+#else
+			fstream cmdLineFile;
+			stringstream cmdLineFileName;
+			bool checkProcess = true;
+
+			// FIXME: check for existence of /proc
+			cmdLineFileName << "/proc/" << processID << "/cmdline";
+			cmdLineFile.open(cmdLineFileName.str().c_str(), std::ios::in);
+			if (cmdLineFile.is_open() == true)
+			{
+				string cmdLine;
+
+				cmdLineFile >> cmdLine;
+				cmdLineFile.close();
+
+				if (cmdLine.find(processName) == string::npos)
+				{
+					// It's another process
+					checkProcess = false;
+					processDied = true;
+				}
+			}
+
+			if (checkProcess == true)
+			{
+				if (kill(processID, 0) == 0)
+				{
+					// It's still running
+					stillRunning = true;
+				}
+				else if (errno == ESRCH)
+				{
+					// This PID doesn't exist
+					processDied = true;
+				}
+			}
+#endif
+
+			if (stillRunning == true)
+			{
+				cout << "Process " << processName << " (" << processID << ") is still running" << endl;
+				return true;
+			}
+
+			if (processDied == true)
+			{
+				cerr << "Previous instance " << processID << " died prematurely" << endl;
+			}
+		}
+	}
+
+	// Now save our PID
+	pidFile.open(pidFileName.c_str(), std::ios::out);
+	if (pidFile.is_open() == true)
+	{
+		pidFile << getpid() << endl;
+		pidFile.close();
+	}
+
+	return false;
+}
+

Added: trunk/UI/GTK2/src/UniqueApplication.h
===================================================================
--- trunk/UI/GTK2/src/UniqueApplication.h	2008-08-03 13:02:29 UTC (rev 1317)
+++ trunk/UI/GTK2/src/UniqueApplication.h	2008-08-03 15:22:35 UTC (rev 1318)
@@ -0,0 +1,49 @@
+/*
+ *  Copyright 2008 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _UNIQUEAPPLICATION_HH
+#define _UNIQUEAPPLICATION_HH
+
+#include <string>
+
+#ifdef HAVE_UNIQUE
+#include <unique/unique.h>
+#endif
+
+class UniqueApplication
+{
+	public:
+		UniqueApplication(const std::string &name);
+		~UniqueApplication();
+
+		bool isRunning(void);
+
+		bool isRunning(const std::string &pidFileName,
+			const std::string &processName);
+
+	private:
+#ifdef HAVE_UNIQUE
+		UniqueApp *m_pApp;
+#endif
+
+		UniqueApplication(const UniqueApplication &other);
+		UniqueApplication &operator=(const UniqueApplication &other);
+
+};
+
+#endif // _UNIQUEAPPLICATION_HH

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2008-08-03 13:02:29 UTC (rev 1317)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2008-08-03 15:22:35 UTC (rev 1318)
@@ -50,6 +50,7 @@
 #include "DaemonState.h"
 #include "PinotSettings.h"
 #include "ServerThreads.h"
+#include "UniqueApplication.h"
 
 using namespace std;
 
@@ -388,91 +389,40 @@
 		}
 	}
 
-	// This will create the necessary directories on the first run
-	PinotSettings &settings = PinotSettings::getInstance();
-	// This is the daemon so disable client-side code 
-	settings.enableClientMode(false);
-
+	// Make sure only one instance runs
+	UniqueApplication uniqueApp("de.berlios.PinotDBusDaemon");
 	string confDirectory = PinotSettings::getConfigurationDirectory();
+	g_pidFileName = confDirectory + "/pinot-dbus-daemon.pid";
 	if (chdir(confDirectory.c_str()) == 0)
 	{
-		fstream pidFile;
-		string fileName(confDirectory);
+		if (uniqueApp.isRunning(g_pidFileName, "pinot-dbus-daemon") == true)
+		{
+			return EXIT_SUCCESS;
+		}
 
 		// Redirect cout and cerr to a file
+		string fileName(confDirectory);
 		fileName += "/pinot-dbus-daemon.log";
 		g_outputFile.open(fileName.c_str());
 		g_coutBuf = cout.rdbuf();
 		g_cerrBuf = cerr.rdbuf();
 		cout.rdbuf(g_outputFile.rdbuf());
 		cerr.rdbuf(g_outputFile.rdbuf());
-
-		// Open the PID file
-		g_pidFileName = confDirectory + "/pinot-dbus-daemon.pid";
-		pidFile.open(g_pidFileName.c_str(), std::ios::in);
-		if (pidFile.is_open() == true)
+	}
+	else
+	{
+		// We can't rely on the PID file
+		if (uniqueApp.isRunning() == true)
 		{
-			pid_t daemonPID = 0;
-			bool checkProcess = true, daemonDied = false;
-
-			pidFile >> daemonPID;
-			pidFile.close();
-
-			// Is another daemon running ?
-			if (daemonPID > 0)
-			{
-				fstream cmdLineFile;
-				stringstream cmdLineFileName;
-
-				// FIXME: check for existence of /proc
-				cmdLineFileName << "/proc/" << daemonPID << "/cmdline";
-				cmdLineFile.open(cmdLineFileName.str().c_str(), std::ios::in);
-				if (cmdLineFile.is_open() == true)
-				{
-					string cmdLine;
-
-					cmdLineFile >> cmdLine;
-					cmdLineFile.close();
-
-					if (cmdLine.find("pinot-dbus-daemon") == string::npos)
-					{
-						// It's another process
-						checkProcess = false;
-						daemonDied = true;
-					}
-				}
-
-				if (checkProcess == true)
-				{
-					if (kill(daemonPID, 0) == 0)
-					{
-						// It's still running
-						cout << "Daemon instance " << daemonPID << " is still running" << endl;
-						return EXIT_SUCCESS;
-					}
-					else if (errno == ESRCH)
-					{
-						// This PID doesn't exist
-						daemonDied = true;
-					}
-				}
-
-				if (daemonDied == true)
-				{
-					cerr << "Previous daemon instance " << daemonPID << " died prematurely" << endl;
-				}
-			}
+			return EXIT_SUCCESS;
 		}
-
-		// Now save our PID
-		pidFile.open(g_pidFileName.c_str(), std::ios::out);
-		if (pidFile.is_open() == true)
-		{
-			pidFile << getpid() << endl;
-			pidFile.close();
-		}
 	}
 
+	// This will create the necessary directories on the first run
+	PinotSettings &settings = PinotSettings::getInstance();
+	// This is the daemon so disable client-side code 
+	settings.enableClientMode(false);
+
 	// Initialize utility classes
 	if (MIMEScanner::initialize(PinotSettings::getHomeDirectory() + "/.local",
 		string(SHARED_MIME_INFO_PREFIX)) == false)



From fabricecolin at mail.berlios.de  Sun Aug  3 17:23:40 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 3 Aug 2008 17:23:40 +0200
Subject: [Pinot-svn] r1319 - trunk/Utils
Message-ID: <200808031523.m73FNeRx024302@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-03 17:23:35 +0200 (Sun, 03 Aug 2008)
New Revision: 1319

Added:
   trunk/Utils/Visibility.h
Log:
Some macros to set symbol visibility.


Added: trunk/Utils/Visibility.h
===================================================================
--- trunk/Utils/Visibility.h	2008-08-03 15:22:35 UTC (rev 1318)
+++ trunk/Utils/Visibility.h	2008-08-03 15:23:35 UTC (rev 1319)
@@ -0,0 +1,40 @@
+/*
+ *  Copyright 2008 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _VISIBILITY_H
+#define _VISIBILITY_H
+
+#ifndef PINOT_EXPORT
+// The following comes from http://gcc.gnu.org/wiki/Visibility
+// with some modifications
+#ifdef _MSC_VER
+  #ifdef BUILDING_DLL
+    #define PINOT_EXPORT __declspec(dllexport)
+  #else
+    #define PINOT_EXPORT __declspec(dllimport)
+  #endif
+#else
+  #if defined __GNUC__ && (__GNUC__ >= 4)
+    #define PINOT_EXPORT __attribute__ ((visibility("default")))
+  #else
+    #define PINOT_EXPORT
+  #endif
+#endif
+#endif
+
+#endif // _VISIBILITY_H



From fabricecolin at mail.berlios.de  Mon Aug  4 16:16:34 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 4 Aug 2008 16:16:34 +0200
Subject: [Pinot-svn] r1320 - in trunk: . Collect IndexSearch
	IndexSearch/Xapian IndexSearch/XesamGLib Monitor SQL Tokenize
	UI/GTK2/src Utils
Message-ID: <200808041416.m74EGYc4001529@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-04 16:15:56 +0200 (Mon, 04 Aug 2008)
New Revision: 1320

Modified:
   trunk/Collect/Makefile.am
   trunk/IndexSearch/FilterWrapper.h
   trunk/IndexSearch/IndexInterface.h
   trunk/IndexSearch/Makefile.am
   trunk/IndexSearch/ModuleFactory.cpp
   trunk/IndexSearch/QueryProperties.h
   trunk/IndexSearch/SearchEngineInterface.h
   trunk/IndexSearch/WebEngine.h
   trunk/IndexSearch/Xapian/Makefile.am
   trunk/IndexSearch/Xapian/ModuleExports.cpp
   trunk/IndexSearch/XesamGLib/Makefile.am
   trunk/IndexSearch/XesamGLib/ModuleExports.cpp
   trunk/Monitor/Makefile.am
   trunk/SQL/Makefile.am
   trunk/Tokenize/FilterUtils.h
   trunk/Tokenize/Makefile.am
   trunk/Tokenize/TextConverter.h
   trunk/Tokenize/Tokenizer.h
   trunk/UI/GTK2/src/Makefile.am
   trunk/Utils/CommandLine.h
   trunk/Utils/Document.h
   trunk/Utils/DocumentInfo.h
   trunk/Utils/Languages.h
   trunk/Utils/MIMEScanner.h
   trunk/Utils/Makefile.am
   trunk/Utils/StringManip.h
   trunk/Utils/TimeConverter.h
   trunk/Utils/Timer.h
   trunk/Utils/Url.h
   trunk/configure.in
Log:
If gcc 4.x is available, set symbol visibility to hidden by default. Only export
stuff we know is required by the backends, and backend's entry points.
Don't build libSearchSOAP, and remove references to the Google API engine, this
will go into a separate backend.
-fPIC is set in CXXFLAGS by configure.in instead of in each Makefile.


Modified: trunk/Collect/Makefile.am
===================================================================
--- trunk/Collect/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Collect/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -18,7 +18,7 @@
 	MboxCollector.cpp
 
 libCollect_la_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \

Modified: trunk/IndexSearch/FilterWrapper.h
===================================================================
--- trunk/IndexSearch/FilterWrapper.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/FilterWrapper.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007 Fabrice Colin
+ *  Copyright 2007-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -23,11 +23,12 @@
 #include <set>
 
 #include "Document.h"
+#include "Visibility.h"
 #include "Filter.h"
 #include "IndexInterface.h"
 
 /// A wrapper around Dijon filters.
-class FilterWrapper
+class PINOT_EXPORT FilterWrapper
 {
 	public:
 		/// Builds a FilterWrapper object.

Modified: trunk/IndexSearch/IndexInterface.h
===================================================================
--- trunk/IndexSearch/IndexInterface.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/IndexInterface.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -24,9 +24,10 @@
 #include <map>
 
 #include "Document.h"
+#include "Visibility.h"
 
 /// Interface implemented by indexes.
-class IndexInterface
+class PINOT_EXPORT IndexInterface
 {
 	public:
 		IndexInterface(const IndexInterface &other) {};

Modified: trunk/IndexSearch/Makefile.am
===================================================================
--- trunk/IndexSearch/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -13,17 +13,10 @@
 	SearchEngineInterface.h \
 	SearchPluginProperties.h \
 	SherlockParser.h \
-	SOAPEnv.h \
-	SOAPEnvH.h \
-	SOAPEnvStub.h \
 	WebEngine.h \
 	XesamLog.h
 
-if HAVE_SOAP
-noinst_LTLIBRARIES = libIndex.la libIndexSearch.la libSearchSOAP.la
-else
 noinst_LTLIBRARIES = libIndex.la libIndexSearch.la
-endif
 
 libIndex_la_SOURCES = \
 	DBusIndex.cpp
@@ -44,10 +37,6 @@
 libIndexSearch_la_SOURCES += SherlockParser.cpp
 endif
 
-if HAVE_SOAP
-libSearchSOAP_la_SOURCES = SOAPEnvC.cpp SOAPEnvNS.cpp
-endif
-
 bin_PROGRAMS = pinot-index pinot-label pinot-search
 
 pinot_index_LDFLAGS = \
@@ -59,7 +48,7 @@
 	-L$(top_builddir)/Collect \
 	-L$(top_builddir)/IndexSearch/Google \
 	-lIndexSearch -lCollect -lTokenize -lUtils -lBasicUtils \
-	@GLIBMM_LIBS@ @DBUS_LIBS@ @SOAP_LIBS@ \
+	@GLIBMM_LIBS@ @DBUS_LIBS@ \
 	@XML_LIBS@ @HTTP_LIBS@ @MISC_LIBS@
 
 pinot_index_SOURCES = pinot-index.cpp
@@ -88,25 +77,16 @@
 	-L$(top_builddir)/IndexSearch/Google \
 	-L$(top_builddir)/IndexSearch/xesam \
 	-lIndexSearch -lCollect -lTokenize -lUtils -lBasicUtils \
-	@GLIBMM_LIBS@ @DBUS_LIBS@ @SOAP_LIBS@ \
+	@GLIBMM_LIBS@ @DBUS_LIBS@ \
 	@XML_LIBS@ @HTTP_LIBS@ @MISC_LIBS@
 
 pinot_search_SOURCES = \
 	pinot-search.cpp
 
-if HAVE_SOAP
-pinot_search_DEPENDENCIES = libIndexSearch.la libSearchSOAP.la
-else
 pinot_search_DEPENDENCIES = libIndexSearch.la
-endif
 
-if HAVE_SOAP
-SOAPEnvC.cpp : SOAPEnv.h
-	soapcpp2 -pSOAPEnv SOAPEnv.h
-endif
-
 AM_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \
@@ -114,8 +94,8 @@
 	-I$(top_srcdir)/IndexSearch/cjkv \
 	-I$(top_srcdir)/IndexSearch/Google \
 	-I$(top_srcdir)/IndexSearch/xesam \
-	@HTTP_CFLAGS@ @XML_CFLAGS@ @SOAP_CFLAGS@ \
-	@DBUS_CFLAGS@ @INDEX_CFLAGS@ @GLIBMM_CFLAGS@
+	@HTTP_CFLAGS@ @XML_CFLAGS@ @DBUS_CFLAGS@ \
+	@INDEX_CFLAGS@ @GLIBMM_CFLAGS@
 
 if HAVE_BOOST_SPIRIT
 AM_CXXFLAGS += -DHAVE_BOOST_SPIRIT

Modified: trunk/IndexSearch/ModuleFactory.cpp
===================================================================
--- trunk/IndexSearch/ModuleFactory.cpp	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/ModuleFactory.cpp	2008-08-04 14:15:56 UTC (rev 1320)
@@ -23,9 +23,6 @@
 #include <iostream>
 
 #include "DBusIndex.h"
-#ifdef HAVE_GOOGLEAPI
-#include "GoogleAPIEngine.h"
-#endif
 #include "PluginWebEngine.h"
 #include "ModuleFactory.h"
 #if 0
@@ -362,12 +359,6 @@
 	{
 		pEngine = new PluginWebEngine(option);
 	}
-#ifdef HAVE_GOOGLEAPI
-	else if (type == "googleapi")
-	{
-		pEngine = new GoogleAPIEngine(option);
-	}
-#endif
 
 	if (pEngine != NULL)
 	{
@@ -411,9 +402,6 @@
 	engines["sherlock"] = false;
 #endif
 	engines["opensearch"] = false;
-#ifdef HAVE_GOOGLEAPI
-	engines["googleapi"] = false;
-#endif
 	// Library-handled engines
 	for (map<string, LoadableModule>::iterator typeIter = m_types.begin();
 		typeIter != m_types.end(); ++typeIter)
@@ -437,9 +425,6 @@
 	}
 
 	if (
-#ifdef HAVE_GOOGLEAPI
-		(type == "googleapi") ||
-#endif
 #ifdef HAVE_BOOST_SPIRIT
 		(type == "sherlock") ||
 #endif

Modified: trunk/IndexSearch/QueryProperties.h
===================================================================
--- trunk/IndexSearch/QueryProperties.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/QueryProperties.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -22,10 +22,12 @@
 #include <string>
 #include <set>
 
+#include "Visibility.h"
+
 using namespace std;
 
 /// This represents a query.
-class QueryProperties
+class PINOT_EXPORT QueryProperties
 {
 	public:
 		typedef enum { XAPIAN_QP = 0, XESAM_QL, XESAM_UL } QueryType;

Modified: trunk/IndexSearch/SearchEngineInterface.h
===================================================================
--- trunk/IndexSearch/SearchEngineInterface.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/SearchEngineInterface.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -24,13 +24,14 @@
 #include <set>
 #include <vector>
 
+#include "DocumentInfo.h"
+#include "Visibility.h"
 #include "QueryProperties.h"
-#include "DocumentInfo.h"
 
 using namespace std;
 
 /// Interface implemented by search engines.
-class SearchEngineInterface
+class PINOT_EXPORT SearchEngineInterface
 {
 	public:
 		typedef enum { DEFAULT_OP_AND = 0, DEFAULT_OP_OR } DefaultOperator;

Modified: trunk/IndexSearch/WebEngine.h
===================================================================
--- trunk/IndexSearch/WebEngine.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/WebEngine.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -24,12 +24,13 @@
 #include <map>
 
 #include "Document.h"
+#include "Visibility.h"
 #include "DownloaderInterface.h"
 #include "QueryProperties.h"
 #include "SearchEngineInterface.h"
 
 /// Base class for all Web search engines.
-class WebEngine : public SearchEngineInterface
+class PINOT_EXPORT WebEngine : public SearchEngineInterface
 {
 	public:
 		WebEngine();

Modified: trunk/IndexSearch/Xapian/Makefile.am
===================================================================
--- trunk/IndexSearch/Xapian/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/Xapian/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -34,12 +34,10 @@
 libxapianbackend_la_LDFLAGS = -module -shared -nostartfiles
 
 libxapianbackend_la_LIBADD = \
-	@INDEX_LIBS@ @MISC_LIBS@ \
-	-L$(top_builddir)/Utils \
-	-lBasicUtils 
+	@INDEX_LIBS@ @MISC_LIBS@
 
 AM_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \

Modified: trunk/IndexSearch/Xapian/ModuleExports.cpp
===================================================================
--- trunk/IndexSearch/Xapian/ModuleExports.cpp	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/Xapian/ModuleExports.cpp	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007 Fabrice Colin
+ *  Copyright 2007-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -20,6 +20,7 @@
 #include <map>
 
 #include "config.h"
+#include "Visibility.h"
 #include "XapianDatabaseFactory.h"
 #include "XapianEngine.h"
 #include "XapianIndex.h"
@@ -28,14 +29,14 @@
 
 extern "C"
 {
-	string getModuleType(void);
-	bool openOrCreateIndex(const string &databaseName, bool &obsoleteFormat,
+	PINOT_EXPORT string getModuleType(void);
+	PINOT_EXPORT bool openOrCreateIndex(const string &databaseName, bool &obsoleteFormat,
 		bool readOnly, bool overwrite);
-	bool mergeIndexes(const string &mergedDatabaseName,
+	PINOT_EXPORT bool mergeIndexes(const string &mergedDatabaseName,
 		const string &firstDatabaseName, const string &secondDatabaseName);
-	IndexInterface *getIndex(const string &databaseName);
-	SearchEngineInterface *getSearchEngine(const string &databaseName);
-	void closeAll(void);
+	PINOT_EXPORT IndexInterface *getIndex(const string &databaseName);
+	PINOT_EXPORT SearchEngineInterface *getSearchEngine(const string &databaseName);
+	PINOT_EXPORT void closeAll(void);
 }
 
 string getModuleType(void)

Modified: trunk/IndexSearch/XesamGLib/Makefile.am
===================================================================
--- trunk/IndexSearch/XesamGLib/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/XesamGLib/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -13,12 +13,10 @@
 libxesamglibbackend_la_LDFLAGS = -module -shared -nostartfiles
 
 libxesamglibbackend_la_LIBADD = \
-	@XESAMGLIB_LIBS@ @MISC_LIBS@ \
-	-L$(top_builddir)/Utils \
-	-lBasicUtils 
+	@XESAMGLIB_LIBS@ @MISC_LIBS@
 
 AM_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \

Modified: trunk/IndexSearch/XesamGLib/ModuleExports.cpp
===================================================================
--- trunk/IndexSearch/XesamGLib/ModuleExports.cpp	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/IndexSearch/XesamGLib/ModuleExports.cpp	2008-08-04 14:15:56 UTC (rev 1320)
@@ -19,16 +19,16 @@
 #include <string>
 
 #include "config.h"
-#include "IndexInterface.h"
+#include "Visibility.h"
 #include "XesamEngine.h"
 
 using std::string;
 
 extern "C"
 {
-	string getModuleType(void);
-	SearchEngineInterface *getSearchEngine(const string &dbusObject);
-	void closeAll(void);
+	PINOT_EXPORT string getModuleType(void);
+	PINOT_EXPORT SearchEngineInterface *getSearchEngine(const string &dbusObject);
+	PINOT_EXPORT void closeAll(void);
 }
 
 string getModuleType(void)

Modified: trunk/Monitor/Makefile.am
===================================================================
--- trunk/Monitor/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Monitor/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -20,7 +20,7 @@
 endif
 
 libMonitor_la_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \

Modified: trunk/SQL/Makefile.am
===================================================================
--- trunk/SQL/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/SQL/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -18,7 +18,7 @@
 	SQLiteBase.cpp \
 	ViewHistory.cpp
 
-libSQL_la_CXXFLAGS = \
-	-fPIC \
+AM_CXXFLAGS = \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils
 

Modified: trunk/Tokenize/FilterUtils.h
===================================================================
--- trunk/Tokenize/FilterUtils.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Tokenize/FilterUtils.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007 Fabrice Colin
+ *  Copyright 2007-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -23,10 +23,11 @@
 #include <map>
 
 #include "Document.h"
+#include "Visibility.h"
 #include "filters/Filter.h"
 
 /// Utility functions for dealing with Dijon filters.
-class FilterUtils
+class PINOT_EXPORT FilterUtils
 {
 	public:
 		virtual ~FilterUtils();

Modified: trunk/Tokenize/Makefile.am
===================================================================
--- trunk/Tokenize/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Tokenize/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -61,7 +61,7 @@
 	$(top_srcdir)/Tokenize/filters/XmlFilter.cc
 
 AM_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils -Ifilters \
 	@GMIME_CFLAGS@ @XML_CFLAGS@ @EXIF_CFLAGS@ @TAGLIB_CFLAGS@ \
 	-D_DYNAMIC_DIJON_FILTERS \

Modified: trunk/Tokenize/TextConverter.h
===================================================================
--- trunk/Tokenize/TextConverter.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Tokenize/TextConverter.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -21,7 +21,9 @@
 
 #include <string>
 
-class TextConverter
+#include "Visibility.h"
+
+class PINOT_EXPORT TextConverter
 {
 	public:
 		TextConverter(unsigned int maxErrors = 10);

Modified: trunk/Tokenize/Tokenizer.h
===================================================================
--- trunk/Tokenize/Tokenizer.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Tokenize/Tokenizer.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -22,11 +22,12 @@
 #include <string>
 
 #include "Document.h"
+#include "Visibility.h"
 
 /** Basic text-only tokenizer.
   * Its role it to split documents into individual tokens or terms.
   */
-class Tokenizer
+class PINOT_EXPORT Tokenizer
 {
 	public:
 		Tokenizer(const Document *pDocument,

Modified: trunk/UI/GTK2/src/Makefile.am
===================================================================
--- trunk/UI/GTK2/src/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/UI/GTK2/src/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -27,6 +27,7 @@
 	PinotUtils.h \
 	ResultsTree.h \
 	ServerThreads.h \
+	UniqueApplication.h \
 	WorkerThreads.h
 
 pinot_SOURCES = \
@@ -62,12 +63,13 @@
 	OnDiskHandler.cpp \
 	PinotSettings.cpp \
 	ServerThreads.cpp \
+	UniqueApplication.cpp \
 	WorkerThreads.cpp
 
 bin_PROGRAMS = pinot pinot-dbus-daemon
 
 AM_CXXFLAGS = \
-	-fPIC \
+	@VISIB_CFLAGS@ \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \
@@ -75,9 +77,8 @@
 	-I$(top_srcdir)/Monitor \
 	-I$(top_srcdir)/Collect \
 	-I$(top_srcdir)/IndexSearch \
-	-I$(top_srcdir)/IndexSearch/Google \
-	@SQL_CFLAGS@ @HTTP_CFLAGS@ @XML_CFLAGS@ @SOAP_CFLAGS@ \
-	@DBUS_CFLAGS@ @INDEX_CFLAGS@ @GTHREAD_CFLAGS@ @GTKMM_CFLAGS@
+	@SQL_CFLAGS@ @HTTP_CFLAGS@ @XML_CFLAGS@ @DBUS_CFLAGS@ \
+	@INDEX_CFLAGS@ @GTHREAD_CFLAGS@ @GTKMM_CFLAGS@
 
 pinot_LDFLAGS = \
 	-rdynamic
@@ -89,10 +90,9 @@
 	-L$(top_builddir)/Monitor \
 	-L$(top_builddir)/Collect \
 	-L$(top_builddir)/IndexSearch \
-	-L$(top_builddir)/IndexSearch/Google \
 	-lIndexSearch -lMonitor -lCollect -lSQL \
 	-lTokenize -lUtils -lBasicUtils @LIBS@ \
-	@GTKMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @SOAP_LIBS@ @XML_LIBS@ \
+	@GTKMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @XML_LIBS@ \
 	@HTTP_LIBS@ @SQL_LIBS@ @MISC_LIBS@
 
 pinot_dbus_daemon_LDFLAGS = \
@@ -105,9 +105,8 @@
 	-L$(top_builddir)/Monitor \
 	-L$(top_builddir)/Collect \
 	-L$(top_builddir)/IndexSearch \
-	-L$(top_builddir)/IndexSearch/Google \
 	-lIndexSearch -lMonitor -lCollect -lSQL \
 	-lTokenize -lUtils -lBasicUtils @LIBS@ \
-	@GLIBMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @SOAP_LIBS@ @XML_LIBS@ \
+	@GLIBMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @XML_LIBS@ \
 	@HTTP_LIBS@ @SQL_LIBS@ @MISC_LIBS@
 

Modified: trunk/Utils/CommandLine.h
===================================================================
--- trunk/Utils/CommandLine.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/CommandLine.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -23,9 +23,10 @@
 #include <vector>
 
 #include "MIMEScanner.h"
+#include "Visibility.h"
 
 /// Utilities for running commands.
-class CommandLine
+class PINOT_EXPORT CommandLine
 {
 	public:
 		~CommandLine();

Modified: trunk/Utils/Document.h
===================================================================
--- trunk/Utils/Document.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/Document.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -22,9 +22,10 @@
 #include <string>
 
 #include "DocumentInfo.h"
+#include "Visibility.h"
 
 /// Document wraps a document's properties and data.
-class Document : public DocumentInfo
+class PINOT_EXPORT Document : public DocumentInfo
 {
 	public:
 		Document();

Modified: trunk/Utils/DocumentInfo.h
===================================================================
--- trunk/Utils/DocumentInfo.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/DocumentInfo.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -24,8 +24,10 @@
 #include <map>
 #include <set>
 
+#include "Visibility.h"
+
 /// This represents all the properties of a document.
-class DocumentInfo
+class PINOT_EXPORT DocumentInfo
 {
 	public:
 		DocumentInfo();

Modified: trunk/Utils/Languages.h
===================================================================
--- trunk/Utils/Languages.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/Languages.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -22,8 +22,10 @@
 #include <string>
 #include <map>
 
+#include "Visibility.h"
+
 /// Utility class for manipulating languages.
-class Languages
+class PINOT_EXPORT Languages
 {
 	public:
 		virtual ~Languages();

Modified: trunk/Utils/MIMEScanner.h
===================================================================
--- trunk/Utils/MIMEScanner.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/MIMEScanner.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -27,12 +27,13 @@
 #include <vector>
 
 #include "Url.h"
+#include "Visibility.h"
 
 /** MIMEAction stores useful information extracted from desktop files.
   * The desktop files format is defined by
   * http://standards.freedesktop.org/desktop-entry-spec/latest/
   */
-class MIMEAction
+class PINOT_EXPORT MIMEAction
 {
 	public:
 		MIMEAction();
@@ -89,7 +90,7 @@
 /**
   * Utility class to get a file's MIME type and the default application associated with it.
   */
-class MIMEScanner
+class PINOT_EXPORT MIMEScanner
 {
 	public:
 		~MIMEScanner();

Modified: trunk/Utils/Makefile.am
===================================================================
--- trunk/Utils/Makefile.am	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
@@ -11,6 +11,7 @@
 	TimeConverter.h \
 	Timer.h \
 	Url.h \
+	Visibility.h \
 	$(top_srcdir)/Utils/xdgmime/xdgmimealias.h \
 	$(top_srcdir)/Utils/xdgmime/xdgmimecache.h \
 	$(top_srcdir)/Utils/xdgmime/xdgmimeglob.h \
@@ -42,5 +43,7 @@
 	$(top_srcdir)/Utils/xdgmime/xdgmimeparent.c
 
 AM_CFLAGS = -fPIC -DXDG_PREFIX=pinot_xdg
-AM_CXXFLAGS = -fPIC @HTTP_CFLAGS@ @INDEX_CFLAGS@ @GLIBMM_CFLAGS@ -DXDG_PREFIX=pinot_xdg
+AM_CXXFLAGS = \
+	@VISIB_CFLAGS@ \
+	@HTTP_CFLAGS@ @INDEX_CFLAGS@ @GLIBMM_CFLAGS@ -DXDG_PREFIX=pinot_xdg
 

Modified: trunk/Utils/StringManip.h
===================================================================
--- trunk/Utils/StringManip.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/StringManip.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -21,8 +21,10 @@
 
 #include <string>
 
+#include "Visibility.h"
+
 /// Utility class for string manipulation.
-class StringManip
+class PINOT_EXPORT StringManip
 {
 	public:
 		/// Converts to lowercase.

Modified: trunk/Utils/TimeConverter.h
===================================================================
--- trunk/Utils/TimeConverter.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/TimeConverter.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -21,8 +21,10 @@
 
 #include <string>
 
+#include "Visibility.h"
+
 /// This class handles time conversions.
-class TimeConverter
+class PINOT_EXPORT TimeConverter
 {
 	public:
 		/// Converts into an RFC 822 timestamp.

Modified: trunk/Utils/Timer.h
===================================================================
--- trunk/Utils/Timer.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/Timer.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -22,8 +22,10 @@
 #include <time.h>
 #include <sys/time.h>
 
+#include "Visibility.h"
+
 /// A timer with microseconds precision.
-class Timer
+class PINOT_EXPORT Timer
 {
 	public:
 		Timer();

Modified: trunk/Utils/Url.h
===================================================================
--- trunk/Utils/Url.h	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/Utils/Url.h	2008-08-04 14:15:56 UTC (rev 1320)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -21,8 +21,10 @@
 
 #include <string>
 
+#include "Visibility.h"
+
 /// This dissects and manipulates URLs returned by search engines.
-class Url
+class PINOT_EXPORT Url
 {
 	public:
 		Url(const std::string &url);

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2008-08-03 15:23:35 UTC (rev 1319)
+++ trunk/configure.in	2008-08-04 14:15:56 UTC (rev 1320)
@@ -71,6 +71,7 @@
 AC_PATH_PROG(DESKTOP_INSTALL, desktop-file-install, no)
 
 dnl DEBUG mode
+CXXFLAGS="-fPIC"
 AC_MSG_CHECKING(whether to enable DEBUG mode)
 AC_ARG_ENABLE(debug,
    [AS_HELP_STRING([--enable-debug], [enable debug [default=no]])],
@@ -85,6 +86,21 @@
 fi
 AC_MSG_RESULT($enable_debug)
 
+dnl Set compiler specific flags
+VISIB_CFLAGS=""
+if test "x$GCC" = "xyes"; then
+gxx_version=`$CXX --version 2>&1 | head -1 | $SED 's/^[[^ ]]* (GCC) //;s/ .*//'`
+case $gxx_version in
+4.*)
+VISIB_CFLAGS="-fvisibility=hidden"
+;;
+*)
+dnl Other versions
+;;
+esac
+fi
+AC_SUBST(VISIB_CFLAGS)
+
 dnl SOAP API support
 AC_MSG_CHECKING(whether to enable SOAP support)
 AC_ARG_ENABLE(soap,
@@ -101,7 +117,6 @@
    PKG_CHECK_MODULES(SOAP, gsoap)
    SOAP_CFLAGS="-DHAVE_GOOGLEAPI $SOAP_CFLAGS"
    AM_CONDITIONAL(HAVE_SOAP, true)
-   SOAP_LIBS="-lSearchGoogle $SOAP_LIBS -lSearchSOAP"
 fi
 AC_SUBST(SOAP_CFLAGS)
 AC_SUBST(SOAP_LIBS)



From fabricecolin at mail.berlios.de  Mon Aug  4 16:22:22 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 4 Aug 2008 16:22:22 +0200
Subject: [Pinot-svn] r1321 - trunk/IndexSearch/Google
Message-ID: <200808041422.m74EMM8x002146@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-04 16:22:08 +0200 (Mon, 04 Aug 2008)
New Revision: 1321

Modified:
   trunk/IndexSearch/Google/GAPIC.cpp
   trunk/IndexSearch/Google/GAPIClient.cpp
   trunk/IndexSearch/Google/GAPIClientLib.cpp
   trunk/IndexSearch/Google/GAPIGoogleSearchBindingProxy.h
   trunk/IndexSearch/Google/GAPIH.h
   trunk/IndexSearch/Google/GAPIStub.h
   trunk/IndexSearch/Google/GoogleAPIEngine.cpp
   trunk/IndexSearch/Google/GoogleSearch.h
   trunk/IndexSearch/Google/Makefile.am
Log:
Regenerated code with gsoap 2.7.10.
Compile GAPIC and GAPIClient, and ignore GAPIClientLib as it defines a macro
that makes all the soap_ functions static. All this is built into a dynamic
backend.


Modified: trunk/IndexSearch/Google/GAPIC.cpp
===================================================================
--- trunk/IndexSearch/Google/GAPIC.cpp	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GAPIC.cpp	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,13 +1,13 @@
 /* GAPIC.cpp
-   Generated by gSOAP 2.7.9e from GoogleSearch.h
-   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.10 from GoogleSearch.h
+   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
 
 #include "GAPIH.h"
 
-SOAP_SOURCE_STAMP("@(#) GAPIC.cpp ver 2.7.9e 2007-07-29 10:34:02 GMT")
+SOAP_SOURCE_STAMP("@(#) GAPIC.cpp ver 2.7.10 2008-08-04 14:27:08 GMT")
 
 
 #ifndef WITH_NOGLOBAL
@@ -22,7 +22,8 @@
 {
 	if (soap->header)
 	{	soap->part = SOAP_IN_HEADER;
-		soap_out_SOAP_ENV__Header(soap, "SOAP-ENV:Header", 0, soap->header, NULL);
+		if (soap_out_SOAP_ENV__Header(soap, "SOAP-ENV:Header", 0, soap->header, NULL))
+			return soap->error;
 		soap->part = SOAP_END_HEADER;
 	}
 	return SOAP_OK;
@@ -36,6 +37,14 @@
 	return soap->header == NULL;
 }
 
+SOAP_FMAC3 void SOAP_FMAC4 soap_header(struct soap *soap)
+{
+	if (!soap->header)
+	{	soap->header = soap_new_SOAP_ENV__Header(soap, -1);
+		soap_default_SOAP_ENV__Header(soap, soap->header);
+	}
+}
+
 SOAP_FMAC3 void SOAP_FMAC4 soap_fault(struct soap *soap)
 {
 	if (!soap->fault)
@@ -209,30 +218,6 @@
 	{	const char *t = soap->type;
 		if (!*t)
 			t = soap->tag;
-		if (!soap_match_tag(soap, t, "xsd:byte"))
-		{	*type = SOAP_TYPE_byte;
-			return soap_in_byte(soap, NULL, NULL, NULL);
-		}
-		if (!soap_match_tag(soap, t, "xsd:int"))
-		{	*type = SOAP_TYPE_int;
-			return soap_in_int(soap, NULL, NULL, NULL);
-		}
-		if (!soap_match_tag(soap, t, "xsd:double"))
-		{	*type = SOAP_TYPE_double;
-			return soap_in_double(soap, NULL, NULL, NULL);
-		}
-		if (!soap_match_tag(soap, t, "xsd:unsignedByte"))
-		{	*type = SOAP_TYPE_unsignedByte;
-			return soap_in_unsignedByte(soap, NULL, NULL, NULL);
-		}
-		if (!soap_match_tag(soap, t, "xsd:unsignedInt"))
-		{	*type = SOAP_TYPE_unsignedInt;
-			return soap_in_unsignedInt(soap, NULL, NULL, NULL);
-		}
-		if (!soap_match_tag(soap, t, "xsd:boolean"))
-		{	*type = SOAP_TYPE_bool;
-			return soap_in_bool(soap, NULL, NULL, NULL);
-		}
 		if (!soap_match_tag(soap, t, "xsd:string"))
 		{	*type = SOAP_TYPE_std__string;
 			return soap_in_std__string(soap, NULL, NULL, NULL);
@@ -261,6 +246,30 @@
 		{	*type = SOAP_TYPE_xsd__base64Binary;
 			return soap_in_xsd__base64Binary(soap, NULL, NULL, NULL);
 		}
+		if (!soap_match_tag(soap, t, "xsd:byte"))
+		{	*type = SOAP_TYPE_byte;
+			return soap_in_byte(soap, NULL, NULL, NULL);
+		}
+		if (!soap_match_tag(soap, t, "xsd:int"))
+		{	*type = SOAP_TYPE_int;
+			return soap_in_int(soap, NULL, NULL, NULL);
+		}
+		if (!soap_match_tag(soap, t, "xsd:double"))
+		{	*type = SOAP_TYPE_double;
+			return soap_in_double(soap, NULL, NULL, NULL);
+		}
+		if (!soap_match_tag(soap, t, "xsd:unsignedByte"))
+		{	*type = SOAP_TYPE_unsignedByte;
+			return soap_in_unsignedByte(soap, NULL, NULL, NULL);
+		}
+		if (!soap_match_tag(soap, t, "xsd:unsignedInt"))
+		{	*type = SOAP_TYPE_unsignedInt;
+			return soap_in_unsignedInt(soap, NULL, NULL, NULL);
+		}
+		if (!soap_match_tag(soap, t, "xsd:boolean"))
+		{	*type = SOAP_TYPE_bool;
+			return soap_in_bool(soap, NULL, NULL, NULL);
+		}
 		if (!soap_match_tag(soap, t, "gapi1:doGoogleSearch"))
 		{	*type = SOAP_TYPE_gapi1__doGoogleSearch;
 			return soap_in_gapi1__doGoogleSearch(soap, NULL, NULL, NULL);
@@ -313,6 +322,7 @@
 {
 	if (!soap_peek_element(soap))
 	{	int t;
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Unexpected element '%s' in input (level=%u, %d)\n", soap->tag, soap->level, soap->body));
 		if (soap->mustUnderstand && !soap->other)
 			return soap->error = SOAP_MUSTUNDERSTAND;
 		if (((soap->mode & SOAP_XML_STRICT) && soap->part != SOAP_IN_HEADER) || !soap_match_tag(soap, soap->tag, "SOAP-ENV:"))
@@ -321,7 +331,6 @@
 		}
 		if (!*soap->id || !soap_getelement(soap, &t))
 		{	soap->peeked = 0;
-			DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Unknown element '%s' (level=%u, %d)\n", soap->tag, soap->level, soap->body));
 			if (soap->fignore)
 				soap->error = soap->fignore(soap, soap->tag);
 			else
@@ -418,9 +427,9 @@
 	case SOAP_TYPE_PointerTounsignedByte:
 		return soap_out_PointerTounsignedByte(soap, tag, id, (unsigned char *const*)ptr, "xsd:unsignedByte");
 	case SOAP_TYPE__QName:
-		return soap_out_string(soap, "xsd:QName", id, (char**)&ptr, NULL);
+		return soap_out_string(soap, "xsd:QName", id, (char*const*)&ptr, NULL);
 	case SOAP_TYPE_string:
-		return soap_out_string(soap, tag, id, (char**)&ptr, "xsd:string");
+		return soap_out_string(soap, tag, id, (char*const*)&ptr, "xsd:string");
 	}
 	return SOAP_OK;
 }
@@ -504,10 +513,10 @@
 		soap_serialize_PointerTounsignedByte(soap, (unsigned char *const*)ptr);
 		break;
 	case SOAP_TYPE__QName:
-		soap_serialize_string(soap, (char**)&ptr);
+		soap_serialize_string(soap, (char*const*)&ptr);
 		break;
 	case SOAP_TYPE_string:
-		soap_serialize_string(soap, (char**)&ptr);
+		soap_serialize_string(soap, (char*const*)&ptr);
 		break;
 	}
 }
@@ -728,7 +737,8 @@
 SOAP_FMAC3 char * SOAP_FMAC4 soap_get_byte(struct soap *soap, char *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_byte(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -762,7 +772,8 @@
 SOAP_FMAC3 int * SOAP_FMAC4 soap_get_int(struct soap *soap, int *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_int(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -796,7 +807,8 @@
 SOAP_FMAC3 double * SOAP_FMAC4 soap_get_double(struct soap *soap, double *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_double(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -830,7 +842,8 @@
 SOAP_FMAC3 unsigned char * SOAP_FMAC4 soap_get_unsignedByte(struct soap *soap, unsigned char *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_unsignedByte(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -864,7 +877,8 @@
 SOAP_FMAC3 unsigned int * SOAP_FMAC4 soap_get_unsignedInt(struct soap *soap, unsigned int *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_unsignedInt(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -901,15 +915,16 @@
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_bool(struct soap *soap, const char *tag, int id, const bool *a, const char *type)
-{	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_bool), type);
-	soap_send(soap, soap_bool2s(soap, *a));
+{	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_bool), type) || soap_send(soap, soap_bool2s(soap, *a)))
+		return soap->error;
 	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 bool * SOAP_FMAC4 soap_get_bool(struct soap *soap, bool *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_bool(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -981,13 +996,14 @@
 SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get_std__string(struct soap *soap, std::string *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_std__string(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
 SOAP_FMAC1 std::string * SOAP_FMAC2 soap_in_std__string(struct soap *soap, const char *tag, std::string *s, const char *type)
 {
-	if (soap_element_begin_in(soap, tag, 1, type))
+	if (soap_element_begin_in(soap, tag, 1, NULL))
 		return NULL;
 	if (!s)
 		s = soap_new_std__string(soap, -1);
@@ -1078,12 +1094,14 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__DirectoryCategory(struct soap *soap, const char *tag, int id, const gapi1__DirectoryCategory *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__DirectoryCategory), type);
-	soap_out_std__string(soap, "fullViewableName", -1, &(a->gapi1__DirectoryCategory::fullViewableName), "");
-	soap_out_std__string(soap, "specialEncoding", -1, &(a->gapi1__DirectoryCategory::specialEncoding), "");
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__DirectoryCategory), type))
+		return soap->error;
+	if (soap_out_std__string(soap, "fullViewableName", -1, &(a->gapi1__DirectoryCategory::fullViewableName), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "specialEncoding", -1, &(a->gapi1__DirectoryCategory::specialEncoding), ""))
+		return soap->error;
 	/* transient soap skipped */
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	return soap_element_end_out(soap, tag);
 }
 
 void *gapi1__DirectoryCategory::soap_get(struct soap *soap, const char *tag, const char *type)
@@ -1094,7 +1112,8 @@
 SOAP_FMAC3 gapi1__DirectoryCategory * SOAP_FMAC4 soap_get_gapi1__DirectoryCategory(struct soap *soap, gapi1__DirectoryCategory *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__DirectoryCategory(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -1230,7 +1249,8 @@
 	id = soap_element_id(soap, tag, id, a, (struct soap_array*)&a->__ptr, 1, type, SOAP_TYPE_gapi1DirectoryCategoryArray);
 	if (id < 0)
 		return soap->error;
-	soap_array_begin_out(soap, tag, id, t, NULL);
+	if (soap_array_begin_out(soap, tag, id, t, NULL))
+		return soap->error;
 	for (i = 0; i < n; i++)
 	{
 		soap->position = 1;
@@ -1238,8 +1258,7 @@
 		soap_out_PointerTogapi1__DirectoryCategory(soap, "item", -1, &a->__ptr[i], "");
 	}
 	soap->position = 0;
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	return soap_element_end_out(soap, tag);
 }
 
 void *gapi1DirectoryCategoryArray::soap_get(struct soap *soap, const char *tag, const char *type)
@@ -1250,7 +1269,8 @@
 SOAP_FMAC3 gapi1DirectoryCategoryArray * SOAP_FMAC4 soap_get_gapi1DirectoryCategoryArray(struct soap *soap, gapi1DirectoryCategoryArray *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1DirectoryCategoryArray(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -1400,7 +1420,8 @@
 	id = soap_element_id(soap, tag, id, a, (struct soap_array*)&a->__ptr, 1, type, SOAP_TYPE_gapi1ResultElementArray);
 	if (id < 0)
 		return soap->error;
-	soap_array_begin_out(soap, tag, id, t, NULL);
+	if (soap_array_begin_out(soap, tag, id, t, NULL))
+		return soap->error;
 	for (i = 0; i < n; i++)
 	{
 		soap->position = 1;
@@ -1408,8 +1429,7 @@
 		soap_out_PointerTogapi1__ResultElement(soap, "item", -1, &a->__ptr[i], "");
 	}
 	soap->position = 0;
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	return soap_element_end_out(soap, tag);
 }
 
 void *gapi1ResultElementArray::soap_get(struct soap *soap, const char *tag, const char *type)
@@ -1420,7 +1440,8 @@
 SOAP_FMAC3 gapi1ResultElementArray * SOAP_FMAC4 soap_get_gapi1ResultElementArray(struct soap *soap, gapi1ResultElementArray *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1ResultElementArray(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -1579,19 +1600,28 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__ResultElement(struct soap *soap, const char *tag, int id, const gapi1__ResultElement *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__ResultElement), type);
-	soap_out_std__string(soap, "summary", -1, &(a->gapi1__ResultElement::summary), "");
-	soap_out_std__string(soap, "URL", -1, &(a->gapi1__ResultElement::URL), "");
-	soap_out_std__string(soap, "snippet", -1, &(a->gapi1__ResultElement::snippet), "");
-	soap_out_std__string(soap, "title", -1, &(a->gapi1__ResultElement::title), "");
-	soap_out_std__string(soap, "cachedSize", -1, &(a->gapi1__ResultElement::cachedSize), "");
-	soap_out_bool(soap, "relatedInformationPresent", -1, &(a->gapi1__ResultElement::relatedInformationPresent), "");
-	soap_out_std__string(soap, "hostName", -1, &(a->gapi1__ResultElement::hostName), "");
-	soap_out_PointerTogapi1__DirectoryCategory(soap, "directoryCategory", -1, &(a->gapi1__ResultElement::directoryCategory), "");
-	soap_out_std__string(soap, "directoryTitle", -1, &(a->gapi1__ResultElement::directoryTitle), "");
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__ResultElement), type))
+		return soap->error;
+	if (soap_out_std__string(soap, "summary", -1, &(a->gapi1__ResultElement::summary), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "URL", -1, &(a->gapi1__ResultElement::URL), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "snippet", -1, &(a->gapi1__ResultElement::snippet), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "title", -1, &(a->gapi1__ResultElement::title), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "cachedSize", -1, &(a->gapi1__ResultElement::cachedSize), ""))
+		return soap->error;
+	if (soap_out_bool(soap, "relatedInformationPresent", -1, &(a->gapi1__ResultElement::relatedInformationPresent), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "hostName", -1, &(a->gapi1__ResultElement::hostName), ""))
+		return soap->error;
+	if (soap_out_PointerTogapi1__DirectoryCategory(soap, "directoryCategory", -1, &(a->gapi1__ResultElement::directoryCategory), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "directoryTitle", -1, &(a->gapi1__ResultElement::directoryTitle), ""))
+		return soap->error;
 	/* transient soap skipped */
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	return soap_element_end_out(soap, tag);
 }
 
 void *gapi1__ResultElement::soap_get(struct soap *soap, const char *tag, const char *type)
@@ -1602,7 +1632,8 @@
 SOAP_FMAC3 gapi1__ResultElement * SOAP_FMAC4 soap_get_gapi1__ResultElement(struct soap *soap, gapi1__ResultElement *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__ResultElement(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -1781,21 +1812,32 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__GoogleSearchResult(struct soap *soap, const char *tag, int id, const gapi1__GoogleSearchResult *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__GoogleSearchResult), type);
-	soap_out_bool(soap, "documentFiltering", -1, &(a->gapi1__GoogleSearchResult::documentFiltering), "");
-	soap_out_std__string(soap, "searchComments", -1, &(a->gapi1__GoogleSearchResult::searchComments), "");
-	soap_out_int(soap, "estimatedTotalResultsCount", -1, &(a->gapi1__GoogleSearchResult::estimatedTotalResultsCount), "");
-	soap_out_bool(soap, "estimateIsExact", -1, &(a->gapi1__GoogleSearchResult::estimateIsExact), "");
-	soap_out_PointerTogapi1ResultElementArray(soap, "resultElements", -1, &(a->gapi1__GoogleSearchResult::resultElements), "");
-	soap_out_std__string(soap, "searchQuery", -1, &(a->gapi1__GoogleSearchResult::searchQuery), "");
-	soap_out_int(soap, "startIndex", -1, &(a->gapi1__GoogleSearchResult::startIndex), "");
-	soap_out_int(soap, "endIndex", -1, &(a->gapi1__GoogleSearchResult::endIndex), "");
-	soap_out_std__string(soap, "searchTips", -1, &(a->gapi1__GoogleSearchResult::searchTips), "");
-	soap_out_PointerTogapi1DirectoryCategoryArray(soap, "directoryCategories", -1, &(a->gapi1__GoogleSearchResult::directoryCategories), "");
-	soap_out_double(soap, "searchTime", -1, &(a->gapi1__GoogleSearchResult::searchTime), "");
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__GoogleSearchResult), type))
+		return soap->error;
+	if (soap_out_bool(soap, "documentFiltering", -1, &(a->gapi1__GoogleSearchResult::documentFiltering), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "searchComments", -1, &(a->gapi1__GoogleSearchResult::searchComments), ""))
+		return soap->error;
+	if (soap_out_int(soap, "estimatedTotalResultsCount", -1, &(a->gapi1__GoogleSearchResult::estimatedTotalResultsCount), ""))
+		return soap->error;
+	if (soap_out_bool(soap, "estimateIsExact", -1, &(a->gapi1__GoogleSearchResult::estimateIsExact), ""))
+		return soap->error;
+	if (soap_out_PointerTogapi1ResultElementArray(soap, "resultElements", -1, &(a->gapi1__GoogleSearchResult::resultElements), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "searchQuery", -1, &(a->gapi1__GoogleSearchResult::searchQuery), ""))
+		return soap->error;
+	if (soap_out_int(soap, "startIndex", -1, &(a->gapi1__GoogleSearchResult::startIndex), ""))
+		return soap->error;
+	if (soap_out_int(soap, "endIndex", -1, &(a->gapi1__GoogleSearchResult::endIndex), ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "searchTips", -1, &(a->gapi1__GoogleSearchResult::searchTips), ""))
+		return soap->error;
+	if (soap_out_PointerTogapi1DirectoryCategoryArray(soap, "directoryCategories", -1, &(a->gapi1__GoogleSearchResult::directoryCategories), ""))
+		return soap->error;
+	if (soap_out_double(soap, "searchTime", -1, &(a->gapi1__GoogleSearchResult::searchTime), ""))
+		return soap->error;
 	/* transient soap skipped */
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	return soap_element_end_out(soap, tag);
 }
 
 void *gapi1__GoogleSearchResult::soap_get(struct soap *soap, const char *tag, const char *type)
@@ -1806,7 +1848,8 @@
 SOAP_FMAC3 gapi1__GoogleSearchResult * SOAP_FMAC4 soap_get_gapi1__GoogleSearchResult(struct soap *soap, gapi1__GoogleSearchResult *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__GoogleSearchResult(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -1990,10 +2033,11 @@
 #endif
 	if (id < 0)
 		return soap->error;
-	soap_element_begin_out(soap, tag, id, type);
-	soap_putbase64(soap, a->__ptr, a->__size);
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, id, type))
+		return soap->error;
+	if (soap_putbase64(soap, a->__ptr, a->__size))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 void *xsd__base64Binary::soap_get(struct soap *soap, const char *tag, const char *type)
@@ -2004,7 +2048,8 @@
 SOAP_FMAC3 xsd__base64Binary * SOAP_FMAC4 soap_get_xsd__base64Binary(struct soap *soap, xsd__base64Binary *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_xsd__base64Binary(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2132,24 +2177,34 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Fault(struct soap *soap, const char *tag, int id, const struct SOAP_ENV__Fault *a, const char *type)
 {
 	const char *soap_tmp_faultcode = soap_QName2s(soap, a->faultcode);
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Fault), type);
-	soap_out__QName(soap, "faultcode", -1, (char*const*)&soap_tmp_faultcode, "");
-	soap_out_string(soap, "faultstring", -1, &a->faultstring, "");
-	soap_out_string(soap, "faultactor", -1, &a->faultactor, "");
-	soap_out_PointerToSOAP_ENV__Detail(soap, "detail", -1, &a->detail, "");
-	soap_out_PointerToSOAP_ENV__Code(soap, "SOAP-ENV:Code", -1, &a->SOAP_ENV__Code, "");
-	soap_out_PointerToSOAP_ENV__Reason(soap, "SOAP-ENV:Reason", -1, &a->SOAP_ENV__Reason, "");
-	soap_out_string(soap, "SOAP-ENV:Node", -1, &a->SOAP_ENV__Node, "");
-	soap_out_string(soap, "SOAP-ENV:Role", -1, &a->SOAP_ENV__Role, "");
-	soap_out_PointerToSOAP_ENV__Detail(soap, "SOAP-ENV:Detail", -1, &a->SOAP_ENV__Detail, "");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Fault), type))
+		return soap->error;
+	if (soap_out__QName(soap, "faultcode", -1, (char*const*)&soap_tmp_faultcode, ""))
+		return soap->error;
+	if (soap_out_string(soap, "faultstring", -1, &a->faultstring, ""))
+		return soap->error;
+	if (soap_out_string(soap, "faultactor", -1, &a->faultactor, ""))
+		return soap->error;
+	if (soap_out_PointerToSOAP_ENV__Detail(soap, "detail", -1, &a->detail, ""))
+		return soap->error;
+	if (soap_out_PointerToSOAP_ENV__Code(soap, "SOAP-ENV:Code", -1, &a->SOAP_ENV__Code, ""))
+		return soap->error;
+	if (soap_out_PointerToSOAP_ENV__Reason(soap, "SOAP-ENV:Reason", -1, &a->SOAP_ENV__Reason, ""))
+		return soap->error;
+	if (soap_out_string(soap, "SOAP-ENV:Node", -1, &a->SOAP_ENV__Node, ""))
+		return soap->error;
+	if (soap_out_string(soap, "SOAP-ENV:Role", -1, &a->SOAP_ENV__Role, ""))
+		return soap->error;
+	if (soap_out_PointerToSOAP_ENV__Detail(soap, "SOAP-ENV:Detail", -1, &a->SOAP_ENV__Detail, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_get_SOAP_ENV__Fault(struct soap *soap, struct SOAP_ENV__Fault *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_SOAP_ENV__Fault(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2292,16 +2347,18 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Reason(struct soap *soap, const char *tag, int id, const struct SOAP_ENV__Reason *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Reason), type);
-	soap_out_string(soap, "SOAP-ENV:Text", -1, &a->SOAP_ENV__Text, "");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Reason), type))
+		return soap->error;
+	if (soap_out_string(soap, "SOAP-ENV:Text", -1, &a->SOAP_ENV__Text, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_get_SOAP_ENV__Reason(struct soap *soap, struct SOAP_ENV__Reason *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_SOAP_ENV__Reason(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2406,17 +2463,19 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Detail(struct soap *soap, const char *tag, int id, const struct SOAP_ENV__Detail *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Detail), type);
-	soap_putelement(soap, a->fault, "fault", -1, a->__type);
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Detail), type))
+		return soap->error;
+	if (soap_putelement(soap, a->fault, "fault", -1, a->__type))
+		return soap->error;
 	soap_outliteral(soap, "-any", &a->__any, NULL);
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_get_SOAP_ENV__Detail(struct soap *soap, struct SOAP_ENV__Detail *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_SOAP_ENV__Detail(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2527,17 +2586,20 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Code(struct soap *soap, const char *tag, int id, const struct SOAP_ENV__Code *a, const char *type)
 {
 	const char *soap_tmp_SOAP_ENV__Value = soap_QName2s(soap, a->SOAP_ENV__Value);
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Code), type);
-	soap_out__QName(soap, "SOAP-ENV:Value", -1, (char*const*)&soap_tmp_SOAP_ENV__Value, "");
-	soap_out_PointerToSOAP_ENV__Code(soap, "SOAP-ENV:Subcode", -1, &a->SOAP_ENV__Subcode, "");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Code), type))
+		return soap->error;
+	if (soap_out__QName(soap, "SOAP-ENV:Value", -1, (char*const*)&soap_tmp_SOAP_ENV__Value, ""))
+		return soap->error;
+	if (soap_out_PointerToSOAP_ENV__Code(soap, "SOAP-ENV:Subcode", -1, &a->SOAP_ENV__Subcode, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_get_SOAP_ENV__Code(struct soap *soap, struct SOAP_ENV__Code *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_SOAP_ENV__Code(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2626,13 +2688,11 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap *soap, struct SOAP_ENV__Header *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	/* transient dummy skipped */
 }
 
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap *soap, const struct SOAP_ENV__Header *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	/* transient dummy skipped */
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Header(struct soap *soap, const struct SOAP_ENV__Header *a, const char *tag, const char *type)
@@ -2645,21 +2705,21 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Header(struct soap *soap, const char *tag, int id, const struct SOAP_ENV__Header *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Header), type);
-	/* transient dummy skipped */
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_SOAP_ENV__Header), type))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_get_SOAP_ENV__Header(struct soap *soap, struct SOAP_ENV__Header *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_SOAP_ENV__Header(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
 SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_in_SOAP_ENV__Header(struct soap *soap, const char *tag, struct SOAP_ENV__Header *a, const char *type)
-{;
+{
 	if (soap_element_begin_in(soap, tag, 0, type))
 		return NULL;
 	a = (struct SOAP_ENV__Header *)soap_id_enter(soap, soap->id, a, SOAP_TYPE_SOAP_ENV__Header, sizeof(struct SOAP_ENV__Header), 0, NULL, NULL, NULL);
@@ -2670,7 +2730,6 @@
 	{
 		for (;;)
 		{	soap->error = SOAP_TAG_MISMATCH;
-		/* transient dummy skipped */
 			if (soap->error == SOAP_TAG_MISMATCH)
 				soap->error = soap_ignore_element(soap);
 			if (soap->error == SOAP_NO_TAG)
@@ -2764,25 +2823,36 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGoogleSearch(struct soap *soap, const char *tag, int id, const struct gapi1__doGoogleSearch *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGoogleSearch), type);
-	soap_out_std__string(soap, "key", -1, &a->key, "xsd:string");
-	soap_out_std__string(soap, "q", -1, &a->q, "xsd:string");
-	soap_out_int(soap, "start", -1, &a->start, "xsd:int");
-	soap_out_int(soap, "maxResults", -1, &a->maxResults, "xsd:int");
-	soap_out_bool(soap, "filter", -1, &a->filter, "xsd:boolean");
-	soap_out_std__string(soap, "restrict", -1, &a->restrict_, "xsd:string");
-	soap_out_bool(soap, "safeSearch", -1, &a->safeSearch, "xsd:boolean");
-	soap_out_std__string(soap, "lr", -1, &a->lr, "xsd:string");
-	soap_out_std__string(soap, "ie", -1, &a->ie, "xsd:string");
-	soap_out_std__string(soap, "oe", -1, &a->oe, "xsd:string");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGoogleSearch), type))
+		return soap->error;
+	if (soap_out_std__string(soap, "key", -1, &a->key, "xsd:string"))
+		return soap->error;
+	if (soap_out_std__string(soap, "q", -1, &a->q, "xsd:string"))
+		return soap->error;
+	if (soap_out_int(soap, "start", -1, &a->start, "xsd:int"))
+		return soap->error;
+	if (soap_out_int(soap, "maxResults", -1, &a->maxResults, "xsd:int"))
+		return soap->error;
+	if (soap_out_bool(soap, "filter", -1, &a->filter, "xsd:boolean"))
+		return soap->error;
+	if (soap_out_std__string(soap, "restrict", -1, &a->restrict_, "xsd:string"))
+		return soap->error;
+	if (soap_out_bool(soap, "safeSearch", -1, &a->safeSearch, "xsd:boolean"))
+		return soap->error;
+	if (soap_out_std__string(soap, "lr", -1, &a->lr, "xsd:string"))
+		return soap->error;
+	if (soap_out_std__string(soap, "ie", -1, &a->ie, "xsd:string"))
+		return soap->error;
+	if (soap_out_std__string(soap, "oe", -1, &a->oe, "xsd:string"))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct gapi1__doGoogleSearch * SOAP_FMAC4 soap_get_gapi1__doGoogleSearch(struct soap *soap, struct gapi1__doGoogleSearch *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__doGoogleSearch(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2930,18 +3000,18 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGoogleSearchResponse(struct soap *soap, const char *tag, int id, const struct gapi1__doGoogleSearchResponse *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGoogleSearchResponse), type);
-	if (a->return_)
-		soap_element_result(soap, "return");
-	soap_out_PointerTogapi1__GoogleSearchResult(soap, "return", -1, &a->return_, "");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGoogleSearchResponse), type))
+		return soap->error;
+	if (soap_out_PointerTogapi1__GoogleSearchResult(soap, "return", -1, &a->return_, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct gapi1__doGoogleSearchResponse * SOAP_FMAC4 soap_get_gapi1__doGoogleSearchResponse(struct soap *soap, struct gapi1__doGoogleSearchResponse *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__doGoogleSearchResponse(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -2963,7 +3033,6 @@
 				{	soap_flag_return_--;
 					continue;
 				}
-			soap_check_result(soap, "return");
 			if (soap->error == SOAP_TAG_MISMATCH)
 				soap->error = soap_ignore_element(soap);
 			if (soap->error == SOAP_NO_TAG)
@@ -3043,17 +3112,20 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doSpellingSuggestion(struct soap *soap, const char *tag, int id, const struct gapi1__doSpellingSuggestion *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doSpellingSuggestion), type);
-	soap_out_std__string(soap, "key", -1, &a->key, "xsd:string");
-	soap_out_std__string(soap, "phrase", -1, &a->phrase, "xsd:string");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doSpellingSuggestion), type))
+		return soap->error;
+	if (soap_out_std__string(soap, "key", -1, &a->key, ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "phrase", -1, &a->phrase, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct gapi1__doSpellingSuggestion * SOAP_FMAC4 soap_get_gapi1__doSpellingSuggestion(struct soap *soap, struct gapi1__doSpellingSuggestion *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__doSpellingSuggestion(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3161,17 +3233,18 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doSpellingSuggestionResponse(struct soap *soap, const char *tag, int id, const struct gapi1__doSpellingSuggestionResponse *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doSpellingSuggestionResponse), type);
-	soap_element_result(soap, "return");
-	soap_out_std__string(soap, "return", -1, &a->return_, "");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doSpellingSuggestionResponse), type))
+		return soap->error;
+	if (soap_out_std__string(soap, "return", -1, &a->return_, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct gapi1__doSpellingSuggestionResponse * SOAP_FMAC4 soap_get_gapi1__doSpellingSuggestionResponse(struct soap *soap, struct gapi1__doSpellingSuggestionResponse *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__doSpellingSuggestionResponse(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3193,7 +3266,6 @@
 				{	soap_flag_return_--;
 					continue;
 				}
-			soap_check_result(soap, "return");
 			if (soap->error == SOAP_TAG_MISMATCH)
 				soap->error = soap_ignore_element(soap);
 			if (soap->error == SOAP_NO_TAG)
@@ -3277,17 +3349,20 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGetCachedPage(struct soap *soap, const char *tag, int id, const struct gapi1__doGetCachedPage *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGetCachedPage), type);
-	soap_out_std__string(soap, "key", -1, &a->key, "xsd:string");
-	soap_out_std__string(soap, "url", -1, &a->url, "xsd:string");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGetCachedPage), type))
+		return soap->error;
+	if (soap_out_std__string(soap, "key", -1, &a->key, ""))
+		return soap->error;
+	if (soap_out_std__string(soap, "url", -1, &a->url, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct gapi1__doGetCachedPage * SOAP_FMAC4 soap_get_gapi1__doGetCachedPage(struct soap *soap, struct gapi1__doGetCachedPage *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__doGetCachedPage(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3395,17 +3470,18 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGetCachedPageResponse(struct soap *soap, const char *tag, int id, const struct gapi1__doGetCachedPageResponse *a, const char *type)
 {
-	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGetCachedPageResponse), type);
-	soap_element_result(soap, "return");
-	a->return_.soap_out(soap, "return", -1, "");
-	soap_element_end_out(soap, tag);
-	return SOAP_OK;
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGetCachedPageResponse), type))
+		return soap->error;
+	if (a->return_.soap_out(soap, "return", -1, ""))
+		return soap->error;
+	return soap_element_end_out(soap, tag);
 }
 
 SOAP_FMAC3 struct gapi1__doGetCachedPageResponse * SOAP_FMAC4 soap_get_gapi1__doGetCachedPageResponse(struct soap *soap, struct gapi1__doGetCachedPageResponse *p, const char *tag, const char *type)
 {
 	if ((p = soap_in_gapi1__doGetCachedPageResponse(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3427,7 +3503,6 @@
 				{	soap_flag_return_--;
 					continue;
 				}
-			soap_check_result(soap, "return");
 			if (soap->error == SOAP_TAG_MISMATCH)
 				soap->error = soap_ignore_element(soap);
 			if (soap->error == SOAP_NO_TAG)
@@ -3514,7 +3589,8 @@
 SOAP_FMAC3 struct SOAP_ENV__Reason ** SOAP_FMAC4 soap_get_PointerToSOAP_ENV__Reason(struct soap *soap, struct SOAP_ENV__Reason **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerToSOAP_ENV__Reason(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3568,7 +3644,8 @@
 SOAP_FMAC3 struct SOAP_ENV__Detail ** SOAP_FMAC4 soap_get_PointerToSOAP_ENV__Detail(struct soap *soap, struct SOAP_ENV__Detail **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerToSOAP_ENV__Detail(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3622,7 +3699,8 @@
 SOAP_FMAC3 struct SOAP_ENV__Code ** SOAP_FMAC4 soap_get_PointerToSOAP_ENV__Code(struct soap *soap, struct SOAP_ENV__Code **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerToSOAP_ENV__Code(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3674,7 +3752,8 @@
 SOAP_FMAC3 gapi1__GoogleSearchResult ** SOAP_FMAC4 soap_get_PointerTogapi1__GoogleSearchResult(struct soap *soap, gapi1__GoogleSearchResult **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerTogapi1__GoogleSearchResult(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3695,7 +3774,8 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1__GoogleSearchResult **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1__GoogleSearchResult, sizeof(gapi1__GoogleSearchResult), 0);
+	{	gapi1__GoogleSearchResult ** p = (gapi1__GoogleSearchResult **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1__GoogleSearchResult, sizeof(gapi1__GoogleSearchResult), 0);
+		a = p;
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -3727,7 +3807,8 @@
 SOAP_FMAC3 gapi1__DirectoryCategory *** SOAP_FMAC4 soap_get_PointerToPointerTogapi1__DirectoryCategory(struct soap *soap, gapi1__DirectoryCategory ***p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerToPointerTogapi1__DirectoryCategory(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3777,7 +3858,8 @@
 SOAP_FMAC3 gapi1__ResultElement *** SOAP_FMAC4 soap_get_PointerToPointerTogapi1__ResultElement(struct soap *soap, gapi1__ResultElement ***p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerToPointerTogapi1__ResultElement(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3827,7 +3909,8 @@
 SOAP_FMAC3 gapi1__ResultElement ** SOAP_FMAC4 soap_get_PointerTogapi1__ResultElement(struct soap *soap, gapi1__ResultElement **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerTogapi1__ResultElement(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3848,7 +3931,8 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1__ResultElement **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1__ResultElement, sizeof(gapi1__ResultElement), 0);
+	{	gapi1__ResultElement ** p = (gapi1__ResultElement **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1__ResultElement, sizeof(gapi1__ResultElement), 0);
+		a = p;
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -3880,7 +3964,8 @@
 SOAP_FMAC3 gapi1__DirectoryCategory ** SOAP_FMAC4 soap_get_PointerTogapi1__DirectoryCategory(struct soap *soap, gapi1__DirectoryCategory **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerTogapi1__DirectoryCategory(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3901,7 +3986,8 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1__DirectoryCategory **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1__DirectoryCategory, sizeof(gapi1__DirectoryCategory), 0);
+	{	gapi1__DirectoryCategory ** p = (gapi1__DirectoryCategory **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1__DirectoryCategory, sizeof(gapi1__DirectoryCategory), 0);
+		a = p;
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -3933,7 +4019,8 @@
 SOAP_FMAC3 gapi1DirectoryCategoryArray ** SOAP_FMAC4 soap_get_PointerTogapi1DirectoryCategoryArray(struct soap *soap, gapi1DirectoryCategoryArray **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerTogapi1DirectoryCategoryArray(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -3954,7 +4041,8 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1DirectoryCategoryArray **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1DirectoryCategoryArray, sizeof(gapi1DirectoryCategoryArray), 0);
+	{	gapi1DirectoryCategoryArray ** p = (gapi1DirectoryCategoryArray **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1DirectoryCategoryArray, sizeof(gapi1DirectoryCategoryArray), 0);
+		a = p;
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -3986,7 +4074,8 @@
 SOAP_FMAC3 gapi1ResultElementArray ** SOAP_FMAC4 soap_get_PointerTogapi1ResultElementArray(struct soap *soap, gapi1ResultElementArray **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerTogapi1ResultElementArray(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -4007,7 +4096,8 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1ResultElementArray **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1ResultElementArray, sizeof(gapi1ResultElementArray), 0);
+	{	gapi1ResultElementArray ** p = (gapi1ResultElementArray **)soap_id_lookup(soap, soap->href, (void**)a, SOAP_TYPE_gapi1ResultElementArray, sizeof(gapi1ResultElementArray), 0);
+		a = p;
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -4038,7 +4128,8 @@
 SOAP_FMAC3 unsigned char ** SOAP_FMAC4 soap_get_PointerTounsignedByte(struct soap *soap, unsigned char **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_PointerTounsignedByte(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -4087,7 +4178,8 @@
 SOAP_FMAC3 char ** SOAP_FMAC4 soap_get__QName(struct soap *soap, char **p, const char *tag, const char *type)
 {
 	if ((p = soap_in__QName(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 
@@ -4126,7 +4218,8 @@
 SOAP_FMAC3 char ** SOAP_FMAC4 soap_get_string(struct soap *soap, char **p, const char *tag, const char *type)
 {
 	if ((p = soap_in_string(soap, tag, p, type)))
-		soap_getindependent(soap);
+		if (soap_getindependent(soap))
+			return NULL;
 	return p;
 }
 

Modified: trunk/IndexSearch/Google/GAPIClient.cpp
===================================================================
--- trunk/IndexSearch/Google/GAPIClient.cpp	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GAPIClient.cpp	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,12 +1,12 @@
 /* GAPIClient.cpp
-   Generated by gSOAP 2.7.9e from GoogleSearch.h
-   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.10 from GoogleSearch.h
+   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
 #include "GAPIH.h"
 
-SOAP_SOURCE_STAMP("@(#) GAPIClient.cpp ver 2.7.9e 2007-07-29 10:34:02 GMT")
+SOAP_SOURCE_STAMP("@(#) GAPIClient.cpp ver 2.7.10 2008-08-04 14:27:08 GMT")
 
 
 SOAP_FMAC5 int SOAP_FMAC6 soap_call_gapi1__doGetCachedPage(struct soap *soap, const char *soap_endpoint, const char *soap_action, std::string key, std::string url, xsd__base64Binary &return_)

Modified: trunk/IndexSearch/Google/GAPIClientLib.cpp
===================================================================
--- trunk/IndexSearch/Google/GAPIClientLib.cpp	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GAPIClientLib.cpp	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,6 +1,6 @@
 /* GAPIClientLib.cpp
-   Generated by gSOAP 2.7.9e from GoogleSearch.h
-   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.10 from GoogleSearch.h
+   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */

Modified: trunk/IndexSearch/Google/GAPIGoogleSearchBindingProxy.h
===================================================================
--- trunk/IndexSearch/Google/GAPIGoogleSearchBindingProxy.h	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GAPIGoogleSearchBindingProxy.h	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,22 +1,29 @@
 /* GAPIGoogleSearchBindingProxy.h
-   Generated by gSOAP 2.7.9e from GoogleSearch.h
-   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.10 from GoogleSearch.h
+   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
 
-#ifndef GAPIGoogleSearchBinding_H
-#define GAPIGoogleSearchBinding_H
+#ifndef GAPIGoogleSearchBindingProxy_H
+#define GAPIGoogleSearchBindingProxy_H
 #include "GAPIH.h"
 extern SOAP_NMAC struct Namespace GAPI_namespaces[];
 class GoogleSearchBinding
 {   public:
+	/// Runtime engine context allocated in constructor
 	struct soap *soap;
+	/// Endpoint URL of service 'GoogleSearchBinding' (change as needed)
 	const char *endpoint;
+	/// Constructor allocates soap engine context, sets default endpoint URL, and sets namespace mapping table
 	GoogleSearchBinding() { soap = soap_new(); if (soap) soap->namespaces = GAPI_namespaces; endpoint = "http://api.google.com/search/beta2"; };
+	/// Destructor frees deserialized data and soap engine context
 	virtual ~GoogleSearchBinding() { if (soap) { soap_destroy(soap); soap_end(soap); soap_free(soap); } };
+	/// Invoke 'doGetCachedPage' of service 'GoogleSearchBinding' and return error code (or SOAP_OK)
 	virtual int gapi1__doGetCachedPage(std::string key, std::string url, xsd__base64Binary &return_) { return soap ? soap_call_gapi1__doGetCachedPage(soap, endpoint, NULL, key, url, return_) : SOAP_EOM; };
+	/// Invoke 'doSpellingSuggestion' of service 'GoogleSearchBinding' and return error code (or SOAP_OK)
 	virtual int gapi1__doSpellingSuggestion(std::string key, std::string phrase, std::string &return_) { return soap ? soap_call_gapi1__doSpellingSuggestion(soap, endpoint, NULL, key, phrase, return_) : SOAP_EOM; };
+	/// Invoke 'doGoogleSearch' of service 'GoogleSearchBinding' and return error code (or SOAP_OK)
 	virtual int gapi1__doGoogleSearch(std::string key, std::string q, int start, int maxResults, bool filter, std::string restrict_, bool safeSearch, std::string lr, std::string ie, std::string oe, struct gapi1__doGoogleSearchResponse &_param_1) { return soap ? soap_call_gapi1__doGoogleSearch(soap, endpoint, NULL, key, q, start, maxResults, filter, restrict_, safeSearch, lr, ie, oe, _param_1) : SOAP_EOM; };
 };
 #endif

Modified: trunk/IndexSearch/Google/GAPIH.h
===================================================================
--- trunk/IndexSearch/Google/GAPIH.h	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GAPIH.h	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,6 +1,6 @@
 /* GAPIH.h
-   Generated by gSOAP 2.7.9e from GoogleSearch.h
-   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.10 from GoogleSearch.h
+   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -34,7 +34,7 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_container_insert(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_byte
-#define SOAP_TYPE_byte (2)
+#define SOAP_TYPE_byte (3)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_byte(struct soap*, char *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_byte(struct soap*, const char *, const char*, const char*);
@@ -61,7 +61,7 @@
 SOAP_FMAC3 double * SOAP_FMAC4 soap_in_double(struct soap*, const char*, double *, const char*);
 
 #ifndef SOAP_TYPE_unsignedByte
-#define SOAP_TYPE_unsignedByte (9)
+#define SOAP_TYPE_unsignedByte (10)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_unsignedByte(struct soap*, unsigned char *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_unsignedByte(struct soap*, const unsigned char *, const char*, const char*);
@@ -70,7 +70,7 @@
 SOAP_FMAC3 unsigned char * SOAP_FMAC4 soap_in_unsignedByte(struct soap*, const char*, unsigned char *, const char*);
 
 #ifndef SOAP_TYPE_unsignedInt
-#define SOAP_TYPE_unsignedInt (8)
+#define SOAP_TYPE_unsignedInt (9)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_unsignedInt(struct soap*, unsigned int *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_unsignedInt(struct soap*, const unsigned int *, const char*, const char*);
@@ -164,7 +164,7 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__GoogleSearchResult(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_xsd__base64Binary
-#define SOAP_TYPE_xsd__base64Binary (7)
+#define SOAP_TYPE_xsd__base64Binary (8)
 #endif
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_xsd__base64Binary(struct soap*, const char*, int, const xsd__base64Binary *, const char*);
 SOAP_FMAC3 xsd__base64Binary * SOAP_FMAC4 soap_get_xsd__base64Binary(struct soap*, xsd__base64Binary *, const char*, const char*);
@@ -213,7 +213,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Detail
-#define SOAP_TYPE_SOAP_ENV__Detail (45)
+#define SOAP_TYPE_SOAP_ENV__Detail (43)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *);
@@ -231,7 +231,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Code
-#define SOAP_TYPE_SOAP_ENV__Code (43)
+#define SOAP_TYPE_SOAP_ENV__Code (41)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *);
@@ -249,7 +249,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Header
-#define SOAP_TYPE_SOAP_ENV__Header (42)
+#define SOAP_TYPE_SOAP_ENV__Header (40)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *);
@@ -377,7 +377,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_PointerToSOAP_ENV__Code
-#define SOAP_TYPE_PointerToSOAP_ENV__Code (44)
+#define SOAP_TYPE_PointerToSOAP_ENV__Code (42)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *const*, const char*, const char*);
@@ -451,7 +451,7 @@
 SOAP_FMAC3 gapi1ResultElementArray ** SOAP_FMAC4 soap_in_PointerTogapi1ResultElementArray(struct soap*, const char*, gapi1ResultElementArray **, const char*);
 
 #ifndef SOAP_TYPE_PointerTounsignedByte
-#define SOAP_TYPE_PointerTounsignedByte (10)
+#define SOAP_TYPE_PointerTounsignedByte (11)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerTounsignedByte(struct soap*, unsigned char *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerTounsignedByte(struct soap*, unsigned char *const*, const char*, const char*);
@@ -470,7 +470,7 @@
 SOAP_FMAC3 char * * SOAP_FMAC4 soap_in__QName(struct soap*, const char*, char **, const char*);
 
 #ifndef SOAP_TYPE_string
-#define SOAP_TYPE_string (3)
+#define SOAP_TYPE_string (4)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_string(struct soap*, char **);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_string(struct soap*, char *const*);

Modified: trunk/IndexSearch/Google/GAPIStub.h
===================================================================
--- trunk/IndexSearch/Google/GAPIStub.h	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GAPIStub.h	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,6 +1,6 @@
 /* GAPIStub.h
-   Generated by gSOAP 2.7.9e from GoogleSearch.h
-   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.10 from GoogleSearch.h
+   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -8,7 +8,9 @@
 #ifndef GAPIStub_H
 #define GAPIStub_H
 #include <vector>
+#ifndef WITH_NONAMESPACES
 #define WITH_NONAMESPACES
+#endif
 #include "stdsoap2.h"
 
 /******************************************************************************\
@@ -25,10 +27,12 @@
 \******************************************************************************/
 
 
+#if 0 /* volatile type: do not redeclare here */
 
+#endif
 
 #ifndef SOAP_TYPE_xsd__base64Binary
-#define SOAP_TYPE_xsd__base64Binary (7)
+#define SOAP_TYPE_xsd__base64Binary (8)
 /* Base64 schema type: */
 class SOAP_CMAC xsd__base64Binary
 {
@@ -40,19 +44,19 @@
 	char *options;	/* optional element of type xsd:string */
 	struct soap *soap;	/* transient */
 public:
-	virtual int soap_type() const { return 7; } /* = unique id SOAP_TYPE_xsd__base64Binary */
+	virtual int soap_type() const { return 8; } /* = unique id SOAP_TYPE_xsd__base64Binary */
 	virtual void soap_default(struct soap*);
 	virtual void soap_serialize(struct soap*) const;
 	virtual int soap_put(struct soap*, const char*, const char*) const;
 	virtual int soap_out(struct soap*, const char*, int, const char*) const;
 	virtual void *soap_get(struct soap*, const char*, const char*);
 	virtual void *soap_in(struct soap*, const char*, const char*);
-	         xsd__base64Binary() : __ptr(NULL), id(NULL), type(NULL), options(NULL), soap(NULL) { }
+	         xsd__base64Binary() : __ptr(NULL), __size(0), id(NULL), type(NULL), options(NULL), soap(NULL) { }
 	virtual ~xsd__base64Binary() { }
 };
 #endif
 
-#if 0 /* volatile type: do not redeclare */
+#if 0 /* volatile type: do not redeclare here */
 
 #endif
 
@@ -82,7 +86,7 @@
 	virtual int soap_out(struct soap*, const char*, int, const char*) const;
 	virtual void *soap_get(struct soap*, const char*, const char*);
 	virtual void *soap_in(struct soap*, const char*, const char*);
-	         gapi1__GoogleSearchResult() : resultElements(NULL), directoryCategories(NULL), soap(NULL) { }
+	         gapi1__GoogleSearchResult() : documentFiltering((bool)0), estimatedTotalResultsCount(0), estimateIsExact((bool)0), resultElements(NULL), startIndex(0), endIndex(0), directoryCategories(NULL), searchTime(0), soap(NULL) { }
 	virtual ~gapi1__GoogleSearchResult() { }
 };
 #endif
@@ -111,7 +115,7 @@
 	virtual int soap_out(struct soap*, const char*, int, const char*) const;
 	virtual void *soap_get(struct soap*, const char*, const char*);
 	virtual void *soap_in(struct soap*, const char*, const char*);
-	         gapi1__ResultElement() : directoryCategory(NULL), soap(NULL) { }
+	         gapi1__ResultElement() : relatedInformationPresent((bool)0), directoryCategory(NULL), soap(NULL) { }
 	virtual ~gapi1__ResultElement() { }
 };
 #endif
@@ -155,7 +159,7 @@
 	virtual int soap_out(struct soap*, const char*, int, const char*) const;
 	virtual void *soap_get(struct soap*, const char*, const char*);
 	virtual void *soap_in(struct soap*, const char*, const char*);
-	         gapi1ResultElementArray() : __ptr(NULL), soap(NULL) { }
+	         gapi1ResultElementArray() : __ptr(NULL), __size(0), soap(NULL) { }
 	virtual ~gapi1ResultElementArray() { }
 };
 #endif
@@ -177,7 +181,7 @@
 	virtual int soap_out(struct soap*, const char*, int, const char*) const;
 	virtual void *soap_get(struct soap*, const char*, const char*);
 	virtual void *soap_in(struct soap*, const char*, const char*);
-	         gapi1DirectoryCategoryArray() : __ptr(NULL), soap(NULL) { }
+	         gapi1DirectoryCategoryArray() : __ptr(NULL), __size(0), soap(NULL) { }
 	virtual ~gapi1DirectoryCategoryArray() { }
 };
 #endif
@@ -188,7 +192,7 @@
 struct gapi1__doGetCachedPageResponse
 {
 public:
-	xsd__base64Binary return_;	/* RPC return element */	/* required element of type xsd:base64Binary */
+	xsd__base64Binary return_;	/* SOAP 1.2 RPC return element (when namespace qualified) */	/* required element of type xsd:base64Binary */
 };
 #endif
 
@@ -209,7 +213,7 @@
 struct gapi1__doSpellingSuggestionResponse
 {
 public:
-	std::string return_;	/* RPC return element */	/* required element of type xsd:string */
+	std::string return_;	/* SOAP 1.2 RPC return element (when namespace qualified) */	/* required element of type xsd:string */
 };
 #endif
 
@@ -230,7 +234,7 @@
 struct gapi1__doGoogleSearchResponse
 {
 public:
-	gapi1__GoogleSearchResult *return_;	/* RPC return element */	/* optional element of type gapi1:GoogleSearchResult */
+	gapi1__GoogleSearchResult *return_;	/* SOAP 1.2 RPC return element (when namespace qualified) */	/* optional element of type gapi1:GoogleSearchResult */
 };
 #endif
 
@@ -254,17 +258,19 @@
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Header
-#define SOAP_TYPE_SOAP_ENV__Header (42)
+#define SOAP_TYPE_SOAP_ENV__Header (40)
 /* SOAP Header: */
 struct SOAP_ENV__Header
 {
-public:
-	void *dummy;	/* transient */
+#ifdef WITH_NOEMPTYSTRUCT
+private:
+	char dummy;	/* dummy member to enable compilation */
+#endif
 };
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Code
-#define SOAP_TYPE_SOAP_ENV__Code (43)
+#define SOAP_TYPE_SOAP_ENV__Code (41)
 /* SOAP Fault Code: */
 struct SOAP_ENV__Code
 {
@@ -275,7 +281,7 @@
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Detail
-#define SOAP_TYPE_SOAP_ENV__Detail (45)
+#define SOAP_TYPE_SOAP_ENV__Detail (43)
 /* SOAP-ENV:Detail */
 struct SOAP_ENV__Detail
 {
@@ -327,17 +333,17 @@
  *                                                                            *
 \******************************************************************************/
 
-#ifndef SOAP_TYPE__XML
-#define SOAP_TYPE__XML (4)
-typedef char *_XML;
-#endif
-
 #ifndef SOAP_TYPE__QName
 #define SOAP_TYPE__QName (5)
 typedef char *_QName;
 #endif
 
+#ifndef SOAP_TYPE__XML
+#define SOAP_TYPE__XML (6)
+typedef char *_XML;
+#endif
 
+
 /******************************************************************************\
  *                                                                            *
  * Typedef Synonyms                                                           *

Modified: trunk/IndexSearch/Google/GoogleAPIEngine.cpp
===================================================================
--- trunk/IndexSearch/Google/GoogleAPIEngine.cpp	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GoogleAPIEngine.cpp	2008-08-04 14:22:08 UTC (rev 1321)
@@ -29,6 +29,8 @@
 using std::cerr;
 using std::endl;
 
+struct Namespace *namespaces;
+
 GoogleAPIEngine::GoogleAPIEngine(const string &key) :
 	WebEngine(),
 	m_key(key)

Modified: trunk/IndexSearch/Google/GoogleSearch.h
===================================================================
--- trunk/IndexSearch/Google/GoogleSearch.h	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/GoogleSearch.h	2008-08-04 14:22:08 UTC (rev 1321)
@@ -1,7 +1,7 @@
 /* GoogleSearch.h
-   Generated by wsdl2h 1.2.9e from googleapi/GoogleSearch.wsdl and typemap.dat
-   2007-07-29 10:33:46 GMT
-   Copyright (C) 2001-2006 Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by wsdl2h 1.2.10 from googleapi/GoogleSearch.wsdl and typemap.dat
+   2008-08-03 16:08:14 GMT
+   Copyright (C) 2001-2008 Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL or Genivia's license for commercial use.
 */
@@ -12,7 +12,7 @@
  - Use soapcpp2 option -I to specify paths for #import
    To build with STL, 'stlvector.h' is imported from 'import' dir in package.
  - Use wsdl2h options -c and -s to generate pure C code or C++ code without STL.
- - Use 'typemap.dat' to control schema namespace bindings and type mappings.
+ - Use 'WS/typemap.dat' to control namespace bindings and type mappings.
    It is strongly recommended to customize the names of the namespace prefixes
    generated by wsdl2h. To do so, modify the prefix bindings in the Namespaces
    section below and add the modified lines to 'typemap.dat' to rerun wsdl2h.
@@ -73,7 +73,7 @@
 class xsd__base64Binary
 {	unsigned char *__ptr;
 	int __size;
-	char *id, *type, *options; /* NOTE: for DIME and MTOM XOP attachments only */
+	char *id, *type, *options; // NOTE: for DIME and MTOM XOP attachments only
 	struct soap *soap;
 };
 
@@ -274,6 +274,8 @@
 C++ proxy class (defined in soapGoogleSearchBindingProxy.h):
   class GoogleSearchBinding;
 
+Note: use soapcpp2 option '-i' to generate improved proxy and service classes;
+
 */
 
 //gsoap gapi1 service method-style:	doGetCachedPage rpc
@@ -330,6 +332,8 @@
 C++ proxy class (defined in soapGoogleSearchBindingProxy.h):
   class GoogleSearchBinding;
 
+Note: use soapcpp2 option '-i' to generate improved proxy and service classes;
+
 */
 
 //gsoap gapi1 service method-style:	doSpellingSuggestion rpc
@@ -407,6 +411,8 @@
 C++ proxy class (defined in soapGoogleSearchBindingProxy.h):
   class GoogleSearchBinding;
 
+Note: use soapcpp2 option '-i' to generate improved proxy and service classes;
+
 */
 
 //gsoap gapi1 service method-style:	doGoogleSearch rpc

Modified: trunk/IndexSearch/Google/Makefile.am
===================================================================
--- trunk/IndexSearch/Google/Makefile.am	2008-08-04 14:15:56 UTC (rev 1320)
+++ trunk/IndexSearch/Google/Makefile.am	2008-08-04 14:22:08 UTC (rev 1321)
@@ -6,30 +6,35 @@
 	GAPIH.h \
 	GAPIStub.h \
 	GoogleAPIEngine.h \
-	GoogleSearch.h
+	GoogleSearch.h \
+	GAPIClientLib.cpp
 
 if HAVE_SOAP
-noinst_LTLIBRARIES = libSearchGoogle.la
+lib_LTLIBRARIES = libgoogleapibackend.la
 
-libSearchGoogle_la_SOURCES = \
+libgoogleapibackend_la_SOURCES = \
 	GAPIC.cpp \
 	GAPIClient.cpp \
-	GAPIClientLib.cpp \
-	GoogleAPIEngine.cpp
+	GoogleAPIEngine.cpp \
+	ModuleExports.cpp
 
+libgoogleapibackend_la_LDFLAGS = -module -shared -nostartfiles
+
+libgoogleapibackend_la_LIBADD = \
+	@SOAP_LIBS@ @MISC_LIBS@
+
 GoogleSearch.h :
 	wsdl2h -n gapi -o GoogleSearch.h googleapi/GoogleSearch.wsdl
 
 GAPIClientLib.cpp : GoogleSearch.h
 	soapcpp2 -n -pGAPI -I/usr/include/gsoap/import -I/usr/share/gsoap/import GoogleSearch.h
 
-libSearchGoogle_la_CXXFLAGS = \
+libgoogleapibackend_la_CXXFLAGS = \
 	-I$(top_srcdir)/Utils \
 	-I$(top_srcdir)/Tokenize \
 	-I$(top_srcdir)/Tokenize/filters \
 	-I$(top_srcdir)/Collect \
 	-I$(top_srcdir)/IndexSearch \
-	@HTTP_CFLAGS@ @XML_CFLAGS@ @SOAP_CFLAGS@ \
-	@INDEX_CFLAGS@
+	@HTTP_CFLAGS@ @XML_CFLAGS@ @SOAP_CFLAGS@
 endif
 



From fabricecolin at mail.berlios.de  Mon Aug  4 16:31:42 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 4 Aug 2008 16:31:42 +0200
Subject: [Pinot-svn] r1322 - trunk/IndexSearch
Message-ID: <200808041431.m74EVgUQ002942@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-04 16:31:35 +0200 (Mon, 04 Aug 2008)
New Revision: 1322

Removed:
   trunk/IndexSearch/SOAPEnv.h
   trunk/IndexSearch/SOAPEnvH.h
   trunk/IndexSearch/SOAPEnvNS.cpp
   trunk/IndexSearch/SOAPEnvStub.h
Log:
These are no longer needed.


Deleted: trunk/IndexSearch/SOAPEnv.h
===================================================================

Deleted: trunk/IndexSearch/SOAPEnvH.h
===================================================================
--- trunk/IndexSearch/SOAPEnvH.h	2008-08-04 14:22:08 UTC (rev 1321)
+++ trunk/IndexSearch/SOAPEnvH.h	2008-08-04 14:31:35 UTC (rev 1322)
@@ -1,201 +0,0 @@
-/* SOAPEnvH.h
-   Generated by gSOAP 2.7.10 from SOAPEnv.h
-   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
-   This part of the software is released under one of the following licenses:
-   GPL, the gSOAP public license, or Genivia's license for commercial use.
-*/
-
-#ifndef SOAPEnvH_H
-#define SOAPEnvH_H
-#include "SOAPEnvStub.h"
-#ifndef WITH_NOIDREF
-
-#ifdef __cplusplus
-extern "C" {
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_markelement(struct soap*, const void*, int);
-SOAP_FMAC3 int SOAP_FMAC4 soap_putelement(struct soap*, const void*, const char*, int, int);
-SOAP_FMAC3 void *SOAP_FMAC4 soap_getelement(struct soap*, int*);
-
-#ifdef __cplusplus
-}
-#endif
-SOAP_FMAC3 int SOAP_FMAC4 soap_putindependent(struct soap*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_getindependent(struct soap*);
-#endif
-SOAP_FMAC3 int SOAP_FMAC4 soap_ignore_element(struct soap*);
-
-SOAP_FMAC3 void * SOAP_FMAC4 soap_instantiate(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_fdelete(struct soap_clist*);
-SOAP_FMAC3 void* SOAP_FMAC4 soap_class_id_enter(struct soap*, const char*, void*, int, size_t, const char*, const char*);
-
-#ifndef SOAP_TYPE_byte
-#define SOAP_TYPE_byte (3)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_byte(struct soap*, char *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_byte(struct soap*, const char *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_byte(struct soap*, const char*, int, const char *, const char*);
-SOAP_FMAC3 char * SOAP_FMAC4 soap_get_byte(struct soap*, char *, const char*, const char*);
-SOAP_FMAC3 char * SOAP_FMAC4 soap_in_byte(struct soap*, const char*, char *, const char*);
-
-#ifndef SOAP_TYPE_int
-#define SOAP_TYPE_int (1)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_int(struct soap*, int *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_int(struct soap*, const int *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_int(struct soap*, const char*, int, const int *, const char*);
-SOAP_FMAC3 int * SOAP_FMAC4 soap_get_int(struct soap*, int *, const char*, const char*);
-SOAP_FMAC3 int * SOAP_FMAC4 soap_in_int(struct soap*, const char*, int *, const char*);
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_SOAP_ENV__Fault
-#define SOAP_TYPE_SOAP_ENV__Fault (14)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Fault(struct soap*, const char*, int, const struct SOAP_ENV__Fault *, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_get_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_in_SOAP_ENV__Fault(struct soap*, const char*, struct SOAP_ENV__Fault *, const char*);
-SOAP_FMAC5 struct SOAP_ENV__Fault * SOAP_FMAC6 soap_new_SOAP_ENV__Fault(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault*);
-SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Fault(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Fault(struct soap*, int, int, void*, size_t, const void*, size_t);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_SOAP_ENV__Reason
-#define SOAP_TYPE_SOAP_ENV__Reason (13)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Reason(struct soap*, const char*, int, const struct SOAP_ENV__Reason *, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_get_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_in_SOAP_ENV__Reason(struct soap*, const char*, struct SOAP_ENV__Reason *, const char*);
-SOAP_FMAC5 struct SOAP_ENV__Reason * SOAP_FMAC6 soap_new_SOAP_ENV__Reason(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason*);
-SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Reason(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Reason(struct soap*, int, int, void*, size_t, const void*, size_t);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_SOAP_ENV__Detail
-#define SOAP_TYPE_SOAP_ENV__Detail (10)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Detail(struct soap*, const char*, int, const struct SOAP_ENV__Detail *, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_get_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_in_SOAP_ENV__Detail(struct soap*, const char*, struct SOAP_ENV__Detail *, const char*);
-SOAP_FMAC5 struct SOAP_ENV__Detail * SOAP_FMAC6 soap_new_SOAP_ENV__Detail(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail*);
-SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Detail(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Detail(struct soap*, int, int, void*, size_t, const void*, size_t);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_SOAP_ENV__Code
-#define SOAP_TYPE_SOAP_ENV__Code (8)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Code(struct soap*, const char*, int, const struct SOAP_ENV__Code *, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_get_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_in_SOAP_ENV__Code(struct soap*, const char*, struct SOAP_ENV__Code *, const char*);
-SOAP_FMAC5 struct SOAP_ENV__Code * SOAP_FMAC6 soap_new_SOAP_ENV__Code(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code*);
-SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Code(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Code(struct soap*, int, int, void*, size_t, const void*, size_t);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_SOAP_ENV__Header
-#define SOAP_TYPE_SOAP_ENV__Header (7)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Header(struct soap*, const char*, int, const struct SOAP_ENV__Header *, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_get_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_in_SOAP_ENV__Header(struct soap*, const char*, struct SOAP_ENV__Header *, const char*);
-SOAP_FMAC5 struct SOAP_ENV__Header * SOAP_FMAC6 soap_new_SOAP_ENV__Header(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header*);
-SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Header(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Header(struct soap*, int, int, void*, size_t, const void*, size_t);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_PointerToSOAP_ENV__Reason
-#define SOAP_TYPE_PointerToSOAP_ENV__Reason (16)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *const*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *const*, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_PointerToSOAP_ENV__Reason(struct soap*, const char *, int, struct SOAP_ENV__Reason *const*, const char *);
-SOAP_FMAC3 struct SOAP_ENV__Reason ** SOAP_FMAC4 soap_get_PointerToSOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason **, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Reason ** SOAP_FMAC4 soap_in_PointerToSOAP_ENV__Reason(struct soap*, const char*, struct SOAP_ENV__Reason **, const char*);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_PointerToSOAP_ENV__Detail
-#define SOAP_TYPE_PointerToSOAP_ENV__Detail (15)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *const*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *const*, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_PointerToSOAP_ENV__Detail(struct soap*, const char *, int, struct SOAP_ENV__Detail *const*, const char *);
-SOAP_FMAC3 struct SOAP_ENV__Detail ** SOAP_FMAC4 soap_get_PointerToSOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail **, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Detail ** SOAP_FMAC4 soap_in_PointerToSOAP_ENV__Detail(struct soap*, const char*, struct SOAP_ENV__Detail **, const char*);
-
-#endif
-
-#ifndef WITH_NOGLOBAL
-
-#ifndef SOAP_TYPE_PointerToSOAP_ENV__Code
-#define SOAP_TYPE_PointerToSOAP_ENV__Code (9)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *const*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *const*, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_PointerToSOAP_ENV__Code(struct soap*, const char *, int, struct SOAP_ENV__Code *const*, const char *);
-SOAP_FMAC3 struct SOAP_ENV__Code ** SOAP_FMAC4 soap_get_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code **, const char*, const char*);
-SOAP_FMAC3 struct SOAP_ENV__Code ** SOAP_FMAC4 soap_in_PointerToSOAP_ENV__Code(struct soap*, const char*, struct SOAP_ENV__Code **, const char*);
-
-#endif
-
-#ifndef SOAP_TYPE__QName
-#define SOAP_TYPE__QName (5)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default__QName(struct soap*, char **);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize__QName(struct soap*, char *const*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put__QName(struct soap*, char *const*, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out__QName(struct soap*, const char*, int, char*const*, const char*);
-SOAP_FMAC3 char ** SOAP_FMAC4 soap_get__QName(struct soap*, char **, const char*, const char*);
-SOAP_FMAC3 char * * SOAP_FMAC4 soap_in__QName(struct soap*, const char*, char **, const char*);
-
-#ifndef SOAP_TYPE_string
-#define SOAP_TYPE_string (4)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_string(struct soap*, char **);
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_string(struct soap*, char *const*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_string(struct soap*, char *const*, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_string(struct soap*, const char*, int, char*const*, const char*);
-SOAP_FMAC3 char ** SOAP_FMAC4 soap_get_string(struct soap*, char **, const char*, const char*);
-SOAP_FMAC3 char * * SOAP_FMAC4 soap_in_string(struct soap*, const char*, char **, const char*);
-
-#endif
-
-/* End of SOAPEnvH.h */

Deleted: trunk/IndexSearch/SOAPEnvNS.cpp
===================================================================
--- trunk/IndexSearch/SOAPEnvNS.cpp	2008-08-04 14:22:08 UTC (rev 1321)
+++ trunk/IndexSearch/SOAPEnvNS.cpp	2008-08-04 14:31:35 UTC (rev 1322)
@@ -1 +0,0 @@
-struct Namespace *namespaces;

Deleted: trunk/IndexSearch/SOAPEnvStub.h
===================================================================
--- trunk/IndexSearch/SOAPEnvStub.h	2008-08-04 14:22:08 UTC (rev 1321)
+++ trunk/IndexSearch/SOAPEnvStub.h	2008-08-04 14:31:35 UTC (rev 1322)
@@ -1,157 +0,0 @@
-/* SOAPEnvStub.h
-   Generated by gSOAP 2.7.10 from SOAPEnv.h
-   Copyright(C) 2000-2008, Robert van Engelen, Genivia Inc. All Rights Reserved.
-   This part of the software is released under one of the following licenses:
-   GPL, the gSOAP public license, or Genivia's license for commercial use.
-*/
-
-#ifndef SOAPEnvStub_H
-#define SOAPEnvStub_H
-#include "stdsoap2.h"
-
-/******************************************************************************\
- *                                                                            *
- * Enumerations                                                               *
- *                                                                            *
-\******************************************************************************/
-
-
-/******************************************************************************\
- *                                                                            *
- * Classes and Structs                                                        *
- *                                                                            *
-\******************************************************************************/
-
-
-#if 0 /* volatile type: do not redeclare here */
-
-#endif
-
-#ifndef SOAP_TYPE_SOAP_ENV__Header
-#define SOAP_TYPE_SOAP_ENV__Header (7)
-/* SOAP Header: */
-struct SOAP_ENV__Header
-{
-#ifdef WITH_NOEMPTYSTRUCT
-private:
-	char dummy;	/* dummy member to enable compilation */
-#endif
-};
-#endif
-
-#ifndef SOAP_TYPE_SOAP_ENV__Code
-#define SOAP_TYPE_SOAP_ENV__Code (8)
-/* SOAP Fault Code: */
-struct SOAP_ENV__Code
-{
-public:
-	char *SOAP_ENV__Value;	/* optional element of type xsd:QName */
-	struct SOAP_ENV__Code *SOAP_ENV__Subcode;	/* optional element of type SOAP-ENV:Code */
-};
-#endif
-
-#ifndef SOAP_TYPE_SOAP_ENV__Detail
-#define SOAP_TYPE_SOAP_ENV__Detail (10)
-/* SOAP-ENV:Detail */
-struct SOAP_ENV__Detail
-{
-public:
-	int __type;	/* any type of element <fault> (defined below) */
-	void *fault;	/* transient */
-	char *__any;
-};
-#endif
-
-#ifndef SOAP_TYPE_SOAP_ENV__Reason
-#define SOAP_TYPE_SOAP_ENV__Reason (13)
-/* SOAP-ENV:Reason */
-struct SOAP_ENV__Reason
-{
-public:
-	char *SOAP_ENV__Text;	/* optional element of type xsd:string */
-};
-#endif
-
-#ifndef SOAP_TYPE_SOAP_ENV__Fault
-#define SOAP_TYPE_SOAP_ENV__Fault (14)
-/* SOAP Fault: */
-struct SOAP_ENV__Fault
-{
-public:
-	char *faultcode;	/* optional element of type xsd:QName */
-	char *faultstring;	/* optional element of type xsd:string */
-	char *faultactor;	/* optional element of type xsd:string */
-	struct SOAP_ENV__Detail *detail;	/* optional element of type SOAP-ENV:Detail */
-	struct SOAP_ENV__Code *SOAP_ENV__Code;	/* optional element of type SOAP-ENV:Code */
-	struct SOAP_ENV__Reason *SOAP_ENV__Reason;	/* optional element of type SOAP-ENV:Reason */
-	char *SOAP_ENV__Node;	/* optional element of type xsd:string */
-	char *SOAP_ENV__Role;	/* optional element of type xsd:string */
-	struct SOAP_ENV__Detail *SOAP_ENV__Detail;	/* optional element of type SOAP-ENV:Detail */
-};
-#endif
-
-/******************************************************************************\
- *                                                                            *
- * Types with Custom Serializers                                              *
- *                                                                            *
-\******************************************************************************/
-
-
-/******************************************************************************\
- *                                                                            *
- * Typedefs                                                                   *
- *                                                                            *
-\******************************************************************************/
-
-#ifndef SOAP_TYPE__QName
-#define SOAP_TYPE__QName (5)
-typedef char *_QName;
-#endif
-
-#ifndef SOAP_TYPE__XML
-#define SOAP_TYPE__XML (6)
-typedef char *_XML;
-#endif
-
-
-/******************************************************************************\
- *                                                                            *
- * Typedef Synonyms                                                           *
- *                                                                            *
-\******************************************************************************/
-
-
-/******************************************************************************\
- *                                                                            *
- * Externals                                                                  *
- *                                                                            *
-\******************************************************************************/
-
-
-/******************************************************************************\
- *                                                                            *
- * Service Operations                                                         *
- *                                                                            *
-\******************************************************************************/
-
-
-/******************************************************************************\
- *                                                                            *
- * Stubs                                                                      *
- *                                                                            *
-\******************************************************************************/
-
-
-/******************************************************************************\
- *                                                                            *
- * Skeletons                                                                  *
- *                                                                            *
-\******************************************************************************/
-
-SOAP_FMAC5 int SOAP_FMAC6 soap_serve(struct soap*);
-
-SOAP_FMAC5 int SOAP_FMAC6 soap_serve_request(struct soap*);
-
-#endif
-
-/* End of SOAPEnvStub.h */



From fabricecolin at mail.berlios.de  Mon Aug  4 16:33:30 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 4 Aug 2008 16:33:30 +0200
Subject: [Pinot-svn] r1323 - trunk/UI/GTK2/src
Message-ID: <200808041433.m74EXU1k003077@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-04 16:33:24 +0200 (Mon, 04 Aug 2008)
New Revision: 1323

Modified:
   trunk/UI/GTK2/src/PinotSettings.cpp
   trunk/UI/GTK2/src/prefsDialog.cc
Log:
The Google API engine is now loaded dynamically, if available, and identified as
"Google API".


Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2008-08-04 14:31:35 UTC (rev 1322)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2008-08-04 14:33:24 UTC (rev 1323)
@@ -317,12 +317,6 @@
 	map<string, bool> engines;
 	bool hasBackends = false;
 
-	// Some search engines are hardcoded
-#ifdef HAVE_GOOGLEAPI
-	m_engineIds[1 << m_engines.size()] = "Google API";
-	m_engines.insert(Engine("Google API", "googleapi", "", "The Web"));
-	m_engineChannels.insert(pair<string, bool>("The Web", true));
-#endif
 	// Others are available as back-ends
 	ModuleFactory::getSupportedEngines(engines);
 	for (map<string, bool>::const_iterator engineIter = engines.begin();

Modified: trunk/UI/GTK2/src/prefsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.cc	2008-08-04 14:31:35 UTC (rev 1322)
+++ trunk/UI/GTK2/src/prefsDialog.cc	2008-08-04 14:33:24 UTC (rev 1323)
@@ -126,7 +126,7 @@
 	populate_patternsTreeview(m_settings.m_filePatternsList, m_settings.m_isBlackList);
 
 	// Hide the Google API entry field ?
-	if (ModuleFactory::isSupported("googleapi") == false)
+	if (ModuleFactory::isSupported("Google API") == false)
 	{
 		apiKeyLabel->hide();
 		apiKeyEntry->hide();



From fabricecolin at mail.berlios.de  Mon Aug  4 16:37:19 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 4 Aug 2008 16:37:19 +0200
Subject: [Pinot-svn] r1324 - trunk/Tokenize
Message-ID: <200808041437.m74EbJEt003259@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-04 16:37:13 +0200 (Mon, 04 Aug 2008)
New Revision: 1324

Removed:
   trunk/Tokenize/Tokenizer.cpp
   trunk/Tokenize/tokenizertest.cpp
Log:
These two were obsoleted quite some time ago...


Deleted: trunk/Tokenize/Tokenizer.cpp
===================================================================
--- trunk/Tokenize/Tokenizer.cpp	2008-08-04 14:33:24 UTC (rev 1323)
+++ trunk/Tokenize/Tokenizer.cpp	2008-08-04 14:37:13 UTC (rev 1324)
@@ -1,138 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include <sys/types.h>
-#include <ctype.h>
-#include <unistd.h>
-#include <iostream>
-#include <fstream>
-
-#include "CommandLine.h"
-#include "Tokenizer.h"
-
-//#define DEBUG_TOKENIZER
-
-using std::cout;
-using std::cerr;
-using std::endl;
-using std::string;
-
-Tokenizer::Tokenizer(const Document *pDocument, bool splitOnSpaces) :
-	m_pDocument(NULL),
-	m_splitOnSpaces(splitOnSpaces),
-	m_currentPos(0)
-{
-	setDocument(pDocument);
-	rewind();
-}
-
-Tokenizer::~Tokenizer()
-{
-	// The document is owned by the caller
-}
-
-void Tokenizer::setDocument(const Document *pDocument)
-{
-	m_pDocument = pDocument;
-}
-
-/**
-  * Returns a pointer to the document being tokenized.
-  * This may not be the document passed to the constructor.
-  */
-const Document *Tokenizer::getDocument(void)
-{
-	return m_pDocument;
-}
-
-/// Returns the next token; false if all tokens consumed.
-bool Tokenizer::nextToken(string &token)
-{
-	bool bStarted = false;
-	unsigned int dataLength;
-	unsigned int pos = m_currentPos;
-
-	if (m_pDocument == NULL)
-	{
-#ifdef DEBUG_TOKENIZER
-		cout << "Tokenizer::nextToken: no document" << endl;
-#endif
-		return false;
-	}
-
-	const char *pData = m_pDocument->getData(dataLength);
-	if ((pData == NULL) ||
-		(dataLength == 0))
-	{
-#ifdef DEBUG_TOKENIZER
-		cout << "Tokenizer::nextToken: no data" << endl;
-#endif
-		return false;
-	}
-
-#ifdef DEBUG_TOKENIZER
-	if (pos == 0)
-	{
-		ofstream tokData("TokenizerData.txt");
-		tokData << pData << endl;
-		tokData.close();
-	}
-#endif
-	while (pos < dataLength)
-	{
-		if (((m_splitOnSpaces == false) && (isalnum(pData[pos]) != 0)) ||
-			((m_splitOnSpaces == true) && (isspace(pData[pos]) == 0)))
-		{
-			if (bStarted == false)
-			{
-				// This starts the new token
-				token = pData[pos];
-				bStarted = true;
-			}
-			else
-			{
-				// Append to token
-				token += pData[pos];
-			}
-		}
-		else
-		{
-			if (bStarted == true)
-			{
-#ifdef DEBUG_TOKENIZER
-				cout << "Tokenizer::nextToken: returning current token " << token << endl;
-#endif
-				// Return the current token
-				break;
-			}
-			// Else keep going until we find an alnum
-		}
-
-		// Next
-		pos++;
-	}
-	m_currentPos = pos;
-
-	return bStarted;
-}
-
-/// Rewinds the tokenizer.
-void Tokenizer::rewind(void)
-{
-	m_currentPos = 0;
-}

Deleted: trunk/Tokenize/tokenizertest.cpp
===================================================================
--- trunk/Tokenize/tokenizertest.cpp	2008-08-04 14:33:24 UTC (rev 1323)
+++ trunk/Tokenize/tokenizertest.cpp	2008-08-04 14:37:13 UTC (rev 1324)
@@ -1,139 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include <sys/types.h>
-#include <sys/stat.h>
-#include <fcntl.h>
-#include <unistd.h>
-#include <iostream>
-#include <string>
-
-#include "HtmlTokenizer.h"
-#include "XmlTokenizer.h"
-#include "UnknownTypeTokenizer.h"
-#include "TokenizerFactory.h"
-#include "StringManip.h"
-
-using namespace std;
-
-int main(int argc, char **argv)
-{
-	if (argc < 3)
-	{
-		cerr << "Usage: " << argv[0] << " <file name> RAWDATA|STRIP|LISTLINKS|LISTTOKENS|META=<meta tag name>|SUBSTR=<sub-string> [TYPE=<type>]" << endl;
-		return EXIT_FAILURE;
-	}
-
-	Document doc;
-	if (doc.setDataFromFile(argv[1]) == false)
-	{
-		cerr << "Couldn't load " << argv[1] << " !" << endl;
-		return EXIT_FAILURE;
-	}
-
-	Tokenizer *pTokens = NULL;
-	// How shall we get the tokenizer ?
-	if ((argc >= 4) &&
-		(strncmp(argv[3], "TYPE=", 5) == 0))
-	{
-		// By type
-		pTokens = TokenizerFactory::getTokenizerByType(argv[3] + 5, &doc);
-	}
-	else
-	{
-		pTokens = TokenizerFactory::getTokenizer(argv[1], &doc);
-	}
-
-	if (pTokens == NULL)
-	{
-		cerr << "Couldn't obtain tokenizer for " << argv[1] << " !" << endl;
-		return EXIT_FAILURE;
-	}
-
-	HtmlTokenizer *pHtmlTokens = dynamic_cast<HtmlTokenizer*>(pTokens);
-
-	const Document *pDoc = NULL;
-	unsigned int length = 0;
-
-	if (strncmp(argv[2], "RAWDATA", 5) == 0)
-	{
-		// Call the base class's method
-		pDoc = pTokens->Tokenizer::getDocument();
-		if (pDoc != NULL)
-		{
-			cout << "Raw text is :" << endl;
-			cout << pDoc->getData(length) << endl;
-		}
-	}
-	else if (strncmp(argv[2], "STRIP", 5) == 0)
-	{
-		const char *pData = doc.getData(length);
-
-		cout << "Stripped text is :" << endl;
-		cout << XmlTokenizer::stripTags(string(pData, length)) << endl;
-	}
-	else if ((strncmp(argv[2], "LISTLINKS", 9) == 0) &&
-		(pHtmlTokens != NULL))
-	{
-		// Get a list of links
-		set<Link> &links = pHtmlTokens->getLinks();
-		if (links.empty() == false)
-		{
-			set<Link>::iterator iter;
-			for(iter = links.begin(); iter != links.end(); iter++)
-			{
-				cout << "Found link \"" << iter->m_name << "\" to " << iter->m_url << endl;
-			}
-		}
-		else
-		{
-			cout << "No links were found in " << argv[1] << endl;
-		}
-	}
-	else if (strncmp(argv[2], "LISTTOKENS", 10) == 0)
-	{
-		string token;
-		cout << "Tokens are :" << endl;
-		while (pTokens->nextToken(token) == true)
-		{
-			cout << token << endl;
-		}
-	}
-	else if ((strncmp(argv[2], "META=", 5) == 0) &&
-		(pHtmlTokens != NULL))
-	{
-		string metaTag = argv[2] + 5;
-		cout << "Meta tag " << metaTag << " was set to " << pHtmlTokens->getMetaTag(metaTag) << endl;
-	}
-	else if ((strncmp(argv[2], "SUBSTR=", 7) == 0) &&
-		(pHtmlTokens != NULL))
-	{
-		string subString = argv[2] + 7;
-
-		pDoc = pTokens->getDocument();
-		if (pDoc != NULL)
-		{
-			cout << "Replaced sub-string " << subString << " with 'Hello'" << endl;
-			cout << StringManip::replaceSubString(pDoc->getData(length), subString, "Hello") << endl;
-		}
-	}
-
-	delete pTokens;
-
-	return EXIT_SUCCESS;
-}



From fabricecolin at mail.berlios.de  Mon Aug  4 16:45:24 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 4 Aug 2008 16:45:24 +0200
Subject: [Pinot-svn] r1325 - trunk/UI/GTK2/src
Message-ID: <200808041445.m74EjOmM004089@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-04 16:45:18 +0200 (Mon, 04 Aug 2008)
New Revision: 1325

Modified:
   trunk/UI/GTK2/src/mainWindow.cc
Log:
Google API key fix.


Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2008-08-04 14:37:13 UTC (rev 1324)
+++ trunk/UI/GTK2/src/mainWindow.cc	2008-08-04 14:45:18 UTC (rev 1325)
@@ -3346,7 +3346,7 @@
 		if (engineType == EnginesModelColumns::WEB_ENGINE)
 		{
 			// There's a special case for the Google API...
-			if (engineName == "googleapi")
+			if (engineName == "Google API")
 			{
 				// Make sure this has been configured
 				if (m_settings.m_googleAPIKey.empty() == true)



From fabricecolin at mail.berlios.de  Wed Aug  6 15:35:51 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Wed, 6 Aug 2008 15:35:51 +0200
Subject: [Pinot-svn] r1326 - trunk/IndexSearch/Xapian
Message-ID: <200808061335.m76DZpJc007715@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-06 15:35:44 +0200 (Wed, 06 Aug 2008)
New Revision: 1326

Modified:
   trunk/IndexSearch/Xapian/XapianIndex.cpp
   trunk/IndexSearch/Xapian/XapianIndex.h
Log:
Removed dead functions. Both set/getLabels() rely on set/getMetadata().


Modified: trunk/IndexSearch/Xapian/XapianIndex.cpp
===================================================================
--- trunk/IndexSearch/Xapian/XapianIndex.cpp	2008-08-04 14:45:18 UTC (rev 1325)
+++ trunk/IndexSearch/Xapian/XapianIndex.cpp	2008-08-06 13:35:44 UTC (rev 1326)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -55,39 +55,6 @@
 using std::min;
 using std::max;
 
-static bool setVersionFile(const string &databaseName, const string &version)
-{
-	ofstream verFile;
-	string verFileName(databaseName + "/version");
-	bool setVer = false;
-
-	verFile.open(verFileName.c_str(), ios::trunc);
-	if (verFile.good() == true)
-	{
-		verFile << version;
-		setVer = true;
-	}
-	verFile.close();
-
-	return setVer;
-}
-
-static string getVersionFromFile(const string &databaseName)
-{
-	ifstream verFile;
-	string verFileName(databaseName + "/version");
-	string version;
-
-	verFile.open(verFileName.c_str());
-	if (verFile.good() == true)
-	{
-		verFile >> version;
-	}
-	verFile.close();
-
-	return version;
-}
-
 class TokensIndexer : public Dijon::CJKVTokenizer::TokensHandler
 {
 	public:
@@ -927,7 +894,7 @@
 	if (pDatabase == NULL)
 	{
 		cerr << "Bad index " << m_databaseName << endl;
-		return false;
+		return "";
 	}
 
 	try
@@ -1178,18 +1145,8 @@
 /// Sets the list of known labels.
 bool XapianIndex::setLabels(const set<string> &labels)
 {
-	bool setLabels = false;
+	string labelsString;
 
-#if ENABLE_XAPIAN_DB_METADATA>0
-	string labelString;
-
-	XapianDatabase *pDatabase = XapianDatabaseFactory::getDatabase(m_databaseName, false);
-	if (pDatabase == NULL)
-	{
-		cerr << "Bad index " << m_databaseName << endl;
-		return false;
-	}
-
 	for (set<string>::const_iterator labelIter = labels.begin();
 		labelIter != labels.end(); ++labelIter)
 	{
@@ -1198,89 +1155,40 @@
 		{
 			continue;
 		}
-		labelString += "[";
-		labelString += Url::escapeUrl(*labelIter);
-		labelString += "]";
-	}
 
-	try
-	{
-#ifdef DEBUG
-		cout << "XapianIndex::setLabels: " << labels.size() << " labels" << endl;
-#endif
-		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
-		if (pIndex != NULL)
-		{
-			pIndex->set_metadata("labels", labelString);
-			setLabels = true;
-		}
+		labelsString += "[";
+		labelsString += Url::escapeUrl(*labelIter);
+		labelsString += "]";
 	}
-	catch (const Xapian::Error &error)
-	{
-		cerr << "Couldn't set database labels: " << error.get_type() << ": " << error.get_msg() << endl;
-	}
-	catch (...)
-	{
-		cerr << "Couldn't set database labels, unknown exception occured" << endl;
-	}
-	pDatabase->unlock();
-#endif
 
-	return setLabels;
+	return setMetadata("labels", labelsString);
 }
 
 /// Gets the list of known labels.
 bool XapianIndex::getLabels(set<string> &labels) const
 {
-#if ENABLE_XAPIAN_DB_METADATA>0
-	string labelsString;
+	string labelsString(getMetadata("labels"));
 
-	XapianDatabase *pDatabase = XapianDatabaseFactory::getDatabase(m_databaseName);
-	if (pDatabase == NULL)
+	if (labelsString.empty() == true)
 	{
-		cerr << "Bad index " << m_databaseName << endl;
 		return false;
 	}
 
-	try
-	{
-		Xapian::Database *pIndex = pDatabase->readLock();
-		if (pIndex != NULL)
-		{
-			labelsString = pIndex->get_metadata("labels");
-		}
-	}
-	catch (const Xapian::Error &error)
-	{
-		cerr << "Couldn't get database labels: " << error.get_type() << ": " << error.get_msg() << endl;
-	}
-	catch (...)
-	{
-		cerr << "Couldn't get database labels, unknown exception occured" << endl;
-	}
-	pDatabase->unlock();
+	string::size_type endPos = 0;
+	string label(StringManip::extractField(labelsString, "[", "]", endPos));
 
-	if (labelsString.empty() == false)
+	while (label.empty() == false)
 	{
-		string::size_type endPos = 0;
-		string label(StringManip::extractField(labelsString, "[", "]", endPos));
+		labels.insert(Url::unescapeUrl(label));
 
-		while (label.empty() == false)
+		if (endPos == string::npos)
 		{
-			labels.insert(Url::unescapeUrl(label));
-
-			if (endPos == string::npos)
-			{
-				break;
-			}
-			label = StringManip::extractField(labelsString, "[", "]", endPos);
+			break;
 		}
-
-		return true;
+		label = StringManip::extractField(labelsString, "[", "]", endPos);
 	}
-#endif
 
-	return false;
+	return true;
 }
 
 /// Adds a label.

Modified: trunk/IndexSearch/Xapian/XapianIndex.h
===================================================================
--- trunk/IndexSearch/Xapian/XapianIndex.h	2008-08-04 14:45:18 UTC (rev 1325)
+++ trunk/IndexSearch/Xapian/XapianIndex.h	2008-08-06 13:35:44 UTC (rev 1326)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by



From fabricecolin at mail.berlios.de  Thu Aug 14 15:29:10 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 14 Aug 2008 15:29:10 +0200
Subject: [Pinot-svn] r1330 - trunk/Utils
Message-ID: <200808141329.m7EDTAYe005438@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-14 15:29:02 +0200 (Thu, 14 Aug 2008)
New Revision: 1330

Modified:
   trunk/Utils/CommandLine.cpp
   trunk/Utils/MIMEScanner.cpp
   trunk/Utils/MIMEScanner.h
   trunk/Utils/Makefile.am
Log:
Use GAppInfo at the same time as GContentType, instead of the MIMECache code.
This extends to CommandLine::runAsync().
Switched to USE_GIO for consistency with the HTTP stuff.


Modified: trunk/Utils/CommandLine.cpp
===================================================================
--- trunk/Utils/CommandLine.cpp	2008-08-11 07:43:11 UTC (rev 1329)
+++ trunk/Utils/CommandLine.cpp	2008-08-14 13:29:02 UTC (rev 1330)
@@ -70,6 +70,56 @@
 /// Runs a command asynchronously.
 bool CommandLine::runAsync(const MIMEAction &action, const vector<string> &arguments)
 {
+#ifdef USE_GIO
+	if (action.m_pAppInfo == NULL)
+	{
+		return false;
+	}
+
+	GList *pFilesList = NULL;
+
+	vector<string>::const_iterator firstArg = arguments.begin();
+	while (firstArg != arguments.end())
+	{
+		Url firstUrl(*firstArg);
+		string protocol(firstUrl.getProtocol());
+
+		if (action.m_localOnly == false)
+		{
+			pFilesList = g_list_prepend(pFilesList, g_strdup((*firstArg).c_str()));
+		}
+		else if (protocol == "file")
+		{
+			pFilesList = g_list_prepend(pFilesList, g_file_new_for_uri((*firstArg).c_str()));
+		}
+#ifdef DEBUG
+		else cout << "CommandLine::runAsync: can't open URL " << *firstArg << endl;
+#endif
+
+		// Next
+		++firstArg;
+	}
+
+	GError *pError = NULL;
+	gboolean launched = FALSE;
+
+	if (action.m_localOnly == false)
+	{
+		launched = g_app_info_launch_uris(action.m_pAppInfo, pFilesList, NULL, &pError);
+	}
+	else
+	{
+		launched = g_app_info_launch(action.m_pAppInfo, pFilesList, NULL, &pError);
+	}
+
+	g_list_foreach(pFilesList, (GFunc)g_object_unref, NULL);
+	g_list_free(pFilesList);
+
+	if (launched == FALSE)
+	{
+		return false;
+	}
+#else
 	string commandLine(action.m_exec);
 
 	if (action.m_exec.empty() == true)
@@ -270,6 +320,7 @@
 		}
 
 	}
+#endif
 
 	return true;
 }

Modified: trunk/Utils/MIMEScanner.cpp
===================================================================
--- trunk/Utils/MIMEScanner.cpp	2008-08-11 07:43:11 UTC (rev 1329)
+++ trunk/Utils/MIMEScanner.cpp	2008-08-14 13:29:02 UTC (rev 1330)
@@ -21,9 +21,7 @@
 #include <glib.h>
 #include <iostream>
 #include <cstring>
-#ifdef HAVE_GIO_MIME
-#include <gio/gio.h>
-#else
+#ifndef USE_GIO
 #include "xdgmime/xdgmime.h"
 #endif
 
@@ -81,7 +79,13 @@
 
 MIMEAction::MIMEAction() :
 	m_multipleArgs(false),
-	m_localOnly(true)
+	m_localOnly(true),
+#ifdef USE_GIO
+	m_pAppInfo(NULL)
+#else
+	m_icon(""),
+	m_device("")
+#endif
 {
 }
 
@@ -89,11 +93,54 @@
 	m_multipleArgs(false),
 	m_localOnly(true),
 	m_name(name),
-	m_exec(cmdLine)
+	m_exec(cmdLine),
+#ifdef USE_GIO
+	m_pAppInfo(NULL)
+#else
+	m_icon(""),
+	m_device("")
+#endif
 {
+#ifdef USE_GIO
+	GError *pError = NULL;
+	m_pAppInfo = g_app_info_create_from_commandline(cmdLine.c_str(),
+		name.c_str(), G_APP_INFO_CREATE_SUPPORTS_URIS, &pError);
+	if (pError != NULL)
+	{
+		g_error_free(pError);
+	}
+#else
 	parseExec();
+#endif
 }
 
+#ifdef USE_GIO
+MIMEAction::MIMEAction(GAppInfo *pAppInfo) :
+	m_multipleArgs(false),
+	m_localOnly(true),
+	m_pAppInfo(NULL)
+{
+	if (pAppInfo != NULL)
+	{
+		const char *pInfo = g_app_info_get_name(pAppInfo);
+		if (pInfo != NULL)
+		{
+			m_name = pInfo;
+		}
+		pInfo = g_app_info_get_executable(pAppInfo);
+		if (pInfo != NULL)
+		{
+			m_exec = pInfo;
+		}
+		if (g_app_info_supports_uris(pAppInfo) == TRUE)
+		{
+			m_localOnly = false;
+		}
+
+		m_pAppInfo = g_app_info_dup(pAppInfo);
+	}
+}
+#else
 MIMEAction::MIMEAction(const string &desktopFile) :
 	m_multipleArgs(false),
 	m_localOnly(true),
@@ -102,19 +149,37 @@
 	load();
 }
 
+#endif
+
 MIMEAction::MIMEAction(const MIMEAction &other) :
 	m_multipleArgs(other.m_multipleArgs),
 	m_localOnly(other.m_localOnly),
 	m_name(other.m_name),
 	m_location(other.m_location),
 	m_exec(other.m_exec),
+#ifdef USE_GIO
+	m_pAppInfo(NULL)
+#else
 	m_icon(other.m_icon),
 	m_device(other.m_device)
+#endif
 {
+#ifdef USE_GIO
+	if (other.m_pAppInfo != NULL)
+	{
+		m_pAppInfo = g_app_info_dup(other.m_pAppInfo);
+	}
+#endif
 }
 
 MIMEAction::~MIMEAction()
 {
+#ifdef USE_GIO
+	if (m_pAppInfo != NULL)
+	{
+		g_object_unref(m_pAppInfo);
+	}
+#endif
 }
 
 bool MIMEAction::operator<(const MIMEAction &other) const
@@ -136,13 +201,26 @@
 		m_name = other.m_name;
 		m_location = other.m_location;
 		m_exec = other.m_exec;
+#ifdef USE_GIO
+		if (m_pAppInfo != NULL)
+		{
+			g_object_unref(m_pAppInfo);
+			m_pAppInfo = NULL;
+		}
+		if (other.m_pAppInfo != NULL)
+		{
+			m_pAppInfo = g_app_info_dup(other.m_pAppInfo);
+		}
+#else
 		m_icon = other.m_icon;
 		m_device = other.m_device;
+#endif
 	}
 
 	return *this;
 }
 
+#ifndef USE_GIO
 void MIMEAction::load(void)
 {
 	GKeyFile *pDesktopFile = g_key_file_new();
@@ -359,11 +437,10 @@
 	return foundActions;
 }
 
-#ifndef HAVE_GIO_MIME
 pthread_mutex_t MIMEScanner::m_xdgMutex = PTHREAD_MUTEX_INITIALIZER;
-#endif
 pthread_rwlock_t MIMEScanner::m_cachesLock = PTHREAD_RWLOCK_INITIALIZER;
 list<MIMECache> MIMEScanner::m_caches;
+#endif
 
 MIMEScanner::MIMEScanner()
 {
@@ -375,16 +452,17 @@
 
 bool MIMEScanner::initialize(const string &userPrefix, const string &systemPrefix)
 {
+#ifdef USE_GIO
+	// Initialize the GType system
+	g_type_init();
+
+	return true;
+#else
 	list<string> desktopFilesPaths;
 	string userDirectory(userPrefix + APPLICATIONS_DIRECTORY);
 	string systemDirectory(systemPrefix + APPLICATIONS_DIRECTORY);
 	bool foundActions = false;
 
-#ifdef HAVE_GIO_MIME
-	// Initialize the GType system
-	g_type_init();
-#endif
-
 	// This may be a re-initialize
 	if (pthread_rwlock_wrlock(&m_cachesLock) == 0)
 	{
@@ -434,6 +512,7 @@
 	}
 
 	return foundActions;
+#endif
 }
 
 bool MIMEScanner::addCache(const string &file, const string &section,
@@ -441,6 +520,7 @@
 {
 	bool addedCache = false;
 
+#ifndef USE_GIO
 	if (pthread_rwlock_wrlock(&m_cachesLock) == 0)
 	{
 		m_caches.push_back(MIMECache(file, section));
@@ -449,13 +529,14 @@
 
 		pthread_rwlock_unlock(&m_cachesLock);
 	}
+#endif
 
 	return addedCache;
 }
 
 void MIMEScanner::shutdown(void)
 {
-#ifndef HAVE_GIO_MIME
+#ifndef USE_GIO
 	xdg_mime_shutdown();
 #endif
 }
@@ -477,7 +558,7 @@
 	}
 
 	// Does it have an obvious extension ?
-#ifdef HAVE_GIO_MIME
+#ifdef USE_GIO
 	char *pType = g_content_type_guess(fileName.c_str(), NULL, 0, NULL);
 #else
 	const char *pType = NULL;
@@ -495,7 +576,7 @@
 		return "";
 	}
 
-#ifdef HAVE_GIO_MIME
+#ifdef USE_GIO
 	if (g_content_type_is_unknown(pType) == TRUE)
 	{
 		g_free(pType);
@@ -528,7 +609,7 @@
 	{
 		mimeType = "text/html";
 	}
-#ifdef HAVE_GIO_MIME
+#ifdef USE_GIO
 	g_free(pType);
 #endif
 #ifdef DEBUG
@@ -553,7 +634,7 @@
 		return mimeType;
 	}
 
-#ifdef HAVE_GIO_MIME
+#ifdef USE_GIO
 	string uri("file://");
 	uri += fileName;
 
@@ -649,7 +730,7 @@
 	{
 		mimeType = "text/html";
 	}
-#ifdef HAVE_GIO_MIME
+#ifdef USE_GIO
 	else
 	{
 		mimeType = UNKNOWN_MIME_TYPE;
@@ -675,7 +756,9 @@
 		return false;
 	}
 
-#ifdef HAVE_GIO_MIME
+#ifdef USE_GIO
+	// FIXME: GContentType doesn't have any function to get a MIME type's parents
+	// Similarly, one can't get a GAppInfo's list of supported MIME types
 #else
 	char **pParentTypes = xdg_mime_list_mime_parents(mimeType.c_str());
 	if ((pParentTypes != NULL) &&
@@ -698,6 +781,19 @@
 /// Adds a user-defined action for the given type.
 void MIMEScanner::addDefaultAction(const string &mimeType, const MIMEAction &typeAction)
 {
+#ifdef USE_GIO
+	if (typeAction.m_pAppInfo == NULL)
+	{
+		return;
+	}
+
+	GError *pError = NULL;
+	g_app_info_set_as_default_for_type(typeAction.m_pAppInfo, mimeType.c_str(), &pError);
+	if (pError != NULL)
+	{
+		g_error_free(pError);
+	}
+#else
 	// Custom actions get stored in a cache object which is not connected to a file
 	// We need to create this object the first time a custom action gets added
 	if (pthread_rwlock_wrlock(&m_cachesLock) == 0)
@@ -712,11 +808,46 @@
 
 		pthread_rwlock_unlock(&m_cachesLock);
 	}
+#endif
 }
 
 bool MIMEScanner::getDefaultActionsForType(const string &mimeType, set<string> &actionNames,
 	vector<MIMEAction> &typeActions)
 {
+#ifdef USE_GIO
+	GList *pAppInfoList = g_app_info_get_all_for_type(mimeType.c_str());
+	if (pAppInfoList == NULL)
+	{
+		return false;
+	}
+
+	typeActions.reserve(g_list_length(pAppInfoList));
+	for (GList *pList = pAppInfoList; pList != NULL; pList = pList->next)
+	{
+		if (pList->data == NULL)
+		{
+			continue;
+		}
+
+		GAppInfo *pAppInfo = G_APP_INFO(pList->data);
+		if (pAppInfo == NULL)
+		{
+			continue;
+		}
+
+		MIMEAction action(pAppInfo);
+#ifdef DEBUG
+		cout << "MIMEScanner::getDefaultActions: action " << action.m_name << endl;
+#endif
+
+		actionNames.insert(action.m_name);
+		typeActions.push_back(action);
+	}
+	g_list_foreach(pAppInfoList, (GFunc)g_object_unref, NULL);
+	g_list_free(pAppInfoList);
+
+	return true;
+#else
 	bool foundAction = false;
 
 	if (pthread_rwlock_rdlock(&m_cachesLock) != 0)
@@ -752,6 +883,7 @@
 	pthread_rwlock_unlock(&m_cachesLock);
 
 	return foundAction;
+#endif
 }
 
 /// Determines the default action(s) for the given type.
@@ -765,11 +897,10 @@
 	cout << "MIMEScanner::getDefaultActions: searching for " << mimeType << endl;
 #endif
 	bool foundAction = getDefaultActionsForType(mimeType, actionNames, typeActions);
+#ifndef USE_GIO
 	if (foundAction == false)
 	{
 		// Is there an action for any of this type's parents ?
-#ifdef HAVE_GIO_MIME
-#else
 		char **pParentTypes = xdg_mime_list_mime_parents(mimeType.c_str());
 		if ((pParentTypes != NULL) &&
 			(pParentTypes[0] != NULL))
@@ -793,8 +924,8 @@
 #ifdef DEBUG
 		else cout << "MIMEScanner::getDefaultActions: " << mimeType << " has no parent types" << endl;
 #endif
+	}
 #endif
-	}
 
 	return foundAction;
 }

Modified: trunk/Utils/MIMEScanner.h
===================================================================
--- trunk/Utils/MIMEScanner.h	2008-08-11 07:43:11 UTC (rev 1329)
+++ trunk/Utils/MIMEScanner.h	2008-08-14 13:29:02 UTC (rev 1330)
@@ -25,6 +25,9 @@
 #include <map>
 #include <set>
 #include <vector>
+#ifdef USE_GIO
+#include <gio/gio.h>
+#endif
 
 #include "Url.h"
 #include "Visibility.h"
@@ -38,7 +41,11 @@
 	public:
 		MIMEAction();
 		MIMEAction(const std::string &name, const std::string &cmdLine);
+#ifdef USE_GIO
+		MIMEAction(GAppInfo *pAppInfo);
+#else
 		MIMEAction(const std::string &desktopFile);
+#endif
 		MIMEAction(const MIMEAction &other);
 		virtual ~MIMEAction();
 
@@ -46,19 +53,26 @@
 
 		MIMEAction &operator=(const MIMEAction &other);
 
+#ifndef USE_GIO
 		void load(void);
 		void parseExec(void);
+#endif
 
 		bool m_multipleArgs;
 		bool m_localOnly;
 		std::string m_name;
 		std::string m_location;
 		std::string m_exec;
+#ifdef USE_GIO
+		GAppInfo *m_pAppInfo;
+#else
 		std::string m_icon;
 		std::string m_device;
+#endif
 
 };
 
+#ifndef USE_GIO 
 /** Caching of MIME type information.
   * A cache can be reloaded as required.
   */
@@ -86,6 +100,7 @@
 			std::map<std::string, MIMEAction> &loadedActions);
 
 };
+#endif
 
 /**
   * Utility class to get a file's MIME type and the default application associated with it.
@@ -120,14 +135,14 @@
 		static bool getDefaultActions(const std::string &mimeType, std::vector<MIMEAction> &typeActions);
 
 	protected:
-#ifndef HAVE_GIO_MIME
+#ifndef USE_GIO
 		/// Mutex to protect access to xdgmime.
 		static pthread_mutex_t m_xdgMutex;
-#endif
 		/// Lock to protect access to caches.
 		static pthread_rwlock_t m_cachesLock;
 		/// MIME type caches, ordered by decreasing priority.
 		static std::list<MIMECache> m_caches;
+#endif
 
 		MIMEScanner();
 

Modified: trunk/Utils/Makefile.am
===================================================================
--- trunk/Utils/Makefile.am	2008-08-11 07:43:11 UTC (rev 1329)
+++ trunk/Utils/Makefile.am	2008-08-14 13:29:02 UTC (rev 1330)
@@ -64,7 +64,3 @@
 	@VISIB_CFLAGS@ \
 	@HTTP_CFLAGS@ @INDEX_CFLAGS@ @GLIBMM_CFLAGS@ -DXDG_PREFIX=pinot_xdg
 
-if HAVE_GIO_MIME
-AM_CXXFLAGS += -DHAVE_GIO_MIME
-endif
-



From fabricecolin at mail.berlios.de  Thu Aug 14 15:34:59 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 14 Aug 2008 15:34:59 +0200
Subject: [Pinot-svn] r1331 - trunk/IndexSearch
Message-ID: <200808141334.m7EDYx7Y006109@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-14 15:34:54 +0200 (Thu, 14 Aug 2008)
New Revision: 1331

Modified:
   trunk/IndexSearch/pinot-index.cpp
Log:
If --showinfo is passed, show which actions are associated with the document's
MIME type.


Modified: trunk/IndexSearch/pinot-index.cpp
===================================================================
--- trunk/IndexSearch/pinot-index.cpp	2008-08-14 13:29:02 UTC (rev 1330)
+++ trunk/IndexSearch/pinot-index.cpp	2008-08-14 13:34:54 UTC (rev 1331)
@@ -353,6 +353,14 @@
 				}
 				cout << endl;
 			}
+
+			vector<MIMEAction> typeActions;
+			MIMEScanner::getDefaultActions(docInfo.getType(), typeActions);
+			for (vector<MIMEAction>::const_iterator actionIter = typeActions.begin();
+				actionIter != typeActions.end(); ++actionIter)
+			{
+				cout << "Action   : '" << actionIter->m_name << "' " << actionIter->m_exec << endl;
+			}
 		}
 
 		// Next



From fabricecolin at mail.berlios.de  Sat Aug 16 07:55:08 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 16 Aug 2008 07:55:08 +0200
Subject: [Pinot-svn] r1334 - trunk/Utils
Message-ID: <200808160555.m7G5t87t012867@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-16 07:54:54 +0200 (Sat, 16 Aug 2008)
New Revision: 1334

Modified:
   trunk/Utils/MIMEScanner.cpp
Log:
Compile getKeyValue() out if GIO is in use.
The xdgmime function to call in scanData() is xdg_mime_get_mime_type_for_data().


Modified: trunk/Utils/MIMEScanner.cpp
===================================================================
--- trunk/Utils/MIMEScanner.cpp	2008-08-15 14:47:45 UTC (rev 1333)
+++ trunk/Utils/MIMEScanner.cpp	2008-08-16 05:54:54 UTC (rev 1334)
@@ -46,6 +46,7 @@
 using std::vector;
 using std::pair;
 
+#ifndef USE_GIO
 static string getKeyValue(GKeyFile *pDesktopFile, const string &key)
 {
 	string value;
@@ -76,6 +77,7 @@
 
 	return value;
 }
+#endif
 
 MIMEAction::MIMEAction() :
 	m_multipleArgs(false),
@@ -764,7 +766,7 @@
 
 	if (pthread_mutex_lock(&m_xdgMutex) == 0)
 	{
-		pType = xdg_mime_cache_get_mime_type_for_data((const void *)pData, (size_t)length, NULL);
+		pType = xdg_mime_get_mime_type_for_data((const void *)pData, (size_t)length, NULL);
 
 		pthread_mutex_unlock(&m_xdgMutex);
 	}
@@ -813,7 +815,7 @@
 	for (set<string>::const_iterator typeIter = allTypes.begin(); typeIter != allTypes.end(); ++typeIter)
 	{
 		// FIXME: this function deals with content types, not MIME types !
-		// There's no way currently to convert to content types, but on Unix they are one and the same
+		// Check whether g_content_type_from_mime_type() exists
 		if (g_content_type_is_a(mimeType.c_str(), typeIter->c_str()) == TRUE)
 		{
 #ifdef DEBUG



From fabricecolin at mail.berlios.de  Sat Aug 16 07:58:17 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 16 Aug 2008 07:58:17 +0200
Subject: [Pinot-svn] r1335 - trunk
Message-ID: <200808160558.m7G5wHeh012967@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-16 07:57:59 +0200 (Sat, 16 Aug 2008)
New Revision: 1335

Modified:
   trunk/configure.in
Log:
If GIO can sniff PNG, set USE_GIO and make sure programs link against it.
The test on GIO's sniffing abilities comes from gtk+'s configure.in.


Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2008-08-16 05:54:54 UTC (rev 1334)
+++ trunk/configure.in	2008-08-16 05:57:59 UTC (rev 1335)
@@ -287,6 +287,54 @@
    exit 1
 fi
 
+dnl Check whether we can use GIO instead of xdgmime
+dnl This test is from gtk's configure.in, with some modifications
+AM_CONDITIONAL(HAVE_GIO_MIME, false)
+AC_MSG_CHECKING([if gio can sniff png])
+gtk_save_LIBS="$LIBS"
+gtk_save_CFLAGS="$CFLAGS"
+gtk_save_CXXFLAGS="$CXXFLAGS"
+LIBS="`$PKG_CONFIG --libs gio-2.0`"
+CFLAGS="`$PKG_CONFIG --cflags gio-2.0`"
+CXXFLAGS="`$PKG_CONFIG --cflags gio-2.0`"
+AC_RUN_IFELSE([AC_LANG_SOURCE([[
+  #include <string.h>
+  #include <gio/gio.h>
+  static const gsize data_size = 159;
+  static const guint8 data[] = 
+  {
+    0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a, 0x00, 0x00, 0x00, 0x0d, 
+    0x49, 0x48, 0x44, 0x52, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x01, 
+    0x08, 0x02, 0x00, 0x00, 0x00, 0x90, 0x77, 0x53, 0xde, 0x00, 0x00, 0x00, 
+    0x01, 0x73, 0x52, 0x47, 0x42, 0x00, 0xae, 0xce, 0x1c, 0xe9, 0x00, 0x00, 
+    0x00, 0x09, 0x70, 0x48, 0x59, 0x73, 0x00, 0x00, 0x0b, 0x13, 0x00, 0x00, 
+    0x0b, 0x13, 0x01, 0x00, 0x9a, 0x9c, 0x18, 0x00, 0x00, 0x00, 0x07, 0x74, 
+    0x49, 0x4d, 0x45, 0x07, 0xd8, 0x07, 0x0f, 0x10, 0x08, 0x15, 0x61, 0xd8, 
+    0x35, 0x37, 0x00, 0x00, 0x00, 0x19, 0x74, 0x45, 0x58, 0x74, 0x43, 0x6f, 
+    0x6d, 0x6d, 0x65, 0x6e, 0x74, 0x00, 0x43, 0x72, 0x65, 0x61, 0x74, 0x65, 
+    0x64, 0x20, 0x77, 0x69, 0x74, 0x68, 0x20, 0x47, 0x49, 0x4d, 0x50, 0x57, 
+    0x81, 0x0e, 0x17, 0x00, 0x00, 0x00, 0x0c, 0x49, 0x44, 0x41, 0x54, 0x08, 
+    0xd7, 0x63, 0xf8, 0xff, 0xff, 0x3f, 0x00, 0x05, 0xfe, 0x02, 0xfe, 0xdc, 
+    0xcc, 0x59, 0xe7, 0x00, 0x00, 0x00, 0x00, 0x49, 0x45, 0x4e, 0x44, 0xae, 
+    0x42, 0x60, 0x82
+  };
+  int
+  main (int argc, char **argv)
+  {
+    char *content_type;
+    char *mime_type;
+    content_type = g_content_type_guess (NULL, data, data_size, NULL);  
+    mime_type = g_content_type_get_mime_type (content_type);
+    return !!strcmp (mime_type, "image/png");
+  }]])],
+  [gio_can_sniff=yes
+   AM_CONDITIONAL(HAVE_GIO_MIME, true)],
+  [gio_can_sniff=no])
+AC_MSG_RESULT($gio_can_sniff)
+LIBS="$gtk_save_LIBS"
+CFLAGS="$gtk_save_CFLAGS"
+CXXFLAGS="$gtk_save_CXXFLAGS"
+
 dnl Other libraries
 MISC_LIBS="-lcrypt $PTHREAD_LIBS"
 AC_SUBST(MISC_LIBS)
@@ -337,6 +385,13 @@
 PKG_CHECK_MODULES(GTKMM, gtkmm-2.4 >= 2.10 )
 AC_SUBST(GTKMM_CFLAGS)
 AC_SUBST(GTKMM_LIBS)
+if test "$gio_can_sniff" = "yes" ; then
+PKG_CHECK_MODULES(GIO, gio-2.0)
+GLIBMM_CFLAGS=" -DUSE_GIO $GIO_CFLAGS $GLIBMM_CFLAGS"
+GLIBMM_LIBS="$GIO_LIBS $GLIBMM_LIBS"
+GTKMM_CFLAGS=" -DUSE_GIO $GIO_CFLAGS $GTKMM_CFLAGS"
+GTKMM_LIBS="$GIO_LIBS $GTKMM_LIBS"
+fi
 
 dnl Check for specific functions
 AC_CHECK_FUNCS(gettimeofday)



From fabricecolin at mail.berlios.de  Fri Aug 15 15:25:47 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Fri, 15 Aug 2008 15:25:47 +0200
Subject: [Pinot-svn] r1332 - in trunk: Tokenize Utils
Message-ID: <200808151325.m7FDPlNQ018042@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-15 15:25:14 +0200 (Fri, 15 Aug 2008)
New Revision: 1332

Modified:
   trunk/Tokenize/FilterUtils.cpp
   trunk/Tokenize/FilterUtils.h
   trunk/Utils/CommandLine.cpp
   trunk/Utils/MIMEScanner.cpp
   trunk/Utils/MIMEScanner.h
Log:
MIMEScanner::getParentTypes() needs the list of all supported types so that in
GIO mode it can determine which types are related with g_content_type_is_a().
This flattens the types hierarchy though, but this will do.


Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2008-08-14 13:34:54 UTC (rev 1331)
+++ trunk/Tokenize/FilterUtils.cpp	2008-08-15 13:25:14 UTC (rev 1332)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007,2008 Fabrice Colin
+ *  Copyright 2007-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -38,6 +38,7 @@
 using std::set;
 using std::map;
 
+set<string> FilterUtils::m_types;
 map<string, string> FilterUtils::m_typeAliases;
 
 FilterUtils::FilterUtils()
@@ -79,8 +80,13 @@
 	{
 		set<string> parentTypes;
 
+		if (m_types.empty() == true)
+		{
+			Dijon::FilterFactory::getSupportedTypes(m_types);
+		}
+
 		// Try that type's parents
-		MIMEScanner::getParentTypes(mimeType, parentTypes);
+		MIMEScanner::getParentTypes(mimeType, m_types, parentTypes);
 		for (set<string>::const_iterator parentIter = parentTypes.begin();
 			parentIter != parentTypes.end(); ++parentIter)
 		{
@@ -120,8 +126,13 @@
 	{
 		set<string> parentTypes;
 
+		if (m_types.empty() == true)
+		{
+			Dijon::FilterFactory::getSupportedTypes(m_types);
+		}
+
 		// Try that type's parents
-		MIMEScanner::getParentTypes(mimeType, parentTypes);
+		MIMEScanner::getParentTypes(mimeType, m_types, parentTypes);
 		for (set<string>::const_iterator parentIter = parentTypes.begin();
 			parentIter != parentTypes.end(); ++parentIter)
 		{

Modified: trunk/Tokenize/FilterUtils.h
===================================================================
--- trunk/Tokenize/FilterUtils.h	2008-08-14 13:34:54 UTC (rev 1331)
+++ trunk/Tokenize/FilterUtils.h	2008-08-15 13:25:14 UTC (rev 1332)
@@ -48,6 +48,7 @@
 		static std::string stripMarkup(const std::string &text);
 
 	protected:
+		static std::set<std::string> m_types;
 		static std::map<std::string, std::string> m_typeAliases;
 
 		FilterUtils();

Modified: trunk/Utils/CommandLine.cpp
===================================================================
--- trunk/Utils/CommandLine.cpp	2008-08-14 13:34:54 UTC (rev 1331)
+++ trunk/Utils/CommandLine.cpp	2008-08-15 13:25:14 UTC (rev 1332)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -112,7 +112,14 @@
 		launched = g_app_info_launch(action.m_pAppInfo, pFilesList, NULL, &pError);
 	}
 
-	g_list_foreach(pFilesList, (GFunc)g_object_unref, NULL);
+	if (action.m_localOnly == false)
+	{
+		g_list_foreach(pFilesList, (GFunc)g_free, NULL);
+	}
+	else
+	{
+		g_list_foreach(pFilesList, (GFunc)g_object_unref, NULL);
+	}
 	g_list_free(pFilesList);
 
 	if (launched == FALSE)

Modified: trunk/Utils/MIMEScanner.cpp
===================================================================
--- trunk/Utils/MIMEScanner.cpp	2008-08-14 13:34:54 UTC (rev 1331)
+++ trunk/Utils/MIMEScanner.cpp	2008-08-15 13:25:14 UTC (rev 1332)
@@ -749,7 +749,8 @@
 }
 
 /// Gets parent MIME types.
-bool MIMEScanner::getParentTypes(const string &mimeType, set<string> &parentMimeTypes)
+bool MIMEScanner::getParentTypes(const string &mimeType,
+	const set<string> &allTypes, set<string> &parentMimeTypes)
 {
 	if (mimeType.empty() == true)
 	{
@@ -757,8 +758,18 @@
 	}
 
 #ifdef USE_GIO
-	// FIXME: GContentType doesn't have any function to get a MIME type's parents
-	// Similarly, one can't get a GAppInfo's list of supported MIME types
+	for (set<string>::const_iterator typeIter = allTypes.begin(); typeIter != allTypes.end(); ++typeIter)
+	{
+		// FIXME: this function deals with content types, not MIME types !
+		// There's no way currently to convert to content types, but on Unix they are one and the same
+		if (g_content_type_is_a(mimeType.c_str(), typeIter->c_str()) == TRUE)
+		{
+#ifdef DEBUG
+			cout << "MIMEScanner::getParentTypes: " << mimeType << " is a " << *typeIter << endl;
+#endif
+			parentMimeTypes.insert(*typeIter);
+		}
+	}
 #else
 	char **pParentTypes = xdg_mime_list_mime_parents(mimeType.c_str());
 	if ((pParentTypes != NULL) &&

Modified: trunk/Utils/MIMEScanner.h
===================================================================
--- trunk/Utils/MIMEScanner.h	2008-08-14 13:34:54 UTC (rev 1331)
+++ trunk/Utils/MIMEScanner.h	2008-08-15 13:25:14 UTC (rev 1332)
@@ -126,7 +126,9 @@
 		static std::string scanUrl(const Url &urlObj);
 
 		/// Gets parent MIME types.
-		static bool getParentTypes(const std::string &mimeType, std::set<std::string> &parentMimeTypes);
+		static bool getParentTypes(const std::string &mimeType,
+			const std::set<std::string> &allTypes,
+			std::set<std::string> &parentMimeTypes);
 
 		/// Adds a user-defined action for the given type.
 		static void addDefaultAction(const std::string &mimeType, const MIMEAction &typeAction);



From fabricecolin at mail.berlios.de  Fri Aug 15 16:47:52 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Fri, 15 Aug 2008 16:47:52 +0200
Subject: [Pinot-svn] r1333 - in trunk: Tokenize Utils
Message-ID: <200808151447.m7FElqiv025335@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-15 16:47:45 +0200 (Fri, 15 Aug 2008)
New Revision: 1333

Modified:
   trunk/Tokenize/FilterUtils.cpp
   trunk/Utils/MIMEScanner.cpp
   trunk/Utils/MIMEScanner.h
Log:
New MIMEScanner::scanData() method, used when a filter returns "scan" as type.


Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2008-08-15 13:25:14 UTC (rev 1332)
+++ trunk/Tokenize/FilterUtils.cpp	2008-08-15 14:47:45 UTC (rev 1333)
@@ -259,6 +259,7 @@
 bool FilterUtils::populateDocument(Document &doc, Dijon::Filter *pFilter)
 {
 	string charset, uri, ipath;
+	bool checkType = false;
 
 	if (pFilter == NULL)
 	{
@@ -288,7 +289,16 @@
 		}
 		else if (metaIter->first == "mimetype")
 		{
-			doc.setType(StringManip::toLowerCase(metaIter->second));
+			string mimeType(StringManip::toLowerCase(metaIter->second));
+
+			if (mimeType == "scan")
+			{
+				checkType = true;
+			}
+			else
+			{
+				doc.setType(StringManip::toLowerCase(metaIter->second));
+			}
 		}
 		else if (metaIter->first == "size")
 		{
@@ -341,6 +351,12 @@
 			cerr << doc.getLocation() << " may not have been fully converted to UTF-8" << endl;
 		}
 		doc.setData(utf8Data.c_str(), utf8Data.length());
+
+		if (checkType == true)
+		{
+			doc.setType(MIMEScanner::scanData(utf8Data.c_str(), utf8Data.length()));
+		}
+
 #ifdef DEBUG
 		cout << "FilterUtils::populateDocument: set " << utf8Data.length() << "/" << contentIter->second.length()
 			<< " bytes, converted from charset " << charset << endl;

Modified: trunk/Utils/MIMEScanner.cpp
===================================================================
--- trunk/Utils/MIMEScanner.cpp	2008-08-15 13:25:14 UTC (rev 1332)
+++ trunk/Utils/MIMEScanner.cpp	2008-08-15 14:47:45 UTC (rev 1333)
@@ -748,6 +748,58 @@
 	return mimeType;
 }
 
+/// Finds out the given data buffer's MIME type.
+string MIMEScanner::scanData(const char *pData, unsigned int length)
+{
+	if ((pData == NULL) ||
+		(length == 0))
+	{
+		return "";
+	}
+
+#ifdef USE_GIO
+	char *pType = g_content_type_guess(NULL, (const guchar *)pData, (gsize)length, NULL);
+#else
+	const char *pType = NULL;
+
+	if (pthread_mutex_lock(&m_xdgMutex) == 0)
+	{
+		pType = xdg_mime_cache_get_mime_type_for_data((const void *)pData, (size_t)length, NULL);
+
+		pthread_mutex_unlock(&m_xdgMutex);
+	}
+#endif
+
+	if (pType == NULL)
+	{
+		return UNKNOWN_MIME_TYPE;
+	}
+
+#ifdef USE_GIO
+	// Get the corresponding MIME type
+	char *pMimeType = g_content_type_get_mime_type(pType);
+	if (pMimeType == NULL)
+	{
+		g_free(pType);
+		return UNKNOWN_MIME_TYPE;
+	}
+
+	g_free(pType);
+	pType = pMimeType;
+#endif
+
+	string mimeType(pType);
+
+#ifdef USE_GIO
+	g_free(pType);
+#endif
+#ifdef DEBUG
+	cout << "MIMEScanner::scanData: " << mimeType << endl;
+#endif
+
+	return mimeType;
+}
+
 /// Gets parent MIME types.
 bool MIMEScanner::getParentTypes(const string &mimeType,
 	const set<string> &allTypes, set<string> &parentMimeTypes)

Modified: trunk/Utils/MIMEScanner.h
===================================================================
--- trunk/Utils/MIMEScanner.h	2008-08-15 13:25:14 UTC (rev 1332)
+++ trunk/Utils/MIMEScanner.h	2008-08-15 14:47:45 UTC (rev 1333)
@@ -125,6 +125,9 @@
 		/// Finds out the given URL's MIME type.
 		static std::string scanUrl(const Url &urlObj);
 
+		/// Finds out the given data buffer's MIME type.
+		static std::string scanData(const char *pData, unsigned int length);
+
 		/// Gets parent MIME types.
 		static bool getParentTypes(const std::string &mimeType,
 			const std::set<std::string> &allTypes,



From fabricecolin at mail.berlios.de  Tue Aug 19 15:38:58 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 19 Aug 2008 15:38:58 +0200
Subject: [Pinot-svn] r1336 - trunk/IndexSearch
Message-ID: <200808191338.m7JDcwWj029279@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-19 15:38:49 +0200 (Tue, 19 Aug 2008)
New Revision: 1336

Modified:
   trunk/IndexSearch/OpenSearchParser.cpp
   trunk/IndexSearch/SherlockParser.cpp
Log:
Forget about description of engines.


Modified: trunk/IndexSearch/OpenSearchParser.cpp
===================================================================
--- trunk/IndexSearch/OpenSearchParser.cpp	2008-08-16 05:57:59 UTC (rev 1335)
+++ trunk/IndexSearch/OpenSearchParser.cpp	2008-08-19 13:38:49 UTC (rev 1336)
@@ -355,10 +355,6 @@
 				{
 					properties.m_name = nodeContent;
 				}
-				else if (nodeName == "Description")
-				{
-					properties.m_description = nodeContent;
-				}
 				else if (nodeName == "Url")
 				{
 					ustring url, type;

Modified: trunk/IndexSearch/SherlockParser.cpp
===================================================================
--- trunk/IndexSearch/SherlockParser.cpp	2008-08-16 05:57:59 UTC (rev 1335)
+++ trunk/IndexSearch/SherlockParser.cpp	2008-08-19 13:38:49 UTC (rev 1336)
@@ -527,13 +527,6 @@
 			properties.m_name = mapIter->second;
 		}
 
-		// Description
-		mapIter = lowSearchParams.find("description");
-		if (mapIter != lowSearchParams.end())
-		{
-			properties.m_description = mapIter->second;
-		}
-
 		// Channel
 		mapIter = lowSearchParams.find("routetype");
 		if (mapIter != lowSearchParams.end())



From fabricecolin at mail.berlios.de  Tue Aug 19 15:40:41 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 19 Aug 2008 15:40:41 +0200
Subject: [Pinot-svn] r1337 - in trunk/IndexSearch: . Xapian XesamGLib
Message-ID: <200808191340.m7JDefZ3029401@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-19 15:40:26 +0200 (Tue, 19 Aug 2008)
New Revision: 1337

Added:
   trunk/IndexSearch/ModuleProperties.h
Modified:
   trunk/IndexSearch/Makefile.am
   trunk/IndexSearch/ModuleFactory.cpp
   trunk/IndexSearch/ModuleFactory.h
   trunk/IndexSearch/SearchPluginProperties.cpp
   trunk/IndexSearch/SearchPluginProperties.h
   trunk/IndexSearch/Xapian/ModuleExports.cpp
   trunk/IndexSearch/XesamGLib/ModuleExports.cpp
   trunk/IndexSearch/pinot-index.cpp
   trunk/IndexSearch/pinot-search.cpp
Log:
Spun some properties out of SearchPluginProperties into ModuleProperties.
Backends must implement ModuleProperties *getModuleProperties() instead of
string getModuleType().


Modified: trunk/IndexSearch/Makefile.am
===================================================================
--- trunk/IndexSearch/Makefile.am	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/Makefile.am	2008-08-19 13:40:26 UTC (rev 1337)
@@ -5,6 +5,7 @@
 	FilterWrapper.h \
 	IndexInterface.h \
 	ModuleFactory.h \
+	ModuleProperties.h \
 	OpenSearchParser.h \
 	PluginParsers.h \
 	PluginWebEngine.h \

Modified: trunk/IndexSearch/ModuleFactory.cpp
===================================================================
--- trunk/IndexSearch/ModuleFactory.cpp	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/ModuleFactory.cpp	2008-08-19 13:40:26 UTC (rev 1337)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007,2008 Fabrice Colin
+ *  Copyright 2007-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -20,6 +20,7 @@
 #include <unistd.h>
 #include <dirent.h>
 #include <dlfcn.h>
+#include <utility>
 #include <iostream>
 
 #include "DBusIndex.h"
@@ -37,14 +38,14 @@
 #define DLOPEN_FLAGS (RTLD_NOW|RTLD_LOCAL)
 #endif
 
-#define GETMODULETYPEFUNC	"getModuleType"
+#define GETMODULEPROPERTIESFUNC	"getModuleProperties"
 #define OPENORCREATEINDEXFUNC	"openOrCreateIndex"
 #define MERGEINDEXESFUNC	"mergeIndexes"
 #define GETINDEXFUNC		"getIndex"
 #define GETSEARCHENGINEFUNC	"getSearchEngine"
 #define CLOSEALLFUNC		"closeAll"
 
-typedef string (getModuleTypeFunc)(void);
+typedef ModuleProperties *(getModulePropertiesFunc)(void);
 typedef bool (openOrCreateIndexFunc)(const string &, bool &, bool, bool);
 typedef bool (mergeIndexesFunc)(const string &, const string &, const string &);
 typedef IndexInterface *(getIndexFunc)(const string &);
@@ -59,9 +60,9 @@
 using std::set;
 using std::pair;
 
-LoadableModule::LoadableModule(const string &type, const string &location,
-	void *pHandle) :
-	m_type(type),
+LoadableModule::LoadableModule(ModuleProperties *pProperties,
+	const string &location, void *pHandle) :
+	m_pProperties(pProperties),
 	m_location(location),
 	m_canSearch(false),
 	m_canIndex(false),
@@ -70,25 +71,41 @@
 }
 
 LoadableModule::LoadableModule(const LoadableModule &other) :
-	m_type(other.m_type),
+	m_pProperties(NULL),
 	m_location(other.m_location),
 	m_canSearch(other.m_canSearch),
 	m_canIndex(other.m_canIndex),
 	m_pHandle(other.m_pHandle)
 {
+	if (other.m_pProperties != NULL)
+	{
+		m_pProperties = new ModuleProperties(*other.m_pProperties);
+	}
 }
 
 LoadableModule::~LoadableModule()
 {
+	if (m_pProperties != NULL)
+	{
+		delete m_pProperties;
+	}
 }
 
 LoadableModule &LoadableModule::operator=(const LoadableModule &other)
 {
-	m_type = other.m_type;
-	m_location = other.m_location;
-	m_canSearch = other.m_canSearch;
-	m_canIndex = other.m_canIndex;
-	m_pHandle = other.m_pHandle;
+	if (this != &other)
+	{
+		if (m_pProperties != NULL)
+		{
+			delete m_pProperties;
+			m_pProperties = NULL;
+		}
+		m_pProperties = other.m_pProperties;
+		m_location = other.m_location;
+		m_canSearch = other.m_canSearch;
+		m_canIndex = other.m_canIndex;
+		m_pHandle = other.m_pHandle;
+	}
 
 	return *this;
 }
@@ -215,35 +232,39 @@
 				if (pHandle != NULL)
 				{
 					// What type does this export ?
-					getModuleTypeFunc *pTypeFunc = (getModuleTypeFunc *)dlsym(pHandle,
-						GETMODULETYPEFUNC);
-					if (pTypeFunc != NULL)
+					getModulePropertiesFunc *pPropsFunc = (getModulePropertiesFunc *)dlsym(pHandle,
+						GETMODULEPROPERTIESFUNC);
+					if (pPropsFunc != NULL)
 					{
-						string moduleType((*pTypeFunc)());
-						LoadableModule module(moduleType, fileName, pHandle);
+						LoadableModule module((*pPropsFunc)(), fileName, pHandle);
 
-						// Can it search ?
-						getSearchEngineFunc *pSearchFunc = (getSearchEngineFunc *)dlsym(pHandle,
-							GETSEARCHENGINEFUNC);
-						if (pSearchFunc != NULL)
+						if (module.m_pProperties != NULL)
 						{
-							module.m_canSearch = true;
-						}
+							string moduleType(module.m_pProperties->m_name);
 
-						// Can it index ?
-						getIndexFunc *pIndexFunc = (getIndexFunc *)dlsym(pHandle,
-							GETINDEXFUNC);
-						if (pIndexFunc != NULL)
-						{
-							module.m_canIndex = true;
-						}
+							// Can it search ?
+							getSearchEngineFunc *pSearchFunc = (getSearchEngineFunc *)dlsym(pHandle,
+								GETSEARCHENGINEFUNC);
+							if (pSearchFunc != NULL)
+							{
+								module.m_canSearch = true;
+							}
 
-						// Add a record for this module
-						m_types.insert(pair<string, LoadableModule>(moduleType, module));
+							// Can it index ?
+							getIndexFunc *pIndexFunc = (getIndexFunc *)dlsym(pHandle,
+								GETINDEXFUNC);
+							if (pIndexFunc != NULL)
+							{
+								module.m_canIndex = true;
+							}
+
+							// Add a record for this module
+							m_types.insert(pair<string, LoadableModule>(moduleType, module));
 #ifdef DEBUG
-						cout << "ModuleFactory::loadModules: type " << moduleType
-							<< " is supported by " << pEntryName << endl;
+							cout << "ModuleFactory::loadModules: " << moduleType
+								<< " is supported by " << pEntryName << endl;
 #endif
+						}
 					}
 					else cerr << "ModuleFactory::loadModules: " << dlerror() << endl;
 				}
@@ -393,20 +414,26 @@
 	return type;
 }
 
-void ModuleFactory::getSupportedEngines(map<string, bool> &engines)
+void ModuleFactory::getSupportedEngines(map<ModuleProperties, bool> &engines)
 {
 	engines.clear();
 
 	// Built-in engines
 #ifdef HAVE_BOOST_SPIRIT
-	engines["sherlock"] = false;
+	engines.insert(pair<ModuleProperties, bool>(ModuleProperties("sherlock", "Sherlock", "", ""), false));
 #endif
-	engines["opensearch"] = false;
+	engines.insert(pair<ModuleProperties, bool>(ModuleProperties("opensearch", "OpenSearch", "", ""), false));
+
 	// Library-handled engines
 	for (map<string, LoadableModule>::iterator typeIter = m_types.begin();
 		typeIter != m_types.end(); ++typeIter)
 	{
-		engines[typeIter->first] = true;
+		ModuleProperties *pProps = typeIter->second.m_pProperties;
+
+		if (pProps != NULL)
+		{
+			engines.insert(pair<ModuleProperties, bool>(*pProps, true));
+		}
 	}
 }
 

Modified: trunk/IndexSearch/ModuleFactory.h
===================================================================
--- trunk/IndexSearch/ModuleFactory.h	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/ModuleFactory.h	2008-08-19 13:40:26 UTC (rev 1337)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007,2008 Fabrice Colin
+ *  Copyright 2007-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -23,20 +23,21 @@
 #include <map>
 
 #include "IndexInterface.h"
+#include "SearchPluginProperties.h"
 #include "SearchEngineInterface.h"
 
 /// Loadable module.
 class LoadableModule
 {
 	public:
-		LoadableModule(const std::string &type, const std::string &location,
-			void *pHandle);
+		LoadableModule(ModuleProperties *pProperties,
+			const std::string &location, void *pHandle);
 		LoadableModule(const LoadableModule &other);
 		virtual ~LoadableModule();
 
 		LoadableModule &operator=(const LoadableModule &other);
 
-		std::string m_type;
+		ModuleProperties *m_pProperties;
 		std::string m_location;
 		bool m_canSearch;
 		bool m_canIndex;
@@ -71,7 +72,7 @@
 		static string getSearchEngineName(const std::string &type, const std::string &option);
 
 		/// Returns all supported engines.
-		static void getSupportedEngines(std::map<std::string, bool> &engines);
+		static void getSupportedEngines(std::map<ModuleProperties, bool> &engines);
 
 		/// Indicates whether a search engine or index is supported or not.
 		static bool isSupported(const std::string &type, bool asIndex = false);

Added: trunk/IndexSearch/ModuleProperties.h
===================================================================
--- trunk/IndexSearch/ModuleProperties.h	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/ModuleProperties.h	2008-08-19 13:40:26 UTC (rev 1337)
@@ -0,0 +1,101 @@
+/*
+ *  Copyright 2008 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _MODULE_PROPERTIES_H
+#define _MODULE_PROPERTIES_H
+
+#include <string>
+#include <set>
+
+/// Properties of a module.
+class ModuleProperties
+{
+	public:
+		ModuleProperties()
+		{
+		}
+		ModuleProperties(const std::string &name,
+			const std::string &longName,
+			const std::string &option,
+			const std::string &channel) :
+			m_name(name),
+			m_longName(longName),
+			m_option(option),
+			m_channel(channel)
+		{
+		}
+		ModuleProperties(const ModuleProperties &other) :
+			m_name(other.m_name),
+			m_longName(other.m_longName),
+			m_option(other.m_option),
+			m_channel(other.m_channel)
+		{
+		}
+		virtual ~ModuleProperties()
+		{
+		}
+
+		ModuleProperties& operator=(const ModuleProperties& other)
+		{
+			if (this != &other)
+			{
+				m_name = other.m_name;
+				m_longName = other.m_longName;
+				m_option = other.m_option;
+				m_channel = other.m_channel;
+			}
+
+			return *this;
+		}
+
+		bool operator==(const ModuleProperties &other) const
+		{
+			if ((m_name == other.m_name) &&
+				(m_longName == other.m_longName))
+			{
+				return true;
+			}
+
+			return false;
+		}
+		bool operator<(const ModuleProperties &other) const
+		{
+			if (m_name < other.m_name)
+			{
+				return true;
+			}
+			else if (m_name == other.m_name)
+			{
+				if (m_longName < other.m_longName)
+				{
+					return true;
+				}
+			}
+
+			return false;
+		}
+
+		// Description
+		std::string m_name;
+		std::string m_longName;
+		std::string m_option;
+		std::string m_channel;
+
+};
+
+#endif // _MODULE_PROPERTIES_H

Modified: trunk/IndexSearch/SearchPluginProperties.cpp
===================================================================
--- trunk/IndexSearch/SearchPluginProperties.cpp	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/SearchPluginProperties.cpp	2008-08-19 13:40:26 UTC (rev 1337)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -23,6 +23,7 @@
 using std::set;
 
 SearchPluginProperties::SearchPluginProperties() :
+	ModuleProperties(),
 	m_method(GET_METHOD),
 	m_scrolling(PER_PAGE),
 	m_nextIncrement(0),
@@ -32,10 +33,7 @@
 }
 
 SearchPluginProperties::SearchPluginProperties(const SearchPluginProperties &other) :
-	m_name(other.m_name),
-	m_longName(other.m_longName),
-	m_description(other.m_description),
-	m_channel(other.m_channel),
+	ModuleProperties(other),
 	m_languages(other.m_languages),
 	m_baseUrl(other.m_baseUrl),
 	m_method(other.m_method),
@@ -56,12 +54,10 @@
 
 SearchPluginProperties& SearchPluginProperties::operator=(const SearchPluginProperties& other)
 {
+	ModuleProperties::operator=(other);
+
 	if (this != &other)
 	{
-		m_name = other.m_name;
-		m_longName = other.m_longName;
-		m_description = other.m_description;
-		m_channel = other.m_channel;
 		m_languages = other.m_languages;
 		m_baseUrl = other.m_baseUrl;
 		m_method = other.m_method;
@@ -80,7 +76,7 @@
 
 bool SearchPluginProperties::operator==(const SearchPluginProperties &other) const
 {
-	if (m_name == other.m_name)
+	if (ModuleProperties::operator==(other) == true)
 	{
 		return true;
 	}
@@ -90,10 +86,11 @@
 
 bool SearchPluginProperties::operator<(const SearchPluginProperties &other) const
 {
-	if (m_name < other.m_name)
+	if (ModuleProperties::operator<(other) == true)
 	{
 		return true;
 	}
 
 	return false;
 }
+

Modified: trunk/IndexSearch/SearchPluginProperties.h
===================================================================
--- trunk/IndexSearch/SearchPluginProperties.h	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/SearchPluginProperties.h	2008-08-19 13:40:26 UTC (rev 1337)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -23,8 +23,10 @@
 #include <map>
 #include <set>
 
-/// Properties of a search plugin.
-class SearchPluginProperties
+#include "ModuleProperties.h"
+
+/// Properties of a search engine plugin.
+class SearchPluginProperties : public ModuleProperties
 {
 	public:
 		SearchPluginProperties();
@@ -47,10 +49,6 @@
 			RSS_RESPONSE, ATOM_RESPONSE } Response;
 
 		// Description
-		std::string m_name;
-		std::string m_longName;
-		std::string m_description;
-		std::string m_channel;
 		std::set<std::string> m_languages;
 		// Query
 		std::string m_baseUrl;

Modified: trunk/IndexSearch/Xapian/ModuleExports.cpp
===================================================================
--- trunk/IndexSearch/Xapian/ModuleExports.cpp	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/Xapian/ModuleExports.cpp	2008-08-19 13:40:26 UTC (rev 1337)
@@ -21,6 +21,7 @@
 
 #include "config.h"
 #include "Visibility.h"
+#include "ModuleProperties.h"
 #include "XapianDatabaseFactory.h"
 #include "XapianEngine.h"
 #include "XapianIndex.h"
@@ -29,7 +30,7 @@
 
 extern "C"
 {
-	PINOT_EXPORT string getModuleType(void);
+	PINOT_EXPORT ModuleProperties *getModuleProperties(void);
 	PINOT_EXPORT bool openOrCreateIndex(const string &databaseName, bool &obsoleteFormat,
 		bool readOnly, bool overwrite);
 	PINOT_EXPORT bool mergeIndexes(const string &mergedDatabaseName,
@@ -39,9 +40,9 @@
 	PINOT_EXPORT void closeAll(void);
 }
 
-string getModuleType(void)
+ModuleProperties *getModuleProperties(void)
 {
-	return "xapian";
+	return new ModuleProperties("xapian", "Xapian", "", "");
 }
 
 bool openOrCreateIndex(const string &databaseName, bool &obsoleteFormat,

Modified: trunk/IndexSearch/XesamGLib/ModuleExports.cpp
===================================================================
--- trunk/IndexSearch/XesamGLib/ModuleExports.cpp	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/XesamGLib/ModuleExports.cpp	2008-08-19 13:40:26 UTC (rev 1337)
@@ -20,20 +20,21 @@
 
 #include "config.h"
 #include "Visibility.h"
+#include "ModuleProperties.h"
 #include "XesamEngine.h"
 
 using std::string;
 
 extern "C"
 {
-	PINOT_EXPORT string getModuleType(void);
+	PINOT_EXPORT ModuleProperties *getModuleProperties(void);
 	PINOT_EXPORT SearchEngineInterface *getSearchEngine(const string &dbusObject);
 	PINOT_EXPORT void closeAll(void);
 }
 
-string getModuleType(void)
+ModuleProperties *getModuleProperties(void)
 {
-	return "xesam";
+	return new ModuleProperties("xesam", "Xesam", "", "");
 }
 
 SearchEngineInterface *getSearchEngine(const string &dbusObject)

Modified: trunk/IndexSearch/pinot-index.cpp
===================================================================
--- trunk/IndexSearch/pinot-index.cpp	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/pinot-index.cpp	2008-08-19 13:40:26 UTC (rev 1337)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -51,7 +51,7 @@
 
 static void printHelp(void)
 {
-	map<string, bool> engines;
+	map<ModuleProperties, bool> engines;
 
 	// Help
 	ModuleFactory::loadModules(string(LIBDIR) + string("/pinot/backends"));
@@ -70,12 +70,12 @@
 		<< "  -s, --showinfo            show information about the document\n"
 		<< "  -v, --version             output version information and exit\n\n"
 		<< "Supported back-ends are :";
-	for (map<string, bool>::const_iterator engineIter = engines.begin(); engineIter != engines.end(); ++engineIter)
+	for (map<ModuleProperties, bool>::const_iterator engineIter = engines.begin(); engineIter != engines.end(); ++engineIter)
 	{
 		if ((engineIter->second == true) &&
-			(ModuleFactory::isSupported(engineIter->first, true) == true))
+			(ModuleFactory::isSupported(engineIter->first.m_name, true) == true))
 		{
-			cout << " '" << engineIter->first << "'";
+			cout << " '" << engineIter->first.m_name << "'";
 		}
 	}
 	ModuleFactory::unloadModules();

Modified: trunk/IndexSearch/pinot-search.cpp
===================================================================
--- trunk/IndexSearch/pinot-search.cpp	2008-08-19 13:38:49 UTC (rev 1336)
+++ trunk/IndexSearch/pinot-search.cpp	2008-08-19 13:40:26 UTC (rev 1337)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006,2007 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -80,7 +80,7 @@
 
 static void printHelp(void)
 {
-	map<string, bool> engines;
+	map<ModuleProperties, bool> engines;
 
 	// Help
 	ModuleFactory::loadModules(string(LIBDIR) + string("/pinot/backends"));
@@ -102,9 +102,9 @@
 		<< "  -q, --xesamql             query input is a file containing Xesam QL\n"
 		<< "  -u, --xesamul             query input is a file containing Xesam UL\n\n"
 		<< "Supported search engine types are :";
-	for (map<string, bool>::const_iterator engineIter = engines.begin(); engineIter != engines.end(); ++engineIter)
+	for (map<ModuleProperties, bool>::const_iterator engineIter = engines.begin(); engineIter != engines.end(); ++engineIter)
 	{
-		cout << " '" << engineIter->first << "'";
+		cout << " '" << engineIter->first.m_name << "'";
 	}
 	cout << "\n\nExamples:\n"
 #ifdef HAVE_GOOGLEAPI



From fabricecolin at mail.berlios.de  Tue Aug 19 15:44:02 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 19 Aug 2008 15:44:02 +0200
Subject: [Pinot-svn] r1338 - trunk/UI/GTK2/src
Message-ID: <200808191344.m7JDi2RD029632@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-19 15:43:52 +0200 (Tue, 19 Aug 2008)
New Revision: 1338

Modified:
   trunk/UI/GTK2/src/EnginesTree.cpp
   trunk/UI/GTK2/src/PinotSettings.cpp
   trunk/UI/GTK2/src/PinotSettings.h
   trunk/UI/GTK2/src/mainWindow.cc
   trunk/UI/GTK2/src/prefsDialog.cc
   trunk/UI/GTK2/src/statisticsDialog.cc
Log:
Synced with the new ModuleFactory::getSupportedEngines().
Replaced PinotSettings::Engine with ModuleProperties.


Modified: trunk/UI/GTK2/src/EnginesTree.cpp
===================================================================
--- trunk/UI/GTK2/src/EnginesTree.cpp	2008-08-19 13:40:26 UTC (rev 1337)
+++ trunk/UI/GTK2/src/EnginesTree.cpp	2008-08-19 13:43:52 UTC (rev 1338)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -246,7 +246,7 @@
 //
 void EnginesTree::populate(bool indexesOnly)
 {
-	set<PinotSettings::Engine> engines;
+	set<ModuleProperties> engines;
 	ustring currentUserChannel(_("Current User"));
 	TreeModel::Row row;
 	TreeModel::iterator folderIter, localIter;
@@ -293,11 +293,11 @@
 			m_refStore->iter_swap(folderIter, localIter);
 		}
 
-		std::set<PinotSettings::Engine>::const_iterator engineIter = engines.begin();
+		std::set<ModuleProperties>::const_iterator engineIter = engines.begin();
 		for (; engineIter != engines.end(); ++engineIter)
 		{
-			string engineName(engineIter->m_name);
-			string engineType(engineIter->m_type);
+			string engineType(engineIter->m_name);
+			string engineName(engineIter->m_longName);
 
 			if (ModuleFactory::isSupported(engineType, true) == true)
 			{

Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2008-08-19 13:40:26 UTC (rev 1337)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2008-08-19 13:43:52 UTC (rev 1338)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -314,33 +314,33 @@
 
 bool PinotSettings::load(void)
 {
-	map<string, bool> engines;
-	bool hasBackends = false;
+	map<ModuleProperties, bool> engines;
+	string currentUserChannelName(_("Current User"));
 
-	// Others are available as back-ends
+	// Some engines are available as back-ends
 	ModuleFactory::getSupportedEngines(engines);
-	for (map<string, bool>::const_iterator engineIter = engines.begin();
+	for (map<ModuleProperties, bool>::const_iterator engineIter = engines.begin();
 		engineIter != engines.end(); ++engineIter)
 	{
 		if (engineIter->second == true)
 		{
-			string engineName(engineIter->first);
+			string channelName(engineIter->first.m_channel);
 
-			if (isalpha(engineName[0]) != 0)
+			m_engineIds[1 << m_engines.size()] = engineIter->first.m_name;
+
+			// Is a channel specified ?
+			if (channelName.empty() == true)
 			{
-				engineName = toupper(engineName[0]);
-				engineName += engineIter->first.substr(1);
+				channelName = currentUserChannelName;
 			}
+			m_engines.insert(engineIter->first);
 
-			m_engineIds[1 << m_engines.size()] = engineIter->first;
-			m_engines.insert(Engine(engineName, engineIter->first, "", _("Current User")));
-			hasBackends = true;
+			if (m_engineChannels.find(channelName) == m_engineChannels.end())
+			{
+				m_engineChannels.insert(pair<string, bool>(channelName, true));
+			}
 		}
 	}
-	if (hasBackends == true)
-	{
-		m_engineChannels.insert(pair<string, bool>(_("Current User"), true));
-	}
 
 	// Load the configuration file
 	string fileName = getConfigurationFileName();
@@ -1331,7 +1331,7 @@
 					{
 						properties.m_channel = _("Unclassified");
 					}
-					m_engines.insert(Engine(properties.m_name, "sherlock", location, properties.m_channel));
+					m_engines.insert(ModuleProperties("sherlock", properties.m_name, location, properties.m_channel));
 					m_engineChannels.insert(pair<string, bool>(properties.m_channel, true));
 
 					// Any editable parameters in this plugin ?
@@ -1699,7 +1699,7 @@
 }
 
 /// Returns the search engines set.
-bool PinotSettings::getSearchEngines(set<PinotSettings::Engine> &engines, string channelName) const
+bool PinotSettings::getSearchEngines(set<ModuleProperties> &engines, const string &channelName) const
 {
 	if (channelName.empty() == true)
 	{
@@ -1715,7 +1715,7 @@
 		}
 
 		// Copy engines that belong to the given channel
-		for (set<Engine>::iterator engineIter = m_engines.begin(); engineIter != m_engines.end(); ++engineIter)
+		for (set<ModuleProperties>::iterator engineIter = m_engines.begin(); engineIter != m_engines.end(); ++engineIter)
 		{
 			if (engineIter->m_channel == channelName)
 			{
@@ -1889,63 +1889,6 @@
 	return !m_isBlackList;
 }
 
-PinotSettings::Engine::Engine()
-{
-}
-
-PinotSettings::Engine::Engine(string name, string type, string option, string channel) :
-	m_name(name),
-	m_type(type),
-	m_option(option),
-	m_channel(channel)
-{
-}
-
-PinotSettings::Engine::Engine(const Engine &other) :
-	m_name(other.m_name),
-	m_type(other.m_type),
-	m_option(other.m_option),
-	m_channel(other.m_channel)
-{
-}
-
-PinotSettings::Engine::~Engine()
-{
-}
-
-PinotSettings::Engine &PinotSettings::Engine::operator=(const PinotSettings::Engine &other)
-{
-	if (this != &other)
-	{
-		m_name = other.m_name;
-		m_type = other.m_type;
-		m_option = other.m_option;
-		m_channel = other.m_channel;
-	}
-
-	return *this;
-}
-
-bool PinotSettings::Engine::operator<(const PinotSettings::Engine &other) const
-{
-	if (m_name < other.m_name)
-	{
-		return true;
-	}
-
-	return false;
-}
-
-bool PinotSettings::Engine::operator==(const Engine &other) const
-{
-	if (m_name == other.m_name)
-	{
-		return true;
-	}
-
-	return false;
-}
-
 PinotSettings::TimestampedItem::TimestampedItem() :
 	m_modTime(0)
 {

Modified: trunk/UI/GTK2/src/PinotSettings.h
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.h	2008-08-19 13:40:26 UTC (rev 1337)
+++ trunk/UI/GTK2/src/PinotSettings.h	2008-08-19 13:43:52 UTC (rev 1338)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -29,6 +29,7 @@
 #include <libxml++/nodes/element.h>
 
 #include "IndexInterface.h"
+#include "ModuleProperties.h"
 #include "QueryProperties.h"
 
 class PinotSettings
@@ -91,26 +92,8 @@
 		/// Returns an IndexInterface for the given index location.
 		IndexInterface *getIndex(const std::string &location);
 
-		class Engine
-		{
-			public:
-				Engine();
-				Engine(const Engine &other);
-				Engine(std::string name, std::string type, std::string option, std::string channel);
-				~Engine();
-
-				Engine &operator=(const Engine &other);
-				bool operator<(const Engine &other) const;
-				bool operator==(const Engine &other) const;
-
-				std::string m_name;
-				std::string m_type;
-				std::string m_option;
-				std::string m_channel;
-		};
-
 		/// Returns the search engines set.
-		bool getSearchEngines(std::set<Engine> &engines, std::string channelName = "") const;
+		bool getSearchEngines(std::set<ModuleProperties> &engines, const std::string &channelName = "") const;
 
 		/// Returns an ID that identifies the given engine name.
 		unsigned int getEngineId(const std::string &name);
@@ -224,7 +207,7 @@
 		bool m_firstRun;
 		std::map<std::string, std::string> m_indexNames;
 		std::map<unsigned int, std::string> m_indexIds;
-		std::set<Engine> m_engines;
+		std::set<ModuleProperties> m_engines;
 		std::map<unsigned int, std::string> m_engineIds;
 		std::map<std::string, bool> m_engineChannels;
 		std::map<std::string, QueryProperties> m_queries;

Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2008-08-19 13:40:26 UTC (rev 1337)
+++ trunk/UI/GTK2/src/mainWindow.cc	2008-08-19 13:43:52 UTC (rev 1338)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2008 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -3346,7 +3346,7 @@
 		if (engineType == EnginesModelColumns::WEB_ENGINE)
 		{
 			// There's a special case for the Google API...
-			if (engineName == "Google API")
+			if (engineName == "googleapi")
 			{
 				// Make sure this has been configured
 				if (m_settings.m_googleAPIKey.empty() == true)

Modified: trunk/UI/GTK2/src/prefsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.cc	2008-08-19 13:40:26 UTC (rev 1337)
+++ trunk/UI/GTK2/src/prefsDialog.cc	2008-08-19 13:43:52 UTC (rev 1338)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -126,7 +126,7 @@
 	populate_patternsTreeview(m_settings.m_filePatternsList, m_settings.m_isBlackList);
 
 	// Hide the Google API entry field ?
-	if (ModuleFactory::isSupported("Google API") == false)
+	if (ModuleFactory::isSupported("googleapi") == false)
 	{
 		apiKeyLabel->hide();
 		apiKeyEntry->hide();

Modified: trunk/UI/GTK2/src/statisticsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/statisticsDialog.cc	2008-08-19 13:40:26 UTC (rev 1337)
+++ trunk/UI/GTK2/src/statisticsDialog.cc	2008-08-19 13:43:52 UTC (rev 1338)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2008 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -74,7 +74,7 @@
 {
 	TreeModel::iterator folderIter = m_refStore->append();
 	TreeModel::Row row = *folderIter;
-	std::map<string, bool> engines;
+	std::map<ModuleProperties, bool> engines;
 
 	// Indexes
 	statisticsTreeview->get_selection()->select(folderIter);
@@ -93,12 +93,12 @@
 	row = *enginesIter;
 	row[m_statsColumns.m_name] = _("Search Engines");
 	ModuleFactory::getSupportedEngines(engines);
-	for (std::map<string, bool>::const_iterator engineIter = engines.begin();
+	for (std::map<ModuleProperties, bool>::const_iterator engineIter = engines.begin();
 		engineIter != engines.end(); ++engineIter)
 	{
 		TreeModel::iterator statIter = m_refStore->append(enginesIter->children());
 		row = *statIter;
-		row[m_statsColumns.m_name] = engineIter->first;
+		row[m_statsColumns.m_name] = engineIter->first.m_name;
 	}
 
 	// History



From fabricecolin at mail.berlios.de  Tue Aug 19 15:46:23 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 19 Aug 2008 15:46:23 +0200
Subject: [Pinot-svn] r1339 - trunk/IndexSearch/Google
Message-ID: <200808191346.m7JDkNoB029800@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-19 15:46:17 +0200 (Tue, 19 Aug 2008)
New Revision: 1339

Added:
   trunk/IndexSearch/Google/ModuleExports.cpp
Log:
Functions exported by this backend.


Added: trunk/IndexSearch/Google/ModuleExports.cpp
===================================================================
--- trunk/IndexSearch/Google/ModuleExports.cpp	2008-08-19 13:43:52 UTC (rev 1338)
+++ trunk/IndexSearch/Google/ModuleExports.cpp	2008-08-19 13:46:17 UTC (rev 1339)
@@ -0,0 +1,48 @@
+/*
+ *  Copyright 2008 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#include <string>
+
+#include "config.h"
+#include "Visibility.h"
+#include "ModuleProperties.h"
+#include "GoogleAPIEngine.h"
+
+using std::string;
+
+extern "C"
+{
+	PINOT_EXPORT ModuleProperties *getModuleProperties(void);
+	PINOT_EXPORT SearchEngineInterface *getSearchEngine(const string &apiKey);
+	PINOT_EXPORT void closeAll(void);
+}
+
+ModuleProperties *getModuleProperties(void)
+{
+	return new ModuleProperties("googleapi", "Google API", "", "The Web");
+}
+
+SearchEngineInterface *getSearchEngine(const string &apiKey)
+{
+	return new GoogleAPIEngine(dbusObject);
+}
+
+void closeAll(void)
+{
+}
+



From fabricecolin at mail.berlios.de  Sat Aug 23 14:57:43 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 23 Aug 2008 14:57:43 +0200
Subject: [Pinot-svn] r1340 - trunk/UI/GTK2/src
Message-ID: <200808231257.m7NCvhAL029021@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-23 14:57:23 +0200 (Sat, 23 Aug 2008)
New Revision: 1340

Modified:
   trunk/UI/GTK2/src/statisticsDialog.cc
   trunk/UI/GTK2/src/statisticsDialog.hh
Log:
Show extra stats only when on.


Modified: trunk/UI/GTK2/src/statisticsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/statisticsDialog.cc	2008-08-19 13:46:17 UTC (rev 1339)
+++ trunk/UI/GTK2/src/statisticsDialog.cc	2008-08-23 12:57:23 UTC (rev 1340)
@@ -43,6 +43,9 @@
 statisticsDialog::statisticsDialog() :
 	statisticsDialog_glade(),
 	m_hasErrors(false),
+	m_hasDiskSpace(false),
+	m_hasBattery(false),
+	m_hasCrawl(false),
 	m_getStats(true)
 {
 	// Associate the columns model to the engines tree
@@ -113,9 +116,6 @@
 	row = *m_daemonIter;
 	row[m_statsColumns.m_name] = _("Daemon");
 	m_daemonProcIter = m_refStore->append(m_daemonIter->children());
-	m_diskSpaceIter = m_refStore->append(m_daemonIter->children());
-	m_batteryIter = m_refStore->append(m_daemonIter->children());
-	m_crawlIter = m_refStore->append(m_daemonIter->children());
 
 	// Expand everything
 	statisticsTreeview->expand_all();
@@ -131,7 +131,6 @@
 	ViewHistory viewHistory(PinotSettings::getInstance().getHistoryDatabaseName());
 	TreeModel::Row row;
 	std::map<unsigned int, string> sources;
-	ustring yes(_("Yes")), no(_("No"));
 	string daemonDBusStatus;
 	char countStr[64];
 	bool lowDiskSpace = false, onBattery = false, crawling = false;
@@ -232,13 +231,59 @@
 	}
 
 	// Show status
-	row = *m_diskSpaceIter;
-	row[m_statsColumns.m_name] = ustring(_("Low disk space")) + ": " + (lowDiskSpace == true ? yes : no);
-	row = *m_batteryIter;
-	row[m_statsColumns.m_name] = ustring(_("On battery")) + ": " + (onBattery == true ? yes : no);
-	row = *m_crawlIter;
-	row[m_statsColumns.m_name] = ustring(_("Crawling")) + ": "+ (crawling == true ? yes : no);
+	if (lowDiskSpace == true)
+	{
+		if (m_hasDiskSpace == false)
+		{
+			m_diskSpaceIter = m_refStore->insert_after(m_daemonProcIter);
 
+			m_hasDiskSpace = true;
+		}
+		row = *m_diskSpaceIter;
+		row[m_statsColumns.m_name] = ustring(_("Low disk space"));
+	}
+	else if (m_hasDiskSpace == true)
+	{
+		m_refStore->erase(m_diskSpaceIter);
+
+		m_hasDiskSpace = false;
+	}
+	if (onBattery == true)
+	{
+		if (m_hasBattery == false)
+		{
+			m_batteryIter = m_refStore->insert_after(m_daemonProcIter);
+
+			m_hasBattery = true;
+		}
+		row = *m_batteryIter;
+		row[m_statsColumns.m_name] = ustring(_("System on battery"));
+	}
+	else if (m_hasBattery == true)
+	{
+		m_refStore->erase(m_batteryIter);
+
+		m_hasBattery = false;
+	}
+	if (crawling == true)
+	{
+		if (m_hasCrawl == false)
+		{
+			m_crawlIter = m_refStore->insert_after(m_daemonProcIter);
+
+			m_hasCrawl = true;
+		}
+
+		row = *m_crawlIter;
+		row[m_statsColumns.m_name] = ustring(_("Crawling"));
+	}
+	else if (m_hasCrawl == true)
+	{
+		m_refStore->erase(m_crawlIter);
+
+		m_hasCrawl = false;
+	}
+
 	// Show errors
 	crawlHistory.getSources(sources);
 	for (std::map<unsigned int, string>::iterator sourceIter = sources.begin();

Modified: trunk/UI/GTK2/src/statisticsDialog.hh
===================================================================
--- trunk/UI/GTK2/src/statisticsDialog.hh	2008-08-19 13:46:17 UTC (rev 1339)
+++ trunk/UI/GTK2/src/statisticsDialog.hh	2008-08-23 12:57:23 UTC (rev 1340)
@@ -50,6 +50,9 @@
 	std::map<int, Gtk::TreeModel::iterator> m_errorsIters;
 	std::map<unsigned int, time_t> m_latestErrorDates;
 	bool m_hasErrors;
+	bool m_hasDiskSpace;
+	bool m_hasBattery;
+	bool m_hasCrawl;
 	bool m_getStats;
 	sigc::connection m_idleConnection;
 



From fabricecolin at mail.berlios.de  Sat Aug 23 16:37:16 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 23 Aug 2008 16:37:16 +0200
Subject: [Pinot-svn] r1341 - trunk/IndexSearch/Google
Message-ID: <200808231437.m7NEbGO5008727@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-23 16:37:10 +0200 (Sat, 23 Aug 2008)
New Revision: 1341

Modified:
   trunk/IndexSearch/Google/ModuleExports.cpp
Log:
Fix previous commit.


Modified: trunk/IndexSearch/Google/ModuleExports.cpp
===================================================================
--- trunk/IndexSearch/Google/ModuleExports.cpp	2008-08-23 12:57:23 UTC (rev 1340)
+++ trunk/IndexSearch/Google/ModuleExports.cpp	2008-08-23 14:37:10 UTC (rev 1341)
@@ -39,7 +39,7 @@
 
 SearchEngineInterface *getSearchEngine(const string &apiKey)
 {
-	return new GoogleAPIEngine(dbusObject);
+	return new GoogleAPIEngine(apiKey);
 }
 
 void closeAll(void)



From fabricecolin at mail.berlios.de  Sat Aug 23 16:39:09 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 23 Aug 2008 16:39:09 +0200
Subject: [Pinot-svn] r1342 - trunk/UI/GTK2/src
Message-ID: <200808231439.m7NEd9nb008814@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-23 16:39:04 +0200 (Sat, 23 Aug 2008)
New Revision: 1342

Modified:
   trunk/UI/GTK2/src/PinotSettings.cpp
Log:
Create a bunch of useful default queries.


Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2008-08-23 14:37:10 UTC (rev 1341)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2008-08-23 14:39:04 UTC (rev 1342)
@@ -360,6 +360,7 @@
 		m_labels.insert(_("New"));
 		m_labels.insert(_("Personal"));
 		m_isBlackList = getDefaultPatterns(m_filePatternsList);
+
 		// Create default queries
 		struct passwd *pPasswd = getpwuid(geteuid());
 		if (pPasswd != NULL)
@@ -384,6 +385,15 @@
 				addQuery(queryProps);
 			}
 		}
+
+		QueryProperties queryProps(_("Latest First"), "dir:/");
+		queryProps.setSortOrder(QueryProperties::DATE);
+		addQuery(queryProps);
+		addQuery(QueryProperties(_("Home Stuff"), string("dir:") + getHomeDirectory()));
+		addQuery(QueryProperties(_("With Label New"), "label:New"));
+		addQuery(QueryProperties(_("Have CJKV"), "tokens:CJKV"));
+		addQuery(QueryProperties(_("In English"), "lang:en"));
+		addQuery(QueryProperties(_("10kb And Smaller"), "0..10240b"));
 	}
 
 	return true;



From fabricecolin at mail.berlios.de  Sun Aug 24 06:44:55 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 24 Aug 2008 06:44:55 +0200
Subject: [Pinot-svn] r1343 - trunk/po
Message-ID: <200808240444.m7O4itl2023017@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-24 06:43:33 +0200 (Sun, 24 Aug 2008)
New Revision: 1343

Modified:
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/it.po
   trunk/po/ja.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
   trunk/po/zh_CN.po
   trunk/po/zh_TW.po
Log:
Current translations.


Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/de.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,24 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-26 13:36+0800\n"
-"PO-Revision-Date: 2008-07-24 07:31+0000\n"
-"Last-Translator: Gena Haltmair <Unknown>\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:09+0000\n"
+"Last-Translator: Gena Haltmair <gena at haltmair.com>\n"
 "Language-Team: German <de at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-07-26 05:56+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:94
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Suchmaschinen"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Aktueller Benutzer"
 
@@ -34,9 +33,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:84
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Meine Webseiten"
 
@@ -44,9 +43,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:88 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Meine Dokumente"
 
@@ -403,7 +402,7 @@
 msgid "Query:"
 msgstr "Suchanfrage:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:107
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Verlauf"
 
@@ -411,7 +410,7 @@
 msgid "Stored queries"
 msgstr "Gespeicherte Suchanfragen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:52
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Status"
@@ -498,67 +497,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Unbekannt"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "D?nisch"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Niederl?nisch"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Englisch"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Finnisch"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Franz?sisch"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Deutsch"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "Ungarisch"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italienisch"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Norwegisch"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugiesisch"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Rum?nisch"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Spanisch"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Schwedisch"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "T?rkisch"
 
@@ -571,23 +570,48 @@
 msgstr "Konnte Verlaufsdatenbank nicht anlegen"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Wichtig"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Neu"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Pers?nlich"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "Ich"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "Englisch"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "nicht klassifiziert"
 
@@ -832,161 +856,156 @@
 msgid "Score"
 msgstr "Relevanz"
 
-#: UI/GTK2/src/statisticsDialog.cc:81
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "Indizes"
 
-#: UI/GTK2/src/statisticsDialog.cc:114
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "D?mon"
 
-#: UI/GTK2/src/statisticsDialog.cc:134
-msgid "Yes"
-msgstr ""
-
-#: UI/GTK2/src/statisticsDialog.cc:134
-#, fuzzy
-msgid "No"
-msgstr "Keine"
-
-#: UI/GTK2/src/statisticsDialog.cc:146 UI/GTK2/src/statisticsDialog.cc:162
+#: UI/GTK2/src/statisticsDialog.cc:145 UI/GTK2/src/statisticsDialog.cc:161
 msgid "documents"
 msgstr "Dokumente"
 
-#: UI/GTK2/src/statisticsDialog.cc:152 UI/GTK2/src/statisticsDialog.cc:170
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Unbekannter Fehler"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 msgid "Viewed"
 msgstr "Angesehen"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 msgid "results"
 msgstr "Ergebnisse"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "Crawled"
 msgstr "Gesammelt"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
 msgstr "Dateien"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:201
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "L?uft unter PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:222
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:226
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:230
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "L?uft derzeit nicht"
 
-#: UI/GTK2/src/statisticsDialog.cc:236
+#: UI/GTK2/src/statisticsDialog.cc:243
 msgid "Low disk space"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:238
-msgid "On battery"
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:240
+#: UI/GTK2/src/statisticsDialog.cc:278
 #, fuzzy
 msgid "Crawling"
 msgstr "Gesammelt"
 
-#: UI/GTK2/src/statisticsDialog.cc:268
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Fehler"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 msgid "Index error"
 msgstr "Indizierungsfehler"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 msgid "Couldn't index document"
 msgstr "Dokument konnte nicht indiziert werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "Dokument konnte nicht aktualisiert werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "Dokument(e) konnte(n) nicht aus dem Index entfernt werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "Suchanfrange konnte nicht in der Suchmasche ausgef?hrt werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 msgid "Couldn't get history for search engine"
 msgstr "Konnte Verlaufsdatenbank nicht anlegen"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 msgid "Couldn't retrieve document"
 msgstr "Dokument konnte nicht aktualisiert werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr "Fehler bei der Datei?berwachung"
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "Verzeichnis konnte nicht ge?ffnet werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 msgid "Index doesn't exist"
 msgstr "Index existiert nicht"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "Suchmaschine konnte nicht angelegt werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Kann Dokumenttyp nicht indizieren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr "Kein Downloadprogramm f?r dieses Protokoll vorhanden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META-Tag verbietet das Indizieren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "Kein ?berwachungsprogramm vorhanden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr "Indizierung angehalten"
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "E-Mail kann hier nicht indiziert werden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "bereits indiziert"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "auf Blacklist gesetzt"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Kein Titel"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Keine"
+
 #~ msgid "Extract"
 #~ msgstr "Auslesen"

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/es.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -5,24 +5,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-04-05 23:03+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:10+0000\n"
 "Last-Translator: Jesus Tramullas <jesus at tramullas.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-04-13 15:20+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Motores de b?squeda"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Usuario"
 
@@ -35,9 +34,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Mis Paginas Web"
 
@@ -45,9 +44,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Mis documentos"
 
@@ -402,7 +401,7 @@
 msgid "Query:"
 msgstr "B?squeda:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Hist?rico de b?squeda"
 
@@ -410,7 +409,7 @@
 msgid "Stored queries"
 msgstr "B?squedas guardadas"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Estatus"
@@ -497,67 +496,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Desconocido"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Dan?s"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Finland?s"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Alem?n"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "H?ngaro"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Noruego"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Rumano"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Ruso"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Espa?ol"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Sueco"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "Turco"
 
@@ -570,23 +569,48 @@
 msgstr "No se pudo crear la base de datos del hist?rico"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Nuevo"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Personal"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "Yo"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "Ingl?s"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "No clasificado"
 
@@ -830,11 +854,11 @@
 msgid "Score"
 msgstr "Cuenta"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "?ndices"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "Daemon"
 
@@ -843,7 +867,7 @@
 msgstr "documentos"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Error desconocido"
 
@@ -864,105 +888,122 @@
 msgstr "archivos"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "Ejecut?ndose bajo PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "No se ejecuta actualmente"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "Capturado"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Errores"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 msgid "Index error"
 msgstr "Error en el ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 msgid "Couldn't index document"
 msgstr "No se pudo indizar el documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "No se pudo actualizar el documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "No se pudo des-indizar lo(s) documento(s)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "No se pudo ejecutar la b?squeda contra el motor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 msgid "Couldn't get history for search engine"
 msgstr "No se pudo recuperar el hist?rico de b?squedas de este motor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 msgid "Couldn't retrieve document"
 msgstr "No se pudo recuperar el documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr "Error del monitor de ficheros"
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "No se pudo abrir el directorio"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 msgid "Index doesn't exist"
 msgstr "No existe el ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "No se pudo crear el motor de b?squeda"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "No se pudo indizar el tipo de documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr "No hay recuperador para este protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "La etiqueta META Robots proh?be la indizaci?n"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "No hay monitorizaci?n"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr "La indizaci?n se ha detenido"
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "No se pudo indizar el buzon de correo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "ya est? indizado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "ya excluido"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Sin t?tulo"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Ninguno"
+
 #~ msgid "Extract"
 #~ msgstr "Extra?dos"

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/fr.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -5,24 +5,26 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.82\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-26 13:36+0800\n"
-"PO-Revision-Date: 2008-07-26 13:36+0800\n"
-"Last-Translator: Fabrice Colin <fabricecolin at users.berlios.de>\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-08-24 04:19+0000\n"
+"Last-Translator: FabriceColin <fabrice.colin at gmail.com>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-02-18 14:08+0000\n"
+"X-Launchpad-Export-Date: 2008-08-24 04:24+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:94
+#~ msgid "Extract"
+#~ msgstr "Extrait"
+
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Moteurs"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Utilisateur"
 
@@ -35,9 +37,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:84
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Mes Pages Web"
 
@@ -45,9 +47,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:88 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Mes Documents"
 
@@ -191,7 +193,8 @@
 
 #: UI/GTK2/src/mainWindow.cc:258
 msgid "Updating all documents in My Web Pages is recommended"
-msgstr "Il est recommende de mettre a jour tous les documents de Mes Pages Web"
+msgstr ""
+"Il est recommende de mettre a jour tous les documents de Mes Pages Web"
 
 #: UI/GTK2/src/mainWindow.cc:266
 #, fuzzy
@@ -403,7 +406,7 @@
 msgid "Query:"
 msgstr "Recherche:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:107
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Historique"
 
@@ -411,7 +414,7 @@
 msgid "Stored queries"
 msgstr "Recherches sauvegardees"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:52
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Statistiques"
@@ -498,67 +501,67 @@
 msgstr "Fermer"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Inconnu"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Danois"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Hollandais"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Anglais"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Finlandais"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Francais"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Allemand"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "Hongrois"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italien"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Norvegien"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugais"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Roumain"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Russe"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Espagnol"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Suedois"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "Turc"
 
@@ -571,23 +574,47 @@
 msgstr "N'a pas pu creer la base d'historiques"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Important"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Nouveau"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Personnel"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "Moi"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr "Plus Recents"
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr "Mes Trucs"
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr "Avec L'Etiquette Nouveau"
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr "Avec CJKV"
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+msgid "In English"
+msgstr "En Anglais"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr "10ko Et Plus Petits"
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "Sans classification"
 
@@ -681,7 +708,8 @@
 msgstr "Etiquettes"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:113
-msgid "These directories will be indexed and optionally monitored for changes:"
+msgid ""
+"These directories will be indexed and optionally monitored for changes:"
 msgstr "Ces repertoires seront indexes automatiquement:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:126
@@ -689,9 +717,8 @@
 msgstr "Motifs de fichier:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:139
-#, fuzzy
 msgid "Reset"
-msgstr "Resultats"
+msgstr "R?initialiser"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
@@ -820,9 +847,8 @@
 msgstr "Stemming:"
 
 #: UI/GTK2/src/queryDialog_glade.cc:94
-#, fuzzy
 msgid "Only index new results"
-msgstr "Indexer uniquement ces motifs"
+msgstr "Nouveaux resultats seulement"
 
 #: UI/GTK2/src/queryDialog_glade.cc:208
 msgid "Query parameters"
@@ -833,162 +859,148 @@
 msgid "Score"
 msgstr "Score"
 
-#: UI/GTK2/src/statisticsDialog.cc:81
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "Indexes"
 
-#: UI/GTK2/src/statisticsDialog.cc:114
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "Daemon"
 
-#: UI/GTK2/src/statisticsDialog.cc:134
-msgid "Yes"
-msgstr "Oui"
-
-#: UI/GTK2/src/statisticsDialog.cc:134
-msgid "No"
-msgstr "Non"
-
-#: UI/GTK2/src/statisticsDialog.cc:146 UI/GTK2/src/statisticsDialog.cc:162
+#: UI/GTK2/src/statisticsDialog.cc:145 UI/GTK2/src/statisticsDialog.cc:161
 msgid "documents"
 msgstr "documents"
 
-#: UI/GTK2/src/statisticsDialog.cc:152 UI/GTK2/src/statisticsDialog.cc:170
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Erreur inconnue"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 msgid "Viewed"
 msgstr "Visualise"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 msgid "results"
 msgstr "resultats"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "Crawled"
 msgstr "Parcouru"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
 msgstr "fichiers"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:201
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:222
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
-msgstr "Deconnecte par D-Bus"
+msgstr "D?connect? de D-Bus"
 
-#: UI/GTK2/src/statisticsDialog.cc:226
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
-msgstr "Arrete"
+msgstr "Arr?t?"
 
-#: UI/GTK2/src/statisticsDialog.cc:230
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "Arrete"
 
-#: UI/GTK2/src/statisticsDialog.cc:236
-#, fuzzy
+#: UI/GTK2/src/statisticsDialog.cc:243
 msgid "Low disk space"
-msgstr "Espace disque bas"
+msgstr "Peu d'espace disque libre"
 
-#: UI/GTK2/src/statisticsDialog.cc:238
-#, fuzzy
-msgid "On battery"
-msgstr "Sur batterie"
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr "Syst?me sur batterie"
 
-#: UI/GTK2/src/statisticsDialog.cc:240
-#, fuzzy
+#: UI/GTK2/src/statisticsDialog.cc:278
 msgid "Crawling"
-msgstr "En train de brouter"
+msgstr "En train de parcourir"
 
-#: UI/GTK2/src/statisticsDialog.cc:268
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Erreurs"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 msgid "Index error"
 msgstr "Erreur sur l'index"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 msgid "Couldn't index document"
 msgstr "N'a pas pu indexer le document"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "N'a pas pu mettre a jour le document"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "N'a pas pu desindexer le(s) document(s)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "N'a pas pu lancer la recherche sur le moteur"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 msgid "Couldn't get history for search engine"
 msgstr "N'a pas pu obtenir l'historique de la recherche"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 msgid "Couldn't retrieve document"
 msgstr "N'a pas pu telecharger le document"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr "Erreur du moniteur de fichiers"
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "N'a pas pu ouvrir le repertoire"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 msgid "Index doesn't exist"
 msgstr "L'index n'existe pas"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "N'a pas pu creer le moteur"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Impossible d'indexer ce type de documents"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr "Pas de brouteur pour ce protocole"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Le META tag Robots interdit d'indexer"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "Pas de moniteur de fichiers disponible"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr "Indexation est arretee"
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "Ne peut pas indexer le courrier ici"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "est deja indexe"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "est exclus"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Pas de titre"
-
-#~ msgid "Extract"
-#~ msgstr "Extrait"

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/it.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,24 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-01-15 00:09+0000\n"
-"Last-Translator: Marco Bazzani <visitors at libero.it>\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:11+0000\n"
+"Last-Translator: Marco Bazzani <Unknown>\n"
 "Language-Team: Italian <it at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-02-18 14:08+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Motori di ricerca"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Utente attual"
 
@@ -34,9 +33,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Pagine web personali"
 
@@ -44,9 +43,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Documenti personali"
 
@@ -408,7 +407,7 @@
 msgid "Query:"
 msgstr "Query:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Cronologia"
 
@@ -416,7 +415,7 @@
 msgid "Stored queries"
 msgstr "Queries conservati"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Stato"
@@ -504,67 +503,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Sconosciuto"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Danese"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Olandese"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Inglese"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Finlandese"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Francese"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Tedesco"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Norvegese"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portoghese"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Spagnolo"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Svedese"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr ""
 
@@ -577,23 +576,48 @@
 msgstr "Impossibile creare una cronologia del database"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Nuovo"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Personale"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr ""
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "Inglese"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "Non classificato"
 
@@ -844,11 +868,11 @@
 msgid "Score"
 msgstr "Punteggio"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "Indici"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "Demone"
 
@@ -857,7 +881,7 @@
 msgstr "documenti"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "errore Sconosciuto"
 
@@ -878,111 +902,128 @@
 msgstr "files"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "Avviato con PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "Attualmente non in esecuzione"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "Analizzati"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Errori"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 #, fuzzy
 msgid "Index error"
 msgstr "Errori indice su"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 #, fuzzy
 msgid "Couldn't index document"
 msgstr "Impossiible rimuovere i(l) documento/i dall'indice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "Impossibile aggiornare il documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "Impossiible rimuovere i(l) documento/i dall'indice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "Impossibile avviare un query sul motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 #, fuzzy
 msgid "Couldn't get history for search engine"
 msgstr "Impossibile avviare un query sul motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 #, fuzzy
 msgid "Couldn't retrieve document"
 msgstr "Impossibile aggiornare il documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "Impossibile aprire la directory"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 #, fuzzy
 msgid "Index doesn't exist"
 msgstr "non esiste"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "Impossibile creare un motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Impossibile indicizzare tipo di documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 #, fuzzy
 msgid "No downloader for this protocol"
 msgstr "Impossibile ottenere un downloader per il protocollo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "il Robots META tag vieta l'indicizzazione"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "Impossibile indicizzare la mail qui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "? gia' stato indicizzato"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "e' blacklistato"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Nessun titolo"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Nessuno"
+
 #~ msgid "Extract"
 #~ msgstr "Estrai"

Modified: trunk/po/ja.po
===================================================================
--- trunk/po/ja.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/ja.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -5,24 +5,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-05-08 02:15+0000\n"
-"Last-Translator: Takeo Mizuki <Unknown>\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:11+0000\n"
+"Last-Translator: FabriceColin <fabrice.colin at gmail.com>\n"
 "Language-Team: Japanese <ja at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-05-08 12:56+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "??????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "???????"
 
@@ -35,9 +34,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "????????"
 
@@ -45,9 +44,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "????????"
 
@@ -404,7 +403,7 @@
 msgid "Query:"
 msgstr "????:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "??"
 
@@ -412,7 +411,7 @@
 msgid "Stored queries"
 msgstr "?????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "?????"
@@ -499,67 +498,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "????"
 
@@ -572,23 +571,48 @@
 msgstr "????????????????"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "??"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "????"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "???"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "??"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "??"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "???"
 
@@ -833,11 +857,11 @@
 msgid "Score"
 msgstr "???"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "??????"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "????"
 
@@ -846,7 +870,7 @@
 msgstr "??"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "??????"
 
@@ -867,105 +891,122 @@
 msgstr "????"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "??? PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "?????"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "HTTP??????"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "???"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 msgid "Index error"
 msgstr "?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 msgid "Couldn't index document"
 msgstr "?????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "???????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 msgid "Couldn't get history for search engine"
 msgstr "??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 msgid "Couldn't retrieve document"
 msgstr "??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr "???????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 msgid "Index doesn't exist"
 msgstr "?????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "??????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "????????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr "????????????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "????????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "?????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr "???????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "?????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "??????"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "??"
+
 #~ msgid "Extract"
 #~ msgstr "??"

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/nl.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,24 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-01-15 00:13+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:12+0000\n"
 "Last-Translator: JW <jw00000 at gmail.com>\n"
 "Language-Team: Dutch <nl at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-02-18 14:08+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Zoekmachines"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Huidige gebruiker"
 
@@ -34,9 +33,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Mijn webpagina's"
 
@@ -44,9 +43,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Mijn documenten"
 
@@ -403,7 +402,7 @@
 msgid "Query:"
 msgstr "Query:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Geschiedenis"
 
@@ -411,7 +410,7 @@
 msgid "Stored queries"
 msgstr "Opgeslagen queries"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Status"
@@ -498,67 +497,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Niet bekend"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Deens"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Nederlands"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Engels"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Fins"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Frans"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Duits"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "Hongaars"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italiaans"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Noors"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugees"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Roemeens"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Spaans"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Zweeds"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "Turks"
 
@@ -571,23 +570,48 @@
 msgstr "Kon historische database niet maken"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Belangrijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Nieuw"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Persoonlijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "Ik"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "Engels"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "Niet geclassificeerd"
 
@@ -834,11 +858,11 @@
 msgid "Score"
 msgstr "Score"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "Indexen"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "Daemon"
 
@@ -847,7 +871,7 @@
 msgstr "documenten"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Onbekende fout."
 
@@ -868,105 +892,122 @@
 msgstr "bestanden"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "Wordt uitgevoerd on het PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "Wordt momenteel niet uitgevoerd"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "Gecrawld"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Fouten"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 msgid "Index error"
 msgstr "Indexfout"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 msgid "Couldn't index document"
 msgstr "Het document kon niet ge?ndexeerd worden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "Kan document niet actualiseren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "Kan indexering van bestand(en) niet ongedaan maken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "Kon query niet uitvoeren op zoekmachine"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 msgid "Couldn't get history for search engine"
 msgstr "De geschiedenis voor de zoekmachine kon niet verkregen worden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 msgid "Couldn't retrieve document"
 msgstr "Het document kon niet verkregen worden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "De map kon niet geopend worden"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 msgid "Index doesn't exist"
 msgstr "De index bestaat niet"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "Kon zoekmachine niet maken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Kan documenttype niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr "Er is geen downloader voor dit protocol"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META taf verbiedt indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "Geen monitoring handler"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "Kan mail hier niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "wordt al geindexeerd"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "staat op blacklist"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Geen titel"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Geen"
+
 #~ msgid "Extract"
 #~ msgstr "Uitpakken"

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/pt.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,24 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-01-15 00:12+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:13+0000\n"
 "Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-02-18 14:08+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Motores de pesquisa"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 #, fuzzy
 msgid "Current User"
 msgstr "Utilizador corrente"
@@ -35,9 +34,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "As minhas p?ginas Web"
 
@@ -45,9 +44,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Os Meus Documentos"
 
@@ -409,7 +408,7 @@
 msgid "Query:"
 msgstr "Pesquisa:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Hist?rico"
 
@@ -417,7 +416,7 @@
 msgid "Stored queries"
 msgstr "Consultas armazenadas"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Situa??o"
@@ -505,67 +504,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Dinamarqu?s"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Finl?ndes"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Alem?o"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "H?ngaro"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Noruegu?s"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Romeno"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Espanhol"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Sueco"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "Turco"
 
@@ -578,23 +577,48 @@
 msgstr "N?o foi poss?vel criar base de dados do hist?rico"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Novo"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr ""
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "Ingl?s"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -844,11 +868,11 @@
 msgid "Score"
 msgstr "Pontua??o"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "?ndices"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "Daemon"
 
@@ -857,7 +881,7 @@
 msgstr "documentos"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Erro desconhecido"
 
@@ -878,112 +902,129 @@
 msgstr "ficheiros"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "A correr com o PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "Presentemente n?o est? a correr"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "HTTP crawling:"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Erros"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 #, fuzzy
 msgid "Index error"
 msgstr "Erro na indexa??o em"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 #, fuzzy
 msgid "Couldn't index document"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "N?o foi poss?vel actualizar o documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "N?o foi poss?vel efectuar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 #, fuzzy
 msgid "Couldn't get history for search engine"
 msgstr "N?o foi poss?vel efectuar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 #, fuzzy
 msgid "Couldn't retrieve document"
 msgstr "N?o foi poss?vel actualizar o documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 #, fuzzy
 msgid "Couldn't open directory"
 msgstr "N?o foi poss?vel abrir o ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 #, fuzzy
 msgid "Index doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Imposs?vel indexar tipo de ficheiro"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 #, fuzzy
 msgid "No downloader for this protocol"
 msgstr "N?o foi poss?vel obter fonte de transfer?ncia para o protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META tag n?o s?o permitidos no ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "N?o foi poss?vel indexar o mail aqui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "j? est? a ser indexado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "est? na lista negra"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Sem t?tulo"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Nenhum"
+
 #~ msgid "Extract"
 #~ msgstr "Extrair"

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/pt_BR.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,24 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-26 13:36+0800\n"
-"PO-Revision-Date: 2008-07-24 12:01+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:13+0000\n"
 "Last-Translator: Rafael Porto Rodrigues <rafporto at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-07-26 05:56+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:94
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "Mecanismos de Pesquisa"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Usu?rio atual"
 
@@ -34,9 +33,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:84
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Minhas P?ginas Web"
 
@@ -44,9 +43,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:88 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Meus Documentos"
 
@@ -408,7 +407,7 @@
 msgid "Query:"
 msgstr "Consulta:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:107
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 #, fuzzy
 msgid "History"
 msgstr "Diret?rio"
@@ -417,7 +416,7 @@
 msgid "Stored queries"
 msgstr "Consultas armazenadas"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:52
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Estado"
@@ -505,67 +504,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Danish"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Dutch"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "English"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Terminar"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "French"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "German"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "H?ngaro"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italian"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Norwegian"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Romeno"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Russian"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Spanish"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Swedish"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "Turco"
 
@@ -578,23 +577,48 @@
 msgstr "N?o foi poss?vel criar base de hist?rico"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Novo"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "Eu"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "English"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -849,172 +873,167 @@
 msgid "Score"
 msgstr "Pontua??o"
 
-#: UI/GTK2/src/statisticsDialog.cc:81
+#: UI/GTK2/src/statisticsDialog.cc:84
 #, fuzzy
 msgid "Indexes"
 msgstr "Indexado"
 
-#: UI/GTK2/src/statisticsDialog.cc:114
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:134
-msgid "Yes"
-msgstr ""
-
-#: UI/GTK2/src/statisticsDialog.cc:134
+#: UI/GTK2/src/statisticsDialog.cc:145 UI/GTK2/src/statisticsDialog.cc:161
 #, fuzzy
-msgid "No"
-msgstr "Nenhum"
-
-#: UI/GTK2/src/statisticsDialog.cc:146 UI/GTK2/src/statisticsDialog.cc:162
-#, fuzzy
 msgid "documents"
 msgstr "Meus Documentos"
 
-#: UI/GTK2/src/statisticsDialog.cc:152 UI/GTK2/src/statisticsDialog.cc:170
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Erro desconhecido"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 #, fuzzy
 msgid "Viewed"
 msgstr "Visualizar"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 #, fuzzy
 msgid "results"
 msgstr "_Resultados"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "Crawled"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
 msgstr "arquivos"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:201
+#: UI/GTK2/src/statisticsDialog.cc:200
 #, fuzzy
 msgid "Running under PID"
 msgstr "Executando consulta"
 
-#: UI/GTK2/src/statisticsDialog.cc:222
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:226
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:230
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "N?o executando atualmente"
 
-#: UI/GTK2/src/statisticsDialog.cc:236
+#: UI/GTK2/src/statisticsDialog.cc:243
 msgid "Low disk space"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:238
-msgid "On battery"
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:240
+#: UI/GTK2/src/statisticsDialog.cc:278
 #, fuzzy
 msgid "Crawling"
 msgstr "HTTP crawling:"
 
-#: UI/GTK2/src/statisticsDialog.cc:268
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Erros"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 #, fuzzy
 msgid "Index error"
 msgstr "Erro no ?ndice no"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 #, fuzzy
 msgid "Couldn't index document"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "N?o foi poss?vel atualizar documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "N?o foi poss?vel executar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 #, fuzzy
 msgid "Couldn't get history for search engine"
 msgstr "N?o foi poss?vel executar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 #, fuzzy
 msgid "Couldn't retrieve document"
 msgstr "N?o foi poss?vel atualizar documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr "Monitor de erros de arquivo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "N?o foi poss?vel abrir diret?rio"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 #, fuzzy
 msgid "Index doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Imposs?vel indexar tipo de arquivo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 #, fuzzy
 msgid "No downloader for this protocol"
 msgstr "N?o foi poss?vel obter fonte de download para o protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META tag n?o s?o permitidos no ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "Nenhum manipulador de monitoramento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr "?ndice foi parado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "N?o foi poss?vel indexar mail aqui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "j? est? sendo indexado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "est? na lista negra"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Sem t?tulo"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Nenhum"
+
 #~ msgid "Extract"
 #~ msgstr "Extrair"

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/ru.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,24 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-01-15 00:16+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:13+0000\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-02-18 14:08+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "????????? ??????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "??????? ????????????"
 
@@ -34,9 +33,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "??? web-????????"
 
@@ -44,9 +43,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "??? ?????????"
 
@@ -408,7 +407,7 @@
 msgid "Query:"
 msgstr "??????:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 #, fuzzy
 msgid "History"
 msgstr "???????? ??????????"
@@ -417,7 +416,7 @@
 msgid "Stored queries"
 msgstr "??????????? ???????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr ""
@@ -505,67 +504,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "?????????????"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "?????????"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr ""
 
@@ -578,23 +577,48 @@
 msgstr "?? ??????? ??????? ???? ?????? ???????"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "?????"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "???????"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "??????"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr ""
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "??????????"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "??????????????"
 
@@ -845,12 +869,12 @@
 msgid "Score"
 msgstr "????"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 #, fuzzy
 msgid "Indexes"
 msgstr "?????????????"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr ""
 
@@ -860,7 +884,7 @@
 msgstr "??? ?????????"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr ""
 
@@ -883,112 +907,129 @@
 msgstr ""
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 #, fuzzy
 msgid "Running under PID"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr ""
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "HTTP ????????????:"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 #, fuzzy
 msgid "Index error"
 msgstr "?????? ??????? ??"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 #, fuzzy
 msgid "Couldn't index document"
 msgstr "?????????? ??????????????? ????????(?)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "?????????? ???????? ????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "?????????? ??????????????? ????????(?)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "?? ??????? ????????? ?????? ? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 #, fuzzy
 msgid "Couldn't get history for search engine"
 msgstr "?? ??????? ????????? ?????? ? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 #, fuzzy
 msgid "Couldn't retrieve document"
 msgstr "?????????? ???????? ????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "?????????? ??????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 #, fuzzy
 msgid "Index doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "?? ??????? ??????? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "?????????? ????????????? ?????? ??? ??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 #, fuzzy
 msgid "No downloader for this protocol"
 msgstr "?? ??????? ???????? ????????? ??? ?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "META-???? ??????? ????????? ??????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "??? ???????? ???????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "?????? ????????????? ????? ?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "??? ??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "??????????? ? ?????? ??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "??? ????????"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "???"
+
 #~ msgid "Extract"
 #~ msgstr "??????????"

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/sv.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -5,24 +5,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-26 13:36+0800\n"
-"PO-Revision-Date: 2008-07-23 21:55+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-31 11:21+0000\n"
 "Last-Translator: Daniel Nylander <yeager at ubuntu.com>\n"
 "Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-07-26 05:56+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:94
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "S?kmotorer"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "Aktuell anv?ndare"
 
@@ -35,9 +34,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:84
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "Mina webbsidor"
 
@@ -45,9 +44,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:88 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "Mina dokument"
 
@@ -402,7 +401,7 @@
 msgid "Query:"
 msgstr "Fr?ga:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:107
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "Historik"
 
@@ -410,7 +409,7 @@
 msgid "Stored queries"
 msgstr "Lagrade fr?gor"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:52
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "Status"
@@ -497,67 +496,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr "Ok?nd"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "Danska"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "Nederl?ndska"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "Engelska"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "Finska"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "Franska"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "Tyska"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "Ungerska"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "Italienska"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "Norska"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "Portugisiska"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "Rum?nska"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "Ryska"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "Spanska"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "Svenska"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "Turkiska"
 
@@ -570,23 +569,48 @@
 msgstr "Kunde inte skapa historikdatabas"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "Viktigt"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "Ny"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "Personlig"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr "Jag"
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "Engelska"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "Oklassificerad"
 
@@ -766,7 +790,7 @@
 
 #: UI/GTK2/src/queryDialog.cc:118
 msgid "MIME class"
-msgstr ""
+msgstr "MIME-klass"
 
 #: UI/GTK2/src/queryDialog.cc:119
 msgid "Label"
@@ -816,7 +840,7 @@
 
 #: UI/GTK2/src/queryDialog_glade.cc:93
 msgid "Stemming:"
-msgstr ""
+msgstr "Bildande av ordstam:"
 
 #: UI/GTK2/src/queryDialog_glade.cc:94
 #, fuzzy
@@ -832,161 +856,156 @@
 msgid "Score"
 msgstr "Betyg"
 
-#: UI/GTK2/src/statisticsDialog.cc:81
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "Index"
 
-#: UI/GTK2/src/statisticsDialog.cc:114
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "Demon"
 
-#: UI/GTK2/src/statisticsDialog.cc:134
-msgid "Yes"
-msgstr ""
-
-#: UI/GTK2/src/statisticsDialog.cc:134
-#, fuzzy
-msgid "No"
-msgstr "Ingen"
-
-#: UI/GTK2/src/statisticsDialog.cc:146 UI/GTK2/src/statisticsDialog.cc:162
+#: UI/GTK2/src/statisticsDialog.cc:145 UI/GTK2/src/statisticsDialog.cc:161
 msgid "documents"
 msgstr "dokument"
 
-#: UI/GTK2/src/statisticsDialog.cc:152 UI/GTK2/src/statisticsDialog.cc:170
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "Ok?nt fel"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 msgid "Viewed"
 msgstr "Visad"
 
-#: UI/GTK2/src/statisticsDialog.cc:177
+#: UI/GTK2/src/statisticsDialog.cc:176
 msgid "results"
 msgstr "resultat"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "Crawled"
 msgstr "Insamlad"
 
-#: UI/GTK2/src/statisticsDialog.cc:183
+#: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
 msgstr "filer"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:201
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "K?r under PID"
 
-#: UI/GTK2/src/statisticsDialog.cc:222
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:226
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:230
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "K?r f?r tillf?llet inte"
 
-#: UI/GTK2/src/statisticsDialog.cc:236
+#: UI/GTK2/src/statisticsDialog.cc:243
 msgid "Low disk space"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:238
-msgid "On battery"
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:240
+#: UI/GTK2/src/statisticsDialog.cc:278
 #, fuzzy
 msgid "Crawling"
 msgstr "Insamlad"
 
-#: UI/GTK2/src/statisticsDialog.cc:268
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "Fel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 msgid "Index error"
 msgstr "Indexfel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 msgid "Couldn't index document"
 msgstr "Kunde inte indexera dokument"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "Kunde inte uppdatera dokument"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "Kunde inte avindexera dokument"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "Kunde inte k?ra fr?ga p? s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 msgid "Couldn't get history for search engine"
 msgstr "Kunde inte h?mta historik f?r s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 msgid "Couldn't retrieve document"
 msgstr "Kunde inte h?mta dokument"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
-msgstr ""
+msgstr "Fel i fil?vervakare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 msgid "Couldn't open directory"
 msgstr "Kunde inte ?ppna katalog"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 msgid "Index doesn't exist"
 msgstr "Indexet finns inte"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "Kunde inte skapa s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "Kan inte indexera dokumenttyp"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr "Ingen h?mtare f?r detta protokoll"
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META-tagg f?rbjuder indexering"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr "Ingen ?vervakningshanterare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
-msgstr ""
+msgstr "Indexeringen stoppades"
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "Kan inte indexera post h?r"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "h?ller redan p? att bli indexerad"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "?r svartlistad"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "Ingen titel"
 
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "Ingen"
+
 #~ msgid "Extract"
 #~ msgstr "Utdrag"

Modified: trunk/po/zh_CN.po
===================================================================
--- trunk/po/zh_CN.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/zh_CN.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -4,21 +4,23 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.87\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-03-24 14:32+0800\n"
-"Last-Translator: Ashlee Ma <ashlee8310 at hotmail.com>\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-08-07 15:44+0000\n"
+"Last-Translator: rainofchaos <rainofchaos at gmail.com>\n"
+"Language-Team: LANGUAGE <LL at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
+"X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "??????"
 
@@ -31,9 +33,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "????"
 
@@ -41,9 +43,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "????"
 
@@ -403,7 +405,7 @@
 msgid "Query:"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "????"
 
@@ -411,7 +413,7 @@
 msgid "Stored queries"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "??"
@@ -488,7 +490,7 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Help"
-msgstr "??(_H)"
+msgstr "?? (_H)"
 
 #: UI/GTK2/src/mainWindow_glade.cc:377
 msgid "Pinot"
@@ -499,67 +501,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "????"
 
@@ -572,23 +574,48 @@
 msgstr "?????????"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "???"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "??"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "????"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr ""
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "??"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "????"
 
@@ -838,11 +865,11 @@
 msgid "Score"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "????"
 
@@ -851,7 +878,7 @@
 msgstr "??"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "???????"
 
@@ -872,108 +899,125 @@
 msgstr "??"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "?????????"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "??????"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "????"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "??"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 #, fuzzy
 msgid "Index error"
 msgstr "?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 #, fuzzy
 msgid "Couldn't index document"
 msgstr "?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 #, fuzzy
 msgid "Couldn't get history for search engine"
 msgstr "??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 #, fuzzy
 msgid "Couldn't retrieve document"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 #, fuzzy
 msgid "Couldn't open directory"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 #, fuzzy
 msgid "Index doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots?meta???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "???"
+
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "?"

Modified: trunk/po/zh_TW.po
===================================================================
--- trunk/po/zh_TW.po	2008-08-23 14:39:04 UTC (rev 1342)
+++ trunk/po/zh_TW.po	2008-08-24 04:43:33 UTC (rev 1343)
@@ -7,22 +7,21 @@
 msgstr ""
 "Project-Id-Version: pinot 0.87\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2008-07-19 16:20+0800\n"
-"PO-Revision-Date: 2008-01-15 00:13+0000\n"
+"POT-Creation-Date: 2008-08-23 23:22+0800\n"
+"PO-Revision-Date: 2008-07-26 12:18+0000\n"
 "Last-Translator: Yung-chung Lin <henearkrxern at gmail.com>\n"
 "Language-Team: Traditional Chinese <zh_TW at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-02-18 14:08+0000\n"
+"X-Launchpad-Export-Date: 2008-08-23 14:16+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:89
+#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:97
 msgid "Search Engines"
 msgstr "????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:342
-#: UI/GTK2/src/PinotSettings.cpp:348
+#: UI/GTK2/src/EnginesTree.cpp:250 UI/GTK2/src/PinotSettings.cpp:318
 msgid "Current User"
 msgstr "??????"
 
@@ -35,9 +34,9 @@
 #: UI/GTK2/src/mainWindow.cc:1531 UI/GTK2/src/mainWindow.cc:1534
 #: UI/GTK2/src/mainWindow.cc:1626 UI/GTK2/src/mainWindow.cc:1662
 #: UI/GTK2/src/mainWindow.cc:1684 UI/GTK2/src/mainWindow.cc:2395
-#: UI/GTK2/src/PinotSettings.cpp:359 UI/GTK2/src/PinotSettings.cpp:1570
-#: UI/GTK2/src/PinotSettings.cpp:1626 UI/GTK2/src/statisticsDialog.cc:79
-#: UI/GTK2/src/WorkerThreads.cpp:1010
+#: UI/GTK2/src/PinotSettings.cpp:353 UI/GTK2/src/PinotSettings.cpp:1574
+#: UI/GTK2/src/PinotSettings.cpp:1630 UI/GTK2/src/statisticsDialog.cc:87
+#: UI/GTK2/src/WorkerThreads.cpp:1011
 msgid "My Web Pages"
 msgstr "????"
 
@@ -45,9 +44,9 @@
 #: UI/GTK2/src/EnginesTree.cpp:356 UI/GTK2/src/mainWindow.cc:864
 #: UI/GTK2/src/mainWindow.cc:1079 UI/GTK2/src/mainWindow.cc:1385
 #: UI/GTK2/src/mainWindow.cc:1542 UI/GTK2/src/mainWindow.cc:1545
-#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:360
-#: UI/GTK2/src/PinotSettings.cpp:1571 UI/GTK2/src/PinotSettings.cpp:1627
-#: UI/GTK2/src/statisticsDialog.cc:83 UI/GTK2/src/WorkerThreads.cpp:1020
+#: UI/GTK2/src/mainWindow.cc:2399 UI/GTK2/src/PinotSettings.cpp:354
+#: UI/GTK2/src/PinotSettings.cpp:1575 UI/GTK2/src/PinotSettings.cpp:1631
+#: UI/GTK2/src/statisticsDialog.cc:91 UI/GTK2/src/WorkerThreads.cpp:1021
 msgid "My Documents"
 msgstr "????"
 
@@ -407,7 +406,7 @@
 msgid "Query:"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:102
+#: UI/GTK2/src/mainWindow_glade.cc:137 UI/GTK2/src/statisticsDialog.cc:110
 msgid "History"
 msgstr "????"
 
@@ -415,7 +414,7 @@
 msgid "Stored queries"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:155 UI/GTK2/src/statisticsDialog.cc:55
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
 msgid "Status"
 msgstr "??"
@@ -503,67 +502,67 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:492
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:442
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:493
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:443
 msgid "Danish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:494
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:444
 msgid "Dutch"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:495
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:445
 msgid "English"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:496
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:446
 msgid "Finnish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:497
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:447
 msgid "French"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:498
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:448
 msgid "German"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:499
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:449
 msgid "Hungarian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:500
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:450
 msgid "Italian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:501
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:451
 msgid "Norwegian"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:502
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:452
 msgid "Portuguese"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:503
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:453
 msgid "Romanian"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:504
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:454
 msgid "Russian"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:505
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:455
 msgid "Spanish"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:506
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:456
 msgid "Swedish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:507
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:457
 msgid "Turkish"
 msgstr "????"
 
@@ -576,23 +575,48 @@
 msgstr "?????????"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:365
+#: UI/GTK2/src/PinotSettings.cpp:359
 msgid "Important"
 msgstr "???"
 
-#: UI/GTK2/src/PinotSettings.cpp:366
+#: UI/GTK2/src/PinotSettings.cpp:360
 msgid "New"
 msgstr "??"
 
-#: UI/GTK2/src/PinotSettings.cpp:367
+#: UI/GTK2/src/PinotSettings.cpp:361
 msgid "Personal"
 msgstr "????"
 
-#: UI/GTK2/src/PinotSettings.cpp:387
+#: UI/GTK2/src/PinotSettings.cpp:382
 msgid "Me"
 msgstr ""
 
-#: UI/GTK2/src/PinotSettings.cpp:1338
+#: UI/GTK2/src/PinotSettings.cpp:389
+msgid "Latest First"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:392
+msgid "Home Stuff"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:393
+msgid "With Label New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:394
+msgid "Have CJKV"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:395
+#, fuzzy
+msgid "In English"
+msgstr "??"
+
+#: UI/GTK2/src/PinotSettings.cpp:396
+msgid "10kb And Smaller"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1342
 msgid "Unclassified"
 msgstr "????"
 
@@ -842,11 +866,11 @@
 msgid "Score"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:76
+#: UI/GTK2/src/statisticsDialog.cc:84
 msgid "Indexes"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:109
+#: UI/GTK2/src/statisticsDialog.cc:117
 msgid "Daemon"
 msgstr "????"
 
@@ -855,7 +879,7 @@
 msgstr "??"
 
 #: UI/GTK2/src/statisticsDialog.cc:151 UI/GTK2/src/statisticsDialog.cc:169
-#: UI/GTK2/src/WorkerThreads.cpp:125
+#: UI/GTK2/src/WorkerThreads.cpp:126
 msgid "Unknown error"
 msgstr "???????"
 
@@ -876,108 +900,125 @@
 msgstr "??"
 
 #. FIXME: check whether it's actually running !
-#: UI/GTK2/src/statisticsDialog.cc:199
+#: UI/GTK2/src/statisticsDialog.cc:200
 msgid "Running under PID"
 msgstr "?????????"
 
-#: UI/GTK2/src/statisticsDialog.cc:205
+#: UI/GTK2/src/statisticsDialog.cc:221
 msgid "Disconnected from D-Bus"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:209
+#: UI/GTK2/src/statisticsDialog.cc:225
 msgid "Stopped"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:213
+#: UI/GTK2/src/statisticsDialog.cc:229
 msgid "Currently not running"
 msgstr "???????"
 
 #: UI/GTK2/src/statisticsDialog.cc:243
+msgid "Low disk space"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:260
+msgid "System on battery"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:278
+#, fuzzy
+msgid "Crawling"
+msgstr "????"
+
+#: UI/GTK2/src/statisticsDialog.cc:313
 msgid "Errors"
 msgstr "??"
 
-#: UI/GTK2/src/WorkerThreads.cpp:92
+#: UI/GTK2/src/WorkerThreads.cpp:93
 #, fuzzy
 msgid "Index error"
 msgstr "?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:94
+#: UI/GTK2/src/WorkerThreads.cpp:95
 #, fuzzy
 msgid "Couldn't index document"
 msgstr "?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:96
+#: UI/GTK2/src/WorkerThreads.cpp:97
 msgid "Couldn't update document"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:98
+#: UI/GTK2/src/WorkerThreads.cpp:99
 msgid "Couldn't unindex document(s)"
 msgstr "?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:100
+#: UI/GTK2/src/WorkerThreads.cpp:101
 msgid "Couldn't run query on search engine"
 msgstr "??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:102
+#: UI/GTK2/src/WorkerThreads.cpp:103
 #, fuzzy
 msgid "Couldn't get history for search engine"
 msgstr "??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:104
+#: UI/GTK2/src/WorkerThreads.cpp:105
 #, fuzzy
 msgid "Couldn't retrieve document"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:106
+#: UI/GTK2/src/WorkerThreads.cpp:107
 msgid "File monitor error"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:108
+#: UI/GTK2/src/WorkerThreads.cpp:109
 #, fuzzy
 msgid "Couldn't open directory"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:110
+#: UI/GTK2/src/WorkerThreads.cpp:111
 #, fuzzy
 msgid "Index doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/WorkerThreads.cpp:112
+#: UI/GTK2/src/WorkerThreads.cpp:113
 msgid "Couldn't create search engine"
 msgstr "????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:114
+#: UI/GTK2/src/WorkerThreads.cpp:115
 msgid "Cannot index document type"
 msgstr "????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:116
+#: UI/GTK2/src/WorkerThreads.cpp:117
 msgid "No downloader for this protocol"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:118
+#: UI/GTK2/src/WorkerThreads.cpp:119
 msgid "Robots META tag forbids indexing"
 msgstr "Robots?meta???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:120
+#: UI/GTK2/src/WorkerThreads.cpp:121
 msgid "No monitoring handler"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:417
+#: UI/GTK2/src/WorkerThreads.cpp:418
 msgid "Indexing was stopped"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:430
+#: UI/GTK2/src/WorkerThreads.cpp:431
 msgid "Can't index mail here"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:451 UI/GTK2/src/WorkerThreads.cpp:716
+#: UI/GTK2/src/WorkerThreads.cpp:452 UI/GTK2/src/WorkerThreads.cpp:717
 msgid "is already being indexed"
 msgstr "??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:461
+#: UI/GTK2/src/WorkerThreads.cpp:462
 msgid "is blacklisted"
 msgstr "?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:973
+#: UI/GTK2/src/WorkerThreads.cpp:974
 msgid "No title"
 msgstr "???"
+
+#, fuzzy
+#~ msgid "No"
+#~ msgstr "?"



From fabricecolin at mail.berlios.de  Mon Aug 25 16:46:16 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Mon, 25 Aug 2008 16:46:16 +0200
Subject: [Pinot-svn] r1344 - in trunk: . IndexSearch
Message-ID: <200808251446.m7PEkGDf030752@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-25 16:46:08 +0200 (Mon, 25 Aug 2008)
New Revision: 1344

Modified:
   trunk/IndexSearch/pinot-search.cpp
   trunk/README
Log:
Explain to what extent Xesam specs are supported; pinot-search's help text has
some examples now.
Clarify that building the Google API is not recommended, and how to use filters
in CJKV queries.


Modified: trunk/IndexSearch/pinot-search.cpp
===================================================================
--- trunk/IndexSearch/pinot-search.cpp	2008-08-24 04:43:33 UTC (rev 1343)
+++ trunk/IndexSearch/pinot-search.cpp	2008-08-25 14:46:08 UTC (rev 1344)
@@ -107,13 +107,13 @@
 		cout << " '" << engineIter->first.m_name << "'";
 	}
 	cout << "\n\nExamples:\n"
-#ifdef HAVE_GOOGLEAPI
-		<< "pinot-search googleapi mygoogleapikey \"clowns\"\n\n"
-#endif
 		<< "pinot-search opensearch " << PREFIX << "/share/pinot/engines/KrustyDescription.xml \"clowns\"\n\n"
 		<< "pinot-search --max 20 sherlock --seteditable \"Bozo App ID:1234567890\" " << PREFIX << "/share/pinot/engines/Bozo.src \"clowns\"\n\n"
+		<< "pinot-search googleapi mygoogleapikey \"clowns\"\n\n"
 		<< "pinot-search xapian ~/.pinot/index \"label:Clowns\"\n\n"
 		<< "pinot-search --stemming english xapian somehostname:12345 \"clowning\"\n\n"
+		<< "pinot-search --xesamul xapian ~/.pinot/index some_xesamul_query.txt\n\n"
+		<< "pinot-search --xesamql xesam - some_xesamql_query.xml\n\n"
 		<< "Report bugs to " << PACKAGE_BUGREPORT << endl;
 }
 

Modified: trunk/README
===================================================================
--- trunk/README	2008-08-24 04:43:33 UTC (rev 1343)
+++ trunk/README	2008-08-25 14:46:08 UTC (rev 1344)
@@ -109,10 +109,11 @@
   content".
 
   If the version of Pinot you are using was built with support for the Google
-  SOAP API, a "Google API" engine will appear in the group The Web. To query
-  this engine, create an account at http://api.google.com/. You will then
-  receive a Google API key by email. Enter this key in the corresponding
-  field in the General tab of the Preferences box.
+  SOAP API, a "Google API" engine will appear in the group The Web (<= v0.87)
+  or Current User (> v0.87). To query this engine, you will need to enter
+  your Google API in the corresponding field in the General tab of the
+  Preferences box. Note that Google no longer issues API keys. Building this
+  engine is not recommended.
 
 
 4. Indexes
@@ -208,10 +209,28 @@
       "HHMMSS..HHMMSS" for time ranges, eg "090000..180000"
       "size0..size1b" for size in bytes, eg "0..10240b"
 
-  For more information about the query syntax, you may want to have a look at the
-  documentation for Xapian's QueryParser at http://www.xapian.org/docs/queryparser.html
+  For more information about this query syntax, you may want to have a look at
+  the documentation for Xapian's QueryParser at
+  http://www.xapian.org/docs/queryparser.html
 
+  Pinot also has support for the Xesam desktop search specifications. As of
+  v0.87, provided that the xesam-glib library is found at compilation time,
+  users can query a search engine that implements the Xesam interface. Note
+  that the daemon doesn't itself implement that interface just yet.
 
+  By default, Pinot assumes that all queries are in the Xapian QueryParser
+  format but the following exceptions apply :
+    * when querying the Xesam engine using the UI, queries should be entered
+      in the Xesam User Language format.
+    * when querying the Xesam engine using pinot-search with the -q/--xesamql
+      option, queries should be entered in the Xesam Query Language format;
+      otherwise, in the Xesam User Language format.
+    * when querying an internal index using pinot-search, the -q/--xesamql
+      and -u/--xesamul options determine the format of the query.
+
+  See the manual page for pinot-search(1) for examples.
+
+
 7. Viewing cached results
 
 
@@ -404,6 +423,9 @@
 
   Prior to v0.85, this processing only applied to pure CJKV queries.
 
+  It is recommended that filters (eg "title") be used at the end of the query
+  for it to be processed as expected.
+
   You can get a list of documents in which CJKV characters were detected
   by the indexer with the special filter "tokens:CJKV".
 
@@ -521,7 +543,10 @@
 libexif							0.6
 http://libexif.sourceforge.net/
 
-openssh-askpass (4)					4.3
+xesam-glib (4)						0.4.0
+http://xesam.org/people/kamstrup/xesam-glib/
+
+openssh-askpass (5)					4.3
 http://www.openssh.com/portable.html
 
 ---------------------------------------------------------------
@@ -550,11 +575,12 @@
 xls2csv
 http://www.wagner.pp.ru/~vitus/software/catdoc/
 
----------------------------------------------------------------
+----------------------------------------------------------------
 Notes :
 (1) enabled with "./configure --with-http=neon|curl"
-(2) enabled with "./configure --with-soap=yes"
+(2) enabled with "./configure --enable-soap=yes" (not recommended)
 (3) for building only
-(4) experimental - required only if _SSH_TUNNEL is set
----------------------------------------------------------------
+(4) enabled with "./configure --enable-xesam-glib=yes
+(5) experimental - required only if _SSH_TUNNEL is set
+----------------------------------------------------------------
 



From fabricecolin at mail.berlios.de  Wed Aug 27 16:28:53 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Wed, 27 Aug 2008 16:28:53 +0200
Subject: [Pinot-svn] r1345 - trunk
Message-ID: <200808271428.m7RESrX1007875@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-27 16:28:47 +0200 (Wed, 27 Aug 2008)
New Revision: 1345

Modified:
   trunk/AUTHORS
   trunk/README
Log:
Added rainofchaos to list of translators.
Rephrased part about engines and query syntaxes in section 6 of the README.


Modified: trunk/AUTHORS
===================================================================
--- trunk/AUTHORS	2008-08-25 14:46:08 UTC (rev 1344)
+++ trunk/AUTHORS	2008-08-27 14:28:47 UTC (rev 1345)
@@ -35,6 +35,9 @@
 
 Translations provided by :
 
+	Chinese (Simplified) - Ashlee Ma <ashlee8310 at hotmail dot com>
+		& rainofchaos <rainofchaos at gmail dot com>
+	Chinese (Traditional) - ??? Yung-Chung Lin <henearkrxern at gmail dot com>
 	Dutch - Tikkel <???>
 		& JW <jw00000 at gmail dot com>
 		& Balaam's Miracle <balaam at balaamsmiracle dot com>
@@ -54,6 +57,4 @@
 		& Garbage <garbage at openfutura.com>
 	Swedish - Daniel Nylander <po at danielnylander dot se>
 		& Zirro <???>
-	Simplified Chinese - Ashlee Ma <ashlee8310 at hotmail dot com>
-	Traditional Chinese - ??? Yung-Chung Lin <henearkrxern at gmail dot com>
 

Modified: trunk/README
===================================================================
--- trunk/README	2008-08-25 14:46:08 UTC (rev 1344)
+++ trunk/README	2008-08-27 14:28:47 UTC (rev 1345)
@@ -176,11 +176,14 @@
 
   When querying an index, things are somewhat different. Queries can be
   expressed in a very natural way, using a combination of operators, filters
-  and ranges.
+  and ranges. This query syntax is the syntax supported natively by Xapian's
+  QueryParser.
+
+  The full syntax is documented at http://www.xapian.org/docs/queryparser.html
   For instance, the query "type:text/html and lang:en and (tcp near ip)" will
   look for HTML files in English that mention TCP/IP. 
 
-  Supported filters are :
+  Pinot supports these filters :
       "site" for host name, eg "site:pinot.berlios.de"
       "file" for file name, eg "file:index.html"
       "ext" for file extension, eg "ext:html"
@@ -209,17 +212,14 @@
       "HHMMSS..HHMMSS" for time ranges, eg "090000..180000"
       "size0..size1b" for size in bytes, eg "0..10240b"
 
-  For more information about this query syntax, you may want to have a look at
-  the documentation for Xapian's QueryParser at
-  http://www.xapian.org/docs/queryparser.html
-
   Pinot also has support for the Xesam desktop search specifications. As of
   v0.87, provided that the xesam-glib library is found at compilation time,
   users can query a search engine that implements the Xesam interface. Note
   that the daemon doesn't itself implement that interface just yet.
 
-  By default, Pinot assumes that all queries are in the Xapian QueryParser
-  format but the following exceptions apply :
+  The following rules of thumb apply :
+    * when querying a Web engine, queries should be entered in a format
+      understood by the engine.
     * when querying the Xesam engine using the UI, queries should be entered
       in the Xesam User Language format.
     * when querying the Xesam engine using pinot-search with the -q/--xesamql



From fabricecolin at mail.berlios.de  Thu Aug 28 15:07:49 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 28 Aug 2008 15:07:49 +0200
Subject: [Pinot-svn] r1346 - trunk/IndexSearch/Plugins
Message-ID: <200808281307.m7SD7n0P007180@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-28 15:07:38 +0200 (Thu, 28 Aug 2008)
New Revision: 1346

Modified:
   trunk/IndexSearch/Plugins/BitTorrent.src
   trunk/IndexSearch/Plugins/CreativeCommons.src
   trunk/IndexSearch/Plugins/Freshmeat.src
   trunk/IndexSearch/Plugins/GoogleCodeSearch.src
   trunk/IndexSearch/Plugins/RollYOTopNews.src
   trunk/IndexSearch/Plugins/Wikipedia.src
Log:
Search engine updates.


Modified: trunk/IndexSearch/Plugins/BitTorrent.src
===================================================================
--- trunk/IndexSearch/Plugins/BitTorrent.src	2008-08-27 14:28:47 UTC (rev 1345)
+++ trunk/IndexSearch/Plugins/BitTorrent.src	2008-08-28 13:07:38 UTC (rev 1346)
@@ -5,20 +5,18 @@
 	name="BitTorrent"
 	description="bittorrent.com"
 	method="GET"
-	action="http://www.bittorrent.com/search.jsp"
+	action="http://www.bittorrent.com/search"
 	routeType="Content"
 >
+<INPUT NAME="q" USER>
+<INPUT NAME="category" VALUE="All">
+<INPUT NAME="start" VALUE="0">
+<INPUTNEXT NAME="start_result" FACTOR="10">
 
-<INPUT NAME="hitsPerPage" VALUE="10">
-<INPUT NAME="hitsPerSite" VALUE="3">
-<INPUT NAME="query" USER>
-<INPUT NAME="Submit2" VALUE="Search">
-<INPUTNEXT NAME="start" FACTOR="10">
-
 <INTERPRET
-resultListStart='<div class="searchresults">'
-resultListEnd='<div class="pages">'
-resultItemStart='<div class="d">'
+resultListStart='<ol id="results">'
+resultListEnd='<div id="paging">'
+resultItemStart='<li class="clear">'
 resultItemEnd='</li>'
 >
 

Modified: trunk/IndexSearch/Plugins/CreativeCommons.src
===================================================================
--- trunk/IndexSearch/Plugins/CreativeCommons.src	2008-08-27 14:28:47 UTC (rev 1345)
+++ trunk/IndexSearch/Plugins/CreativeCommons.src	2008-08-28 13:07:38 UTC (rev 1346)
@@ -5,18 +5,18 @@
 	name="Creative Commons"
 	description="Yahoo! Search for Creative Commons"
 	method="GET"
-	action="http://search.creativecommons.org/"
+	action="http://creativecommons.org/"
 	routeType="Content"
 >
 
-<INPUT NAME="q" USER>
+<INPUT NAME="s" USER>
 <INPUTNEXT NAME="start" FACTOR="10" VALUE="0">
 
 <INTERPRET
-resultListStart='<!-- start results -->'
-resultListEnd='<!-- end results -->'
-resultItemStart='<p class="resultitem">'
-resultItemEnd='</p>'
+resultListStart='<div id="content">'
+resultListEnd='<div class="wp-pagenavi">'
+resultItemStart='<div class="block blogged">'
+resultItemEnd='</div>'
 >
 
 </SEARCH>

Modified: trunk/IndexSearch/Plugins/Freshmeat.src
===================================================================
--- trunk/IndexSearch/Plugins/Freshmeat.src	2008-08-27 14:28:47 UTC (rev 1345)
+++ trunk/IndexSearch/Plugins/Freshmeat.src	2008-08-28 13:07:38 UTC (rev 1346)
@@ -23,6 +23,6 @@
     resultListStart="<hr"
     resultListEnd=""
     resultItemStart='<td valign="top">'
-    resultItemEnd='</table>'
+    resultItemEnd='<small>Version:</small>'
 >
 </search>

Modified: trunk/IndexSearch/Plugins/GoogleCodeSearch.src
===================================================================
--- trunk/IndexSearch/Plugins/GoogleCodeSearch.src	2008-08-27 14:28:47 UTC (rev 1345)
+++ trunk/IndexSearch/Plugins/GoogleCodeSearch.src	2008-08-28 13:07:38 UTC (rev 1346)
@@ -10,10 +10,10 @@
    routeType="Source Code"
 >
 
+<input name="hl" value="en">
 <input name="q" user>
-<input name="btnG" value="Search+Codesourceid">
 <inputnext name="start" factor="10">
-<inputprev name="start" factor="10">
+<input name="sa" value="N">
 <input name="ie" value="utf-8">
 <input name="oe" value="utf-8">
 
@@ -23,6 +23,6 @@
     resultListStart=""
     resultListEnd=""
     resultItemStart="<div class=h>"
-    resultItemEnd="</span></div>"
+    resultItemEnd="</div>"
 >
 </search>

Modified: trunk/IndexSearch/Plugins/RollYOTopNews.src
===================================================================
--- trunk/IndexSearch/Plugins/RollYOTopNews.src	2008-08-27 14:28:47 UTC (rev 1345)
+++ trunk/IndexSearch/Plugins/RollYOTopNews.src	2008-08-28 13:07:38 UTC (rev 1346)
@@ -13,12 +13,13 @@
 <INPUT NAME="q" user>
 <INPUT NAME="uid" VALUE="0">
 <INPUT NAME="sid" VALUE="5628">
+<INPUTNEXT NAME="start" FACTOR="20" VALUE="1">
 
 <INTERPRET
  resultListStart=''
  resultListEnd=''
- resultItemStart='<dt class="top-title">'
- resultItemEnd='</dt>'
+ resultItemStart='<dl><dt>'
+ resultItemEnd='</dd></dl>'
 >
 
 </SEARCH>

Modified: trunk/IndexSearch/Plugins/Wikipedia.src
===================================================================
--- trunk/IndexSearch/Plugins/Wikipedia.src	2008-08-27 14:28:47 UTC (rev 1345)
+++ trunk/IndexSearch/Plugins/Wikipedia.src	2008-08-28 13:07:38 UTC (rev 1346)
@@ -12,13 +12,13 @@
 <INPUT NAME="search" USER>
 <INPUT NAME="fulltext" VALUE="Search">
 <INPUT NAME="limit" VALUE="10">
-<INPUTNEXT NAME="offset" FACTOR="1">
+<INPUTNEXT NAME="offset" FACTOR="10">
 
 <INTERPRET
-resultListStart=""
-resultListEnd=""
-resultItemStart='<li style="padding-bottom: 1em;">'
-resultItemEnd='</span></li>'
+resultListStart="<ul class='mw-search-results'>"
+resultListEnd="</ul>"
+resultItemStart="<li>"
+resultItemEnd="</li>"
 >
 
 </SEARCH>



From fabricecolin at mail.berlios.de  Thu Aug 28 15:08:51 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 28 Aug 2008 15:08:51 +0200
Subject: [Pinot-svn] r1347 - trunk/IndexSearch/Plugins
Message-ID: <200808281308.m7SD8pfp007331@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-28 15:08:46 +0200 (Thu, 28 Aug 2008)
New Revision: 1347

Removed:
   trunk/IndexSearch/Plugins/CreativeCommons.src
Log:
This is now a blog search. The actual content search is somewhat obfuscated.


Deleted: trunk/IndexSearch/Plugins/CreativeCommons.src
===================================================================
--- trunk/IndexSearch/Plugins/CreativeCommons.src	2008-08-28 13:07:38 UTC (rev 1346)
+++ trunk/IndexSearch/Plugins/CreativeCommons.src	2008-08-28 13:08:46 UTC (rev 1347)
@@ -1,22 +0,0 @@
-# Yahoo! Creative Commons Search Plugin
-
-<SEARCH
-	version="1.0"
-	name="Creative Commons"
-	description="Yahoo! Search for Creative Commons"
-	method="GET"
-	action="http://creativecommons.org/"
-	routeType="Content"
->
-
-<INPUT NAME="s" USER>
-<INPUTNEXT NAME="start" FACTOR="10" VALUE="0">
-
-<INTERPRET
-resultListStart='<div id="content">'
-resultListEnd='<div class="wp-pagenavi">'
-resultItemStart='<div class="block blogged">'
-resultItemEnd='</div>'
->
-
-</SEARCH>



From fabricecolin at mail.berlios.de  Thu Aug 28 15:14:56 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 28 Aug 2008 15:14:56 +0200
Subject: [Pinot-svn] r1348 - trunk
Message-ID: <200808281314.m7SDEuZ4007935@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-28 15:14:48 +0200 (Thu, 28 Aug 2008)
New Revision: 1348

Modified:
   trunk/Makefile.am
Log:
Move YahooBOSS.src out of the engines directory for the time being.


Modified: trunk/Makefile.am
===================================================================
--- trunk/Makefile.am	2008-08-28 13:08:46 UTC (rev 1347)
+++ trunk/Makefile.am	2008-08-28 13:14:48 UTC (rev 1348)
@@ -43,6 +43,7 @@
 	@mkdir -p $(DESTDIR)$(datadir)/pinot/engines
 	$(INSTALL_DATA) $(srcdir)/IndexSearch/Plugins/*.src $(DESTDIR)$(datadir)/pinot/engines/
 	$(INSTALL_DATA) $(srcdir)/IndexSearch/Plugins/*.xml $(DESTDIR)$(datadir)/pinot/engines/
+	@mv $(DESTDIR)$(datadir)/pinot/engines/YahooBOSS.src $(DESTDIR)$(datadir)/pinot/
 	@mkdir -p $(DESTDIR)$(libdir)/pinot/filters
 	@rm $(DESTDIR)$(libdir)/lib*filter.a $(DESTDIR)$(libdir)/lib*filter.la
 	@mv $(DESTDIR)$(libdir)/lib*filter* $(DESTDIR)$(libdir)/pinot/filters/



From fabricecolin at mail.berlios.de  Thu Aug 28 15:30:59 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 28 Aug 2008 15:30:59 +0200
Subject: [Pinot-svn] r1349 - in trunk: . IndexSearch UI/GTK2/src
Message-ID: <200808281330.m7SDUxHX009421@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-28 15:30:42 +0200 (Thu, 28 Aug 2008)
New Revision: 1349

Modified:
   trunk/IndexSearch/pinot-index.1
   trunk/IndexSearch/pinot-label.1
   trunk/IndexSearch/pinot-search.1
   trunk/README
   trunk/TODO
   trunk/UI/GTK2/src/pinot-dbus-daemon.1
   trunk/UI/GTK2/src/pinot.1
   trunk/configure.in
Log:
Bumped the version number, regenerated man pages.
Minor updates to TODO and README.


Modified: trunk/IndexSearch/pinot-index.1
===================================================================
--- trunk/IndexSearch/pinot-index.1	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/IndexSearch/pinot-index.1	2008-08-28 13:30:42 UTC (rev 1349)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-INDEX "1" "July 2008" "pinot-index - pinot 0.87" "User Commands"
+.TH PINOT-INDEX "1" "August 2008" "pinot-index - pinot 0.88" "User Commands"
 .SH NAME
 pinot-index \- Index documents from the command-line
 .SH SYNOPSIS
@@ -39,7 +39,7 @@
 \fB\-v\fR, \fB\-\-version\fR
 output version information and exit
 .PP
-Supported back\-ends are : xapian
+Supported back\-ends are : 'xapian'
 .SH EXAMPLES
 pinot\-index \fB\-\-check\fR \fB\-\-showinfo\fR \fB\-\-backend\fR xapian \fB\-\-db\fR ~/.pinot/daemon file:///home/fabrice/Documents/Bozo.txt
 .PP

Modified: trunk/IndexSearch/pinot-label.1
===================================================================
--- trunk/IndexSearch/pinot-label.1	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/IndexSearch/pinot-label.1	2008-08-28 13:30:42 UTC (rev 1349)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-LABEL "1" "July 2008" "pinot-label - pinot 0.87" "User Commands"
+.TH PINOT-LABEL "1" "August 2008" "pinot-label - pinot 0.88" "User Commands"
 .SH NAME
 pinot-label \- Label files from the command-line
 .SH SYNOPSIS

Modified: trunk/IndexSearch/pinot-search.1
===================================================================
--- trunk/IndexSearch/pinot-search.1	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/IndexSearch/pinot-search.1	2008-08-28 13:30:42 UTC (rev 1349)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-SEARCH "1" "July 2008" "pinot-search - pinot 0.87" "User Commands"
+.TH PINOT-SEARCH "1" "August 2008" "pinot-search - pinot 0.88" "User Commands"
 .SH NAME
 pinot-search \- Query search engines from the command-line
 .SH SYNOPSIS
@@ -45,17 +45,21 @@
 \fB\-u\fR, \fB\-\-xesamul\fR
 query input is a file containing Xesam UL
 .PP
-Supported search engine types are : googleapi opensearch sherlock xapian xesam
+Supported search engine types are : 'googleapi' 'opensearch' 'sherlock' 'xapian' 'xesam'
 .SH EXAMPLES
-pinot\-search googleapi mygoogleapikey "clowns"
-.PP
 pinot\-search opensearch /usr/share/pinot/engines/KrustyDescription.xml "clowns"
 .PP
 pinot\-search \fB\-\-max\fR 20 sherlock \fB\-\-seteditable\fR "Bozo App ID:1234567890" /usr/share/pinot/engines/Bozo.src "clowns"
 .PP
+pinot\-search googleapi mygoogleapikey "clowns"
+.PP
 pinot\-search xapian ~/.pinot/index "label:Clowns"
 .PP
 pinot\-search \fB\-\-stemming\fR english xapian somehostname:12345 "clowning"
+.PP
+pinot\-search \fB\-\-xesamul\fR xapian ~/.pinot/index some_xesamul_query.txt
+.PP
+pinot\-search \fB\-\-xesamql\fR xesam \- some_xesamql_query.xml
 .SH "REPORTING BUGS"
 Report bugs to fabricecolin at users.berlios.de
 .PP

Modified: trunk/README
===================================================================
--- trunk/README	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/README	2008-08-28 13:30:42 UTC (rev 1349)
@@ -167,7 +167,7 @@
 6. Searching
 
 
-  Searches are run differently based on the type of engine being queries.
+  Searches are run differently based on the type of engine being queried.
 
   When querying a Web engine, Pinot assumes this engine understands the query,
   which is sent as is. No pre-processing is performed on the text of the query,
@@ -207,7 +207,7 @@
   worth pointing out that the query "dir:/X/Y" will return files and directories
   located in /X/Y, but not Y itself, which is what "dir:/X file:Y" would do.
 
-  Supported ranges are :
+  In addition, these ranges are supported :
       "YYYYMMDD..YYYYMMDD" for date ranges, eg "20070801..20070831"
       "HHMMSS..HHMMSS" for time ranges, eg "090000..180000"
       "size0..size1b" for size in bytes, eg "0..10240b"

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/TODO	2008-08-28 13:30:42 UTC (rev 1349)
@@ -20,7 +20,7 @@
 
 Tokenize
 - Allow to cache documents that had to be converted ? eg PDF, MS Word
-- PDF filter with poppler
+- Write a PDF filter that handles columns correctly, with poppler ?
 - WordPerfect filter with libwpd
 - Office filter with libgst
 - TeX filter
@@ -29,7 +29,6 @@
  given type
 - XmlFilter is slow-ish, rewrite file parsing with the TextReader interface
 - Filters should at least return errno when they fail
-- Write a PDF filter that handles columns correctly
 
 SQL
 - Move history files into the index directories
@@ -54,7 +53,6 @@
 - getCloseTerms() should be a search engine method so that WebEngine can use plugins'
  suggestions Url field (http://developer.mozilla.org/en/docs/Supporting_search_suggestions_in_search_plugins)
 - pinot-search should be able to run stored queries, as found in the configuration file
-- Move the Google API code into a search-only backend
 
 Index
 - Play around with the XAPIAN_FLUSH_THRESHOLD env var
@@ -72,6 +70,7 @@
 - Send a signal when crawling is done so that the UI can reopen the index
 - Be ready to catch DatabaseModifiedError exceptions and reopen the index
 - Associate URIs or IDs to labels to avoid expensive find and replace operations when they are renamed
+- Force reindexing on 0.90 to make sure all CJKV fixes are taken advantage of
 
 Mail
 - Find out what kind of locking scheme Mozilla uses (POSIX lock ?) and use that
@@ -88,7 +87,6 @@
 - Clean up method names
 - Prefer ustring to string whenever possible
 - Queue unindexing too
-- Don't link against SOAP stuff, it's not needed here
 - Follow updates to Xesam specs
 - Preserve user set metadata on reindexing
 
@@ -97,7 +95,7 @@
  selectively
 - Display search engines icons (Gtk::IconSource::set_filename() and Gtk::Style::render_icon())
 - Replace glademm with libglademm ?
-- Make unique (http://guniqueapp.akl.lt/)
+- Use unique (http://www.gnome.org/~ebassi/source/) if available
 - Either Live Query behaves like a live query (eg results list updated when new
  documents match) or it is renamed to something else to avoid confusion
 - When viewing or indexing a result, all rows for that same URL should be updated with

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.1
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.1	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.1	2008-08-28 13:30:42 UTC (rev 1349)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-DBUS-DAEMON "1" "July 2008" "pinot-dbus-daemon - pinot 0.87" "User Commands"
+.TH PINOT-DBUS-DAEMON "1" "August 2008" "pinot-dbus-daemon - pinot 0.88" "User Commands"
 .SH NAME
 pinot-dbus-daemon \- D-Bus search and index daemon
 .SH SYNOPSIS

Modified: trunk/UI/GTK2/src/pinot.1
===================================================================
--- trunk/UI/GTK2/src/pinot.1	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/UI/GTK2/src/pinot.1	2008-08-28 13:30:42 UTC (rev 1349)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT "1" "July 2008" "pinot - pinot 0.87" "User Commands"
+.TH PINOT "1" "August 2008" "pinot - pinot 0.88" "User Commands"
 .SH NAME
 pinot \- A metasearch tool for the Free Desktop
 .SH SYNOPSIS

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2008-08-28 13:14:48 UTC (rev 1348)
+++ trunk/configure.in	2008-08-28 13:30:42 UTC (rev 1349)
@@ -2,7 +2,7 @@
 # using glademm V2.6.0
 
 AC_PREREQ(2.50)
-AC_INIT(pinot, 0.87,[fabricecolin at users.berlios.de])
+AC_INIT(pinot, 0.88,[fabricecolin at users.berlios.de])
 AM_INIT_AUTOMAKE
 AC_CONFIG_HEADERS(config.h)
 



From fabricecolin at mail.berlios.de  Thu Aug 28 17:52:55 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 28 Aug 2008 17:52:55 +0200
Subject: [Pinot-svn] r1350 - trunk/IndexSearch/Plugins
Message-ID: <200808281552.m7SFqtux027965@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-28 17:52:50 +0200 (Thu, 28 Aug 2008)
New Revision: 1350

Modified:
   trunk/IndexSearch/Plugins/Google.src
Log:
Another plugin update.


Modified: trunk/IndexSearch/Plugins/Google.src
===================================================================
--- trunk/IndexSearch/Plugins/Google.src	2008-08-28 13:30:42 UTC (rev 1349)
+++ trunk/IndexSearch/Plugins/Google.src	2008-08-28 15:52:50 UTC (rev 1350)
@@ -24,7 +24,7 @@
     charset = "UTF-8"
     resultListStart="<div id=res" 
     resultListEnd="<div id=navbar" 
-    resultItemStart="<div class=g>" 
+    resultItemStart=" class=g>" 
     resultItemEnd="</div>"
 >
 </search>



From fabricecolin at mail.berlios.de  Fri Aug 29 17:58:57 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Fri, 29 Aug 2008 17:58:57 +0200
Subject: [Pinot-svn] r1351 - trunk
Message-ID: <200808291558.m7TFwvrR006500@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-29 17:58:52 +0200 (Fri, 29 Aug 2008)
New Revision: 1351

Modified:
   trunk/ChangeLog-dijon
   trunk/NEWS
Log:
Updated NEWS and Dijon's ChangeLog.


Modified: trunk/ChangeLog-dijon
===================================================================
--- trunk/ChangeLog-dijon	2008-08-28 15:52:50 UTC (rev 1350)
+++ trunk/ChangeLog-dijon	2008-08-29 15:58:52 UTC (rev 1351)
@@ -1,4 +1,45 @@
 ------------------------------------------------------------------------
+r114 | fabricecolin | 2008-08-22 21:50:04 +0800 (Fri, 22 Aug 2008) | 4 lines
+Changed paths:
+   M /trunk/filters/external-filters.xml
+
+If a filter's output element is set to SCAN, the application is supposed to scan
+it for its MIME type.
+Added two such filters for application/x-gzip and x-bzip.
+
+------------------------------------------------------------------------
+r113 | fabricecolin | 2008-08-15 21:02:48 +0800 (Fri, 15 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/filters/FilterFactory.cc
+
+Don't assume that all MIME types of class text can be handled by the plain text
+filter.
+
+------------------------------------------------------------------------
+r112 | fabricecolin | 2008-08-04 22:27:19 +0800 (Mon, 04 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/cjkv/CJKVTokenizer.h
+   M /trunk/filters/ExifImageFilter.cc
+   M /trunk/filters/ExternalFilter.cc
+   M /trunk/filters/Filter.h
+   M /trunk/filters/GMimeMboxFilter.cc
+   M /trunk/filters/HtmlFilter.cc
+   M /trunk/filters/HtmlFilter.h
+   M /trunk/filters/TagLibMusicFilter.cc
+   M /trunk/filters/TextFilter.h
+   M /trunk/filters/XmlFilter.cc
+
+If gcc 4.*, export filter entry points and base classes explicitely.
+
+------------------------------------------------------------------------
+r111 | fabricecolin | 2008-07-26 13:59:03 +0800 (Sat, 26 Jul 2008) | 3 lines
+Changed paths:
+   M /trunk/filters/external-filters.xml
+
+Support for docx formats, as suggested by Frank Bruzzaniti on the xapian-discuss
+mailing list.
+
+------------------------------------------------------------------------
 r109 | fabricecolin | 2008-07-19 15:37:59 +0800 (Sat, 19 Jul 2008) | 2 lines
 Changed paths:
    M /trunk/filters/HtmlFilter.cc

Modified: trunk/NEWS
===================================================================
--- trunk/NEWS	2008-08-28 15:52:50 UTC (rev 1350)
+++ trunk/NEWS	2008-08-29 15:58:52 UTC (rev 1351)
@@ -1,3 +1,33 @@
+2008/08/30 version_0_8_8
+General :
+ - replace xdgmime with GIO if it can sniff PNG at configure time
+ - with gcc 4.x, set symbol visibility to hidden by default
+Tokenize :
+ - for unknown text formats, don't be too quick to fall back on the plain
+  text filter
+ - the output of external filters can be scanned if need be
+ - some support for OpenXML formats
+Search :
+ - obsolete Google API engine now built as a dynamic backend
+ - backends provide slightly more information 
+ - updated several plugins
+ - removed the CreativeCommons plugin
+Index :
+ - pinot-index --showinfo shows which actions are associated with a MIME type
+Xapian :
+ - only support boolean operators in upper-case. This helps fixing issues
+  with queries made of text pasted from elsewhere.
+Daemon :
+ - extended GetStatistics to return the flags "low disk space", "on battery"
+  and "crawling"
+UI :
+ - on first runs, create useful stored queries
+ - display extended status in the Status window
+ - updated Simplified Chinese translation by rainofchaos
+ - updated German translation by Gena Haltmair
+ - updated Brazilian Portuguese translation by Rafael Porto Rodrigues
+ - updated Swedish translation by Daniel Nylander
+
 2008/07/20 version_0_8_7
 General :
  - install the Amazon API plugin with other plugins
@@ -9,6 +39,7 @@
  - in plugins, setting a value to "EDIT:description" makes it editable and
   allows to assign it a value at search time
  - pinot-search can set editable parameters with -e/--seteditable 
+ - plugin for the new Yahoo! BOSS API 
 Xapian :
  - skip very short non-CJKV terms when expanding queries.
  - fixed mangling of some CJKV queries



From fabricecolin at mail.berlios.de  Fri Aug 29 18:02:50 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Fri, 29 Aug 2008 18:02:50 +0200
Subject: [Pinot-svn] r1352 - trunk
Message-ID: <200808291602.m7TG2oBD006831@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-29 18:02:43 +0200 (Fri, 29 Aug 2008)
New Revision: 1352

Modified:
   trunk/ChangeLog
Log:
Current log.


Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2008-08-29 15:58:52 UTC (rev 1351)
+++ trunk/ChangeLog	2008-08-29 16:02:43 UTC (rev 1352)
@@ -1,4 +1,430 @@
 ------------------------------------------------------------------------
+r1351 | fabricecolin | 2008-08-29 23:58:52 +0800 (Fri, 29 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/ChangeLog-dijon
+   M /trunk/NEWS
+
+Updated NEWS and Dijon's ChangeLog.
+
+------------------------------------------------------------------------
+r1350 | fabricecolin | 2008-08-28 23:52:50 +0800 (Thu, 28 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/Plugins/Google.src
+
+Another plugin update.
+
+------------------------------------------------------------------------
+r1349 | fabricecolin | 2008-08-28 21:30:42 +0800 (Thu, 28 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/pinot-index.1
+   M /trunk/IndexSearch/pinot-label.1
+   M /trunk/IndexSearch/pinot-search.1
+   M /trunk/README
+   M /trunk/TODO
+   M /trunk/UI/GTK2/src/pinot-dbus-daemon.1
+   M /trunk/UI/GTK2/src/pinot.1
+   M /trunk/configure.in
+
+Bumped the version number, regenerated man pages.
+Minor updates to TODO and README.
+
+------------------------------------------------------------------------
+r1348 | fabricecolin | 2008-08-28 21:14:48 +0800 (Thu, 28 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/Makefile.am
+
+Move YahooBOSS.src out of the engines directory for the time being.
+
+------------------------------------------------------------------------
+r1347 | fabricecolin | 2008-08-28 21:08:46 +0800 (Thu, 28 Aug 2008) | 2 lines
+Changed paths:
+   D /trunk/IndexSearch/Plugins/CreativeCommons.src
+
+This is now a blog search. The actual content search is somewhat obfuscated.
+
+------------------------------------------------------------------------
+r1346 | fabricecolin | 2008-08-28 21:07:38 +0800 (Thu, 28 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/Plugins/BitTorrent.src
+   M /trunk/IndexSearch/Plugins/CreativeCommons.src
+   M /trunk/IndexSearch/Plugins/Freshmeat.src
+   M /trunk/IndexSearch/Plugins/GoogleCodeSearch.src
+   M /trunk/IndexSearch/Plugins/RollYOTopNews.src
+   M /trunk/IndexSearch/Plugins/Wikipedia.src
+
+Search engine updates.
+
+------------------------------------------------------------------------
+r1345 | fabricecolin | 2008-08-27 22:28:47 +0800 (Wed, 27 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/AUTHORS
+   M /trunk/README
+
+Added rainofchaos to list of translators.
+Rephrased part about engines and query syntaxes in section 6 of the README.
+
+------------------------------------------------------------------------
+r1344 | fabricecolin | 2008-08-25 22:46:08 +0800 (Mon, 25 Aug 2008) | 5 lines
+Changed paths:
+   M /trunk/IndexSearch/pinot-search.cpp
+   M /trunk/README
+
+Explain to what extent Xesam specs are supported; pinot-search's help text has
+some examples now.
+Clarify that building the Google API is not recommended, and how to use filters
+in CJKV queries.
+
+------------------------------------------------------------------------
+r1343 | fabricecolin | 2008-08-24 12:43:33 +0800 (Sun, 24 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/po/de.po
+   M /trunk/po/es.po
+   M /trunk/po/fr.po
+   M /trunk/po/it.po
+   M /trunk/po/ja.po
+   M /trunk/po/nl.po
+   M /trunk/po/pt.po
+   M /trunk/po/pt_BR.po
+   M /trunk/po/ru.po
+   M /trunk/po/sv.po
+   M /trunk/po/zh_CN.po
+   M /trunk/po/zh_TW.po
+
+Current translations.
+
+------------------------------------------------------------------------
+r1342 | fabricecolin | 2008-08-23 22:39:04 +0800 (Sat, 23 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/PinotSettings.cpp
+
+Create a bunch of useful default queries.
+
+------------------------------------------------------------------------
+r1341 | fabricecolin | 2008-08-23 22:37:10 +0800 (Sat, 23 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/Google/ModuleExports.cpp
+
+Fix previous commit.
+
+------------------------------------------------------------------------
+r1340 | fabricecolin | 2008-08-23 20:57:23 +0800 (Sat, 23 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/statisticsDialog.cc
+   M /trunk/UI/GTK2/src/statisticsDialog.hh
+
+Show extra stats only when on.
+
+------------------------------------------------------------------------
+r1339 | fabricecolin | 2008-08-19 21:46:17 +0800 (Tue, 19 Aug 2008) | 2 lines
+Changed paths:
+   A /trunk/IndexSearch/Google/ModuleExports.cpp
+
+Functions exported by this backend.
+
+------------------------------------------------------------------------
+r1338 | fabricecolin | 2008-08-19 21:43:52 +0800 (Tue, 19 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/EnginesTree.cpp
+   M /trunk/UI/GTK2/src/PinotSettings.cpp
+   M /trunk/UI/GTK2/src/PinotSettings.h
+   M /trunk/UI/GTK2/src/mainWindow.cc
+   M /trunk/UI/GTK2/src/prefsDialog.cc
+   M /trunk/UI/GTK2/src/statisticsDialog.cc
+
+Synced with the new ModuleFactory::getSupportedEngines().
+Replaced PinotSettings::Engine with ModuleProperties.
+
+------------------------------------------------------------------------
+r1337 | fabricecolin | 2008-08-19 21:40:26 +0800 (Tue, 19 Aug 2008) | 4 lines
+Changed paths:
+   M /trunk/IndexSearch/Makefile.am
+   M /trunk/IndexSearch/ModuleFactory.cpp
+   M /trunk/IndexSearch/ModuleFactory.h
+   A /trunk/IndexSearch/ModuleProperties.h
+   M /trunk/IndexSearch/SearchPluginProperties.cpp
+   M /trunk/IndexSearch/SearchPluginProperties.h
+   M /trunk/IndexSearch/Xapian/ModuleExports.cpp
+   M /trunk/IndexSearch/XesamGLib/ModuleExports.cpp
+   M /trunk/IndexSearch/pinot-index.cpp
+   M /trunk/IndexSearch/pinot-search.cpp
+
+Spun some properties out of SearchPluginProperties into ModuleProperties.
+Backends must implement ModuleProperties *getModuleProperties() instead of
+string getModuleType().
+
+------------------------------------------------------------------------
+r1336 | fabricecolin | 2008-08-19 21:38:49 +0800 (Tue, 19 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/OpenSearchParser.cpp
+   M /trunk/IndexSearch/SherlockParser.cpp
+
+Forget about description of engines.
+
+------------------------------------------------------------------------
+r1335 | fabricecolin | 2008-08-16 13:57:59 +0800 (Sat, 16 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/configure.in
+
+If GIO can sniff PNG, set USE_GIO and make sure programs link against it.
+The test on GIO's sniffing abilities comes from gtk+'s configure.in.
+
+------------------------------------------------------------------------
+r1334 | fabricecolin | 2008-08-16 13:54:54 +0800 (Sat, 16 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/Utils/MIMEScanner.cpp
+
+Compile getKeyValue() out if GIO is in use.
+The xdgmime function to call in scanData() is xdg_mime_get_mime_type_for_data().
+
+------------------------------------------------------------------------
+r1333 | fabricecolin | 2008-08-15 22:47:45 +0800 (Fri, 15 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/FilterUtils.cpp
+   M /trunk/Utils/MIMEScanner.cpp
+   M /trunk/Utils/MIMEScanner.h
+
+New MIMEScanner::scanData() method, used when a filter returns "scan" as type.
+
+------------------------------------------------------------------------
+r1332 | fabricecolin | 2008-08-15 21:25:14 +0800 (Fri, 15 Aug 2008) | 4 lines
+Changed paths:
+   M /trunk/Tokenize/FilterUtils.cpp
+   M /trunk/Tokenize/FilterUtils.h
+   M /trunk/Utils/CommandLine.cpp
+   M /trunk/Utils/MIMEScanner.cpp
+   M /trunk/Utils/MIMEScanner.h
+
+MIMEScanner::getParentTypes() needs the list of all supported types so that in
+GIO mode it can determine which types are related with g_content_type_is_a().
+This flattens the types hierarchy though, but this will do.
+
+------------------------------------------------------------------------
+r1331 | fabricecolin | 2008-08-14 21:34:54 +0800 (Thu, 14 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/pinot-index.cpp
+
+If --showinfo is passed, show which actions are associated with the document's
+MIME type.
+
+------------------------------------------------------------------------
+r1330 | fabricecolin | 2008-08-14 21:29:02 +0800 (Thu, 14 Aug 2008) | 4 lines
+Changed paths:
+   M /trunk/Utils/CommandLine.cpp
+   M /trunk/Utils/MIMEScanner.cpp
+   M /trunk/Utils/MIMEScanner.h
+   M /trunk/Utils/Makefile.am
+
+Use GAppInfo at the same time as GContentType, instead of the MIMECache code.
+This extends to CommandLine::runAsync().
+Switched to USE_GIO for consistency with the HTTP stuff.
+
+------------------------------------------------------------------------
+r1329 | fabricecolin | 2008-08-11 15:43:11 +0800 (Mon, 11 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/Collect/FileCollector.cpp
+   M /trunk/IndexSearch/pinot-index.cpp
+   M /trunk/IndexSearch/pinot-search.cpp
+
+Cosmetic changes.
+
+------------------------------------------------------------------------
+r1328 | fabricecolin | 2008-08-11 15:41:48 +0800 (Mon, 11 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/Google/Makefile.am
+   M /trunk/IndexSearch/Xapian/Makefile.am
+   M /trunk/IndexSearch/XesamGLib/Makefile.am
+
+Link all backends against BasicUtils.
+For the Google API, bundle all source files as headers if support is turned off.
+
+------------------------------------------------------------------------
+r1327 | fabricecolin | 2008-08-11 15:39:22 +0800 (Mon, 11 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/Utils/MIMEScanner.cpp
+   M /trunk/Utils/MIMEScanner.h
+   M /trunk/Utils/Makefile.am
+
+Use GContentType instead of xdgmime if HAVE_GIO_MIME is set/defined.
+
+------------------------------------------------------------------------
+r1326 | fabricecolin | 2008-08-06 21:35:44 +0800 (Wed, 06 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
+   M /trunk/IndexSearch/Xapian/XapianIndex.h
+
+Removed dead functions. Both set/getLabels() rely on set/getMetadata().
+
+------------------------------------------------------------------------
+r1325 | fabricecolin | 2008-08-04 22:45:18 +0800 (Mon, 04 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/mainWindow.cc
+
+Google API key fix.
+
+------------------------------------------------------------------------
+r1324 | fabricecolin | 2008-08-04 22:37:13 +0800 (Mon, 04 Aug 2008) | 2 lines
+Changed paths:
+   D /trunk/Tokenize/Tokenizer.cpp
+   D /trunk/Tokenize/tokenizertest.cpp
+
+These two were obsoleted quite some time ago...
+
+------------------------------------------------------------------------
+r1323 | fabricecolin | 2008-08-04 22:33:24 +0800 (Mon, 04 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/PinotSettings.cpp
+   M /trunk/UI/GTK2/src/prefsDialog.cc
+
+The Google API engine is now loaded dynamically, if available, and identified as
+"Google API".
+
+------------------------------------------------------------------------
+r1322 | fabricecolin | 2008-08-04 22:31:35 +0800 (Mon, 04 Aug 2008) | 2 lines
+Changed paths:
+   D /trunk/IndexSearch/SOAPEnv.h
+   D /trunk/IndexSearch/SOAPEnvH.h
+   D /trunk/IndexSearch/SOAPEnvNS.cpp
+   D /trunk/IndexSearch/SOAPEnvStub.h
+
+These are no longer needed.
+
+------------------------------------------------------------------------
+r1321 | fabricecolin | 2008-08-04 22:22:08 +0800 (Mon, 04 Aug 2008) | 5 lines
+Changed paths:
+   M /trunk/IndexSearch/Google/GAPIC.cpp
+   M /trunk/IndexSearch/Google/GAPIClient.cpp
+   M /trunk/IndexSearch/Google/GAPIClientLib.cpp
+   M /trunk/IndexSearch/Google/GAPIGoogleSearchBindingProxy.h
+   M /trunk/IndexSearch/Google/GAPIH.h
+   M /trunk/IndexSearch/Google/GAPIStub.h
+   M /trunk/IndexSearch/Google/GoogleAPIEngine.cpp
+   M /trunk/IndexSearch/Google/GoogleSearch.h
+   M /trunk/IndexSearch/Google/Makefile.am
+
+Regenerated code with gsoap 2.7.10.
+Compile GAPIC and GAPIClient, and ignore GAPIClientLib as it defines a macro
+that makes all the soap_ functions static. All this is built into a dynamic
+backend.
+
+------------------------------------------------------------------------
+r1320 | fabricecolin | 2008-08-04 22:15:56 +0800 (Mon, 04 Aug 2008) | 6 lines
+Changed paths:
+   M /trunk/Collect/Makefile.am
+   M /trunk/IndexSearch/FilterWrapper.h
+   M /trunk/IndexSearch/IndexInterface.h
+   M /trunk/IndexSearch/Makefile.am
+   M /trunk/IndexSearch/ModuleFactory.cpp
+   M /trunk/IndexSearch/QueryProperties.h
+   M /trunk/IndexSearch/SearchEngineInterface.h
+   M /trunk/IndexSearch/WebEngine.h
+   M /trunk/IndexSearch/Xapian/Makefile.am
+   M /trunk/IndexSearch/Xapian/ModuleExports.cpp
+   M /trunk/IndexSearch/XesamGLib/Makefile.am
+   M /trunk/IndexSearch/XesamGLib/ModuleExports.cpp
+   M /trunk/Monitor/Makefile.am
+   M /trunk/SQL/Makefile.am
+   M /trunk/Tokenize/FilterUtils.h
+   M /trunk/Tokenize/Makefile.am
+   M /trunk/Tokenize/TextConverter.h
+   M /trunk/Tokenize/Tokenizer.h
+   M /trunk/UI/GTK2/src/Makefile.am
+   M /trunk/Utils/CommandLine.h
+   M /trunk/Utils/Document.h
+   M /trunk/Utils/DocumentInfo.h
+   M /trunk/Utils/Languages.h
+   M /trunk/Utils/MIMEScanner.h
+   M /trunk/Utils/Makefile.am
+   M /trunk/Utils/StringManip.h
+   M /trunk/Utils/TimeConverter.h
+   M /trunk/Utils/Timer.h
+   M /trunk/Utils/Url.h
+   M /trunk/configure.in
+
+If gcc 4.x is available, set symbol visibility to hidden by default. Only export
+stuff we know is required by the backends, and backend's entry points.
+Don't build libSearchSOAP, and remove references to the Google API engine, this
+will go into a separate backend.
+-fPIC is set in CXXFLAGS by configure.in instead of in each Makefile.
+
+------------------------------------------------------------------------
+r1319 | fabricecolin | 2008-08-03 23:23:35 +0800 (Sun, 03 Aug 2008) | 2 lines
+Changed paths:
+   A /trunk/Utils/Visibility.h
+
+Some macros to set symbol visibility.
+
+------------------------------------------------------------------------
+r1318 | fabricecolin | 2008-08-03 23:22:35 +0800 (Sun, 03 Aug 2008) | 3 lines
+Changed paths:
+   A /trunk/UI/GTK2/src/UniqueApplication.cpp
+   A /trunk/UI/GTK2/src/UniqueApplication.h
+   M /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
+
+Moved code that enforced the daemon's uniqueness to UniqueApplication and
+prepare for an eventual switch to Unique (http://www.gnome.org/~ebassi/source/).
+
+------------------------------------------------------------------------
+r1317 | fabricecolin | 2008-08-03 21:02:29 +0800 (Sun, 03 Aug 2008) | 2 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/WorkerThreads.cpp
+
+Time retrieveUrl().
+
+------------------------------------------------------------------------
+r1316 | fabricecolin | 2008-08-03 17:09:13 +0800 (Sun, 03 Aug 2008) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/Xapian/XapianEngine.cpp
+
+The flag QueryParser::FLAG_BOOLEAN_ANY_CASE causes more problems than it's worth,
+especially when queries are pieces of text pasted from elsewhere.
+
+------------------------------------------------------------------------
+r1315 | fabricecolin | 2008-08-03 17:04:32 +0800 (Sun, 03 Aug 2008) | 4 lines
+Changed paths:
+   M /trunk/IndexSearch/XesamGLib/XesamEngine.cpp
+
+Use xesam:language and xesam:relevancyRating.
+It's not clear in what language the languages list is supposed to be, so we
+assume it's in the locale language.
+
+------------------------------------------------------------------------
+r1314 | fabricecolin | 2008-07-26 14:10:28 +0800 (Sat, 26 Jul 2008) | 3 lines
+Changed paths:
+   M /trunk/AUTHORS
+   M /trunk/po/de.po
+   M /trunk/po/fr.po
+   M /trunk/po/pt_BR.po
+   M /trunk/po/sv.po
+
+Updated de, pt_BR, sv and fr by Gena Haltmair, Rafael Porto Rodrigues, Daniel
+Nylander and myself.
+
+------------------------------------------------------------------------
+r1313 | fabricecolin | 2008-07-26 12:20:04 +0800 (Sat, 26 Jul 2008) | 5 lines
+Changed paths:
+   M /trunk/IndexSearch/DBusIndex.cpp
+   M /trunk/IndexSearch/DBusIndex.h
+   M /trunk/UI/GTK2/src/DaemonState.cpp
+   M /trunk/UI/GTK2/src/DaemonState.h
+   M /trunk/UI/GTK2/src/ServerThreads.cpp
+   M /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
+   M /trunk/UI/GTK2/src/statisticsDialog.cc
+   M /trunk/UI/GTK2/src/statisticsDialog.hh
+
+Extended GetStatistics to return the flags "low disk space", "on battery" and
+"crawling". The latter is new to the daemon and set while a DirectoryScanner is
+running.
+That information is displayed in the Status window.
+
+------------------------------------------------------------------------
+r1311 | fabricecolin | 2008-07-19 19:11:52 +0800 (Sat, 19 Jul 2008) | 2 lines
+Changed paths:
+   M /trunk/ChangeLog
+   M /trunk/ChangeLog-dijon
+
+Current logs.
+
+------------------------------------------------------------------------
 r1310 | fabricecolin | 2008-07-19 19:00:19 +0800 (Sat, 19 Jul 2008) | 2 lines
 Changed paths:
    M /trunk/NEWS



From fabricecolin at mail.berlios.de  Fri Aug 29 18:09:24 2008
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Fri, 29 Aug 2008 18:09:24 +0200
Subject: [Pinot-svn] r1353 - tags
Message-ID: <200808291609.m7TG9OA5007873@sheep.berlios.de>

Author: fabricecolin
Date: 2008-08-29 18:09:16 +0200 (Fri, 29 Aug 2008)
New Revision: 1353

Added:
   tags/version_0_8_8/
Log:
Releasing v0.88.


Copied: tags/version_0_8_8 (from rev 1352, trunk)



