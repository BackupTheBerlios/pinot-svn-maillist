<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pinot-svn] r296 - in trunk/UI/GTK2: . src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pinot-svn/2006-June/index.html" >
   <LINK REL="made" HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r296%20-%20in%20trunk/UI/GTK2%3A%20.%20src&In-Reply-To=%3C200606071357.k57Dv6Vm003515%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000289.html">
   <LINK REL="Next"  HREF="000291.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pinot-svn] r296 - in trunk/UI/GTK2: . src</H1>
    <B>fabricecolin at BerliOS</B> 
    <A HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r296%20-%20in%20trunk/UI/GTK2%3A%20.%20src&In-Reply-To=%3C200606071357.k57Dv6Vm003515%40sheep.berlios.de%3E"
       TITLE="[Pinot-svn] r296 - in trunk/UI/GTK2: . src">fabricecolin at berlios.de
       </A><BR>
    <I>Wed Jun  7 15:57:06 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000289.html">[Pinot-svn] r295 - in trunk: . Collect Search Utils
</A></li>
        <LI>Next message: <A HREF="000291.html">[Pinot-svn] r297 - trunk/UI/GTK2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#290">[ date ]</a>
              <a href="thread.html#290">[ thread ]</a>
              <a href="subject.html#290">[ subject ]</a>
              <a href="author.html#290">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fabricecolin
Date: 2006-06-07 15:57:03 +0200 (Wed, 07 Jun 2006)
New Revision: 296

Modified:
   trunk/UI/GTK2/metase-gtk2.glade
   trunk/UI/GTK2/src/PinotSettings.cpp
   trunk/UI/GTK2/src/PinotSettings.h
   trunk/UI/GTK2/src/prefsDialog.cc
   trunk/UI/GTK2/src/prefsDialog.hh
   trunk/UI/GTK2/src/prefsDialog_glade.cc
   trunk/UI/GTK2/src/prefsDialog_glade.hh
Log:
Removed documents view mode and browser selection from the preferences as pinot
can now launch other applications.


Modified: trunk/UI/GTK2/metase-gtk2.glade
===================================================================
--- trunk/UI/GTK2/metase-gtk2.glade	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/metase-gtk2.glade	2006-06-07 13:57:03 UTC (rev 296)
@@ -965,7 +965,7 @@
 	  &lt;child&gt;
 	    &lt;widget class=&quot;GtkTable&quot; id=&quot;generalTable&quot;&gt;
 	      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-	      &lt;property name=&quot;n_rows&quot;&gt;6&lt;/property&gt;
+	      &lt;property name=&quot;n_rows&quot;&gt;4&lt;/property&gt;
 	      &lt;property name=&quot;n_columns&quot;&gt;2&lt;/property&gt;
 	      &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
 	      &lt;property name=&quot;row_spacing&quot;&gt;0&lt;/property&gt;
@@ -1000,62 +1000,6 @@
 	      &lt;/child&gt;
 
 	      &lt;child&gt;
-		&lt;widget class=&quot;GtkLabel&quot; id=&quot;viewLabel&quot;&gt;
-		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;View documents:&lt;/property&gt;
-		  &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
-		  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
-		  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
-		  &lt;property name=&quot;xpad&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;ypad&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
-		  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
-		  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
-		&lt;/widget&gt;
-		&lt;packing&gt;
-		  &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
-		  &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
-		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
-		&lt;/packing&gt;
-	      &lt;/child&gt;
-
-	      &lt;child&gt;
-		&lt;widget class=&quot;GtkLabel&quot; id=&quot;browserLabel&quot;&gt;
-		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;Browser:&lt;/property&gt;
-		  &lt;property name=&quot;use_underline&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;use_markup&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;justify&quot;&gt;GTK_JUSTIFY_LEFT&lt;/property&gt;
-		  &lt;property name=&quot;wrap&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;selectable&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;xalign&quot;&gt;0&lt;/property&gt;
-		  &lt;property name=&quot;yalign&quot;&gt;0.5&lt;/property&gt;
-		  &lt;property name=&quot;xpad&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;ypad&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;ellipsize&quot;&gt;PANGO_ELLIPSIZE_NONE&lt;/property&gt;
-		  &lt;property name=&quot;width_chars&quot;&gt;-1&lt;/property&gt;
-		  &lt;property name=&quot;single_line_mode&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;angle&quot;&gt;0&lt;/property&gt;
-		&lt;/widget&gt;
-		&lt;packing&gt;
-		  &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
-		  &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;3&lt;/property&gt;
-		  &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
-		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
-		&lt;/packing&gt;
-	      &lt;/child&gt;
-
-	      &lt;child&gt;
 		&lt;widget class=&quot;GtkLabel&quot; id=&quot;apiKeyLabel&quot;&gt;
 		  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
 		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
@@ -1077,8 +1021,8 @@
 		&lt;packing&gt;
 		  &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
 		  &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;5&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;6&lt;/property&gt;
+		  &lt;property name=&quot;top_attach&quot;&gt;3&lt;/property&gt;
+		  &lt;property name=&quot;bottom_attach&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
 		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
 		&lt;/packing&gt;
@@ -1100,8 +1044,8 @@
 		&lt;packing&gt;
 		  &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
 		  &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;5&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;6&lt;/property&gt;
+		  &lt;property name=&quot;top_attach&quot;&gt;3&lt;/property&gt;
+		  &lt;property name=&quot;bottom_attach&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;x_padding&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;y_padding&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
@@ -1109,25 +1053,6 @@
 	      &lt;/child&gt;
 
 	      &lt;child&gt;
-		&lt;widget class=&quot;GtkComboBox&quot; id=&quot;viewCombobox&quot;&gt;
-		  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
-		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-		  &lt;property name=&quot;add_tearoffs&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
-		  &lt;signal name=&quot;changed&quot; handler=&quot;on_viewCombobox_changed&quot; last_modification_time=&quot;Sun, 17 Apr 2005 05:53:46 GMT&quot;/&gt;
-		&lt;/widget&gt;
-		&lt;packing&gt;
-		  &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;x_padding&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;y_padding&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
-		&lt;/packing&gt;
-	      &lt;/child&gt;
-
-	      &lt;child&gt;
 		&lt;widget class=&quot;GtkCheckButton&quot; id=&quot;ignoreRobotsCheckbutton&quot;&gt;
 		  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
 		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
@@ -1152,62 +1077,6 @@
 	      &lt;/child&gt;
 
 	      &lt;child&gt;
-		&lt;widget class=&quot;GtkHBox&quot; id=&quot;browserHbox&quot;&gt;
-		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-		  &lt;property name=&quot;homogeneous&quot;&gt;False&lt;/property&gt;
-		  &lt;property name=&quot;spacing&quot;&gt;4&lt;/property&gt;
-
-		  &lt;child&gt;
-		    &lt;widget class=&quot;GtkEntry&quot; id=&quot;browserEntry&quot;&gt;
-		      &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
-		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;editable&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;visibility&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;max_length&quot;&gt;0&lt;/property&gt;
-		      &lt;property name=&quot;text&quot; translatable=&quot;yes&quot;&gt;&lt;/property&gt;
-		      &lt;property name=&quot;has_frame&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;invisible_char&quot;&gt;*&lt;/property&gt;
-		      &lt;property name=&quot;activates_default&quot;&gt;False&lt;/property&gt;
-		    &lt;/widget&gt;
-		    &lt;packing&gt;
-		      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
-		      &lt;property name=&quot;expand&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;fill&quot;&gt;True&lt;/property&gt;
-		    &lt;/packing&gt;
-		  &lt;/child&gt;
-
-		  &lt;child&gt;
-		    &lt;widget class=&quot;GtkButton&quot; id=&quot;browserButton&quot;&gt;
-		      &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
-		      &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;...&lt;/property&gt;
-		      &lt;property name=&quot;use_underline&quot;&gt;True&lt;/property&gt;
-		      &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
-		      &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
-		      &lt;signal name=&quot;clicked&quot; handler=&quot;on_browserButton_clicked&quot; last_modification_time=&quot;Sun, 10 Aug 2003 10:20:18 GMT&quot;/&gt;
-		    &lt;/widget&gt;
-		    &lt;packing&gt;
-		      &lt;property name=&quot;padding&quot;&gt;0&lt;/property&gt;
-		      &lt;property name=&quot;expand&quot;&gt;False&lt;/property&gt;
-		      &lt;property name=&quot;fill&quot;&gt;False&lt;/property&gt;
-		    &lt;/packing&gt;
-		  &lt;/child&gt;
-		&lt;/widget&gt;
-		&lt;packing&gt;
-		  &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;3&lt;/property&gt;
-		  &lt;property name=&quot;x_padding&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;y_padding&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
-		&lt;/packing&gt;
-	      &lt;/child&gt;
-
-	      &lt;child&gt;
 		&lt;widget class=&quot;GtkLabel&quot; id=&quot;newResultsLabel&quot;&gt;
 		  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
 		  &lt;property name=&quot;label&quot; translatable=&quot;yes&quot;&gt;New results:&lt;/property&gt;
@@ -1228,8 +1097,8 @@
 		&lt;packing&gt;
 		  &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
 		  &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;3&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;4&lt;/property&gt;
+		  &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
+		  &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
 		  &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
 		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
 		&lt;/packing&gt;
@@ -1256,8 +1125,8 @@
 		&lt;packing&gt;
 		  &lt;property name=&quot;left_attach&quot;&gt;0&lt;/property&gt;
 		  &lt;property name=&quot;right_attach&quot;&gt;1&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;5&lt;/property&gt;
+		  &lt;property name=&quot;top_attach&quot;&gt;2&lt;/property&gt;
+		  &lt;property name=&quot;bottom_attach&quot;&gt;3&lt;/property&gt;
 		  &lt;property name=&quot;x_options&quot;&gt;fill&lt;/property&gt;
 		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
 		&lt;/packing&gt;
@@ -1279,8 +1148,8 @@
 		&lt;packing&gt;
 		  &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
 		  &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;4&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;5&lt;/property&gt;
+		  &lt;property name=&quot;top_attach&quot;&gt;2&lt;/property&gt;
+		  &lt;property name=&quot;bottom_attach&quot;&gt;3&lt;/property&gt;
 		  &lt;property name=&quot;x_padding&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;y_padding&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;
@@ -1298,8 +1167,8 @@
 		&lt;packing&gt;
 		  &lt;property name=&quot;left_attach&quot;&gt;1&lt;/property&gt;
 		  &lt;property name=&quot;right_attach&quot;&gt;2&lt;/property&gt;
-		  &lt;property name=&quot;top_attach&quot;&gt;3&lt;/property&gt;
-		  &lt;property name=&quot;bottom_attach&quot;&gt;4&lt;/property&gt;
+		  &lt;property name=&quot;top_attach&quot;&gt;1&lt;/property&gt;
+		  &lt;property name=&quot;bottom_attach&quot;&gt;2&lt;/property&gt;
 		  &lt;property name=&quot;x_padding&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;y_padding&quot;&gt;4&lt;/property&gt;
 		  &lt;property name=&quot;y_options&quot;&gt;fill&lt;/property&gt;

Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2006-06-07 13:57:03 UTC (rev 296)
@@ -82,7 +82,6 @@
 PinotSettings PinotSettings::m_instance;
 
 PinotSettings::PinotSettings() :
-	m_browseResults(false),
 	m_xPos(0),
 	m_yPos(0),
 	m_width(0),
@@ -300,10 +299,6 @@
 				{
 					loadQueries(pElem);
 				}
-				else if (nodeName == &quot;results&quot;)
-				{
-					loadResults(pElem);
-				}
 				else if (nodeName == &quot;label&quot;)
 				{
 					loadLabels(pElem);
@@ -577,50 +572,6 @@
 	return true;
 }
 
-bool PinotSettings::loadResults(const Element *pElem)
-{
-	if (pElem == NULL)
-	{
-		return false;
-	}
-
-	Node::NodeList childNodes = pElem-&gt;get_children();
-	if (childNodes.empty() == true)
-	{
-		return false;
-	}
-
-	for (Node::NodeList::iterator iter = childNodes.begin(); iter != childNodes.end(); ++iter)
-	{
-		Node *pNode = (*iter);
-		Element *pElem = dynamic_cast&lt;Element*&gt;(pNode);
-		if (pElem == NULL)
-		{
-			continue;
-		}
-
-		string nodeName = pElem-&gt;get_name();
-		string nodeContent = getElementContent(pElem);
-		if (nodeName == &quot;viewmode&quot;)
-		{
-			if (nodeContent == &quot;SOURCE&quot;)
-			{
-				m_browseResults = false;
-			}
-			else
-			{
-				m_browseResults = true;
-			}
-		}
-		else if (nodeName == &quot;browser&quot;)
-		{
-			m_browserCommand = nodeContent;
-		}
-	}
-
-	return true;
-}
-
 bool PinotSettings::loadLabels(const Element *pElem)
 {
 	if (pElem == NULL)
@@ -900,14 +851,6 @@
 		addChildElement(pElem, &quot;index&quot;, (queryIter-&gt;second.getIndexResults() ? &quot;ALL&quot; : &quot;NONE&quot;));
 		addChildElement(pElem, &quot;label&quot;, queryIter-&gt;second.getLabelName());
 	}
-	pElem = pRootElem-&gt;add_child(&quot;results&quot;);
-	if (pElem == NULL)
-	{
-		return false;
-	}
-	// Results view options
-	addChildElement(pElem, &quot;viewmode&quot;, (m_browseResults ? &quot;BROWSE&quot; : &quot;SOURCE&quot;));
-	addChildElement(pElem, &quot;browser&quot;, m_browserCommand);
 	// Labels
 	for (set&lt;string&gt;::iterator labelIter = m_labels.begin(); labelIter != m_labels.end(); ++labelIter)
 	{

Modified: trunk/UI/GTK2/src/PinotSettings.h
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.h	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/src/PinotSettings.h	2006-06-07 13:57:03 UTC (rev 296)
@@ -141,8 +141,6 @@
 		Glib::ustring m_indexLocation;
 		Glib::ustring m_mailIndexLocation;
 		Glib::ustring m_historyDatabase;
-		bool m_browseResults;
-		Glib::ustring m_browserCommand;
 		int m_xPos;
 		int m_yPos;
 		int m_width;
@@ -170,7 +168,6 @@
 		bool loadIndexes(const xmlpp::Element *pElem);
 		bool loadEngineChannels(const xmlpp::Element *pElem);
 		bool loadQueries(const xmlpp::Element *pElem);
-		bool loadResults(const xmlpp::Element *pElem);
 		bool loadLabels(const xmlpp::Element *pElem);
 		bool loadColour(const xmlpp::Element *pElem);
 		bool loadMailAccounts(const xmlpp::Element *pElem);

Modified: trunk/UI/GTK2/src/prefsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.cc	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/src/prefsDialog.cc	2006-06-07 13:57:03 UTC (rev 296)
@@ -41,28 +41,14 @@
 	prefsDialog_glade(),
 	m_settings(PinotSettings::getInstance())
 {
-	// Associate the columns model to the view combo
-	m_refViewTree = ListStore::create(m_viewColumns);
-	viewCombobox-&gt;set_model(m_refViewTree);
-	viewCombobox-&gt;pack_start(m_viewColumns.m_name);
-	// Populate
-	populate_comboboxes();
-
 	// Initialize widgets
 	// Ignore robots directives
 	ignoreRobotsCheckbutton-&gt;set_active(m_settings.m_ignoreRobotsDirectives);
+	// Google API key
 	if (m_settings.m_googleAPIKey.empty() == false)
 	{
 		apiKeyEntry-&gt;set_text(m_settings.m_googleAPIKey);
 	}
-	// Browser command
-	if (m_settings.m_browserCommand.empty() == false)
-	{
-		browserEntry-&gt;set_text(m_settings.m_browserCommand);
-	}
-	// Browser entry field and button
-	browserEntry-&gt;set_sensitive(m_settings.m_browseResults);
-	browserButton-&gt;set_sensitive(m_settings.m_browseResults);
 	// New results colour
 	newResultsColorbutton-&gt;set_color(m_settings.m_newResultsColour);
 	// Enable terms suggestion
@@ -112,25 +98,6 @@
 	return m_deletedMail;
 }
 
-void prefsDialog::populate_comboboxes()
-{
-	TreeModel::iterator iter = m_refViewTree-&gt;append();
-	TreeModel::Row row = *iter;
-	row[m_viewColumns.m_name] = _(&quot;In internal viewer&quot;);
-	iter = m_refViewTree-&gt;append();
-	row = *iter;
-	row[m_viewColumns.m_name] = _(&quot;In browser&quot;);
-	// Default results view
-	if (m_settings.m_browseResults == false)
-	{
-		viewCombobox-&gt;set_active(0);
-	}
-	else
-	{
-		viewCombobox-&gt;set_active(1);
-	}
-}
-
 void prefsDialog::populate_labelsTreeview()
 {
 	TreeModel::iterator iter;
@@ -282,19 +249,6 @@
 {
 	// Synchronise widgets with settings
 	m_settings.m_ignoreRobotsDirectives = ignoreRobotsCheckbutton-&gt;get_active();
-	// Default results view mode
-	int viewMode = viewCombobox-&gt;get_active_row_number();
-	if (viewMode == 0)
-	{
-		// Source
-		m_settings.m_browseResults = false;
-	}
-	else
-	{
-		// Browser
-		m_settings.m_browseResults = true;
-	}
-	m_settings.m_browserCommand = browserEntry-&gt;get_text();
 	m_settings.m_newResultsColour = newResultsColorbutton-&gt;get_color();
 	m_settings.m_suggestQueryTerms = enableCompletionCheckbutton-&gt;get_active();
 	m_settings.m_googleAPIKey = apiKeyEntry-&gt;get_text();
@@ -304,29 +258,6 @@
 	save_mailTreeview();
 }
 
-void prefsDialog::on_viewCombobox_changed()
-{
-	bool browseResults = true;
-
-	// Enable the browser entry field and button only if browsing is enabled
-	if (viewCombobox-&gt;get_active_row_number() == 0)
-	{
-		browseResults = false;
-	}
-
-	browserEntry-&gt;set_sensitive(browseResults);
-	browserButton-&gt;set_sensitive(browseResults);
-}
-
-void prefsDialog::on_browserButton_clicked()
-{
-	ustring browserCmd = browserEntry-&gt;get_text();
-	if (select_file_name(*this, _(&quot;Browser location&quot;), browserCmd, true) == true)
-	{
-		browserEntry-&gt;set_text(browserCmd);
-	}
-}
-
 void prefsDialog::on_addLabelButton_clicked()
 {
 	// Now create a new entry in the labels list

Modified: trunk/UI/GTK2/src/prefsDialog.hh
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.hh	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/src/prefsDialog.hh	2006-06-07 13:57:03 UTC (rev 296)
@@ -42,8 +42,6 @@
 
 protected:
 	virtual void on_prefsOkbutton_clicked();
-	virtual void on_viewCombobox_changed();
-	virtual void on_browserButton_clicked();
 	virtual void on_addLabelButton_clicked();
 	virtual void on_removeLabelButton_clicked();
 	virtual bool on_mailTreeview_button_press_event(GdkEventButton *ev);
@@ -51,7 +49,6 @@
 	virtual void on_editAccountButton_clicked();
 	virtual void on_removeAccountButton_clicked();
 
-	void populate_comboboxes();
 	void populate_labelsTreeview();
 	bool save_labelsTreeview();
 	void populate_mailTreeview();

Modified: trunk/UI/GTK2/src/prefsDialog_glade.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog_glade.cc	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/src/prefsDialog_glade.cc	2006-06-07 13:57:03 UTC (rev 296)
@@ -1,9 +1,9 @@
-// generated 2006/3/18 19:48:01 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
-// using glademm V2.6.0
+// generated 2006/6/7 21:55:30 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
+// using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
 // glade-- /home/fabrice/Projects/MetaSE/pinot/UI/GTK2/metase-gtk2.glade
-// for gtk 2.6.10 and gtkmm 2.6.2
+// for gtk 2.8.17 and gtkmm 2.8.3
 //
 // Please modify the corresponding derived classes in ./src/prefsDialog.cc
 
@@ -25,18 +25,11 @@
 #  else
 #    define N_(String) (String)
 #  endif
-#else
-#  define textdomain(String) (String)
-#  define gettext(String) (String)
-#  define dgettext(Domain,Message) (Message)
-#  define dcgettext(Domain,Message,Type) (Message)
-#  define bindtextdomain(Domain,Directory) (Domain)
-#  define _(String) (String)
-#  define N_(String) (String)
 #endif
 #include &lt;gtkmmconfig.h&gt;
 #if GTKMM_MAJOR_VERSION==2 &amp;&amp; GTKMM_MINOR_VERSION&gt;2
 #include &lt;sigc++/compatibility.h&gt;
+#include &lt;sigc++/bind.h&gt;
 #define GMM_GTKMM_22_24(a,b) b
 #else //gtkmm 2.2
 #define GMM_GTKMM_22_24(a,b) a
@@ -46,12 +39,22 @@
 #include &lt;gtkmm/accelgroup.h&gt;
 #include &lt;gtkmm/buttonbox.h&gt;
 #include &lt;gtkmm/label.h&gt;
-#include &lt;gtkmm/box.h&gt;
 #include &lt;gtkmm/table.h&gt;
 #include &lt;gtkmm/scrolledwindow.h&gt;
 #include &lt;gtkmm/image.h&gt;
+#include &lt;gtkmm/box.h&gt;
 #include &lt;gtkmm/alignment.h&gt;
+#ifndef ENABLE_NLS
+#  define textdomain(String) (String)
+#  define gettext(String) (String)
+#  define dgettext(Domain,Message) (Message)
+#  define dcgettext(Domain,Message,Type) (Message)
+#  define bindtextdomain(Domain,Directory) (Domain)
+#  define _(String) (String)
+#  define N_(String) (String)
+#endif
 
+
 prefsDialog_glade::prefsDialog_glade(
 )
 {  prefsDialog = this;
@@ -60,16 +63,10 @@
    prefsOkbutton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-ok&quot;)));
    
    Gtk::Label *robotsLabel = Gtk::manage(new class Gtk::Label(_(&quot;HTTP crawling:&quot;)));
-   Gtk::Label *viewLabel = Gtk::manage(new class Gtk::Label(_(&quot;View documents:&quot;)));
-   Gtk::Label *browserLabel = Gtk::manage(new class Gtk::Label(_(&quot;Browser:&quot;)));
    apiKeyLabel = Gtk::manage(new class Gtk::Label(_(&quot;Google API key:&quot;)));
    apiKeyEntry = Gtk::manage(new class Gtk::Entry());
-   viewCombobox = Gtk::manage(new class Gtk::ComboBox());
    ignoreRobotsCheckbutton = Gtk::manage(new class Gtk::CheckButton(_(&quot;Ignore robots.txt and Robots META tag&quot;)));
-   browserEntry = Gtk::manage(new class Gtk::Entry());
-   browserButton = Gtk::manage(new class Gtk::Button(_(&quot;...&quot;)));
    
-   Gtk::HBox *browserHbox = Gtk::manage(new class Gtk::HBox(false, 4));
    Gtk::Label *newResultsLabel = Gtk::manage(new class Gtk::Label(_(&quot;New results:&quot;)));
    Gtk::Label *queriesLabel = Gtk::manage(new class Gtk::Label(_(&quot;Queries:&quot;)));
    enableCompletionCheckbutton = Gtk::manage(new class Gtk::CheckButton(_(&quot;Enable search terms suggestion&quot;)));
@@ -127,18 +124,6 @@
    robotsLabel-&gt;set_line_wrap(false);
    robotsLabel-&gt;set_use_markup(false);
    robotsLabel-&gt;set_selectable(false);
-   viewLabel-&gt;set_alignment(0,0.5);
-   viewLabel-&gt;set_padding(4,4);
-   viewLabel-&gt;set_justify(Gtk::JUSTIFY_LEFT);
-   viewLabel-&gt;set_line_wrap(false);
-   viewLabel-&gt;set_use_markup(false);
-   viewLabel-&gt;set_selectable(false);
-   browserLabel-&gt;set_alignment(0,0.5);
-   browserLabel-&gt;set_padding(4,4);
-   browserLabel-&gt;set_justify(Gtk::JUSTIFY_LEFT);
-   browserLabel-&gt;set_line_wrap(false);
-   browserLabel-&gt;set_use_markup(false);
-   browserLabel-&gt;set_selectable(false);
    apiKeyLabel-&gt;set_alignment(0,0.5);
    apiKeyLabel-&gt;set_padding(4,4);
    apiKeyLabel-&gt;set_justify(Gtk::JUSTIFY_LEFT);
@@ -155,17 +140,6 @@
    ignoreRobotsCheckbutton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    ignoreRobotsCheckbutton-&gt;set_mode(true);
    ignoreRobotsCheckbutton-&gt;set_active(false);
-   browserEntry-&gt;set_flags(Gtk::CAN_FOCUS);
-   browserEntry-&gt;set_visibility(true);
-   browserEntry-&gt;set_editable(true);
-   browserEntry-&gt;set_max_length(0);
-   browserEntry-&gt;set_has_frame(true);
-   browserEntry-&gt;set_activates_default(false);
-   browserButton-&gt;set_flags(Gtk::CAN_FOCUS);
-   browserButton-&gt;set_flags(Gtk::CAN_DEFAULT);
-   browserButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
-   browserHbox-&gt;pack_start(*browserEntry);
-   browserHbox-&gt;pack_start(*browserButton, Gtk::PACK_SHRINK, 0);
    newResultsLabel-&gt;set_alignment(0,0.5);
    newResultsLabel-&gt;set_padding(4,4);
    newResultsLabel-&gt;set_justify(Gtk::JUSTIFY_LEFT);
@@ -186,17 +160,13 @@
    generalTable-&gt;set_row_spacings(0);
    generalTable-&gt;set_col_spacings(0);
    generalTable-&gt;attach(*robotsLabel, 0, 1, 0, 1, Gtk::FILL, Gtk::FILL, 0, 0);
-   generalTable-&gt;attach(*viewLabel, 0, 1, 1, 2, Gtk::FILL, Gtk::FILL, 0, 0);
-   generalTable-&gt;attach(*browserLabel, 0, 1, 2, 3, Gtk::FILL, Gtk::FILL, 0, 0);
-   generalTable-&gt;attach(*apiKeyLabel, 0, 1, 5, 6, Gtk::FILL, Gtk::FILL, 0, 0);
-   generalTable-&gt;attach(*apiKeyEntry, 1, 2, 5, 6, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
-   generalTable-&gt;attach(*viewCombobox, 1, 2, 1, 2, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
+   generalTable-&gt;attach(*apiKeyLabel, 0, 1, 3, 4, Gtk::FILL, Gtk::FILL, 0, 0);
+   generalTable-&gt;attach(*apiKeyEntry, 1, 2, 3, 4, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
    generalTable-&gt;attach(*ignoreRobotsCheckbutton, 1, 2, 0, 1, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
-   generalTable-&gt;attach(*browserHbox, 1, 2, 2, 3, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
-   generalTable-&gt;attach(*newResultsLabel, 0, 1, 3, 4, Gtk::FILL, Gtk::FILL, 0, 0);
-   generalTable-&gt;attach(*queriesLabel, 0, 1, 4, 5, Gtk::FILL, Gtk::FILL, 0, 0);
-   generalTable-&gt;attach(*enableCompletionCheckbutton, 1, 2, 4, 5, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
-   generalTable-&gt;attach(*newResultsColorbutton, 1, 2, 3, 4, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
+   generalTable-&gt;attach(*newResultsLabel, 0, 1, 1, 2, Gtk::FILL, Gtk::FILL, 0, 0);
+   generalTable-&gt;attach(*queriesLabel, 0, 1, 2, 3, Gtk::FILL, Gtk::FILL, 0, 0);
+   generalTable-&gt;attach(*enableCompletionCheckbutton, 1, 2, 2, 3, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
+   generalTable-&gt;attach(*newResultsColorbutton, 1, 2, 1, 2, Gtk::EXPAND|Gtk::FILL, Gtk::FILL, 4, 4);
    generalLabel-&gt;set_alignment(0.5,0.5);
    generalLabel-&gt;set_padding(0,0);
    generalLabel-&gt;set_justify(Gtk::JUSTIFY_LEFT);
@@ -343,15 +313,9 @@
    prefsCancelbutton-&gt;show();
    prefsOkbutton-&gt;show();
    robotsLabel-&gt;show();
-   viewLabel-&gt;show();
-   browserLabel-&gt;show();
    apiKeyLabel-&gt;show();
    apiKeyEntry-&gt;show();
-   viewCombobox-&gt;show();
    ignoreRobotsCheckbutton-&gt;show();
-   browserEntry-&gt;show();
-   browserButton-&gt;show();
-   browserHbox-&gt;show();
    newResultsLabel-&gt;show();
    queriesLabel-&gt;show();
    enableCompletionCheckbutton-&gt;show();
@@ -392,8 +356,6 @@
    prefsNotebook-&gt;show();
    prefsDialog-&gt;show();
    prefsOkbutton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_prefsOkbutton_clicked), false);
-   viewCombobox-&gt;signal_changed().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_viewCombobox_changed), false);
-   browserButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_browserButton_clicked), false);
    addLabelButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_addLabelButton_clicked), false);
    removeLabelButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_removeLabelButton_clicked), false);
    mailTreeview-&gt;signal_button_press_event().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_mailTreeview_button_press_event), false);

Modified: trunk/UI/GTK2/src/prefsDialog_glade.hh
===================================================================
--- trunk/UI/GTK2/src/prefsDialog_glade.hh	2006-06-07 13:33:52 UTC (rev 295)
+++ trunk/UI/GTK2/src/prefsDialog_glade.hh	2006-06-07 13:57:03 UTC (rev 296)
@@ -1,9 +1,9 @@
-// generated 2006/3/18 19:48:01 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
-// using glademm V2.6.0
+// generated 2006/6/7 21:55:30 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
+// using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
 // glade-- /home/fabrice/Projects/MetaSE/pinot/UI/GTK2/metase-gtk2.glade
-// for gtk 2.6.10 and gtkmm 2.6.2
+// for gtk 2.8.17 and gtkmm 2.8.3
 //
 // Please modify the corresponding derived classes in ./src/prefsDialog.hh and./src/prefsDialog.cc
 
@@ -35,7 +35,6 @@
 #include &lt;gtkmm/button.h&gt;
 #include &lt;gtkmm/label.h&gt;
 #include &lt;gtkmm/entry.h&gt;
-#include &lt;gtkmm/combobox.h&gt;
 #include &lt;gtkmm/checkbutton.h&gt;
 #include &lt;gtkmm/colorbutton.h&gt;
 #include &lt;gtkmm/treeview.h&gt;
@@ -52,10 +51,7 @@
         class Gtk::Button * prefsOkbutton;
         class Gtk::Label * apiKeyLabel;
         class Gtk::Entry * apiKeyEntry;
-        class Gtk::ComboBox * viewCombobox;
         class Gtk::CheckButton * ignoreRobotsCheckbutton;
-        class Gtk::Entry * browserEntry;
-        class Gtk::Button * browserButton;
         class Gtk::CheckButton * enableCompletionCheckbutton;
         class Gtk::ColorButton * newResultsColorbutton;
         class Gtk::TreeView * labelsTreeview;
@@ -72,8 +68,6 @@
         ~prefsDialog_glade();
 private:
         virtual void on_prefsOkbutton_clicked() = 0;
-        virtual void on_viewCombobox_changed() = 0;
-        virtual void on_browserButton_clicked() = 0;
         virtual void on_addLabelButton_clicked() = 0;
         virtual void on_removeLabelButton_clicked() = 0;
         virtual bool on_mailTreeview_button_press_event(GdkEventButton *ev) = 0;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000289.html">[Pinot-svn] r295 - in trunk: . Collect Search Utils
</A></li>
	<LI>Next message: <A HREF="000291.html">[Pinot-svn] r297 - trunk/UI/GTK2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#290">[ date ]</a>
              <a href="thread.html#290">[ thread ]</a>
              <a href="subject.html#290">[ subject ]</a>
              <a href="author.html#290">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pinot-svn">More information about the Pinot-svn
mailing list</a><br>
</body></html>
