<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pinot-svn] r305 - in trunk: . UI UI/GTK2 UI/GTK2/src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pinot-svn/2006-June/index.html" >
   <LINK REL="made" HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r305%20-%20in%20trunk%3A%20.%20UI%20UI/GTK2%20UI/GTK2/src&In-Reply-To=%3C200606091135.k59BZUgI013104%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000298.html">
   <LINK REL="Next"  HREF="000300.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pinot-svn] r305 - in trunk: . UI UI/GTK2 UI/GTK2/src</H1>
    <B>fabricecolin at BerliOS</B> 
    <A HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r305%20-%20in%20trunk%3A%20.%20UI%20UI/GTK2%20UI/GTK2/src&In-Reply-To=%3C200606091135.k59BZUgI013104%40sheep.berlios.de%3E"
       TITLE="[Pinot-svn] r305 - in trunk: . UI UI/GTK2 UI/GTK2/src">fabricecolin at berlios.de
       </A><BR>
    <I>Fri Jun  9 13:35:30 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000298.html">[Pinot-svn] r304 - trunk/UI/GTK2/src
</A></li>
        <LI>Next message: <A HREF="000300.html">[Pinot-svn] r306 - trunk/UI/GTK2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#299">[ date ]</a>
              <a href="thread.html#299">[ thread ]</a>
              <a href="subject.html#299">[ subject ]</a>
              <a href="author.html#299">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fabricecolin
Date: 2006-06-09 13:35:14 +0200 (Fri, 09 Jun 2006)
New Revision: 305

Removed:
   trunk/UI/GTK2/index.html
   trunk/UI/GTK2/src/HtmlView.cpp
   trunk/UI/GTK2/src/HtmlView.h
   trunk/UI/RenderHTML/
Modified:
   trunk/Makefile.am
   trunk/UI/GTK2/src/Makefile.am
   trunk/configure.in
Log:
Removing internal viewer stuff.


Modified: trunk/Makefile.am
===================================================================
--- trunk/Makefile.am	2006-06-09 11:31:54 UTC (rev 304)
+++ trunk/Makefile.am	2006-06-09 11:35:14 UTC (rev 305)
@@ -2,19 +2,18 @@
 # using glademm V2.6.0
 
 SUBDIRS = po Utils Tokenize SQL Collect @SOAP_SUBDIRS@ Search \
-	Index Monitor UI/RenderHTML UI/GTK2/src
+	Index Monitor UI/GTK2/src
 
 EXTRA_DIST = ChangeLog NEWS README TODO mkinstalldirs pinot.desktop \
 	pinot.spec textcat_conf.txt Search/Plugins/*src Search/Plugins/*.xml \
 	Collect/pinot-collect.1 Search/pinot-search.1 UI/GTK2/src/pinot.1 \
-	UI/GTK2/index.html UI/GTK2/xapian-powered.png UI/GTK2/pinot.png \
+	UI/GTK2/xapian-powered.png UI/GTK2/pinot.png \
 	UI/GTK2/metase-gtk2.glade UI/GTK2/metase-gtk2.gladep
 
 man_MANS = Collect/pinot-collect.1 Search/pinot-search.1 UI/GTK2/src/pinot.1
 
 install-data-local:
 	$(mkinstalldirs) $(DESTDIR)$(datadir)/pinot
-	$(INSTALL_DATA) UI/GTK2/index.html $(DESTDIR)$(datadir)/pinot/index.html
 	$(INSTALL_DATA) UI/GTK2/xapian-powered.png $(DESTDIR)$(datadir)/pinot/xapian-powered.png
 	$(INSTALL_DATA) UI/GTK2/metase-gtk2.glade $(DESTDIR)$(datadir)/pinot/metase-gtk2.glade
 	$(INSTALL_DATA) UI/GTK2/metase-gtk2.gladep $(DESTDIR)$(datadir)/pinot/metase-gtk2.gladep

Deleted: trunk/UI/GTK2/index.html
===================================================================
--- trunk/UI/GTK2/index.html	2006-06-09 11:31:54 UTC (rev 304)
+++ trunk/UI/GTK2/index.html	2006-06-09 11:35:14 UTC (rev 305)
@@ -1,29 +0,0 @@
-&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 3.2//EN&quot;&gt;
-&lt;HTML&gt;
-&lt;html&gt;
-&lt;head&gt;&lt;title&gt;Welcome to Pinot !&lt;/title&gt;
-&lt;/head&gt;
-&lt;body bgcolor=&quot;#ffffff&quot; text=&quot;#000000&quot; link=&quot;#c80000&quot; vlink=&quot;#900000&quot; alink=&quot;#ea5b1a&quot;&gt;
-
-&lt;table width=&quot;100%&quot;&gt;
-&lt;tr&gt;
-&lt;td colspan=&quot;3&quot; align=&quot;center&quot;&gt;
-&lt;strong&gt;Welcome to Pinot !&lt;/strong&gt;
-&lt;/td&gt;
-&lt;/tr&gt;
-
-&lt;tr&gt;
-&lt;td colspan=&quot;3&quot; align=&quot;center&quot;&gt;
-Visit the web site at
-&lt;a href=&quot;<A HREF="http://pinot.berlios.de/">http://pinot.berlios.de/</A>&quot;&gt;pinot.berlios.de&lt;/a&gt;.
-&lt;/td&gt;
-&lt;/tr&gt;
-
-&lt;tr&gt;
-&lt;td valign=&quot;top&quot; align=&quot;center&quot;&gt;
-&lt;img src=&quot;xapian-powered.png&quot; alt=&quot;Powered By Xapian Logo&quot; width=&quot;208&quot; height=&quot;30&quot;&gt;
-&lt;/td&gt;
-&lt;/tr&gt;
-
-&lt;/body&gt;
-&lt;/html&gt;

Deleted: trunk/UI/GTK2/src/HtmlView.cpp
===================================================================
--- trunk/UI/GTK2/src/HtmlView.cpp	2006-06-09 11:31:54 UTC (rev 304)
+++ trunk/UI/GTK2/src/HtmlView.cpp	2006-06-09 11:35:14 UTC (rev 305)
@@ -1,84 +0,0 @@
-/*
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include &lt;iostream&gt;
-
-#include &lt;glibmm/wrap.h&gt;
-
-#include &quot;config.h&quot;
-#include &quot;NLS.h&quot;
-#include &quot;HtmlView.h&quot;
-#include &quot;PinotUtils.h&quot;
-
-using namespace Glib;
-using namespace Gtk;
-
-HtmlView::HtmlView(Menu *pPopupMenu) :
-	MozillaRenderer(),
-	SigC::Object(),
-	m_pPopupMenu(pPopupMenu),
-	m_pDocHtmlView(NULL)
-{
-	GtkWidget *view = getObject();
-	if (view != NULL)
-	{
-		// Wrap this into a gtkmm Widget object
-		m_pDocHtmlView = wrap(view);
-		if (m_pDocHtmlView != NULL)
-		{
-			// Handle button presses
-			m_pDocHtmlView-&gt;signal_button_press_event().connect_notify(
-				SigC::slot(*this, &amp;HtmlView::onButtonPressEvent));
-
-			m_pDocHtmlView-&gt;show();
-		}
-	}
-}
-
-HtmlView::~HtmlView()
-{
-	if (m_pDocHtmlView != NULL)
-	{
-		delete m_pDocHtmlView;
-	}
-}
-
-//
-// Handles button presses.
-//
-void HtmlView::onButtonPressEvent(GdkEventButton *ev)
-{
-#ifdef DEBUG
-	cout &lt;&lt; &quot;HtmlView::onButtonPressEvent: click on button &quot; &lt;&lt; ev-&gt;button &lt;&lt; endl;
-#endif
-	// Check for popup click
-	if ((ev-&gt;type == GDK_BUTTON_PRESS) &amp;&amp;
-		(ev-&gt;button == 3) )
-	{
-		if (m_pPopupMenu != NULL)
-		{
-			m_pPopupMenu-&gt;popup(ev-&gt;button, ev-&gt;time);
-		}
-	}
-}
-
-//
-// Returns the underlying widget.
-//
-Widget *HtmlView::getWidget(void) const
-{
-	return m_pDocHtmlView;
-}

Deleted: trunk/UI/GTK2/src/HtmlView.h
===================================================================
--- trunk/UI/GTK2/src/HtmlView.h	2006-06-09 11:31:54 UTC (rev 304)
+++ trunk/UI/GTK2/src/HtmlView.h	2006-06-09 11:35:14 UTC (rev 305)
@@ -1,47 +0,0 @@
-/*
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#ifndef _HTMLVIEW_HH
-#define _HTMLVIEW_HH
-
-#include &lt;sigc++/object.h&gt;
-#include &lt;gtkmm/menu.h&gt;
-
-#include &quot;MozillaRenderer.h&quot;
-
-class HtmlView : public MozillaRenderer, public SigC::Object
-{
-	public:
-		HtmlView(Gtk::Menu *pPopupMenu);
-		virtual ~HtmlView();
-
-		/// Returns the underlying widget.
-		Gtk::Widget *getWidget(void) const;
-
-	protected:
-		Gtk::Menu *m_pPopupMenu;
-		Gtk::Widget *m_pDocHtmlView;
-
-		/// Handles button presses.
-		void onButtonPressEvent(GdkEventButton *ev);
-
-	private:
-		HtmlView(const HtmlView &amp;other);
-		HtmlView &amp;operator=(const HtmlView &amp;other);
-
-};
-
-#endif // _HTMLVIEW_HH

Modified: trunk/UI/GTK2/src/Makefile.am
===================================================================
--- trunk/UI/GTK2/src/Makefile.am	2006-06-09 11:31:54 UTC (rev 304)
+++ trunk/UI/GTK2/src/Makefile.am	2006-06-09 11:35:14 UTC (rev 305)
@@ -19,7 +19,6 @@
 	Notebook.h \
 	PinotUtils.h \
 	WorkerThreads.h \
-	HtmlView.h \
 	IndexTree.h \
 	MboxHandler.h \
 	PinotSettings.h \
@@ -45,7 +44,6 @@
 	Notebook.cpp \
 	PinotUtils.cpp \
 	WorkerThreads.cpp \
-	HtmlView.cpp \
 	IndexTree.cpp \
 	MboxHandler.cpp \
 	PinotSettings.cpp \
@@ -55,12 +53,11 @@
 
 AM_CXXFLAGS = -I../../../Utils -I../../../Tokenize -I../../../SQL \
 	-I../../../Monitor -I../../../Collect -I../../../Search \
-	-I../../../Search/Google -I../../../Index -I../../RenderHTML \
+	-I../../../Search/Google -I../../../Index \
 	@SQL_CFLAGS@ @HTTP_CFLAGS@ @MIME_CFLAGS@ @XML_CFLAGS@ @SOAP_CFLAGS@ @INDEX_CFLAGS@ @UI_CFLAGS@
 
 pinot_LDADD = -L../../../Utils -L../../../Tokenize -L../../../SQL -L../../../Monitor \
 	-L../../../Collect -L../../../Search -L../../../Search/Google \
-	-L../../../Index -L../../RenderHTML \
-	-lHTML -lIndex @SEARCH_LIBS@ -lMonitor -lCollect -lSQL -lTokenize -lUtils \
+	-L../../../Index -lIndex @SEARCH_LIBS@ -lMonitor -lCollect -lSQL -lTokenize -lUtils \
 	@LIBS@ @UI_LIBS@ @INDEX_LIBS@ @SOAP_LIBS@ @XML_LIBS@ @MIME_LIBS@ @HTTP_LIBS@ @SQL_LIBS@ @MISC_LIBS@
 

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2006-06-09 11:31:54 UTC (rev 304)
+++ trunk/configure.in	2006-06-09 11:35:14 UTC (rev 305)
@@ -84,32 +84,6 @@
 AC_SUBST(SEARCH_LTLIBRARIES)
 AC_SUBST(SEARCH_LIBS)
 
-dnl Mozilla
-AC_MSG_CHECKING([which Gecko engine to use])
-AC_ARG_WITH(gecko, AS_HELP_STRING(--with-gecko@&lt;:@=mozilla|firefox@:&gt;@,
-   which Gecko engine to use (default: mozilla)))
-gecko=$with_gecko
-if test &quot;x$gecko&quot; = &quot;x&quot;; then
-   gecko=&quot;mozilla&quot;
-fi
-AC_MSG_RESULT([$gecko])
-
-PKG_CHECK_MODULES(GECKO, $gecko-xpcom &gt;= 1.4 $gecko-gtkmozembed &gt;= 1.4 )
-dnl Mozilla NSS and NSPR
-AC_PATH_PROG(NSS_CONFIG, nss-config, no)
-if test &quot;$NSS_CONFIG&quot; = &quot;no&quot; ; then
-   PKG_CHECK_MODULES(MOZILLANS, $gecko-nss &gt;= 1.4 $gecko-nspr &gt;= 1.4)
-   MOZILLA_NS_DIR=&quot;HAS_MOZILLA_NSS&quot;
-else
-   PKG_CHECK_MODULES(MOZILLANS, nss &gt;= 1.4 nspr &gt;= 1.4)
-   MOZILLA_NS_DIR=&quot;HAS_NSS&quot;
-fi
-dnl Location of Mozilla's library directory
-MOZILLA_LIB_DIR=&quot;`$PKG_CONFIG --variable=libdir $gecko-gtkmozembed`&quot;
-if test &quot;$MOZILLA_LIB_DIR&quot; = &quot;&quot; ; then
-  MOZILLA_LIB_DIR=/usr/lib/mozilla
-fi
-
 dnl Neon or Curl ?
 AC_MSG_CHECKING(which HTTP library to use)
 AC_ARG_WITH(http, AS_HELP_STRING(--with-http@&lt;:@=neon|curl@:&gt;@,
@@ -195,8 +169,7 @@
 AC_SUBST(GLIBMM_CFLAGS)
 AC_SUBST(GLIBMM_LIBS)
 PKG_CHECK_MODULES(UI, gtkmm-2.4 &gt;= 2.6 )
-UI_CFLAGS=&quot;$MOZILLANS_CFLAGS -D$MOZILLA_NS_DIR $GECKO_CFLAGS $UI_CFLAGS&quot;
-UI_LIBS=&quot;-lpthread -L$MOZILLA_LIB_DIR -Xlinker -rpath -Xlinker $MOZILLA_LIB_DIR $GECKO_LIBS $MOZILLANS_LIBS $UI_LIBS&quot;
+UI_LIBS=&quot;-lpthread $UI_LIBS&quot;
 AC_SUBST(UI_CFLAGS)
 AC_SUBST(UI_LIBS)
 
@@ -210,5 +183,5 @@
 if test &quot;$SOAP_SUBDIRS&quot; != &quot;&quot; ; then
   AC_OUTPUT( Search/Google/Makefile )
 fi
-AC_OUTPUT( Search/Makefile Index/Makefile Monitor/Makefile UI/RenderHTML/Makefile UI/GTK2/src/Makefile )
+AC_OUTPUT( Search/Makefile Index/Makefile Monitor/Makefile UI/GTK2/src/Makefile )
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000298.html">[Pinot-svn] r304 - trunk/UI/GTK2/src
</A></li>
	<LI>Next message: <A HREF="000300.html">[Pinot-svn] r306 - trunk/UI/GTK2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#299">[ date ]</a>
              <a href="thread.html#299">[ thread ]</a>
              <a href="subject.html#299">[ subject ]</a>
              <a href="author.html#299">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pinot-svn">More information about the Pinot-svn
mailing list</a><br>
</body></html>
