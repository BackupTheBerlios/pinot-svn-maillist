From fabricecolin at mail.berlios.de  Tue Apr  3 17:05:25 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 3 Apr 2007 17:05:25 +0200
Subject: [Pinot-svn] r801 - trunk/UI/GTK2/src
Message-ID: <200704031505.l33F5P8K005382@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-03 17:05:25 +0200 (Tue, 03 Apr 2007)
New Revision: 801

Modified:
   trunk/UI/GTK2/src/PinotSettings.cpp
Log:
Can remove deb from the blacklist since it's in the external filter's
configuration file.


Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2007-03-31 09:24:27 UTC (rev 800)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2007-04-03 15:05:25 UTC (rev 801)
@@ -253,7 +253,6 @@
 		m_filePatternsBlackList.insert("*.Z");
 		m_filePatternsBlackList.insert("*.avi");
 		m_filePatternsBlackList.insert("*.asf");
-		m_filePatternsBlackList.insert("*.deb");
 		m_filePatternsBlackList.insert("*.gif");
 		m_filePatternsBlackList.insert("*.jpeg");
 		m_filePatternsBlackList.insert("*.jpg");



From fabricecolin at mail.berlios.de  Wed Apr  4 15:32:33 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 4 Apr 2007 15:32:33 +0200
Subject: [Pinot-svn] r802 - trunk/UI/GTK2/src
Message-ID: <200704041332.l34DWXD7015231@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-04 15:32:31 +0200 (Wed, 04 Apr 2007)
New Revision: 802

Modified:
   trunk/UI/GTK2/src/ModelColumns.h
   trunk/UI/GTK2/src/ResultsTree.cpp
   trunk/UI/GTK2/src/ResultsTree.h
   trunk/UI/GTK2/src/mainWindow.cc
Log:
Removed some fat off ResultsTree.


Modified: trunk/UI/GTK2/src/ModelColumns.h
===================================================================
--- trunk/UI/GTK2/src/ModelColumns.h	2007-04-03 15:05:25 UTC (rev 801)
+++ trunk/UI/GTK2/src/ModelColumns.h	2007-04-04 13:32:31 UTC (rev 802)
@@ -90,8 +90,8 @@
 	Gtk::TreeModelColumn<unsigned int> m_engines;
 	Gtk::TreeModelColumn<unsigned int> m_indexes;
 	Gtk::TreeModelColumn<unsigned int> m_docId;
-	typedef enum { RESULT_ROOT = 0, RESULT_TITLE, RESULT_HOST, RESULT_OTHER } ResultType;
-	Gtk::TreeModelColumn<ResultType> m_resultType;
+	typedef enum { ROW_ENGINE = 0, ROW_HOST, ROW_RESULT, ROW_OTHER } RowType;
+	Gtk::TreeModelColumn<RowType> m_resultType;
 	Gtk::TreeModelColumn<Glib::ustring> m_timestamp;
 	Gtk::TreeModelColumn<time_t> m_timestampTime;
 

Modified: trunk/UI/GTK2/src/ResultsTree.cpp
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.cpp	2007-04-03 15:05:25 UTC (rev 801)
+++ trunk/UI/GTK2/src/ResultsTree.cpp	2007-04-04 13:32:31 UTC (rev 802)
@@ -45,7 +45,7 @@
 using namespace Gtk;
 
 ResultsTree::ResultsTree(const ustring &queryName, Menu *pPopupMenu,
-	PinotSettings &settings) :
+	GroupByMode groupMode, PinotSettings &settings) :
 	TreeView(),
 	m_queryName(queryName),
 	m_pPopupMenu(pPopupMenu),
@@ -54,7 +54,7 @@
 	m_pExtractScrolledwindow(NULL),
 	m_extractTreeView(NULL),
 	m_showExtract(true),
-	m_groupBySearchEngine(true)
+	m_groupMode(groupMode)
 {
 	m_pResultsScrolledwindow = manage(new ScrolledWindow());
 	m_pExtractScrolledwindow = manage(new ScrolledWindow());
@@ -300,9 +300,9 @@
 			pTextRenderer->property_background_gdk().reset_value();
 		}
 
-		ResultsModelColumns::ResultType type = row[m_resultsColumns.m_resultType];
-		if ((type == ResultsModelColumns::RESULT_ROOT) ||
-			(type == ResultsModelColumns::RESULT_HOST))
+		ResultsModelColumns::RowType type = row[m_resultsColumns.m_resultType];
+		if ((type == ResultsModelColumns::ROW_ENGINE) ||
+			(type == ResultsModelColumns::ROW_HOST))
 		{
 			ustring markup("<b>");
 			markup += row[m_resultsColumns.m_text];
@@ -376,8 +376,8 @@
 		m_refExtractStore->clear();
 
 		// Is this an actual result ?
-		ResultsModelColumns::ResultType type = row[m_resultsColumns.m_resultType];
-		if (type == ResultsModelColumns::RESULT_TITLE)
+		ResultsModelColumns::RowType type = row[m_resultsColumns.m_resultType];
+		if (type == ResultsModelColumns::ROW_RESULT)
 		{
 #ifdef DEBUG
 			cout << "ResultsTree::onSelectionSelect: extract for " << row[m_resultsColumns.m_text] << endl;
@@ -451,24 +451,23 @@
 // Adds a set of results.
 // Returns true if something was added to the tree.
 //
-bool ResultsTree::addResults(QueryProperties &queryProps, const string &engineName,
-	const vector<Result> &resultsList, const string &charset,
-	bool groupBySearchEngine)
+bool ResultsTree::addResults(const string &engineName, const vector<Result> &resultsList,
+	const string &charset)
 {
 	std::map<string, TreeModel::iterator> updatedGroups;
-	ResultsModelColumns::ResultType rootType;
+	ResultsModelColumns::RowType rootType;
 	unsigned int count = 0;
 
 	// What's the grouping criteria ?
-	if (groupBySearchEngine == true)
+	if (m_groupMode == BY_ENGINE)
 	{
 		// By search engine
-		rootType = ResultsModelColumns::RESULT_ROOT;
+		rootType = ResultsModelColumns::ROW_ENGINE;
 	}
-	else
+	else if (m_groupMode == BY_HOST)
 	{
 		// By host
-		rootType = ResultsModelColumns::RESULT_HOST;
+		rootType = ResultsModelColumns::ROW_HOST;
 	}
 
 	// Find out what the search engine ID is
@@ -512,71 +511,76 @@
 		ustring title(to_utf8(resultIter->getTitle(), charset));
 		ustring location(to_utf8(resultIter->getLocation(), charset));
 		ustring extract(to_utf8(resultIter->getExtract(), charset));
+		string groupName;
+		TreeModel::iterator groupIter;
 		float currentScore = resultIter->getScore();
 		int rankDiff = 0;
 
 		// What group should the result go to ?
-		string groupName;
-		if (rootType == ResultsModelColumns::RESULT_HOST)
+		if (m_groupMode != FLAT)
 		{
-			Url urlObj(location);
-			groupName = urlObj.getHost();
-		}
-		else
-		{
-			groupName = engineName;
-		}
-
-		// Add the group or get its position if it's already in
-		TreeModel::iterator groupIter;
-		if (appendGroup(groupName, rootType, groupIter) == true)
-		{
-			// OK, add a row for this result within the group
-			TreeModel::iterator titleIter;
-
-			// Has the result's ranking changed ?
-			float oldestScore = 0;
-			float previousScore = history.hasItem(m_queryName, engineName,
-				location, oldestScore);
-			if (previousScore > 0)
+			if (rootType == ResultsModelColumns::ROW_HOST)
 			{
-				// Update this result whatever the current and previous rankings were
-				history.updateItem(m_queryName, engineName, location,
-					title, extract, charset, currentScore);
-				rankDiff = (int)(currentScore - previousScore);
+				Url urlObj(location);
+				groupName = urlObj.getHost();
 			}
 			else
 			{
-				// No, this is a new result
-				history.insertItem(m_queryName, engineName, location,
-					resultIter->getTitle(), extract, charset, currentScore);
-				// New results are displayed as such only if the query has already been run on the engine
-				if (isNewQuery == false)
-				{
-					// This is a magic value :-)
-					rankDiff = 666;
-				}
+				groupName = engineName;
 			}
 
-			++count;
+			// Add the group or get its position if it's already in
+			appendGroup(groupName, rootType, groupIter);
+		}
 
-			unsigned int docId = resultIter->getIsIndexed(indexId);
-			bool isIndexed = false;
+		// OK, add a row for this result within the group
+		TreeModel::iterator titleIter;
 
-			if (docId > 0)
+		// Has the result's ranking changed ?
+		float oldestScore = 0;
+		float previousScore = history.hasItem(m_queryName, engineName,
+			location, oldestScore);
+		if (previousScore > 0)
+		{
+			// Update this result whatever the current and previous rankings were
+			history.updateItem(m_queryName, engineName, location,
+				title, extract, charset, currentScore);
+			rankDiff = (int)(currentScore - previousScore);
+		}
+		else
+		{
+			// No, this is a new result
+			history.insertItem(m_queryName, engineName, location,
+				resultIter->getTitle(), extract, charset, currentScore);
+			// New results are displayed as such only if the query has already been run on the engine
+			if (isNewQuery == false)
 			{
-				isIndexed = true;
+				// This is a magic value :-)
+				rankDiff = 666;
 			}
+		}
 
-			if (appendResult(title, location, resultIter->getType(), (int)currentScore, rankDiff, isIndexed,
-				docId, resultIter->getTimestamp(), engineId, indexId, titleIter, &(*groupIter), true) == true)
-			{
+		++count;
+
+		unsigned int docId = resultIter->getIsIndexed(indexId);
+		bool isIndexed = false;
+
+		if (docId > 0)
+		{
+			isIndexed = true;
+		}
+
+		if (appendResult(title, location, resultIter->getType(), (int)currentScore, rankDiff, isIndexed,
+			docId, resultIter->getTimestamp(), engineId, indexId, titleIter, groupIter, true) == true)
+		{
 #ifdef DEBUG
-				cout << "ResultsTree::addResults: added row for result " << count
-					<< ", " << currentScore << ", " << isIndexed << " " << indexId
-					<< " " << resultIter->getTimestamp() << endl;
+			cout << "ResultsTree::addResults: added row for result " << count
+				<< ", " << currentScore << ", " << isIndexed << " " << indexId
+				<< " " << resultIter->getTimestamp() << endl;
 #endif
 
+			if (groupIter)
+			{
 				// Update this map, so that we know which groups need updating
 				updatedGroups[groupName] = groupIter;
 			}
@@ -598,17 +602,14 @@
 
 		return true;
 	}
-	else
+	else if (m_groupMode == BY_ENGINE)
 	{
-		if (rootType == ResultsModelColumns::RESULT_ROOT)
-		{
-			// If this didn't return any result, add an empty group
-			TreeModel::iterator groupIter;
-			appendGroup(engineName, rootType, groupIter);
-			updateGroup(groupIter);
+		// If this didn't return any result, add an empty group
+		TreeModel::iterator groupIter;
+		appendGroup(engineName, rootType, groupIter);
+		updateGroup(groupIter);
 
-			return true;
-		}
+		return true;
 	}
 
 	return false;
@@ -617,16 +618,19 @@
 //
 // Sets how results are grouped.
 //
-void ResultsTree::setGroupMode(bool groupBySearchEngine)
+void ResultsTree::setGroupMode(GroupByMode groupMode)
 {
-	ResultsModelColumns::ResultType currentType, newType;
+	ResultsModelColumns::RowType currentType, newType;
 
-	if (m_groupBySearchEngine == groupBySearchEngine)
+	if (m_groupMode == groupMode)
 	{
 		// No change
 		return;
 	}
-	m_groupBySearchEngine = groupBySearchEngine;
+#ifdef DEBUG
+	cout << "ResultsTree::setGroupMode: set to " << groupMode << endl;
+#endif
+	m_groupMode = groupMode;
 
 	// Do we need to update the tree ?
 	TreeModel::Children children = m_refStore->children();
@@ -636,17 +640,17 @@
 	}
 
 	// What's the new grouping criteria ?
-	if (groupBySearchEngine == true)
+	if (m_groupMode == BY_ENGINE)
 	{
 		// By search engine
-		currentType = ResultsModelColumns::RESULT_HOST;
-		newType = ResultsModelColumns::RESULT_ROOT;
+		currentType = ResultsModelColumns::ROW_HOST;
+		newType = ResultsModelColumns::ROW_ENGINE;
 	}
 	else
 	{
 		// By host
-		currentType = ResultsModelColumns::RESULT_ROOT;
-		newType = ResultsModelColumns::RESULT_HOST;
+		currentType = ResultsModelColumns::ROW_ENGINE;
+		newType = ResultsModelColumns::ROW_HOST;
 	}
 
 	// Clear the map
@@ -662,7 +666,7 @@
 #ifdef DEBUG
 		cout << "ResultsTree::setGroupMode: looking at " << row[m_resultsColumns.m_text] << endl;
 #endif
-		ResultsModelColumns::ResultType type = row[m_resultsColumns.m_resultType];
+		ResultsModelColumns::RowType type = row[m_resultsColumns.m_resultType];
 		// Skip new type rows
 		if (type == newType)
 		{
@@ -670,139 +674,137 @@
 			continue;
 		}
 
-		TreeModel::Children child = iter->children();
-		if (child.empty() == false)
+		TreeModel::Children groupChildren = iter->children();
+		TreeModel::Children::iterator childIter = groupChildren.begin();
+		// Type ROW_RESULT
+		while (childIter != groupChildren.end())
 		{
-			TreeModel::Children::iterator childIter = child.begin();
-			// Type RESULT_TITLE
-			while (childIter != child.end())
-			{
-				TreeModel::Row childRow = *childIter;
-				TreeModel::iterator groupIter, newIter;
-				bool success = false;
+			TreeModel::Row childRow = *childIter;
+			TreeModel::iterator groupIter, newIter;
+			bool success = false;
 
-				// We will need the URL and engines columns in all cases
-				string url = from_utf8(childRow[m_resultsColumns.m_url]);
-				unsigned int engineIds = childRow[m_resultsColumns.m_engines];
-				unsigned int indexIds = childRow[m_resultsColumns.m_indexes];
+			// We will need the URL and engines columns in all cases
+			string url(from_utf8(childRow[m_resultsColumns.m_url]));
+			unsigned int engineIds = childRow[m_resultsColumns.m_engines];
+			unsigned int indexIds = childRow[m_resultsColumns.m_indexes];
 
-				// Get the name of the group this should go into
-				if (newType == ResultsModelColumns::RESULT_HOST)
-				{
-					Url urlObj(url);
+			// Get the name of the group this should go into
+			if (m_groupMode == BY_HOST)
+			{
+				Url urlObj(url);
 #ifdef DEBUG
-					cout << "ResultsTree::setGroupMode: row " << url << endl;
+				cout << "ResultsTree::setGroupMode: row " << url << endl;
 #endif
-					string groupName = urlObj.getHost();
-					// Add group
-					if (appendGroup(groupName, newType, groupIter) == true)
-					{
-						// Add result
-						success = appendResult(childRow[m_resultsColumns.m_text],
-							childRow[m_resultsColumns.m_url],
-							childRow[m_resultsColumns.m_type],
-							childRow[m_resultsColumns.m_score],
-							childRow[m_resultsColumns.m_rankDiff],
-							childRow[m_resultsColumns.m_indexed],
-							childRow[m_resultsColumns.m_docId],
-							childRow[m_resultsColumns.m_timestamp],
-							engineIds, indexIds,
-							newIter, &(*groupIter), true);
-					}
+				// Add group
+				if (appendGroup(urlObj.getHost(), newType, groupIter) == true)
+				{
+					// Add result
+					success = appendResult(childRow[m_resultsColumns.m_text],
+						childRow[m_resultsColumns.m_url],
+						childRow[m_resultsColumns.m_type],
+						childRow[m_resultsColumns.m_score],
+						childRow[m_resultsColumns.m_rankDiff],
+						childRow[m_resultsColumns.m_indexed],
+						childRow[m_resultsColumns.m_docId],
+						childRow[m_resultsColumns.m_timestamp],
+						engineIds, indexIds,
+						newIter, groupIter, true);
 				}
-				else
+			}
+			else
+			{
+				// Look at the engines column and see which engines this result is for
+				set<string> engineNames;
+				m_settings.getEngineNames(engineIds, engineNames);
+				if (engineNames.empty() == false)
 				{
-					// Look at the engines column and see which engines this result is for
-					set<string> engineNames;
-					m_settings.getEngineNames(engineIds, engineNames);
-					if (engineNames.empty() == false)
-					{
 #ifdef DEBUG
-						cout << "ResultsTree::setGroupMode: row is for " << engineNames.size() << " engine(s)" << endl;
+					cout << "ResultsTree::setGroupMode: row is for " << engineNames.size() << " engine(s)" << endl;
 #endif
-						// Are there indexes in the list ?
-						set<string>::iterator xapianIter = engineNames.find("Xapian");
-						if ((xapianIter != engineNames.end()) &&
-							(indexIds > 0))
-						{
-							// Erase this
-							engineNames.erase(xapianIter);
+					// Are there indexes in the list ?
+					set<string>::iterator xapianIter = engineNames.find("Xapian");
+					if ((xapianIter != engineNames.end()) &&
+						(indexIds > 0))
+					{
+						// Erase this
+						engineNames.erase(xapianIter);
 #ifdef DEBUG
-							cout << "ResultsTree::setGroupMode: row is for index(es)" << indexIds << endl;
+						cout << "ResultsTree::setGroupMode: row is for index(es)" << indexIds << endl;
 #endif
 
-							// Add entries for each index name so that we can loop once on engine names
-							set<string> indexNames;
-							m_settings.getIndexNames(indexIds, indexNames);
-							for (set<string>::iterator iter = indexNames.begin(); iter != indexNames.end(); ++iter)
-							{
-								string indexName = (*iter);
-								engineNames.insert(indexName);
+						// Add entries for each index name so that we can loop once on engine names
+						set<string> indexNames;
+						m_settings.getIndexNames(indexIds, indexNames);
+						for (set<string>::iterator iter = indexNames.begin();
+							iter != indexNames.end(); ++iter)
+						{
+							string indexName(*iter);
+							engineNames.insert(indexName);
 #ifdef DEBUG
-								cout << "ResultsTree::setGroupMode: row is for index " << indexName << endl;
+							cout << "ResultsTree::setGroupMode: row is for index " << indexName << endl;
 #endif
-							}
 						}
+					}
 
-						for (set<string>::iterator iter = engineNames.begin(); iter != engineNames.end(); ++iter)
+					for (set<string>::iterator iter = engineNames.begin();
+						iter != engineNames.end(); ++iter)
+					{
+						string engineName(*iter);
+						unsigned int indexId = 0;
+						unsigned int engineId = m_settings.getEngineId(engineName);
+
+						if (engineId == 0)
 						{
-							string engineName = (*iter);
-							unsigned int indexId = 0;
-							unsigned int engineId = m_settings.getEngineId(engineName);
-
-							if (engineId == 0)
+							// This is actually an index, not an engine...
+							indexId = m_settings.getIndexId(engineName);
+							if (indexId > 0)
 							{
-								// This is actually an index, not an engine...
-								indexId = m_settings.getIndexId(engineName);
-								if (indexId > 0)
-								{
-									engineId = m_settings.getEngineId("Xapian");
-								}
+								engineId = m_settings.getEngineId("Xapian");
+							}
 #ifdef DEBUG
-								cout << "ResultsTree::setGroupMode: index " << indexId << endl;
+							cout << "ResultsTree::setGroupMode: index " << indexId << endl;
 #endif
-							}
+						}
 #ifdef DEBUG
-							else cout << "ResultsTree::setGroupMode: no index" << endl;
+						else cout << "ResultsTree::setGroupMode: no index" << endl;
 #endif
 
-							// Add group
-							if (appendGroup(engineName, newType, groupIter) == true)
-							{
-								// Add result
-								appendResult(childRow[m_resultsColumns.m_text],
-									childRow[m_resultsColumns.m_url],
-									childRow[m_resultsColumns.m_type],
-									childRow[m_resultsColumns.m_score],
-									childRow[m_resultsColumns.m_rankDiff],
-									childRow[m_resultsColumns.m_indexed],
-									childRow[m_resultsColumns.m_docId],
-									childRow[m_resultsColumns.m_timestamp],
-									engineId, indexId,
-									newIter, &(*groupIter), true);
+						// Add group
+						if (appendGroup(engineName, newType, groupIter) == true)
+						{
+							// Add result
+							appendResult(childRow[m_resultsColumns.m_text],
+								childRow[m_resultsColumns.m_url],
+								childRow[m_resultsColumns.m_type],
+								childRow[m_resultsColumns.m_score],
+								childRow[m_resultsColumns.m_rankDiff],
+								childRow[m_resultsColumns.m_indexed],
+								childRow[m_resultsColumns.m_docId],
+								childRow[m_resultsColumns.m_timestamp],
+								engineId, indexId,
+								newIter, groupIter, true);
 #ifdef DEBUG
-								cout << "ResultsTree::setGroupMode: row for " << *iter << endl;
+							cout << "ResultsTree::setGroupMode: row for " << *iter << endl;
 #endif
-							}
 						}
-
-						// FIXME: make sure at least one row was added
-						success = true;
 					}
-				}
 
-				if (success == true)
-				{
-					// Delete it
-					m_refStore->erase(*childIter);
-					childIter = child.begin();
+					// FIXME: make sure at least one row was added
+					success = true;
 				}
-				else
-				{
-					// Don't delete anything then, just go to the next child
-					childIter++;
-				}
 			}
+
+			if (success == true)
+			{
+				// Delete it
+				m_refStore->erase(*childIter);
+				childIter = groupChildren.begin();
+			}
+			else
+			{
+				// Don't delete anything then, just go to the next child
+				childIter++;
+			}
 		}
 
 		// Erase this row
@@ -840,7 +842,7 @@
 		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
 		TreeModel::Row row = *iter;
 
-		if (row[m_resultsColumns.m_resultType] != ResultsModelColumns::RESULT_TITLE)
+		if (row[m_resultsColumns.m_resultType] != ResultsModelColumns::ROW_RESULT)
 		{
 			continue;
 		}
@@ -878,7 +880,7 @@
 		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
 		TreeModel::Row row = *iter;
 
-		if (row[m_resultsColumns.m_resultType] == ResultsModelColumns::RESULT_TITLE)
+		if (row[m_resultsColumns.m_resultType] == ResultsModelColumns::ROW_RESULT)
 		{
 			bool isIndexed = row[m_resultsColumns.m_indexed];
 
@@ -934,7 +936,7 @@
 		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
 		TreeModel::Row row = *iter;
 
-		if (row[m_resultsColumns.m_resultType] != ResultsModelColumns::RESULT_TITLE)
+		if (row[m_resultsColumns.m_resultType] != ResultsModelColumns::ROW_RESULT)
 		{
 			continue;
 		}
@@ -947,6 +949,37 @@
 }
 
 //
+// Updates a result's properties.
+//
+void ResultsTree::updateResult(const Result &result)
+{
+#if 0
+	if (docId == 0)
+	{
+		return;
+	}
+
+	// Go through the list of indexed documents
+	TreeModel::Children children = m_refStore->children();
+	for (TreeModel::Children::iterator iter = children.begin(); iter != children.end(); ++iter)
+	{
+		TreeModel::Row row = *iter;
+
+		if (docId == row[m_indexColumns.m_id])
+		{
+			row[m_indexColumns.m_text] = to_utf8(docInfo.getTitle());
+			row[m_indexColumns.m_type] = to_utf8(docInfo.getType());
+			row[m_indexColumns.m_language] = to_utf8(docInfo.getLanguage());
+			string timestamp(docInfo.getTimestamp());
+			row[m_indexColumns.m_timestamp] = to_utf8(timestamp);
+			row[m_indexColumns.m_timestampTime] = TimeConverter::fromTimestamp(timestamp);
+			break;
+		}
+	}
+#endif
+}
+
+//
 // Deletes the current selection.
 //
 bool ResultsTree::deleteSelection(void)
@@ -964,9 +997,9 @@
 		bool updateParent = false;
 
 		// This could be a group that's in the map and should be removed first
-		if (row[m_resultsColumns.m_resultType] != ResultsModelColumns::RESULT_TITLE)
+		if (row[m_resultsColumns.m_resultType] != ResultsModelColumns::ROW_RESULT)
 		{
-			string groupName = from_utf8(row[m_resultsColumns.m_text]);
+			string groupName(from_utf8(row[m_resultsColumns.m_text]));
 			std::map<string, TreeModel::iterator>::iterator mapIter = m_resultsGroups.find(groupName);
 			if (mapIter != m_resultsGroups.end())
 			{
@@ -1009,9 +1042,8 @@
 //
 // Deletes results.
 //
-bool ResultsTree::deleteResults(QueryProperties &queryProps, const string &engineName)
+bool ResultsTree::deleteResults(const string &engineName)
 {
-	ustring queryName(queryProps.getName());
 	unsigned int indexId = 0;
 	unsigned int engineId = m_settings.getEngineId(engineName);
 	unsigned int count = 0;
@@ -1034,8 +1066,8 @@
 	{
 		TreeModel::Row row = *parentIter;
 
-		if ((row[m_resultsColumns.m_resultType] != ResultsModelColumns::RESULT_ROOT) &&
-			(row[m_resultsColumns.m_resultType] != ResultsModelColumns::RESULT_HOST))
+		if ((row[m_resultsColumns.m_resultType] != ResultsModelColumns::ROW_ENGINE) &&
+			(row[m_resultsColumns.m_resultType] != ResultsModelColumns::ROW_HOST))
 		{
 			continue;
 		}
@@ -1046,7 +1078,7 @@
 		{
 			row = *iter;
 
-			if ((row[m_resultsColumns.m_resultType] == ResultsModelColumns::RESULT_TITLE) &&
+			if ((row[m_resultsColumns.m_resultType] == ResultsModelColumns::ROW_RESULT) &&
 				(row[m_resultsColumns.m_engines] == engineId) &&
 				(row[m_resultsColumns.m_indexes] == indexId))
 			{
@@ -1162,21 +1194,26 @@
 	const ustring &type, int score, int rankDiff, bool isIndexed,
 	unsigned int docId, const ustring &timestamp, unsigned int engineId,
 	unsigned int indexId, TreeModel::iterator &newRowIter,
-	const TreeModel::Row *parentRow, bool noDuplicates)
+	const TreeModel::iterator &parentIter, bool noDuplicates)
 {
-	if (parentRow == NULL)
+	if (!parentIter)
 	{
+#ifdef DEBUG
+		cout << "ResultsTree::appendResult: no parent" << endl;
+#endif
 		newRowIter = m_refStore->append();
 	}
 	else
 	{
+		const TreeModel::Row parentRow = *parentIter;
+
 		// Merge duplicates within groups ?
 		if (noDuplicates == true)
 		{
 			// Look for a row with the same URL and query. For instance, in group
 			// by host mode, if a page is returned by several search engines, it
 			// should appear only once
-			TreeModel::Children children = parentRow->children();
+			TreeModel::Children children = parentRow.children();
 			if (children.empty() == false)
 			{
 				for (TreeModel::Children::iterator childIter = children.begin();
@@ -1197,7 +1234,7 @@
 			}
 		}
 
-		newRowIter = m_refStore->append(parentRow->children());
+		newRowIter = m_refStore->append(parentRow.children());
 	}
 
 	// Has it been already viewed ?
@@ -1206,7 +1243,7 @@
 
 	TreeModel::Row childRow = *newRowIter;
 	updateRow(childRow, text, url, type, score, engineId, indexId,
-		docId, timestamp, ResultsModelColumns::RESULT_TITLE, isIndexed,
+		docId, timestamp, ResultsModelColumns::ROW_RESULT, isIndexed,
 		wasViewed, rankDiff);
 
 	return true;
@@ -1215,7 +1252,7 @@
 //
 // Adds a results group
 //
-bool ResultsTree::appendGroup(const string &groupName, ResultsModelColumns::ResultType groupType,
+bool ResultsTree::appendGroup(const string &groupName, ResultsModelColumns::RowType groupType,
 	TreeModel::iterator &groupIter)
 {
 	bool success = false;
@@ -1260,7 +1297,7 @@
 	int averageScore = 0;
 
 	// Check the iterator doesn't point to a result
-	if (groupRow[m_resultsColumns.m_resultType] == ResultsModelColumns::RESULT_TITLE)
+	if (groupRow[m_resultsColumns.m_resultType] == ResultsModelColumns::ROW_RESULT)
 	{
 		return;
 	}
@@ -1298,7 +1335,7 @@
 	const ustring &url, const ustring &type, int score,
 	unsigned int engineId, unsigned int indexId,
 	unsigned int docId, const ustring &timestamp,
-	ResultsModelColumns::ResultType resultType, bool indexed, bool viewed, int rankDiff)
+	ResultsModelColumns::RowType resultType, bool indexed, bool viewed, int rankDiff)
 {
 	try
 	{
@@ -1347,7 +1384,7 @@
 	if (engineNames.empty() == false)
 	{
 		// Get the first engine this result was obtained from
-		string engineName = (*engineNames.begin());
+		string engineName(*engineNames.begin());
 		if (engineName == "Xapian")
 		{
 			m_settings.getIndexNames(indexIds, indexNames);

Modified: trunk/UI/GTK2/src/ResultsTree.h
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.h	2007-04-03 15:05:25 UTC (rev 801)
+++ trunk/UI/GTK2/src/ResultsTree.h	2007-04-04 13:32:31 UTC (rev 802)
@@ -35,7 +35,6 @@
 #include <gtkmm/treeview.h>
 #include <gtkmm/treeselection.h>
 
-#include "QueryProperties.h"
 #include "Result.h"
 #include "ModelColumns.h"
 #include "PinotSettings.h"
@@ -43,8 +42,10 @@
 class ResultsTree : public Gtk::TreeView
 {
 	public:
+		typedef enum { BY_ENGINE = 0, BY_HOST, FLAT } GroupByMode;
+
 		ResultsTree(const Glib::ustring &queryName, Gtk::Menu *pPopupMenu,
-			PinotSettings &settings);
+			GroupByMode groupMode, PinotSettings &settings);
 		virtual ~ResultsTree();
 
 		/// Returns the results scrolled window.
@@ -63,12 +64,11 @@
 		  * Adds a set of results.
 		  * Returns true if something was added to the tree.
 		  */
-		bool addResults(QueryProperties &queryProps, const std::string &engineName,
-			const std::vector<Result> &resultsList, const std::string &charset,
-			bool groupBySearchEngine);
+		bool addResults(const std::string &engineName, const std::vector<Result> &resultsList,
+			const std::string &charset);
 
 		/// Sets how results are grouped.
-		void setGroupMode(bool groupBySearchEngine);
+		void setGroupMode(GroupByMode groupMode);
 
 		/// Gets a list of selected items.
 		bool getSelection(std::vector<DocumentInfo> &resultsList, bool skipIndexed = false);
@@ -79,6 +79,9 @@
 		/// Sets the selected items' state.
 		void setSelectionState(bool viewed);
 
+		/// Updates a result's properties.
+		void updateResult(const Result &result);
+
 		/**
 		  * Deletes the current selection.
 		  * Returns true if the tree is then empty.
@@ -86,7 +89,7 @@
 		bool deleteSelection(void);
 
 		/// Deletes results.
-		bool deleteResults(QueryProperties &queryProps, const std::string &engineName);
+		bool deleteResults(const std::string &engineName);
 
 		/// Refreshes the tree.
 		void refresh(void);
@@ -123,7 +126,7 @@
 		ComboModelColumns m_extractColumns;
 		std::set<std::string> m_indexNames;
 		bool m_showExtract;
-		bool m_groupBySearchEngine;
+		GroupByMode m_groupMode;
 
 		void renderViewStatus(Gtk::CellRenderer *pRenderer, const Gtk::TreeModel::iterator &iter);
 
@@ -146,7 +149,7 @@
 		void onStyleChanged(const Glib::RefPtr<Gtk::Style> &previous_style);
 
 		/// Adds a results group.
-		bool appendGroup(const std::string &groupName, ResultsModelColumns::ResultType groupType,
+		bool appendGroup(const std::string &groupName, ResultsModelColumns::RowType groupType,
 			Gtk::TreeModel::iterator &groupIter);
 
 		/// Adds a new row in the results tree.
@@ -154,7 +157,8 @@
 			const Glib::ustring &type, int score, int rankDiff,
 			bool isIndexed, unsigned int docId, const Glib::ustring &timestamp,
 			unsigned int engineId, unsigned int indexId,
-			Gtk::TreeModel::iterator &newRowIter, const Gtk::TreeModel::Row *parentRow = NULL,
+			Gtk::TreeModel::iterator &newRowIter,
+			const Gtk::TreeModel::iterator &parentIter,
 			bool noDuplicates = false);
 
 		/// Updates a results group.
@@ -165,7 +169,7 @@
 			const Glib::ustring &url, const Glib::ustring &type,
 			int score, unsigned int engineId, unsigned int indexId,
 			unsigned int docId, const Glib::ustring &timestamp,
-			ResultsModelColumns::ResultType type, bool indexed, bool viewed, int rankDiff);
+			ResultsModelColumns::RowType type, bool indexed, bool viewed, int rankDiff);
 
 		/// Retrieves the extract to show for the given row.
 		Glib::ustring findResultsExtract(const Gtk::TreeModel::Row &row);

Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-04-03 15:05:25 UTC (rev 801)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-04-04 13:32:31 UTC (rev 802)
@@ -759,7 +759,14 @@
 				{
 					// Sync the results tree with the menuitems
 					pResultsTree->showExtract(showextract1->get_active());
-					pResultsTree->setGroupMode(searchenginegroup1->get_active());
+					if (searchenginegroup1->get_active() == true)
+					{
+						pResultsTree->setGroupMode(ResultsTree::BY_ENGINE);
+					}
+					else
+					{
+						pResultsTree->setGroupMode(ResultsTree::BY_HOST);
+					}
 				}
 			}
 
@@ -945,12 +952,16 @@
 			pTab->getCloseSignal().connect(
 				SigC::slot(*this, &mainWindow::on_close_page));
 
+			ResultsTree::GroupByMode groupMode = ResultsTree::BY_ENGINE;
+			if (searchenginegroup1->get_active() == false)
+			{
+				groupMode = ResultsTree::BY_HOST;
+			}
 			// Position the results tree
-			pResultsTree = manage(new ResultsTree(queryName, resultsMenuitem->get_submenu(), m_settings));
+			pResultsTree = manage(new ResultsTree(queryName, resultsMenuitem->get_submenu(), groupMode, m_settings));
 			pResultsPage = manage(new ResultsPage(queryName, pResultsTree, m_pNotebook->get_height(), m_settings));
 			// Sync the results tree with the menuitems
 			pResultsTree->showExtract(showextract1->get_active());
-			pResultsTree->setGroupMode(searchenginegroup1->get_active());
 			// Connect to the "changed" signal
 			pResultsTree->getSelectionChangedSignal().connect(
 				SigC::slot(*this, &mainWindow::on_resultsTreeviewSelection_changed));
@@ -973,11 +984,10 @@
 		if ((pageNum >= 0) &&
 			(pResultsTree != NULL))
 		{
-			// Add the results to the tree
-			pResultsTree->deleteResults(queryProps, engineName);
-			pResultsTree->addResults(queryProps, engineName,
-				resultsList, resultsCharset,
-				searchenginegroup1->get_active());
+			// Add the results to the tree, using the current group by mode
+			pResultsTree->deleteResults(engineName);
+			pResultsTree->addResults(engineName, resultsList,
+				resultsCharset);
 		}
 
 		// Index results ?
@@ -1700,7 +1710,14 @@
 			ResultsTree *pResultsTree = pResultsPage->getTree();
 			if (pResultsTree != NULL)
 			{
-				pResultsTree->setGroupMode(searchenginegroup1->get_active());
+				if (searchenginegroup1->get_active() == true)
+				{
+					pResultsTree->setGroupMode(ResultsTree::BY_ENGINE);
+				}
+				else
+				{
+					pResultsTree->setGroupMode(ResultsTree::BY_HOST);
+				}
 			}
 		}
 	}



From fabricecolin at mail.berlios.de  Mon Apr  9 14:49:14 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 9 Apr 2007 14:49:14 +0200
Subject: [Pinot-svn] r803 - in trunk: Monitor Search Search/Google Utils
Message-ID: <200704091249.l39CnEAE026511@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-09 14:49:10 +0200 (Mon, 09 Apr 2007)
New Revision: 803

Removed:
   trunk/Utils/IndexedDocument.cpp
   trunk/Utils/IndexedDocument.h
   trunk/Utils/Result.cpp
   trunk/Utils/Result.h
Modified:
   trunk/Monitor/MonitorHandler.h
   trunk/Search/Google/GoogleAPIEngine.cpp
   trunk/Search/OpenSearchParser.cpp
   trunk/Search/OpenSearchParser.h
   trunk/Search/PluginParsers.h
   trunk/Search/PluginWebEngine.cpp
   trunk/Search/QueryProperties.h
   trunk/Search/SearchEngineInterface.cpp
   trunk/Search/SearchEngineInterface.h
   trunk/Search/SherlockParser.cpp
   trunk/Search/SherlockParser.h
   trunk/Search/WebEngine.cpp
   trunk/Search/WebEngine.h
   trunk/Search/XapianEngine.cpp
   trunk/Search/XapianEngine.h
   trunk/Search/pinot-search.cpp
   trunk/Utils/DocumentInfo.cpp
   trunk/Utils/DocumentInfo.h
   trunk/Utils/Makefile.am
Log:
Merged Result and IndexedDocument back into DocumentInfo.
In XapianEngine, generate an abstract with the terms matched by the document.


Modified: trunk/Monitor/MonitorHandler.h
===================================================================
--- trunk/Monitor/MonitorHandler.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Monitor/MonitorHandler.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -23,7 +23,6 @@
 #include <set>
 #include <map>
 
-#include "IndexedDocument.h"
 #include "MonitorInterface.h"
 
 /// Handles events generated by a monitor.

Modified: trunk/Search/Google/GoogleAPIEngine.cpp
===================================================================
--- trunk/Search/Google/GoogleAPIEngine.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/Google/GoogleAPIEngine.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -130,8 +130,11 @@
 		for (int i = 0; i < searchResult->resultElements->__size; ++i)
 		{
 			struct gapi1__ResultElement *resultElement = searchResult->resultElements->__ptr[i];
-			Result result(resultElement->URL, resultElement->title, resultElement->snippet, "", pseudoScore);
 
+			DocumentInfo result(resultElement->title, resultElement->URL, "", "");
+			result.setExtract(resultElement->snippet);
+			result.setScore(pseudoScore);
+
 			if (processResult("http://www.google.com/", result) == true)
 			{
 				m_resultsList.push_back(result);

Modified: trunk/Search/OpenSearchParser.cpp
===================================================================
--- trunk/Search/OpenSearchParser.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/OpenSearchParser.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -84,7 +84,7 @@
 {
 }
 
-bool OpenSearchResponseParser::parse(const ::Document *pResponseDoc, vector<Result> &resultsList,
+bool OpenSearchResponseParser::parse(const ::Document *pResponseDoc, vector<DocumentInfo> &resultsList,
 	unsigned int &totalResults, unsigned int &firstResultIndex) const
 {
 	float pseudoScore = 100;
@@ -259,7 +259,11 @@
 				}
 			}
 
-			resultsList.push_back(Result(url, title, extract, "", pseudoScore));
+			DocumentInfo result(title, url, "", "");
+			result.setExtract(extract);
+			result.setScore(pseudoScore);
+
+			resultsList.push_back(result);
 			--pseudoScore;
 			foundResult = true;
 			if (resultsList.size() >= totalResults)

Modified: trunk/Search/OpenSearchParser.h
===================================================================
--- trunk/Search/OpenSearchParser.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/OpenSearchParser.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -32,7 +32,7 @@
 		virtual ~OpenSearchResponseParser();
 
 		/// Parses the response; false if not all could be parsed.
-		virtual bool parse(const Document *pResponseDoc, std::vector<Result> &resultsList,
+		virtual bool parse(const Document *pResponseDoc, std::vector<DocumentInfo> &resultsList,
 			unsigned int &totalResults, unsigned int &firstResultIndex) const;
 
 	protected:

Modified: trunk/Search/PluginParsers.h
===================================================================
--- trunk/Search/PluginParsers.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/PluginParsers.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -23,7 +23,6 @@
 #include <vector>
 
 #include "Document.h"
-#include "Result.h"
 #include "SearchPluginProperties.h"
 
 /// Interface implemented by response parsers.
@@ -35,7 +34,7 @@
 		}
 
 		/// Parses the response; false if not all could be parsed.
-		virtual bool parse(const Document *pResponseDoc, std::vector<Result> &resultsList,
+		virtual bool parse(const Document *pResponseDoc, std::vector<DocumentInfo> &resultsList,
 			unsigned int &totalResults, unsigned int &firstResultIndex) const = 0;
 
 	protected:

Modified: trunk/Search/PluginWebEngine.cpp
===================================================================
--- trunk/Search/PluginWebEngine.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/PluginWebEngine.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -102,7 +102,7 @@
 
 	bool success = m_pResponseParser->parse(pResponseDoc, m_resultsList,
 		m_maxResultsCount, m_properties.m_nextBase);
-	vector<Result>::iterator resultIter = m_resultsList.begin();
+	vector<DocumentInfo>::iterator resultIter = m_resultsList.begin();
 	while (resultIter != m_resultsList.end())
 	{
 		if (processResult(formattedQuery, *resultIter) == false)
@@ -115,7 +115,7 @@
 			}
 			else
 			{
-				vector<Result>::iterator badResultIter = resultIter;
+				vector<DocumentInfo>::iterator badResultIter = resultIter;
 				--resultIter;
 				m_resultsList.erase(badResultIter);
 			}

Modified: trunk/Search/QueryProperties.h
===================================================================
--- trunk/Search/QueryProperties.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/QueryProperties.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -22,8 +22,6 @@
 #include <string>
 #include <set>
 
-#include "Result.h"
-
 using namespace std;
 
 /// This represents a query.

Modified: trunk/Search/SearchEngineInterface.cpp
===================================================================
--- trunk/Search/SearchEngineInterface.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/SearchEngineInterface.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -70,7 +70,7 @@
 }
 
 /// Returns the results for the previous query.
-const vector<Result> &SearchEngineInterface::getResults(void) const
+const vector<DocumentInfo> &SearchEngineInterface::getResults(void) const
 {
 	return m_resultsList;
 }

Modified: trunk/Search/SearchEngineInterface.h
===================================================================
--- trunk/Search/SearchEngineInterface.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/SearchEngineInterface.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -26,7 +26,7 @@
 
 #include "DownloaderInterface.h"
 #include "QueryProperties.h"
-#include "Result.h"
+#include "DocumentInfo.h"
 
 using namespace std;
 
@@ -55,7 +55,7 @@
 		virtual bool runQuery(QueryProperties& queryProps) = 0;
 
 		/// Returns the results for the previous query.
-		virtual const vector<Result> &getResults(void) const;
+		virtual const vector<DocumentInfo> &getResults(void) const;
 
 		/// Returns the charset for the previous query's results.
 		virtual string getResultsCharset(void) const;
@@ -69,7 +69,7 @@
 		time_t m_startTime;
 		unsigned int m_maxResultsCount;
 		bool m_expandQueries;
-		vector<Result> m_resultsList;
+		vector<DocumentInfo> m_resultsList;
 		string m_charset;
 		set<string> m_expandTerms;
 

Modified: trunk/Search/SherlockParser.cpp
===================================================================
--- trunk/Search/SherlockParser.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/SherlockParser.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -269,7 +269,7 @@
 {
 }
 
-bool SherlockResponseParser::parse(const Document *pResponseDoc, vector<Result> &resultsList,
+bool SherlockResponseParser::parse(const Document *pResponseDoc, vector<DocumentInfo> &resultsList,
 	unsigned int &totalResults, unsigned int &firstResultIndex) const
 {
 	float pseudoScore = 100;
@@ -457,7 +457,11 @@
 				url = tmpUrl;
 			}
 
-			resultsList.push_back(Result(url, name, extract, "", pseudoScore));
+			DocumentInfo result(name, url, "", "");
+			result.setExtract(extract);
+			result.setScore(pseudoScore);
+
+			resultsList.push_back(result);
 			--pseudoScore;
 			foundResult = true;
 			if (resultsList.size() == totalResults)

Modified: trunk/Search/SherlockParser.h
===================================================================
--- trunk/Search/SherlockParser.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/SherlockParser.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -33,7 +33,7 @@
 		virtual ~SherlockResponseParser();
 
 		/// Parses the response; false if not all could be parsed.
-		virtual bool parse(const Document *pResponseDoc, std::vector<Result> &resultsList,
+		virtual bool parse(const Document *pResponseDoc, std::vector<DocumentInfo> &resultsList,
 			unsigned int &totalResults, unsigned int &firstResultIndex) const;
 
 		std::string m_resultListStart;

Modified: trunk/Search/WebEngine.cpp
===================================================================
--- trunk/Search/WebEngine.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/WebEngine.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -126,7 +126,7 @@
 	queryProps.getTerms(m_queryTerms);
 }
 
-bool WebEngine::processResult(const string &queryUrl, Result &result)
+bool WebEngine::processResult(const string &queryUrl, DocumentInfo &result)
 {
 	Url queryUrlObj(queryUrl);
 	string resultUrl(result.getLocation());

Modified: trunk/Search/WebEngine.h
===================================================================
--- trunk/Search/WebEngine.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/WebEngine.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -50,7 +50,7 @@
 
 		void setQuery(const QueryProperties &queryProps);
 
-		virtual bool processResult(const string &queryUrl, Result &result);
+		virtual bool processResult(const string &queryUrl, DocumentInfo &result);
 
 	private:
 		WebEngine(const WebEngine &other);

Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/XapianEngine.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -392,6 +392,9 @@
 
 	try
 	{
+		AbstractGenerator abstractGen(pIndex, 50);
+		vector<string> seedTerms;
+
 		// Give the query object to the enquire session
 		enquire.set_query(query);
 
@@ -399,33 +402,6 @@
 		Xapian::MSet matches = enquire.get_mset(0, m_maxResultsCount);
 		if (matches.empty() == false)
 		{
-			multimap<Xapian::weight, string> queryTerms;
-			vector<string> seedTerms;
-			Xapian::weight maxWeight = matches.get_max_attained();
-
-			// Sort query terms by weight
-			for (Xapian::TermIterator termIter = query.get_terms_begin();
-				termIter != query.get_terms_end(); ++termIter)
-			{
-				string termName(*termIter);
-				Xapian::weight termWeight = matches.get_termweight(termName);
-
-				if (termWeight > 0)
-				{
-					queryTerms.insert(pair<Xapian::weight, string>(maxWeight - termWeight, termName));
-#ifdef DEBUG
-					cout << "XapianEngine::queryDatabase: term " << termName
-						<< " has weight " << termWeight << "/" << maxWeight << endl;
-#endif
-				}
-			}
-
-			for (multimap<Xapian::weight, string>::iterator weightIter = queryTerms.begin();
-				weightIter != queryTerms.end(); ++weightIter)
-			{
-				seedTerms.push_back(weightIter->second);
-			}
-
 			// Get the results
 #ifdef DEBUG
 			cout << "XapianEngine::queryDatabase: " << matches.get_matches_estimated()
@@ -435,11 +411,19 @@
 			{
 				Xapian::docid docId = *mIter;
 				Xapian::Document doc(mIter.get_document());
-				AbstractGenerator abstractGen(pIndex, 50);
-				// FIXME: we could use enquire.get_matching_terms_begin(docId) to populate seedTerms
-				Result thisResult("", "", abstractGen.generateAbstract(docId, seedTerms),
-					"", (float)mIter.get_percent());
 
+				// What terms did this document match ?
+				seedTerms.clear();
+				for (Xapian::TermIterator termIter = enquire.get_matching_terms_begin(docId);
+					termIter != enquire.get_matching_terms_end(docId); ++termIter)
+				{
+					seedTerms.push_back(*termIter);
+				}
+
+				DocumentInfo thisResult;
+				thisResult.setExtract(abstractGen.generateAbstract(docId, seedTerms));
+				thisResult.setScore((float)mIter.get_percent());
+
 #ifdef DEBUG
 				cout << "XapianEngine::queryDatabase: found document ID " << docId << endl;
 #endif
@@ -615,10 +599,3 @@
 
 	return false;
 }
-
-/// Returns the results for the previous query.
-const vector<Result> &XapianEngine::getResults(void) const
-{
-	return m_resultsList;
-}
-

Modified: trunk/Search/XapianEngine.h
===================================================================
--- trunk/Search/XapianEngine.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/XapianEngine.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -45,9 +45,6 @@
 		/// Runs a query; true if success.
 		virtual bool runQuery(QueryProperties& queryProps);
 
-		/// Returns the results for the previous query.
-		virtual const std::vector<Result> &getResults(void) const;
-
 	protected:
 		std::string m_databaseName;
 		std::set<unsigned int> m_relevantDocuments;

Modified: trunk/Search/pinot-search.cpp
===================================================================
--- trunk/Search/pinot-search.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Search/pinot-search.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -177,14 +177,14 @@
 		string resultsPage;
 
 		// Try getting a list of links
-		const vector<Result> resultsList = pEngine->getResults();
+		const vector<DocumentInfo> resultsList = pEngine->getResults();
 		if (resultsList.empty() == false)
 		{
 			unsigned int count = 0;
 
 			cout << "Matching documents are :" << endl;
 
-			vector<Result>::const_iterator resultIter = resultsList.begin();
+			vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
 			while (resultIter != resultsList.end())
 			{
 				string rawUrl(resultIter->getLocation());

Modified: trunk/Utils/DocumentInfo.cpp
===================================================================
--- trunk/Utils/DocumentInfo.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/DocumentInfo.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -21,35 +21,40 @@
 #include "DocumentInfo.h"
 
 using std::string;
+using std::map;
 using std::set;
 using std::copy;
 using std::inserter;
 
 DocumentInfo::DocumentInfo() :
-	m_size(0)
+	m_score(0.0),
+	m_indexId(0),
+	m_docId(0)
 {
-	m_timestamp = TimeConverter::toTimestamp(time(NULL));
+	setField("modtime", TimeConverter::toTimestamp(time(NULL)));
 }
 
 DocumentInfo::DocumentInfo(const string &title, const string &location,
 	const string &type, const string &language) :
-	m_title(title),
-	m_location(location),
-	m_type(type),
-	m_language(language),
-	m_size(0)
+	m_score(0.0),
+	m_indexId(0),
+	m_docId(0)
 {
-	m_timestamp = TimeConverter::toTimestamp(time(NULL));
+	setField("caption", title);
+	setField("url", location);
+	setField("type", type);
+	setField("language", language);
+	setField("modtime", TimeConverter::toTimestamp(time(NULL)));
 }
 
 DocumentInfo::DocumentInfo(const DocumentInfo &other) :
-	m_title(other.m_title),
-	m_location(other.m_location),
-	m_type(other.m_type),
-	m_language(other.m_language),
-	m_timestamp(other.m_timestamp),
-	m_size(other.m_size)
+	m_extract(other.m_extract),
+	m_score(other.m_score),
+	m_indexId(other.m_indexId),
+	m_docId(other.m_docId)
 {
+	copy(other.m_fields.begin(), other.m_fields.end(),
+		inserter(m_fields, m_fields.begin()));
 	copy(other.m_labels.begin(), other.m_labels.end(),
 		inserter(m_labels, m_labels.begin()));
 }
@@ -62,15 +67,16 @@
 {
 	if (this != &other)
 	{
-		m_title = other.m_title;
-		m_location = other.m_location;
-		m_type = other.m_type;
-		m_language = other.m_language;
-		m_timestamp = other.m_timestamp;
-		m_size = other.m_size;
+		m_fields.clear();
+		copy(other.m_fields.begin(), other.m_fields.end(),
+			inserter(m_fields, m_fields.begin()));
+		m_extract = other.m_extract;
+		m_score = other.m_score;
 		m_labels.clear();
 		copy(other.m_labels.begin(), other.m_labels.end(),
 			inserter(m_labels, m_labels.begin()));
+		m_indexId = other.m_indexId;
+		m_docId = other.m_docId;
 	}
 
 	return *this;
@@ -78,7 +84,7 @@
 
 bool DocumentInfo::operator<(const DocumentInfo& other) const
 {
-	if (m_location < other.m_location)
+	if (getField("url") < other.getField("url"))
 	{
 		return true;
 	}
@@ -89,75 +95,109 @@
 /// Sets the title of the document.
 void DocumentInfo::setTitle(const string &title)
 {
-	m_title = title;
+	setField("caption", title);
 }
 
 /// Returns the title of the document.
 string DocumentInfo::getTitle(void) const
 {
-	return m_title;
+	return getField("caption");
 }
 
 /// Sets the original location of the document.
 void DocumentInfo::setLocation(const string &location)
 {
-	m_location = location;
+	setField("url", location);
 }
 
 /// Returns the original location of the document.
 string DocumentInfo::getLocation(void) const
 {
-	return m_location;
+	return getField("url");
 }
 
 /// Sets the type of the document.
 void DocumentInfo::setType(const string &type)
 {
-	m_type = type;
+	setField("type", type);
 }
 
 /// Returns the type of the document.
 string DocumentInfo::getType(void) const
 {
-	return m_type;
+	return getField("type");
 }
 
 /// Sets the language of the document.
 void DocumentInfo::setLanguage(const string &language)
 {
-	m_language = language;
+	setField("language", language);
 }
 
 /// Returns the document's language.
 string DocumentInfo::getLanguage(void) const
 {
-	return m_language;
+	return getField("language");
 }
 
 /// Sets the document's timestamp.
 void DocumentInfo::setTimestamp(const string &timestamp)
 {
-	m_timestamp = timestamp;
+	setField("modtime", timestamp);
 }
 
 /// Returns the document's timestamp.
 string DocumentInfo::getTimestamp(void) const
 {
-	return m_timestamp;
+	return getField("modtime");
 }
 
 /// Sets the document's size in bytes.
 void DocumentInfo::setSize(off_t size)
 {
-	m_size = size;
+	char sizeStr[64];
+
+	snprintf(sizeStr, 64, "%u", size);
+	setField("size", sizeStr);
 }
 
 /// Returns the document's size in bytes.
 off_t DocumentInfo::getSize(void) const
 {
-	return m_size;
+	string sizeStr(getField("size"));
+
+	if (sizeStr.empty() == true)
+	{
+		return 0;
+	}
+
+	return (off_t)atoi(sizeStr.c_str());
 }
 
+/// Sets the document's extract.
+void DocumentInfo::setExtract(const string &extract)
+{
+	m_extract = extract;
+}
+
+/// Returns the document's extract.
+string DocumentInfo::getExtract(void) const
+{
+	return m_extract;
+}
+
+/// Sets the document's score.
+void DocumentInfo::setScore(float score)
+{
+	m_score = score;
+}
+
+/// Returns the document's score.
+float DocumentInfo::getScore(void) const
+{
+	return m_score;
+}
+
 /// Sets the document's labels.
 void DocumentInfo::setLabels(const set<string> &labels)
 {
@@ -171,3 +211,52 @@
 	return m_labels;
 }
 
+/// Sets that the document is indexed.
+void DocumentInfo::setIsIndexed(unsigned int indexId, unsigned int docId)
+{
+	m_indexId = indexId;
+	m_docId = docId;
+}
+
+/// Sets that the document is not indexed.
+void DocumentInfo::setIsNotIndexed(void)
+{
+	m_indexId = 0;
+	m_docId = 0;
+}
+
+/// Gets whether the document is indexed.
+bool DocumentInfo::getIsIndexed(void) const
+{
+	if (m_docId > 0)
+	{
+		return true;
+	}
+
+	return false;
+}
+
+/// Gets whether the documentt is indexed.
+unsigned int DocumentInfo::getIsIndexed(unsigned int &indexId) const
+{
+	indexId = m_indexId;
+
+	return m_docId;
+}
+
+void DocumentInfo::setField(const string &name, const string &value)
+{
+	m_fields[name] = value;
+}
+
+string DocumentInfo::getField(const string &name) const
+{
+	map<string, string>::const_iterator fieldIter = m_fields.find(name);
+	if (fieldIter != m_fields.end())
+	{
+		return fieldIter->second;
+	}
+
+	return "";
+}
+

Modified: trunk/Utils/DocumentInfo.h
===================================================================
--- trunk/Utils/DocumentInfo.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/DocumentInfo.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -21,6 +21,7 @@
 
 #include <sys/types.h>
 #include <string>
+#include <map>
 #include <set>
 
 /// This represents all the properties of a document.
@@ -73,21 +74,48 @@
 		/// Returns the document's size in bytes.
 		virtual off_t getSize(void) const;
 
+		/// Sets the document's extract.
+		virtual void setExtract(const std::string &extract);
+
+		/// Returns the document's extract.
+		virtual std::string getExtract(void) const;
+
+		/// Sets the document's score.
+		void setScore(float score);
+
+		/// Returns the document's score.
+		float getScore(void) const;
+
 		/// Sets the document's labels.
 		virtual void setLabels(const std::set<std::string> &labels);
 
 		/// Returns the document's labels.
 		virtual const std::set<std::string> &getLabels(void) const;
 
+		/// Sets that the document is indexed.
+		void setIsIndexed(unsigned int indexId, unsigned int docId);
+
+		/// Sets that the document is not indexed.
+		void setIsNotIndexed(void);
+
+		/// Gets whether the document is indexed.
+		bool getIsIndexed(void) const;
+
+		/// Gets whether the document is indexed.
+		unsigned int getIsIndexed(unsigned int &indexId) const;
+
 	protected:
-		std::string m_title;
-		std::string m_location;
-		std::string m_type;
-		std::string m_language;
-		std::string m_timestamp;
-		off_t m_size;
+		std::map<std::string, std::string> m_fields;
+		std::string m_extract;
+		float m_score;
 		std::set<std::string> m_labels;
+		unsigned int m_indexId;
+		unsigned int m_docId;
 
+		void setField(const std::string &name, const std::string &value);
+
+		std::string getField(const std::string &name) const;
+
 };
 
 #endif // _DOCUMENT_INFO_H

Deleted: trunk/Utils/IndexedDocument.cpp
===================================================================
--- trunk/Utils/IndexedDocument.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/IndexedDocument.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -1,83 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include "Url.h"
-#include "IndexedDocument.h"
-
-using std::string;
-
-IndexedDocument::IndexedDocument(const string &title, const string &location,
-	const string &originalLocation, const string &type, const string &language) :
-	Document(title, location, type, language),
-	m_originalLocation(originalLocation)
-{
-}
-
-IndexedDocument::IndexedDocument(const IndexedDocument &other) :
-	Document(other),
-	m_originalLocation(other.m_originalLocation)
-{
-}
-
-IndexedDocument::~IndexedDocument()
-{
-}
-
-IndexedDocument& IndexedDocument::operator=(const IndexedDocument& other)
-{
-	if (this != &other)
-	{
-		Document::operator=(other);
-		m_originalLocation = other.m_originalLocation;
-	}
-
-	return *this;
-}
-
-/// Returns the document ID.
-unsigned int IndexedDocument::getID(void) const
-{
-	unsigned int docId = 0;
-
-	// Double-check the URL
-	Url urlObj(m_location);
-	if ((urlObj.getProtocol() == "xapian") ||
-		(urlObj.getFile() != ""))
-	{
-		// The document ID is the final part of the URL, ie the file
-		int val = atoi(urlObj.getFile().c_str());
-		if (val > 0)
-		{
-			docId = (unsigned int)val;
-		}
-	}
-
-	return docId;
-}
-
-/// Sets the original location of the document.
-void IndexedDocument::setOriginalLocation(const string &originalLocation)
-{
-	m_originalLocation = originalLocation;
-}
-
-/// Returns the original location of the document.
-string IndexedDocument::getOriginalLocation(void) const
-{
-	return m_originalLocation;
-}

Deleted: trunk/Utils/IndexedDocument.h
===================================================================
--- trunk/Utils/IndexedDocument.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/IndexedDocument.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -1,52 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#ifndef _INDEXED_DOCUMENT_H
-#define _INDEXED_DOCUMENT_H
-
-#include <string>
-
-#include "Document.h"
-
-/// An entry in the index.
-class IndexedDocument : public Document
-{
-	public:
-		IndexedDocument(const std::string &title, const std::string &location,
-			const std::string &originalLocation, const std::string &type,
-			const std::string &language);
-		IndexedDocument(const IndexedDocument &other);
-		virtual ~IndexedDocument();
-
-		IndexedDocument& operator=(const IndexedDocument& other);
-
-		/// Returns the document ID.
-		virtual unsigned int getID(void) const;
-
-		/// Sets the original location of the document.
-		virtual void setOriginalLocation(const std::string &originalLocation);
-
-		/// Returns the original location of the document.
-		virtual std::string getOriginalLocation(void) const;
-
-	protected:
-		std::string m_originalLocation;
-
-};
-	
-#endif // _INDEXED_DOCUMENT_H

Modified: trunk/Utils/Makefile.am
===================================================================
--- trunk/Utils/Makefile.am	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/Makefile.am	2007-04-09 12:49:10 UTC (rev 803)
@@ -4,11 +4,9 @@
 	CommandLine.h \
 	Document.h \
 	DocumentInfo.h \
-	IndexedDocument.h \
 	Languages.h \
 	MIMEScanner.h \
 	NLS.h \
-	Result.h \
 	StringManip.h \
 	TimeConverter.h \
 	Timer.h \
@@ -32,10 +30,8 @@
 	Url.cpp
 
 libUtils_la_SOURCES = \
-	IndexedDocument.cpp \
 	Languages.cpp \
 	MIMEScanner.cpp \
-	Result.cpp \
 	Timer.cpp \
 	xdgmime/xdgmimealias.c \
 	xdgmime/xdgmime.c \

Deleted: trunk/Utils/Result.cpp
===================================================================
--- trunk/Utils/Result.cpp	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/Result.cpp	2007-04-09 12:49:10 UTC (rev 803)
@@ -1,124 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include "Result.h"
-
-using std::string;
-
-Result::Result(const string &location, const string &title, const string &extract,
-	const string &language, float percentageScore) :
-	DocumentInfo(title, location, "", language),
-	m_extract(extract),
-	m_score(percentageScore),
-	m_indexId(0),
-	m_docId(0)
-{
-}
-
-Result::Result(const Result &other) :
-	DocumentInfo(other),
-	m_extract(other.m_extract),
-	m_score(other.m_score),
-	m_indexId(other.m_indexId),
-	m_docId(other.m_docId)
-{
-}
-
-Result::~Result()
-{
-}
-
-Result &Result::operator=(const Result &other)
-{
-	if (this != &other)
-	{
-		DocumentInfo::operator=(other);
-		m_extract = other.m_extract;
-		m_score = other.m_score;
-		m_indexId = other.m_indexId;
-		m_docId = other.m_docId;
-	}
-
-	return *this;
-}
-
-bool Result::operator<(const Result& other) const
-{
-	if (DocumentInfo::operator<(other) == false)
-	{
-		if (m_score < other.m_score)
-		{
-			return true;
-		}
-
-		return false;
-	}
-
-	return true;
-}
-
-/// Sets the result extract.
-void Result::setExtract(const string &extract)
-{
-	m_extract = extract;
-}
-
-/// Gets the result extract.
-string Result::getExtract(void) const
-{
-	return m_extract;
-}
-
-/// Gets the result score.
-float Result::getScore(void) const
-{
-	return m_score;
-}
-
-/// Sets that the result is indexed.
-void Result::setIsIndexed(unsigned int indexId, unsigned int docId)
-{
-	m_indexId = indexId;
-	m_docId = docId;
-}
-
-/// Sets that the result is not indexed.
-void Result::setIsNotIndexed(void)
-{
-	m_indexId = 0;
-	m_docId = 0;
-}
-
-/// Gets whether the result is indexed.
-bool Result::getIsIndexed(void) const
-{
-	if (m_docId > 0)
-	{
-		return true;
-	}
-
-	return false;
-}
-
-/// Gets whether the result is indexed.
-unsigned int Result::getIsIndexed(unsigned int &indexId) const
-{
-	indexId = m_indexId;
-
-	return m_docId;
-}

Deleted: trunk/Utils/Result.h
===================================================================
--- trunk/Utils/Result.h	2007-04-04 13:32:31 UTC (rev 802)
+++ trunk/Utils/Result.h	2007-04-09 12:49:10 UTC (rev 803)
@@ -1,69 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#ifndef _RESULT_H
-#define _RESULT_H
-
-#include <string>
-
-#include "DocumentInfo.h"
-
-/// A document returned by a search engine.
-class Result : public DocumentInfo
-{
-	public:
-		Result(const std::string &location, const std::string &title,
-			const std::string &extract, const std::string &language,
-			float percentageScore = 0.0);
-		Result(const Result &other);
-		virtual ~Result();
-
-		Result &operator=(const Result &other);
-
-		bool operator<(const Result& other) const;
-
-		/// Sets the result extract.
-		void setExtract(const std::string &extract);
-
-		/// Gets the result extract.
-		std::string getExtract(void) const;
-
-		/// Gets the result score.
-		float getScore(void) const;
-
-		/// Sets that the result is indexed.
-		void setIsIndexed(unsigned int indexId, unsigned int docId);
-
-		/// Sets that the result is not indexed.
-		void setIsNotIndexed(void);
-
-		/// Gets whether the result is indexed.
-		bool getIsIndexed(void) const;
-
-		/// Gets whether the result is indexed.
-		unsigned int getIsIndexed(unsigned int &indexId) const;
-
-	protected:
-		std::string m_extract;
-		float m_score;
-		unsigned int m_indexId;
-		unsigned int m_docId;
-
-};
-
-#endif // _RESULT_H



From fabricecolin at mail.berlios.de  Mon Apr  9 16:34:58 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 9 Apr 2007 16:34:58 +0200
Subject: [Pinot-svn] r804 - trunk/SQL
Message-ID: <200704091434.l39EYwL1016859@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-09 16:34:57 +0200 (Mon, 09 Apr 2007)
New Revision: 804

Modified:
   trunk/SQL/QueryHistory.cpp
   trunk/SQL/QueryHistory.h
Log:
Result class was dropped.


Modified: trunk/SQL/QueryHistory.cpp
===================================================================
--- trunk/SQL/QueryHistory.cpp	2007-04-09 12:49:10 UTC (rev 803)
+++ trunk/SQL/QueryHistory.cpp	2007-04-09 14:34:57 UTC (rev 804)
@@ -137,11 +137,11 @@
 
 /// Gets the first max items for the given query, engine pair.
 bool QueryHistory::getItems(const string &queryName, const string &engineName,
-	unsigned int max, vector<Result> &resultsList) const
+	unsigned int max, vector<DocumentInfo> &resultsList) const
 {
 	bool success = false;
 
-	SQLiteResults *results = executeStatement("SELECT Url, Title, Extract, Language, Score \
+	SQLiteResults *results = executeStatement("SELECT Title, Url, Language, Extract, Score \
 		FROM QueryHistory WHERE QueryName='%q' AND EngineName='%q' ORDER BY Score DESC \
 		LIMIT %u;", queryName.c_str(), engineName.c_str(), max);
 	if (results != NULL)
@@ -154,11 +154,12 @@
 				break;
 			}
 
-			Result result(Url::unescapeUrl(row->getColumn(0)).c_str(),
-				row->getColumn(1),
-				row->getColumn(2),
-				row->getColumn(3),
-				(float)atof(row->getColumn(4).c_str()));
+			DocumentInfo result(row->getColumn(0),
+				Url::unescapeUrl(row->getColumn(1)).c_str(),
+				"", row->getColumn(2));
+			result.setExtract(row->getColumn(3));
+			result.setScore((float)atof(row->getColumn(4).c_str()));
+
 			resultsList.push_back(result);
 			success = true;
 

Modified: trunk/SQL/QueryHistory.h
===================================================================
--- trunk/SQL/QueryHistory.h	2007-04-09 12:49:10 UTC (rev 803)
+++ trunk/SQL/QueryHistory.h	2007-04-09 14:34:57 UTC (rev 804)
@@ -22,7 +22,7 @@
 #include <string>
 #include <vector>
 
-#include "Result.h"
+#include "DocumentInfo.h"
 #include "SQLiteBase.h"
 
 using namespace std;
@@ -54,7 +54,7 @@
 
 		/// Gets the first max items for the given query, engine pair.
 		bool getItems(const string &queryName, const string &engineName,
-			unsigned int max, vector<Result> &resultsList) const;
+			unsigned int max, vector<DocumentInfo> &resultsList) const;
 
 		/// Gets an item's extract.
 		string getItemExtract(const string &queryName, const string &engineName,



From fabricecolin at mail.berlios.de  Tue Apr 10 16:16:35 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 10 Apr 2007 16:16:35 +0200
Subject: [Pinot-svn] r805 - trunk/UI/GTK2/src
Message-ID: <200704101416.l3AEGZYD009899@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-10 16:16:33 +0200 (Tue, 10 Apr 2007)
New Revision: 805

Modified:
   trunk/UI/GTK2/src/DaemonState.h
   trunk/UI/GTK2/src/IndexPage.h
   trunk/UI/GTK2/src/IndexTree.cpp
   trunk/UI/GTK2/src/IndexTree.h
   trunk/UI/GTK2/src/MboxHandler.h
   trunk/UI/GTK2/src/ModelColumns.cpp
   trunk/UI/GTK2/src/ModelColumns.h
   trunk/UI/GTK2/src/OnDiskHandler.h
   trunk/UI/GTK2/src/ResultsTree.cpp
   trunk/UI/GTK2/src/ResultsTree.h
   trunk/UI/GTK2/src/ServerThreads.cpp
   trunk/UI/GTK2/src/WorkerThreads.cpp
   trunk/UI/GTK2/src/WorkerThreads.h
   trunk/UI/GTK2/src/mainWindow.cc
   trunk/UI/GTK2/src/mainWindow.hh
Log:
Phased out Result and IndexedDocument classes.


Modified: trunk/UI/GTK2/src/DaemonState.h
===================================================================
--- trunk/UI/GTK2/src/DaemonState.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/DaemonState.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -23,7 +23,6 @@
 #include <queue>
 #include <set>
 
-#include "IndexedDocument.h"
 #include "MonitorInterface.h"
 #include "MonitorHandler.h"
 #include "WorkerThreads.h"

Modified: trunk/UI/GTK2/src/IndexPage.h
===================================================================
--- trunk/UI/GTK2/src/IndexPage.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/IndexPage.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -34,7 +34,6 @@
 #include <gtkmm/treeselection.h>
 
 #include "QueryProperties.h"
-#include "IndexedDocument.h"
 #include "IndexTree.h"
 #include "Notebook.h"
 #include "PinotSettings.h"

Modified: trunk/UI/GTK2/src/IndexTree.cpp
===================================================================
--- trunk/UI/GTK2/src/IndexTree.cpp	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/IndexTree.cpp	2007-04-10 14:16:33 UTC (rev 805)
@@ -70,7 +70,7 @@
 	{
 		append_column(*manage(pColumn));
 	}
-	pColumn = create_column(_("URL"), m_indexColumns.m_liveUrl, true, true, m_indexColumns.m_liveUrl);
+	pColumn = create_column(_("URL"), m_indexColumns.m_url, true, true, m_indexColumns.m_url);
 	if (pColumn != NULL)
 	{
 		append_column(*manage(pColumn));
@@ -163,20 +163,20 @@
 //
 // Appends a new row in the index tree.
 //
-bool IndexTree::appendDocument(const IndexedDocument &docInfo)
+bool IndexTree::appendDocument(const DocumentInfo &docInfo)
 {
 	TreeModel::iterator newRowIter = m_refStore->append();
 	TreeModel::Row childRow = *newRowIter;
+	unsigned int indexId = 0;
 
 	childRow[m_indexColumns.m_text] = to_utf8(docInfo.getTitle());
 	childRow[m_indexColumns.m_url] = to_utf8(docInfo.getLocation());
-	childRow[m_indexColumns.m_liveUrl] = to_utf8(docInfo.getOriginalLocation());
 	childRow[m_indexColumns.m_type] = to_utf8(docInfo.getType());
 	childRow[m_indexColumns.m_language] = to_utf8(docInfo.getLanguage());
 	string timestamp(docInfo.getTimestamp());
 	childRow[m_indexColumns.m_timestamp] = to_utf8(timestamp);
 	childRow[m_indexColumns.m_timestampTime] = TimeConverter::fromTimestamp(timestamp);
-	childRow[m_indexColumns.m_id] = docInfo.getID();
+	childRow[m_indexColumns.m_id] = docInfo.getIsIndexed(indexId);
 
 	// If the tree was empty, it is no longer
 	m_listingIndex = true;
@@ -187,7 +187,7 @@
 //
 // Adds a set of documents.
 //
-bool IndexTree::addDocuments(const vector<IndexedDocument> &documentsList)
+bool IndexTree::addDocuments(const vector<DocumentInfo> &documentsList)
 {
 	unsigned int count = 0;
 
@@ -197,7 +197,7 @@
 	// FIXME: clear the tree ?
 
 	// Get the list of indexed documents
-	for (vector<IndexedDocument>::const_iterator docIter = documentsList.begin();
+	for (vector<DocumentInfo>::const_iterator docIter = documentsList.begin();
 		docIter != documentsList.end(); ++docIter)
 	{
 		// Add a row
@@ -236,25 +236,25 @@
 //
 // Gets the first selected item.
 //
-IndexedDocument IndexTree::getFirstSelection(void)
+DocumentInfo IndexTree::getFirstSelection(void)
 {
 	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
 	if (selectedItems.empty() == true)
 	{
-		return IndexedDocument("", "", "", "", "");
+		return DocumentInfo();
 	}
 
 	list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
 	TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
 	TreeModel::Row row = *iter;
 
-	IndexedDocument indexedDoc(from_utf8(row[m_indexColumns.m_text]),
+	DocumentInfo indexedDoc(from_utf8(row[m_indexColumns.m_text]),
 		from_utf8(row[m_indexColumns.m_url]),
-		from_utf8(row[m_indexColumns.m_liveUrl]),
 		from_utf8(row[m_indexColumns.m_type]),
 		from_utf8(row[m_indexColumns.m_language]));
 	indexedDoc.setTimestamp(from_utf8(row[m_indexColumns.m_timestamp]));
 	indexedDoc.setSize(row[m_indexColumns.m_size]);
+	indexedDoc.setIsIndexed(m_settings.getIndexId(m_indexName), row[m_indexColumns.m_id]);
 
 	return indexedDoc;
 }
@@ -278,11 +278,12 @@
 		TreeModel::Row row = *iter;
 
 		DocumentInfo docInfo(from_utf8(row[m_indexColumns.m_text]),
-			from_utf8(row[m_indexColumns.m_liveUrl]),
+			from_utf8(row[m_indexColumns.m_url]),
 			from_utf8(row[m_indexColumns.m_type]),
 			from_utf8(row[m_indexColumns.m_language]));
 		docInfo.setTimestamp(from_utf8(row[m_indexColumns.m_timestamp]));
 		docInfo.setSize(row[m_indexColumns.m_size]);
+		docInfo.setIsIndexed(m_settings.getIndexId(m_indexName), row[m_indexColumns.m_id]);
 
 		documentsList.push_back(docInfo);
 	}
@@ -294,41 +295,6 @@
 }
 
 //
-// Gets a list of selected items.
-//
-bool IndexTree::getSelection(std::vector<IndexedDocument> &documentsList)
-{
-	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
-	if (selectedItems.empty() == true)
-	{
-		return false;
-	}
-
-	// Go through selected items
-	for (list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
-		itemPath != selectedItems.end(); ++itemPath)
-	{
-		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
-		TreeModel::Row row = *iter;
-
-		IndexedDocument indexedDoc(from_utf8(row[m_indexColumns.m_text]),
-			from_utf8(row[m_indexColumns.m_url]),
-			from_utf8(row[m_indexColumns.m_liveUrl]),
-			from_utf8(row[m_indexColumns.m_type]),
-			from_utf8(row[m_indexColumns.m_language]));
-		indexedDoc.setTimestamp(from_utf8(row[m_indexColumns.m_timestamp]));
-		indexedDoc.setSize(row[m_indexColumns.m_size]);
-
-		documentsList.push_back(indexedDoc);
-	}
-#ifdef DEBUG
-	cout << "IndexTree::getSelection: " << documentsList.size() << " documents selected" << endl;
-#endif
-
-	return true;
-}
-
-//
 // Updates a document's properties.
 //
 void IndexTree::updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo)

Modified: trunk/UI/GTK2/src/IndexTree.h
===================================================================
--- trunk/UI/GTK2/src/IndexTree.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/IndexTree.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -33,7 +33,6 @@
 #include <gtkmm/treeselection.h>
 
 #include "QueryProperties.h"
-#include "IndexedDocument.h"
 #include "ModelColumns.h"
 #include "PinotSettings.h"
 
@@ -48,23 +47,20 @@
 		Gtk::ScrolledWindow *getScrolledWindow(void) const;
 
 		/// Adds a set of documents.
-		bool addDocuments(const std::vector<IndexedDocument> &documentsList);
+		bool addDocuments(const std::vector<DocumentInfo> &documentsList);
 
 		/// Appends a new row in the index tree.
-		bool appendDocument(const IndexedDocument &docInfo);
+		bool appendDocument(const DocumentInfo &docInfo);
 
 		/// Gets the first selected item's URL.
 		Glib::ustring getFirstSelectionURL(void);
 
 		/// Gets the first selected item.
-		IndexedDocument getFirstSelection(void);
+		DocumentInfo getFirstSelection(void);
 
 		/// Gets a list of selected items.
 		bool getSelection(std::vector<DocumentInfo> &documentsList);
 
-		/// Gets a list of selected items.
-		bool getSelection(std::vector<IndexedDocument> &documentsList);
-
 		/// Updates a document's properties.
 		void updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo);
 

Modified: trunk/UI/GTK2/src/MboxHandler.h
===================================================================
--- trunk/UI/GTK2/src/MboxHandler.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/MboxHandler.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -24,7 +24,6 @@
 #include <set>
 #include <sigc++/slot.h>
 
-#include "IndexedDocument.h"
 #include "Filter.h"
 #include "CrawlHistory.h"
 #include "MonitorHandler.h"

Modified: trunk/UI/GTK2/src/ModelColumns.cpp
===================================================================
--- trunk/UI/GTK2/src/ModelColumns.cpp	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/ModelColumns.cpp	2007-04-10 14:16:33 UTC (rev 805)
@@ -80,7 +80,6 @@
 {
 	add(m_text);
 	add(m_url);
-	add(m_liveUrl);
 	add(m_type);
 	add(m_language);
 	add(m_id);

Modified: trunk/UI/GTK2/src/ModelColumns.h
===================================================================
--- trunk/UI/GTK2/src/ModelColumns.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/ModelColumns.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -106,7 +106,6 @@
 
 	Gtk::TreeModelColumn<Glib::ustring> m_text;
 	Gtk::TreeModelColumn<Glib::ustring> m_url;
-	Gtk::TreeModelColumn<Glib::ustring> m_liveUrl;
 	Gtk::TreeModelColumn<Glib::ustring> m_type;
 	Gtk::TreeModelColumn<Glib::ustring> m_language;
 	Gtk::TreeModelColumn<unsigned int> m_id;

Modified: trunk/UI/GTK2/src/OnDiskHandler.h
===================================================================
--- trunk/UI/GTK2/src/OnDiskHandler.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/OnDiskHandler.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -26,7 +26,6 @@
 #include <sigc++/slot.h>
 
 #include "CrawlHistory.h"
-#include "IndexedDocument.h"
 #include "MonitorHandler.h"
 #include "XapianIndex.h"
 #include "PinotSettings.h"

Modified: trunk/UI/GTK2/src/ResultsTree.cpp
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.cpp	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/ResultsTree.cpp	2007-04-10 14:16:33 UTC (rev 805)
@@ -451,7 +451,7 @@
 // Adds a set of results.
 // Returns true if something was added to the tree.
 //
-bool ResultsTree::addResults(const string &engineName, const vector<Result> &resultsList,
+bool ResultsTree::addResults(const string &engineName, const vector<DocumentInfo> &resultsList,
 	const string &charset)
 {
 	std::map<string, TreeModel::iterator> updatedGroups;
@@ -505,7 +505,7 @@
 #ifdef DEBUG
 	cout << "ResultsTree::addResults: " << resultsList.size() << " results" << endl;
 #endif
-	for (vector<Result>::const_iterator resultIter = resultsList.begin();
+	for (vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
 		resultIter != resultsList.end(); ++resultIter)
 	{
 		ustring title(to_utf8(resultIter->getTitle(), charset));
@@ -850,42 +850,10 @@
 		if ((skipIndexed == false) ||
 			(row[m_resultsColumns.m_indexed] == false))
 		{
-			resultsList.push_back(DocumentInfo(from_utf8(row[m_resultsColumns.m_text]),
-				from_utf8(row[m_resultsColumns.m_url]),
-				from_utf8(row[m_resultsColumns.m_type]), ""));
-		}
-	}
-#ifdef DEBUG
-	cout << "ResultsTree::getSelection: " << resultsList.size() << " results selected" << endl;
-#endif
-
-	return true;
-}
-
-//
-// Gets a list of selected items.
-//
-bool ResultsTree::getSelection(vector<Result> &resultsList)
-{
-	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
-	if (selectedItems.empty() == true)
-	{
-		return false;
-	}
-
-	// Go through selected items
-	for (list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
-		itemPath != selectedItems.end(); ++itemPath)
-	{
-		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
-		TreeModel::Row row = *iter;
-
-		if (row[m_resultsColumns.m_resultType] == ResultsModelColumns::ROW_RESULT)
-		{
 			bool isIndexed = row[m_resultsColumns.m_indexed];
 
-			Result current(from_utf8(row[m_resultsColumns.m_url]),
-				from_utf8(row[m_resultsColumns.m_text]), "", "");
+			DocumentInfo current(from_utf8(row[m_resultsColumns.m_text]),
+				from_utf8(row[m_resultsColumns.m_url]), "", "");
 
 			if (isIndexed == true)
 			{
@@ -951,32 +919,33 @@
 //
 // Updates a result's properties.
 //
-void ResultsTree::updateResult(const Result &result)
+void ResultsTree::updateResult(const DocumentInfo &result)
 {
-#if 0
+	unsigned int indexId = 0;
+	unsigned int docId = result.getIsIndexed(indexId);
+
 	if (docId == 0)
 	{
 		return;
 	}
 
-	// Go through the list of indexed documents
+	// Go through the list
 	TreeModel::Children children = m_refStore->children();
 	for (TreeModel::Children::iterator iter = children.begin(); iter != children.end(); ++iter)
 	{
 		TreeModel::Row row = *iter;
 
-		if (docId == row[m_indexColumns.m_id])
+		if (docId == row[m_resultsColumns.m_docId])
 		{
-			row[m_indexColumns.m_text] = to_utf8(docInfo.getTitle());
-			row[m_indexColumns.m_type] = to_utf8(docInfo.getType());
-			row[m_indexColumns.m_language] = to_utf8(docInfo.getLanguage());
-			string timestamp(docInfo.getTimestamp());
-			row[m_indexColumns.m_timestamp] = to_utf8(timestamp);
-			row[m_indexColumns.m_timestampTime] = TimeConverter::fromTimestamp(timestamp);
+			updateRow(row, result.getTitle(), result.getLocation(), result.getType(),
+				row[m_resultsColumns.m_score], row[m_resultsColumns.m_engines],
+				row[m_resultsColumns.m_indexes], docId,
+				result.getTimestamp(), ResultsModelColumns::ROW_RESULT,
+				row[m_resultsColumns.m_indexed], row[m_resultsColumns.m_viewed],
+				row[m_resultsColumns.m_rankDiff]);
 			break;
 		}
 	}
-#endif
 }
 
 //

Modified: trunk/UI/GTK2/src/ResultsTree.h
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/ResultsTree.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -35,7 +35,6 @@
 #include <gtkmm/treeview.h>
 #include <gtkmm/treeselection.h>
 
-#include "Result.h"
 #include "ModelColumns.h"
 #include "PinotSettings.h"
 
@@ -64,7 +63,7 @@
 		  * Adds a set of results.
 		  * Returns true if something was added to the tree.
 		  */
-		bool addResults(const std::string &engineName, const std::vector<Result> &resultsList,
+		bool addResults(const std::string &engineName, const std::vector<DocumentInfo> &resultsList,
 			const std::string &charset);
 
 		/// Sets how results are grouped.
@@ -73,14 +72,11 @@
 		/// Gets a list of selected items.
 		bool getSelection(std::vector<DocumentInfo> &resultsList, bool skipIndexed = false);
 
-		/// Gets a list of selected items.
-		bool getSelection(std::vector<Result> &resultsList);
-
 		/// Sets the selected items' state.
 		void setSelectionState(bool viewed);
 
 		/// Updates a result's properties.
-		void updateResult(const Result &result);
+		void updateResult(const DocumentInfo &result);
 
 		/**
 		  * Deletes the current selection.

Modified: trunk/UI/GTK2/src/ServerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/ServerThreads.cpp	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/ServerThreads.cpp	2007-04-10 14:16:33 UTC (rev 805)
@@ -1101,11 +1101,11 @@
 				engine.setMaxResultsCount(maxHits);
 				if (engine.runQuery(queryProps) == true)
 				{
-					const vector<Result> &resultsList = engine.getResults();
+					const vector<DocumentInfo> &resultsList = engine.getResults();
 					vector<string> docIds;
 					m_pArray = g_ptr_array_new();
 
-					for (vector<Result>::const_iterator resultIter = resultsList.begin();
+					for (vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
 						resultIter != resultsList.end(); ++resultIter)
 					{
 						// We only need the document ID

Modified: trunk/UI/GTK2/src/WorkerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.cpp	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/WorkerThreads.cpp	2007-04-10 14:16:33 UTC (rev 805)
@@ -42,7 +42,6 @@
 #include "XapianDatabase.h"
 #include "ActionQueue.h"
 #include "QueryHistory.h"
-#include "IndexedDocument.h"
 #include "DownloaderFactory.h"
 #include "SearchEngineFactory.h"
 #include "config.h"
@@ -605,7 +604,7 @@
 	return m_indexDocsCount;
 }
 
-const vector<IndexedDocument> &IndexBrowserThread::getDocuments(void) const
+const vector<DocumentInfo> &IndexBrowserThread::getDocuments(void) const
 {
 	return m_documentsList;
 }
@@ -681,8 +680,6 @@
 
 		// Get the document ID
 		unsigned int docId = (*iter);
-		// ...and the document URL
-		string url = XapianDatabase::buildUrl(mapIter->second, docId);
 
 		DocumentInfo docInfo;
 		if (pIndex->getDocumentInfo(docId, docInfo) == true)
@@ -693,10 +690,11 @@
 				type = "text/html";
 			}
 
-			IndexedDocument indexedDoc(docInfo.getTitle(), url, docInfo.getLocation(),
+			DocumentInfo indexedDoc(docInfo.getTitle(), docInfo.getLocation(),
 				type, docInfo.getLanguage());
 			indexedDoc.setTimestamp(docInfo.getTimestamp());
 			indexedDoc.setSize(docInfo.getSize());
+			indexedDoc.setIsIndexed(PinotSettings::getInstance().getIndexId(m_indexName), docId);
 
 			// Insert that document
 			m_documentsList.push_back(indexedDoc);
@@ -738,7 +736,7 @@
 	return m_queryProps;
 }
 
-const vector<Result> &QueryingThread::getResults(string &charset) const
+const vector<DocumentInfo> &QueryingThread::getResults(string &charset) const
 {
 	charset = m_resultsCharset;
 #ifdef DEBUG
@@ -796,7 +794,7 @@
 	{
 		IndexInterface *pDocsIndex = NULL;
 		IndexInterface *pDaemonIndex = NULL;
-		const vector<Result> &resultsList = pEngine->getResults();
+		const vector<DocumentInfo> &resultsList = pEngine->getResults();
 		unsigned int indexId = 0;
 		bool isIndexQuery = false;
 
@@ -828,10 +826,10 @@
 		}
 
 		// Copy the results list
-		for (vector<Result>::const_iterator resultIter = resultsList.begin();
+		for (vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
 			resultIter != resultsList.end(); ++resultIter)
 		{
-			Result current(*resultIter);
+			DocumentInfo current(*resultIter);
 			string title(_("No title"));
 			string location(current.getLocation());
 			string language(current.getLanguage());

Modified: trunk/UI/GTK2/src/WorkerThreads.h
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.h	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/WorkerThreads.h	2007-04-10 14:16:33 UTC (rev 805)
@@ -34,10 +34,8 @@
 #include <glibmm/ustring.h>
 
 #include "Document.h"
-#include "IndexedDocument.h"
 #include "DownloaderInterface.h"
 #include "QueryProperties.h"
-#include "Result.h"
 
 class WorkerThread
 {
@@ -164,7 +162,7 @@
 
 		unsigned int getDocumentsCount(void) const;
 
-		const std::vector<IndexedDocument> &getDocuments(void) const;
+		const std::vector<DocumentInfo> &getDocuments(void) const;
 
 		virtual bool stop(void);
 
@@ -174,7 +172,7 @@
 		unsigned int m_indexDocsCount;
 		unsigned int m_maxDocsCount;
 		unsigned int m_startDoc;
-		std::vector<IndexedDocument> m_documentsList;
+		std::vector<DocumentInfo> m_documentsList;
 
 		virtual void doWork(void);
 
@@ -197,7 +195,7 @@
 
 		QueryProperties getQuery(void) const;
 
-		const std::vector<Result> &getResults(std::string &charset) const;
+		const std::vector<DocumentInfo> &getResults(std::string &charset) const;
 
 		virtual bool stop(void);
 
@@ -206,7 +204,7 @@
 		std::string m_engineDisplayableName;
 		std::string m_engineOption;
 		QueryProperties m_queryProps;
-		std::vector<Result> m_resultsList;
+		std::vector<DocumentInfo> m_resultsList;
 		std::string m_resultsCharset;
 		std::set<std::string> m_expandTerms;
 

Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-04-10 14:16:33 UTC (rev 805)
@@ -36,7 +36,6 @@
 #include <gtkmm/main.h>
 
 #include "CommandLine.h"
-#include "IndexedDocument.h"
 #include "StringManip.h"
 #include "TimeConverter.h"
 #include "MIMEScanner.h"
@@ -437,7 +436,7 @@
 //
 void mainWindow::on_resultsTreeviewSelection_changed(ustring queryName)
 {
-	vector<Result> resultsList;
+	vector<DocumentInfo> resultsList;
 	string url;
 	bool hasSelection = false;
 
@@ -460,7 +459,7 @@
 	{
 		bool firstResult = true, isViewable = true, isCached = false, isIndexed = false, isIndexable = true;
 
-		for (vector<Result>::iterator resultIter = resultsList.begin();
+		for (vector<DocumentInfo>::iterator resultIter = resultsList.begin();
 			resultIter != resultsList.end(); ++resultIter)
 		{
 			string url(resultIter->getLocation());
@@ -873,7 +872,7 @@
 			pIndexTree = pIndexPage->getTree();
 			if (pIndexTree != NULL)
 			{
-				const vector<IndexedDocument> &docsList = pBrowseThread->getDocuments();
+				const vector<DocumentInfo> &docsList = pBrowseThread->getDocuments();
 
 				// Add the documents to the tree
 				pIndexTree->addDocuments(docsList);
@@ -922,7 +921,7 @@
 		ustring queryName = to_utf8(queryProps.getName());
 		ustring engineName = to_utf8(pQueryThread->getEngineName());
 		string resultsCharset;
-		const vector<Result> &resultsList = pQueryThread->getResults(resultsCharset);
+		const vector<DocumentInfo> &resultsList = pQueryThread->getResults(resultsCharset);
 
 		status = _("Query");
 		status += " ";
@@ -1007,7 +1006,7 @@
 #ifdef DEBUG
 			cout << "mainWindow::on_thread_end: indexing results, with label " << labelName << endl;
 #endif
-			for (vector<Result>::const_iterator resultIter = resultsList.begin();
+			for (vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
 				resultIter != resultsList.end(); ++resultIter)
 			{
 				unsigned int indexId;
@@ -1231,8 +1230,7 @@
 					(rowsCount < m_maxDocsCount))
 				{
 					// Add a row to the index tree
-					IndexedDocument indexedDoc(docInfo.getTitle(),
-						XapianDatabase::buildUrl(m_settings.m_docsIndexLocation, docId),
+					DocumentInfo indexedDoc(docInfo.getTitle(),
 						docInfo.getLocation(), docInfo.getType(),
 						docInfo.getLanguage());
 					indexedDoc.setTimestamp(docInfo.getTimestamp());
@@ -1757,7 +1755,7 @@
 void mainWindow::on_morelikethis_activate()
 {
 	QueryProperties queryProps;
-	vector<Result> resultsList;
+	vector<DocumentInfo> resultsList;
 	string queryName;
 
 	NotebookPageBox *pNotebookPage = get_current_page();
@@ -1812,7 +1810,7 @@
 	}
 
 	set<string> locations;
-	for (vector<Result>::const_iterator docIter = resultsList.begin();
+	for (vector<DocumentInfo>::const_iterator docIter = resultsList.begin();
 		docIter != resultsList.end(); ++docIter)
 	{
 		if (docIter->getIsIndexed() == true)
@@ -1919,7 +1917,7 @@
 //
 void mainWindow::on_refreshindex_activate()
 {
-	vector<IndexedDocument> documentsList;
+	vector<DocumentInfo> documentsList;
 
 	// Get the current documents selection
 	IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_current_page());
@@ -1938,23 +1936,22 @@
 		}
 	}
 
-	for (vector<IndexedDocument>::const_iterator docIter = documentsList.begin();
+	for (vector<DocumentInfo>::const_iterator docIter = documentsList.begin();
 		docIter != documentsList.end(); ++docIter)
 	{
-		string url(docIter->getOriginalLocation());
-		unsigned int docId = docIter->getID();
+		unsigned int indexId = 0;
+		unsigned int docId = docIter->getIsIndexed(indexId);
 
-		if ((docId == 0) ||
-			(url.empty() == true))
+		if (docId == 0)
 		{
 			continue;
 		}
 #ifdef DEBUG
-		cout << "mainWindow::on_refreshindex_activate: URL is " << url << endl;
+		cout << "mainWindow::on_refreshindex_activate: URL is " << docIter->getLocation() << endl;
 #endif
 
 		// Add this action to the queue
-		DocumentInfo docInfo(docIter->getTitle(), url,
+		DocumentInfo docInfo(docIter->getTitle(), docIter->getLocation(), 
 			docIter->getType(), docIter->getLanguage());
 		docInfo.setTimestamp(docIter->getTimestamp());
 		docInfo.setSize(docIter->getSize());
@@ -1972,7 +1969,7 @@
 //
 void mainWindow::on_showfromindex_activate()
 {
-	vector<IndexedDocument> documentsList;
+	vector<DocumentInfo> documentsList;
 	set<string> docLabels;
 	string indexName, labelName;
 	DocumentInfo docInfo;
@@ -2028,10 +2025,11 @@
 	// If there's only one document selected, get its labels
 	if (documentsList.size() == 1)
 	{
-		vector<IndexedDocument>::iterator docIter = documentsList.begin();
+		vector<DocumentInfo>::iterator docIter = documentsList.begin();
+		unsigned int indexId = 0;
 
 		// Get the document ID
-		docId = docIter->getID();
+		docId = docIter->getIsIndexed(indexId);
 
 		// Get the properties from the index because they have been altered
 		// by the tree for display purposes
@@ -2051,7 +2049,7 @@
 	else
 	{
 		// If all documents are of the same language, show it
-		for (vector<IndexedDocument>::iterator docIter = documentsList.begin();
+		for (vector<DocumentInfo>::iterator docIter = documentsList.begin();
 			docIter != documentsList.end(); ++docIter)
 		{
 			if (docInfo.getLanguage().empty() == true)
@@ -2095,10 +2093,12 @@
 	{
 		set<unsigned int> docIds;
 
-		for (vector<IndexedDocument>::iterator docIter = documentsList.begin();
+		for (vector<DocumentInfo>::iterator docIter = documentsList.begin();
 			docIter != documentsList.end(); ++docIter)
 		{
-			docIds.insert(docIter->getID());
+			unsigned int indexId = 0;
+
+			docIds.insert(docIter->getIsIndexed(indexId));
 		}
 
 		// Set the document's labels list
@@ -2125,12 +2125,12 @@
 		if (newLanguage.empty() == false)
 		{
 			// Update all documents
-			for (vector<IndexedDocument>::iterator docIter = documentsList.begin();
+			for (vector<DocumentInfo>::iterator docIter = documentsList.begin();
 				docIter != documentsList.end(); ++docIter)
 			{
-				unsigned int docId = docIter->getID();
+				unsigned int indexId = 0;
+				unsigned int docId = docIter->getIsIndexed(indexId);
 
-				docIter->setLocation(docIter->getOriginalLocation());
 				docIter->setLanguage(newLanguage);
 
 				start_thread(new UpdateDocumentThread(indexName, docId, *docIter));
@@ -2153,7 +2153,7 @@
 //
 void mainWindow::on_unindex_activate()
 {
-	vector<IndexedDocument> documentsList;
+	vector<DocumentInfo> documentsList;
 	ustring boxTitle = _("Remove this document from the index ?");
 
 	IndexTree *pIndexTree = NULL;
@@ -2190,10 +2190,12 @@
 	pIndexTree->deleteSelection();
 
 	set<unsigned int> docIdList;
-	for (vector<IndexedDocument>::const_iterator docIter = documentsList.begin();
+	for (vector<DocumentInfo>::const_iterator docIter = documentsList.begin();
 		docIter != documentsList.end(); ++docIter)
 	{
-		unsigned int docId = docIter->getID();
+		unsigned int indexId = 0;
+		unsigned int docId = docIter->getIsIndexed(indexId);
+
 		if (docId > 0)
 		{
 			docIdList.insert(docId);
@@ -3174,7 +3176,7 @@
 //
 // Append a document to the index tree.
 //
-bool mainWindow::append_document(IndexPage *pIndexPage, const ustring &indexName, const IndexedDocument &docInfo)
+bool mainWindow::append_document(IndexPage *pIndexPage, const ustring &indexName, const DocumentInfo &docInfo)
 {
 	bool appendToList = true;
 
@@ -3201,7 +3203,9 @@
 	
 			if (pIndex != NULL)
 			{
-				appendToList = pIndex->hasLabel(docInfo.getID(), from_utf8(labelName));
+				unsigned int indexId = 0;
+
+				appendToList = pIndex->hasLabel(docInfo.getIsIndexed(indexId), from_utf8(labelName));
 			}
 
 			delete pIndex;

Modified: trunk/UI/GTK2/src/mainWindow.hh
===================================================================
--- trunk/UI/GTK2/src/mainWindow.hh	2007-04-09 14:34:57 UTC (rev 804)
+++ trunk/UI/GTK2/src/mainWindow.hh	2007-04-10 14:16:33 UTC (rev 805)
@@ -36,7 +36,6 @@
 #include <gtkmm/tooltips.h>
 
 #include "DocumentInfo.h"
-#include "IndexedDocument.h"
 #include "QueryProperties.h"
 #include "EnginesTree.h"
 #include "IndexPage.h"
@@ -133,7 +132,7 @@
 		unsigned int startDoc, bool changePage = true);
 	void view_documents(std::vector<DocumentInfo> &documentsList);
 	bool append_document(IndexPage *pIndexPage, const Glib::ustring &indexName,
-		const IndexedDocument &docInfo);
+		const DocumentInfo &docInfo);
 	bool start_thread(WorkerThread *pNewThread, bool inBackground = false);
 
 	// Status methods



From fabricecolin at mail.berlios.de  Mon Apr 16 15:28:52 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 16 Apr 2007 15:28:52 +0200
Subject: [Pinot-svn] r806 - trunk/Tokenize
Message-ID: <200704161328.l3GDSqCJ018785@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-16 15:28:52 +0200 (Mon, 16 Apr 2007)
New Revision: 806

Modified:
   trunk/Tokenize/Makefile.am
Log:
Added Filter.cc to sources list, as found in revision 26 of filters.


Modified: trunk/Tokenize/Makefile.am
===================================================================
--- trunk/Tokenize/Makefile.am	2007-04-10 14:16:33 UTC (rev 805)
+++ trunk/Tokenize/Makefile.am	2007-04-16 13:28:52 UTC (rev 806)
@@ -4,13 +4,12 @@
 	FilterUtils.h \
 	Tokenizer.h \
 	filters/ExternalFilter.h \
+	filters/Filter.h \
+	filters/FilterFactory.h \
+	filters/GMimeMboxFilter.h \
 	filters/HtmlFilter.h \
-	filters/GMimeMboxFilter.h \
 	filters/TagLibMusicFilter.h \
 	filters/TextFilter.h \
-	filters/Filter.h \
-	filters/FilterFactory.h \
-	filters/GMimeMboxFilter.h \
 	filters/XmlFilter.h
 
 lib_LTLIBRARIES = libexternalfilter.la libmboxfilter.la libtaglibfilter.la
@@ -41,6 +40,7 @@
 libTokenize_la_SOURCES = \
 	FilterUtils.cpp \
 	Tokenizer.cpp \
+	filters/Filter.cc \
 	filters/FilterFactory.cc \
 	filters/HtmlFilter.cc \
 	filters/TextFilter.cc \



From fabricecolin at mail.berlios.de  Tue Apr 24 16:30:39 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 24 Apr 2007 16:30:39 +0200
Subject: [Pinot-svn] r807 - trunk/Search
Message-ID: <200704241430.l3OEUdtV011873@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-24 16:30:38 +0200 (Tue, 24 Apr 2007)
New Revision: 807

Added:
   trunk/Search/ResultsExporter.cpp
   trunk/Search/ResultsExporter.h
Modified:
   trunk/Search/Makefile.am
   trunk/Search/SearchEngineFactory.cpp
   trunk/Search/SearchEngineFactory.h
   trunk/Search/pinot-search.cpp
Log:
Implemented results export, to either CSV (semi-colon) or OpenSearch response
XML/RSS. pinot-search cai either save the results to file or output them.
SearchEngineFactory has a new utility method that returns a plugin's engine
name.


Modified: trunk/Search/Makefile.am
===================================================================
--- trunk/Search/Makefile.am	2007-04-16 13:28:52 UTC (rev 806)
+++ trunk/Search/Makefile.am	2007-04-24 14:30:38 UTC (rev 807)
@@ -3,18 +3,19 @@
 noinst_HEADERS = \
 	AbstractGenerator.h \
 	OpenSearchParser.h \
+	PluginParsers.h \
+	PluginWebEngine.h \
 	QueryProperties.h \
-	SearchPluginProperties.h \
-	WebEngine.h \
+	ResultsExporter.h \
 	SearchEngineFactory.h \
-	XapianEngine.h \
-	PluginParsers.h \
-	PluginWebEngine.h \
 	SearchEngineInterface.h \
+	SearchPluginProperties.h \
 	SherlockParser.h \
 	SOAPEnv.h \
 	SOAPEnvH.h \
-	SOAPEnvStub.h
+	SOAPEnvStub.h \
+	WebEngine.h \
+	XapianEngine.h
 
 EXTRA_LTLIBRARIES = libSearch.la libSearchSOAP.la
 
@@ -25,13 +26,14 @@
 libSearch_la_SOURCES = \
 	AbstractGenerator.cpp \
 	OpenSearchParser.cpp \
+	PluginWebEngine.cpp \
 	QueryProperties.cpp \
+	ResultsExporter.cpp \
+	SearchEngineFactory.cpp \
+	SearchEngineInterface.cpp \
 	SearchPluginProperties.cpp \
 	WebEngine.cpp \
-	SearchEngineFactory.cpp \
-	XapianEngine.cpp \
-	PluginWebEngine.cpp \
-	SearchEngineInterface.cpp
+	XapianEngine.cpp
 if HAVE_BOOST_SPIRIT
 libSearch_la_SOURCES += SherlockParser.cpp
 endif

Added: trunk/Search/ResultsExporter.cpp
===================================================================
--- trunk/Search/ResultsExporter.cpp	2007-04-16 13:28:52 UTC (rev 806)
+++ trunk/Search/ResultsExporter.cpp	2007-04-24 14:30:38 UTC (rev 807)
@@ -0,0 +1,275 @@
+/*
+ *  Copyright 2007 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU Library General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#include <iostream>
+#include <fstream>
+#include <libxml++/parsers/domparser.h>
+#include <libxml++/nodes/node.h>
+#include <libxml++/nodes/textnode.h>
+
+#include "StringManip.h"
+#include "FilterUtils.h"
+#include "ResultsExporter.h"
+
+using std::string;
+using std::vector;
+using std::ofstream;
+using std::endl;
+using xmlpp::Element;
+
+static Element *addChildElement(Element *pElem, const string &nodeName, const string &nodeContent)
+{
+	if (pElem == NULL)
+	{
+		return NULL;
+	}
+
+	Element *pSubElem = pElem->add_child(nodeName);
+	if (pSubElem != NULL)
+	{
+#ifdef HAS_LIBXMLPP026
+		pSubElem->set_child_content(nodeContent);
+#else
+		pSubElem->set_child_text(nodeContent);
+#endif
+	}
+
+	return pSubElem;
+}
+
+ResultsExporter::ResultsExporter(const string &fileName,
+	const QueryProperties &queryProps) :
+	m_fileName(fileName),
+	m_queryName(queryProps.getName()),
+	m_queryDetails(queryProps.getFreeQuery())
+{
+}
+
+ResultsExporter::~ResultsExporter()
+{
+}
+
+CSVExporter::CSVExporter(const string &fileName,
+	const QueryProperties &queryProps) :
+	ResultsExporter(fileName, queryProps)
+{
+}
+
+CSVExporter::~CSVExporter()
+{
+}
+
+bool CSVExporter::exportResults(const string &engineName, unsigned int maxResultsCount,
+	const vector<DocumentInfo> &resultsList)
+{
+	if ((resultsList.empty() == true) ||
+		(exportStart(engineName, maxResultsCount) == false))
+	{
+		return false;
+	}
+
+	for (vector<DocumentInfo>::const_iterator iter = resultsList.begin();
+		iter != resultsList.end(); ++iter)
+	{
+		exportResult(engineName, *iter);
+	}
+	exportEnd();
+
+	return true;
+}
+
+bool CSVExporter::exportStart(const string &engineName, unsigned int maxResultsCount)
+{
+	if (m_fileName.empty() == true)
+	{
+		return false;
+	}
+
+	m_outputFile.open(m_fileName.c_str());
+	if (m_outputFile.good() == false)
+	{
+		m_outputFile.close();
+
+		return false;
+	}
+
+	m_outputFile << "\"query\";\"engine\";\"caption\";\"url\";\"type\";\"language\";\"modtime\";\"size\";\"abstract\"" << endl;
+
+	return true;
+}
+
+bool CSVExporter::exportResult(const string &engineName, const DocumentInfo &docInfo)
+{
+	string title(FilterUtils::stripMarkup(docInfo.getTitle()));
+	string extract(FilterUtils::stripMarkup(docInfo.getExtract()));
+
+	if (m_outputFile.good() == false)
+	{
+		return false;
+	}
+
+	// Double double-quotes
+	m_outputFile << "\"" << StringManip::replaceSubString(m_queryName, "\"", "\"\"")
+		<< "\";\"" << StringManip::replaceSubString(engineName, "\"", "\"\"")
+		<< "\";\"" << StringManip::replaceSubString(title, "\"", "\"\"")
+		<< "\";\"" << StringManip::replaceSubString(docInfo.getLocation(), "\"", "\"\"")
+		<< "\";\"" << StringManip::replaceSubString(docInfo.getType(), "\"", "\"\"")
+		<< "\";\"" << StringManip::replaceSubString(docInfo.getLanguage(), "\"", "\"\"")
+		<< "\";\"" << StringManip::replaceSubString(docInfo.getTimestamp(), "\"", "\"\"")
+		<< "\";\"" << docInfo.getSize()
+		<< "\";\"" << StringManip::replaceSubString(extract, "\"", "\"\"")
+		<< "\"" << endl;
+
+	return true;
+}
+
+void CSVExporter::exportEnd(void)
+{
+	m_outputFile.close();
+}
+
+OpenSearchExporter::OpenSearchExporter(const string &fileName,
+	const QueryProperties &queryProps) :
+	ResultsExporter(fileName, queryProps),
+	m_pDoc(NULL),
+	m_pChannelElem(NULL)
+{
+}
+
+OpenSearchExporter::~OpenSearchExporter()
+{
+}
+
+bool OpenSearchExporter::exportResults(const string &engineName, unsigned int maxResultsCount,
+	const vector<DocumentInfo> &resultsList)
+{
+	if ((resultsList.empty() == true) ||
+		(exportStart(engineName, maxResultsCount) == false))
+	{
+		return false;
+	}
+
+	for (vector<DocumentInfo>::const_iterator iter = resultsList.begin();
+		iter != resultsList.end(); ++iter)
+	{
+		exportResult(engineName, *iter);
+	}
+	exportEnd();
+
+	return true;
+}
+
+bool OpenSearchExporter::exportStart(const string &engineName, unsigned int maxResultsCount)
+{
+	if (m_fileName.empty() == true)
+	{
+		return false;
+	}
+
+	if (m_pDoc != NULL)
+	{
+		delete m_pDoc;
+		m_pDoc = NULL;
+		m_pChannelElem = NULL;
+	}
+
+	Element *pRootElem = NULL;
+	string description("Search");
+	char numStr[64];
+
+	m_pDoc = new xmlpp::Document("1.0");
+
+	// Create a new node
+	pRootElem = m_pDoc->create_root_node("rss");
+	if (pRootElem == NULL)
+	{
+		return false;
+	}
+	pRootElem->set_attribute("version", "2.0");
+	pRootElem->set_attribute("xmlns:opensearch", "http://a9.com/-/spec/opensearch/1.1/");
+	pRootElem->set_attribute("xmlns:atom", "http://www.w3.org/2005/Atom");
+
+	// User interface position and size
+	m_pChannelElem = pRootElem->add_child("channel");
+	if (m_pChannelElem == NULL)
+	{
+		return false;
+	}
+	if (m_queryName.empty() == false)
+	{
+		addChildElement(m_pChannelElem, "title", m_queryName);
+	}
+	if (m_queryName.empty() == false)
+	{
+		description += " for \"";
+		description += m_queryName;
+		description += "\"";
+	}
+	if (engineName.empty() == false)
+	{
+		description += " on ";
+		description += engineName;
+	}
+	addChildElement(m_pChannelElem, "description", description);
+	sprintf(numStr, "%d", maxResultsCount);
+	addChildElement(m_pChannelElem, "opensearch:totalResults", numStr);
+	addChildElement(m_pChannelElem, "opensearch:itemsPerPage", numStr);
+	if (m_queryDetails.empty() == false)
+	{
+		Element *pQueryElem = addChildElement(m_pChannelElem, "opensearch:Query", "");
+		if (pQueryElem != NULL)
+		{
+			pQueryElem->set_attribute("role", "request");
+			pQueryElem->set_attribute("searchTerms", m_queryDetails);
+			pQueryElem->set_attribute("startPage", "1");
+		}
+	}
+
+	return true;
+}
+
+bool OpenSearchExporter::exportResult(const string &engineName, const DocumentInfo &docInfo)
+{
+	if (m_pChannelElem == NULL)
+	{
+		return false;
+	}
+
+	Element *pElem = m_pChannelElem->add_child("item");
+	addChildElement(pElem, "title", docInfo.getTitle());
+	addChildElement(pElem, "link", docInfo.getLocation());
+	addChildElement(pElem, "description", FilterUtils::stripMarkup(docInfo.getExtract()));
+
+	return true;
+}
+
+void OpenSearchExporter::exportEnd(void)
+{
+	if (m_pDoc == NULL)
+	{
+		return;
+	}
+
+	// Save to file
+	m_pDoc->write_to_file_formatted(m_fileName);
+
+	m_pChannelElem = NULL;
+	delete m_pDoc;
+	m_pDoc = NULL;
+}
+

Added: trunk/Search/ResultsExporter.h
===================================================================
--- trunk/Search/ResultsExporter.h	2007-04-16 13:28:52 UTC (rev 806)
+++ trunk/Search/ResultsExporter.h	2007-04-24 14:30:38 UTC (rev 807)
@@ -0,0 +1,133 @@
+/*
+ *  Copyright 2007 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU Library General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _RESULTS_EXPORTER_H
+#define _RESULTS_EXPORTER_H
+
+#include <string>
+#include <vector>
+#include <fstream>
+#include <libxml++/document.h>
+#include <libxml++/nodes/element.h>
+
+#include "DocumentInfo.h"
+#include "QueryProperties.h"
+
+/// Exports results to a given format.
+class ResultsExporter
+{
+	public:
+		ResultsExporter(const std::string &fileName,
+			const QueryProperties &queryProps);
+		virtual ~ResultsExporter();
+
+		/// Exports a list of results.
+		virtual bool exportResults(const std::string &engineName,
+			unsigned int maxResultsCount,
+			const std::vector<DocumentInfo> &resultsList) = 0;
+
+		/// Starts export.
+		virtual bool exportStart(const std::string &engineName,
+			unsigned int maxResultsCount) = 0;
+
+		/// Exports the given result.
+		virtual bool exportResult(const std::string &engineName,
+			const DocumentInfo &docInfo) = 0;
+
+		/// Ends export.
+		virtual void exportEnd(void) = 0;
+
+	protected:
+		std::string m_fileName;
+		std::string m_queryName;
+		std::string m_queryDetails;
+
+	private:
+		ResultsExporter(const ResultsExporter &other);
+		ResultsExporter& operator=(const ResultsExporter& other);
+
+};
+
+/// Exports results to CSV.
+class CSVExporter : public ResultsExporter
+{
+	public:
+		CSVExporter(const std::string &fileName,
+			const QueryProperties &queryProps);
+		virtual ~CSVExporter();
+
+		/// Exports the results; false if an error occured.
+		virtual bool exportResults(const std::string &engineName,
+			unsigned int maxResultsCount,
+			const std::vector<DocumentInfo> &resultsList);
+
+		/// Starts export.
+		virtual bool exportStart(const std::string &engineName,
+			unsigned int maxResultsCount);
+
+		/// Exports the given result.
+		virtual bool exportResult(const std::string &engineName,
+			const DocumentInfo &docInfo);
+
+		/// Ends export.
+		virtual void exportEnd(void);
+
+	protected:
+		std::ofstream m_outputFile;
+
+	private:
+		CSVExporter(const CSVExporter &other);
+		CSVExporter& operator=(const CSVExporter& other);
+
+};
+
+/// Exports results to OpenSearch response. 
+class OpenSearchExporter : public ResultsExporter
+{
+	public:
+		OpenSearchExporter(const std::string &fileName,
+			const QueryProperties &queryProps);
+		virtual ~OpenSearchExporter();
+
+		/// Exports the results; false if an error occured.
+		virtual bool exportResults(const std::string &engineName,
+			unsigned int maxResultsCount,
+			const std::vector<DocumentInfo> &resultsList);
+
+		/// Starts export.
+		virtual bool exportStart(const std::string &engineName,
+			unsigned int maxResultsCount);
+
+		/// Exports the given result.
+		virtual bool exportResult(const std::string &engineName,
+			const DocumentInfo &docInfo);
+
+		/// Ends export.
+		virtual void exportEnd(void);
+
+	protected:
+		xmlpp::Document *m_pDoc;
+		xmlpp::Element *m_pChannelElem;
+
+	private:
+		OpenSearchExporter(const OpenSearchExporter &other);
+		OpenSearchExporter& operator=(const OpenSearchExporter& other);
+
+};
+
+#endif // _RESULTS_EXPORTER_H

Modified: trunk/Search/SearchEngineFactory.cpp
===================================================================
--- trunk/Search/SearchEngineFactory.cpp	2007-04-16 13:28:52 UTC (rev 806)
+++ trunk/Search/SearchEngineFactory.cpp	2007-04-24 14:30:38 UTC (rev 807)
@@ -31,7 +31,6 @@
 {
 }
 
-/// Returns a SearchEngine of the specified type; NULL if unavailable.
 SearchEngineInterface *SearchEngineFactory::getSearchEngine(const string &type, const string &option)
 {
 	SearchEngineInterface *myEngine = NULL;
@@ -57,6 +56,28 @@
 	return myEngine;
 }
 
+string SearchEngineFactory::getSearchEngineName(const string &type, const string &option)
+{
+	if ((type == "sherlock") ||
+		(type == "opensearch"))
+	{
+		string name, channel;
+
+		if (PluginWebEngine::getDetails(option, name, channel) == true)
+		{
+			return name;
+		}
+
+		return "";
+	}
+	else if (type == "xapian")
+	{
+		return option;
+	}
+
+	return type;
+}
+
 void SearchEngineFactory::getSupportedEngines(set<string> &engines)
 {
 	engines.clear();
@@ -70,7 +91,6 @@
 #endif
 }
 
-/// Indicates whether a search engine is supported or not.
 bool SearchEngineFactory::isSupported(const string &type)
 {
 	if (

Modified: trunk/Search/SearchEngineFactory.h
===================================================================
--- trunk/Search/SearchEngineFactory.h	2007-04-16 13:28:52 UTC (rev 806)
+++ trunk/Search/SearchEngineFactory.h	2007-04-24 14:30:38 UTC (rev 807)
@@ -38,6 +38,9 @@
 		/// Returns a SearchEngine of the specified type; NULL if unavailable.
 		static SearchEngineInterface *getSearchEngine(const string &type, const string &option);
 
+		/// Returns the name of the given engine.
+		static string getSearchEngineName(const string &type, const string &option);
+
 		/// Returns all supported engines.
 		static void getSupportedEngines(set<string> &engines);
 

Modified: trunk/Search/pinot-search.cpp
===================================================================
--- trunk/Search/pinot-search.cpp	2007-04-16 13:28:52 UTC (rev 806)
+++ trunk/Search/pinot-search.cpp	2007-04-24 14:30:38 UTC (rev 807)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005,2006,2007 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -28,6 +28,7 @@
 #include "XapianDatabaseFactory.h"
 #include "FilterUtils.h"
 #include "SearchEngineFactory.h"
+#include "ResultsExporter.h"
 #include "DownloaderFactory.h"
 #include "config.h"
 
@@ -39,6 +40,8 @@
 	{"proxyaddress", 1, 0, 'a'},
 	{"proxyport", 1, 0, 'p'},
 	{"proxytype", 1, 0, 't'},
+	{"tocsv", 1, 0, 'c'},
+	{"toxml", 1, 0, 'x'},
 	{"version", 0, 0, 'v'},
 	{0, 0, 0, 0}
 };
@@ -57,6 +60,8 @@
 		<< "  -a, --proxyaddress        proxy address\n"
 		<< "  -p, --proxyport           proxy port\n"
 		<< "  -t, --proxytype           proxy type (default HTTP, SOCKS4, SOCKS5)\n"
+		<< "  -c, --tocsv               file to export results in CSV format to\n"
+		<< "  -x, --toxml               file to export results in XML format to\n"
 		<< "  -v, --version             output version information and exit\n\n"
 		<< "Supported search engine types are";
 	for (set<string>::iterator engineIter = engines.begin(); engineIter != engines.end(); ++engineIter)
@@ -76,12 +81,13 @@
 
 int main(int argc, char **argv)
 {
-	string type, option, proxyAddress, proxyPort, proxyType;
-	unsigned int count = 10; 
+	string type, option, csvExport, xmlExport, proxyAddress, proxyPort, proxyType;
+	unsigned int maxResultsCount = 10; 
 	int longOptionIndex = 0;
+	bool printResults = true;
 
 	// Look at the options
-	int optionChar = getopt_long(argc, argv, "hm:a:p:t:v", g_longOptions, &longOptionIndex);
+	int optionChar = getopt_long(argc, argv, "c:hm:a:p:t:vx:", g_longOptions, &longOptionIndex);
 	while (optionChar != -1)
 	{
 		switch (optionChar)
@@ -92,13 +98,20 @@
 					proxyAddress = optarg;
 				}
 				break;
+			case 'c':
+				if (optarg != NULL)
+				{
+					csvExport = optarg;
+					printResults = false;
+				}
+				break;
 			case 'h':
 				printHelp();
 				return EXIT_SUCCESS;
 			case 'm':
 				if (optarg != NULL)
 				{
-					count = (unsigned int )atoi(optarg);
+					maxResultsCount = (unsigned int )atoi(optarg);
 				}
 				break;
 			case 'p':
@@ -119,12 +132,19 @@
 					<< "the GNU General Public License <http://www.gnu.org/licenses/gpl.html>.\n"
 					<< "There is NO WARRANTY, to the extent permitted by law." << endl;
 				return EXIT_SUCCESS;
+			case 'x':
+				if (optarg != NULL)
+				{
+					xmlExport = optarg;
+					printResults = false;
+				}
+				break;
 			default:
 				return EXIT_FAILURE;
 		}
 
 		// Next option
-		optionChar = getopt_long(argc, argv, "hm:a:p:t:v", g_longOptions, &longOptionIndex);
+		optionChar = getopt_long(argc, argv, "c:hm:a:p:t:vx:", g_longOptions, &longOptionIndex);
 	}
 
 	if (argc == 1)
@@ -143,9 +163,11 @@
 	MIMEScanner::initialize();
 	DownloaderInterface::initialize();
 
-	// Which SearchEngine ?
 	type = argv[optind];
 	option = argv[optind + 1];
+	char *pQuery = argv[optind + 2];
+
+	// Which SearchEngine ?
 	SearchEngineInterface *pEngine = SearchEngineFactory::getSearchEngine(type, option);
 	if (pEngine == NULL)
 	{
@@ -158,7 +180,7 @@
 	}
 
 	// How many results ?
-	pEngine->setMaxResultsCount(count);
+	pEngine->setMaxResultsCount(maxResultsCount);
 
 	// Set up the proxy
 	DownloaderInterface *pDownloader = pEngine->getDownloader();
@@ -171,7 +193,7 @@
 		pDownloader->setSetting("proxytype", proxyType);
 	}
 
-	QueryProperties queryProps("senginetest", argv[optind + 2]);
+	QueryProperties queryProps("senginetest", pQuery);
 	if (pEngine->runQuery(queryProps) == true)
 	{
 		string resultsPage;
@@ -180,27 +202,48 @@
 		const vector<DocumentInfo> resultsList = pEngine->getResults();
 		if (resultsList.empty() == false)
 		{
-			unsigned int count = 0;
+			if (printResults == true)
+			{
+				unsigned int count = 0;
 
-			cout << "Matching documents are :" << endl;
+				cout << "Matching documents are :" << endl;
 
-			vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
-			while (resultIter != resultsList.end())
+				vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
+				while (resultIter != resultsList.end())
+				{
+					string rawUrl(resultIter->getLocation());
+					Url thisUrl(rawUrl);
+
+					cout << count << " Raw URL  : '" << rawUrl << "'"<< endl;
+					cout << count << " Protocol : " << thisUrl.getProtocol() << endl;
+					cout << count << " Host     : " << thisUrl.getHost() << endl;
+					cout << count << " Location : " << thisUrl.getLocation() << "/" << thisUrl.getFile() << endl;
+					cout << count << " Title    : " << resultIter->getTitle() << endl;
+					cout << count << " Extract  : " << FilterUtils::stripMarkup(resultIter->getExtract()) << endl;
+					cout << count << " Score    : " << resultIter->getScore() << endl;
+					count++;
+
+					// Next
+					resultIter++;
+				}
+			}
+			else
 			{
-				string rawUrl(resultIter->getLocation());
-				Url thisUrl(rawUrl);
+				string engineName(SearchEngineFactory::getSearchEngineName(type, option));
 
-				cout << count << " Raw URL  : '" << rawUrl << "'"<< endl;
-				cout << count << " Protocol : " << thisUrl.getProtocol() << endl;
-				cout << count << " Host     : " << thisUrl.getHost() << endl;
-				cout << count << " Location : " << thisUrl.getLocation() << "/" << thisUrl.getFile() << endl;
-				cout << count << " Title    : " << resultIter->getTitle() << endl;
-				cout << count << " Extract  : " << FilterUtils::stripMarkup(resultIter->getExtract()) << endl;
-				cout << count << " Score    : " << resultIter->getScore() << endl;
-				count++;
+				if (csvExport.empty() == false)
+				{
+					CSVExporter exporter(csvExport, queryProps);
 
-				// Next
-				resultIter++;
+					exporter.exportResults(engineName, maxResultsCount, resultsList);
+				}
+
+				if (xmlExport.empty() == false)
+				{
+					OpenSearchExporter exporter(xmlExport, queryProps);
+
+					exporter.exportResults(engineName, maxResultsCount, resultsList);
+				}
 			}
 		}
 		else



From fabricecolin at mail.berlios.de  Thu Apr 26 13:09:33 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:09:33 +0200
Subject: [Pinot-svn] r808 - trunk/Utils
Message-ID: <200704261109.l3QB9XLZ030960@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:09:32 +0200 (Thu, 26 Apr 2007)
New Revision: 808

Modified:
   trunk/Utils/StringManip.cpp
Log:
Minor changes.


Modified: trunk/Utils/StringManip.cpp
===================================================================
--- trunk/Utils/StringManip.cpp	2007-04-24 14:30:38 UTC (rev 807)
+++ trunk/Utils/StringManip.cpp	2007-04-26 11:09:32 UTC (rev 808)
@@ -57,7 +57,7 @@
 /// Converts to lowercase.
 string StringManip::toLowerCase(const string &str)
 {
-	string tmp = str;
+	string tmp(str);
 
 	for_each(tmp.begin(), tmp.end(), ToLower());
 
@@ -135,7 +135,7 @@
 		if ((pos != string::npos) &&
 			(pos < startPos + 10))
 		{
-			string escapedChar = str.substr(startPos, pos - startPos);
+			string escapedChar(str.substr(startPos, pos - startPos));
 			bool replacedChar = false;
 
 			// See if we can replace this with an actual character
@@ -174,14 +174,19 @@
 /// Replaces a sub-string.
 string StringManip::replaceSubString(const string &str, const std::string &substr, const std::string &rep)
 {
-	string cleanStr = str;
+	if (str.empty() == true)
+	{
+		return "";
+	}
 
+	string cleanStr(str);
+
 	string::size_type startPos = cleanStr.find(substr);
 	while (startPos != string::npos)
 	{
 		string::size_type endPos = startPos + substr.length();
 
-		string tmp = cleanStr.substr(0, startPos);
+		string tmp(cleanStr.substr(0, startPos));
 		tmp += rep;
 		tmp += cleanStr.substr(endPos);
 		cleanStr = tmp;



From fabricecolin at mail.berlios.de  Thu Apr 26 13:13:16 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:13:16 +0200
Subject: [Pinot-svn] r809 - trunk/UI/GTK2/src
Message-ID: <200704261113.l3QBDGLh032548@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:13:15 +0200 (Thu, 26 Apr 2007)
New Revision: 809

Modified:
   trunk/UI/GTK2/src/EnginesTree.cpp
   trunk/UI/GTK2/src/EnginesTree.h
Log:
Renamed the signal getter method.


Modified: trunk/UI/GTK2/src/EnginesTree.cpp
===================================================================
--- trunk/UI/GTK2/src/EnginesTree.cpp	2007-04-26 11:09:32 UTC (rev 808)
+++ trunk/UI/GTK2/src/EnginesTree.cpp	2007-04-26 11:13:15 UTC (rev 809)
@@ -182,7 +182,7 @@
 			ustring name = engineRow[m_enginesColumns.m_name];
 			ustring location = engineRow[m_enginesColumns.m_option];
 
-			m_signalEdit(name, location);
+			m_signalDoubleClick(name, location);
 		}
 		else
 		{
@@ -383,9 +383,9 @@
 }
 
 //
-// Returns the edit index signal.
+// Returns the double-click signal.
 //
-Signal2<void, string, string>& EnginesTree::getEditIndexSignal(void)
+Signal2<void, string, string>& EnginesTree::getDoubleClickSignal(void)
 {
-	return m_signalEdit;
+	return m_signalDoubleClick;
 }

Modified: trunk/UI/GTK2/src/EnginesTree.h
===================================================================
--- trunk/UI/GTK2/src/EnginesTree.h	2007-04-26 11:09:32 UTC (rev 808)
+++ trunk/UI/GTK2/src/EnginesTree.h	2007-04-26 11:13:15 UTC (rev 809)
@@ -64,15 +64,15 @@
 		/// Save the tree's state.
 		void save(void);
 
-		/// Returns the index edit signal.
-		SigC::Signal2<void, std::string, std::string>& getEditIndexSignal(void);
+		/// Returns the double-click signal.
+		SigC::Signal2<void, std::string, std::string>& getDoubleClickSignal(void);
 
 	protected:
 		Glib::RefPtr<Gtk::TreeStore> m_refStore;
 		PinotSettings &m_settings;
 		Glib::RefPtr<Gdk::Pixbuf> m_engineFolderIconPixbuf;
 		EnginesModelColumns m_enginesColumns;
-		SigC::Signal2<void, std::string, std::string> m_signalEdit;
+		SigC::Signal2<void, std::string, std::string> m_signalDoubleClick;
 
 		void renderEngineIcon(Gtk::CellRenderer *renderer, const Gtk::TreeModel::iterator &iter);
 



From fabricecolin at mail.berlios.de  Thu Apr 26 13:16:34 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:16:34 +0200
Subject: [Pinot-svn] r810 - trunk/UI/GTK2/src
Message-ID: <200704261116.l3QBGYAm004966@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:16:33 +0200 (Thu, 26 Apr 2007)
New Revision: 810

Modified:
   trunk/UI/GTK2/src/PinotUtils.cpp
   trunk/UI/GTK2/src/PinotUtils.h
   trunk/UI/GTK2/src/indexDialog.cc
   trunk/UI/GTK2/src/prefsDialog.cc
Log:
Modified select_file_name() so that prepare_file_chooser() is more useful.


Modified: trunk/UI/GTK2/src/PinotUtils.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotUtils.cpp	2007-04-26 11:13:15 UTC (rev 809)
+++ trunk/UI/GTK2/src/PinotUtils.cpp	2007-04-26 11:16:33 UTC (rev 810)
@@ -20,7 +20,6 @@
 #include <pangomm/font.h>
 #include <gtkmm/rc.h>
 #include <gtkmm/stock.h>
-#include <gtkmm/filechooserdialog.h>
 
 #include "config.h"
 #include "NLS.h"
@@ -32,28 +31,17 @@
 using namespace Gtk;
 
 /// Open a FileChooserDialog.
-bool select_file_name(Window &parentWindow, const ustring &title,
-	ustring &location, bool openOrCreate, bool directoriesOnly)
+bool select_file_name(const ustring &title, ustring &location,
+	bool openOrCreate, bool directoriesOnly)
 {
 	FileChooserDialog fileChooser(title);
-	StockID okButtonStockId = Stock::OPEN;
 
 	if (title.empty() == true)
 	{
 		return false;
 	}
 
-	if (openOrCreate == false)
-	{
-		okButtonStockId = Stock::SAVE;
-	}
-
-	prepare_chooser(&fileChooser, location, openOrCreate, directoriesOnly);
-	fileChooser.add_button(Stock::CANCEL, RESPONSE_CANCEL);
-	fileChooser.add_button(okButtonStockId, RESPONSE_OK);
-	// FIXME: add FileFilter's
-	fileChooser.set_title(title);
-	fileChooser.set_show_hidden(true);
+	prepare_file_chooser(fileChooser, location, openOrCreate, directoriesOnly);
 	fileChooser.show();
 
 	int result = fileChooser.run();
@@ -75,12 +63,18 @@
 	return false;
 }
 
-/// Prepare a FileChooser.
-bool prepare_chooser(FileChooser *pChooser, ustring &location,
+bool prepare_file_chooser(FileChooserDialog &fileChooser, ustring &location,
 	bool openOrCreate, bool directoriesOnly)
 {
 	FileChooserAction chooserAction = FILE_CHOOSER_ACTION_OPEN;
+	StockID okButtonStockId = Stock::OPEN;
+	bool isDirectory = false;
 
+	if (openOrCreate == false)
+	{
+		okButtonStockId = Stock::SAVE;
+	}
+
 	// Have we been provided with an initial location ?
 	if (location.empty() == true)
 	{
@@ -90,6 +84,7 @@
 		{
 			location = homeDir;
 			location += "/";
+			isDirectory = true;
 		}
 	}
 
@@ -114,15 +109,25 @@
 		{
 			chooserAction = FILE_CHOOSER_ACTION_CREATE_FOLDER;
 		}
+		isDirectory = true;
 	}
 
-	pChooser->set_action(chooserAction);
-	pChooser->set_filename(filename_from_utf8(location));
-	pChooser->set_local_only();
-	pChooser->set_select_multiple(false);
-	// FIXME: add FileFilter's
+	fileChooser.set_action(chooserAction);
+	if (isDirectory == true)
+	{
+		fileChooser.set_current_folder(filename_from_utf8(location));
+	}
+	else
+	{
+		fileChooser.set_filename(filename_from_utf8(location));
+	}
+	fileChooser.set_local_only();
+	fileChooser.set_select_multiple(false);
+	fileChooser.add_button(Stock::CANCEL, RESPONSE_CANCEL);
+	fileChooser.add_button(okButtonStockId, RESPONSE_OK);
+	fileChooser.set_show_hidden(true);
 
-	return false;
+	return true;
 }
 
 /// Get a column height.

Modified: trunk/UI/GTK2/src/PinotUtils.h
===================================================================
--- trunk/UI/GTK2/src/PinotUtils.h	2007-04-26 11:13:15 UTC (rev 809)
+++ trunk/UI/GTK2/src/PinotUtils.h	2007-04-26 11:16:33 UTC (rev 810)
@@ -28,14 +28,15 @@
 #include <gtkmm/filechooserdialog.h>
 #include <gtkmm/treeview.h>
 #include <gtkmm/treemodel.h>
+#include <gtkmm/filechooserdialog.h>
 
 /// Open a FileChooserDialog.
-bool select_file_name(Gtk::Window &parentWindow, const Glib::ustring &title,
-	Glib::ustring &location, bool openOrCreate = true, bool directoriesOnly = false);
+bool select_file_name(const Glib::ustring &title, Glib::ustring &location,
+	bool openOrCreate, bool directoriesOnly = false);
 
-/// Prepare a FileChooser.
-bool prepare_chooser(Gtk::FileChooser *pChooser, Glib::ustring &location,
-	bool openOrCreate = true, bool directoriesOnly = false);
+/// Prepare a FileChooserDialog.
+bool prepare_file_chooser(Gtk::FileChooserDialog &fileChooser, Glib::ustring &location,
+	bool openOrCreate, bool directoriesOnly = false);
 
 /// Get a column height.
 int get_column_height(Gtk::TreeView *pTree);

Modified: trunk/UI/GTK2/src/indexDialog.cc
===================================================================
--- trunk/UI/GTK2/src/indexDialog.cc	2007-04-26 11:13:15 UTC (rev 809)
+++ trunk/UI/GTK2/src/indexDialog.cc	2007-04-26 11:16:33 UTC (rev 810)
@@ -283,7 +283,7 @@
 void indexDialog::on_locationButton_clicked()
 {
 	ustring dirName = locationEntry->get_text();
-	if (select_file_name(*this, _("Index location"), dirName, true, true) == true)
+	if (select_file_name(_("Index location"), dirName, true, true) == true)
 	{
 		locationEntry->set_text(dirName);
 	}

Modified: trunk/UI/GTK2/src/prefsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.cc	2007-04-26 11:13:15 UTC (rev 809)
+++ trunk/UI/GTK2/src/prefsDialog.cc	2007-04-26 11:16:33 UTC (rev 810)
@@ -509,7 +509,7 @@
 	TreeModel::Children children = m_refDirectoriesTree->children();
 	bool wasEmpty = children.empty();
 
-	if (select_file_name(*this, _("Directory to index"), dirName, true, true) == true)
+	if (select_file_name(_("Directory to index"), dirName, true, true) == true)
 	{
 #ifdef DEBUG
 		cout << "prefsDialog::on_addDirectoryButton_clicked: "
@@ -567,7 +567,7 @@
 	TreeModel::Children children = m_refMailTree->children();
 	bool wasEmpty = children.empty();
 
-	if (select_file_name(*this, _("Mbox File Location"), fileName, true) == true)
+	if (select_file_name(_("Mbox File Location"), fileName, true) == true)
 	{
 #ifdef DEBUG
 		cout << "prefsDialog::on_addAccountButton_clicked: " << fileName << endl;



From fabricecolin at mail.berlios.de  Thu Apr 26 13:20:10 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:20:10 +0200
Subject: [Pinot-svn] r811 - trunk/UI/GTK2/src
Message-ID: <200704261120.l3QBKATu018475@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:20:09 +0200 (Thu, 26 Apr 2007)
New Revision: 811

Modified:
   trunk/UI/GTK2/src/ResultsTree.cpp
   trunk/UI/GTK2/src/ResultsTree.h
Log:
Several small changes to allow using this class as a replacement for IndexTree.


Modified: trunk/UI/GTK2/src/ResultsTree.cpp
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.cpp	2007-04-26 11:16:33 UTC (rev 810)
+++ trunk/UI/GTK2/src/ResultsTree.cpp	2007-04-26 11:20:09 UTC (rev 811)
@@ -31,6 +31,7 @@
 #include "TimeConverter.h"
 #include "Url.h"
 #include "QueryHistory.h"
+#include "ResultsExporter.h"
 #include "ViewHistory.h"
 #include "config.h"
 #include "NLS.h"
@@ -47,7 +48,7 @@
 ResultsTree::ResultsTree(const ustring &queryName, Menu *pPopupMenu,
 	GroupByMode groupMode, PinotSettings &settings) :
 	TreeView(),
-	m_queryName(queryName),
+	m_treeName(queryName),
 	m_pPopupMenu(pPopupMenu),
 	m_pResultsScrolledwindow(NULL),
 	m_settings(settings),
@@ -56,6 +57,8 @@
 	m_showExtract(true),
 	m_groupMode(groupMode)
 {
+	TreeViewColumn *pColumn = NULL;
+
 	m_pResultsScrolledwindow = manage(new ScrolledWindow());
 	m_pExtractScrolledwindow = manage(new ScrolledWindow());
 	m_extractTreeView = manage(new TreeView());
@@ -96,32 +99,35 @@
 	m_refStore = TreeStore::create(m_resultsColumns);
 	set_model(m_refStore);
 
-	// The first column is for the status icons
-	TreeViewColumn *pColumn = new TreeViewColumn("");
-	// Pack an icon renderer for the viewed status
-	CellRendererPixbuf *pIconRenderer = new CellRendererPixbuf();
-	pColumn->pack_start(*manage(pIconRenderer), false);
-	pColumn->set_cell_data_func(*pIconRenderer, SigC::slot(*this, &ResultsTree::renderViewStatus));
-	// Pack a second icon renderer for the indexed status
-	pIconRenderer = new CellRendererPixbuf();
-	pColumn->pack_start(*manage(pIconRenderer), false);
-	pColumn->set_cell_data_func(*pIconRenderer, SigC::slot(*this, &ResultsTree::renderIndexStatus));
-	// And a third one for the ranking
-	pIconRenderer = new CellRendererPixbuf();
-	pColumn->pack_start(*manage(pIconRenderer), false);
-	pColumn->set_cell_data_func(*pIconRenderer, SigC::slot(*this, &ResultsTree::renderRanking));
-	pColumn->set_sizing(TREE_VIEW_COLUMN_AUTOSIZE);
-	append_column(*manage(pColumn));
+	if (m_groupMode != FLAT)
+	{
+		// The first column is for the status icons
+		pColumn = new TreeViewColumn("");
+		// Pack an icon renderer for the viewed status
+		CellRendererPixbuf *pIconRenderer = new CellRendererPixbuf();
+		pColumn->pack_start(*manage(pIconRenderer), false);
+		pColumn->set_cell_data_func(*pIconRenderer, SigC::slot(*this, &ResultsTree::renderViewStatus));
+		// Pack a second icon renderer for the indexed status
+		pIconRenderer = new CellRendererPixbuf();
+		pColumn->pack_start(*manage(pIconRenderer), false);
+		pColumn->set_cell_data_func(*pIconRenderer, SigC::slot(*this, &ResultsTree::renderIndexStatus));
+		// And a third one for the ranking
+		pIconRenderer = new CellRendererPixbuf();
+		pColumn->pack_start(*manage(pIconRenderer), false);
+		pColumn->set_cell_data_func(*pIconRenderer, SigC::slot(*this, &ResultsTree::renderRanking));
+		pColumn->set_sizing(TREE_VIEW_COLUMN_AUTOSIZE);
+		append_column(*manage(pColumn));
 
-	// This is the score column
-	pColumn = new TreeViewColumn(_("Score"));
-	CellRendererProgress *pProgressRenderer = new CellRendererProgress();
-	pColumn->pack_start(*manage(pProgressRenderer));
-	pColumn->add_attribute(pProgressRenderer->property_text(), m_resultsColumns.m_scoreText);
-	pColumn->add_attribute(pProgressRenderer->property_value(), m_resultsColumns.m_score);
-	pColumn->set_sizing(TREE_VIEW_COLUMN_AUTOSIZE);
-	pColumn->set_sort_column(m_resultsColumns.m_score);
-	append_column(*manage(pColumn));
+		// This is the score column
+		pColumn = new TreeViewColumn(_("Score"));
+		CellRendererProgress *pProgressRenderer = new CellRendererProgress();
+		pColumn->pack_start(*manage(pProgressRenderer));
+		pColumn->add_attribute(pProgressRenderer->property_text(), m_resultsColumns.m_scoreText);
+		pColumn->add_attribute(pProgressRenderer->property_value(), m_resultsColumns.m_score);
+		pColumn->set_sizing(TREE_VIEW_COLUMN_AUTOSIZE);
+		pColumn->set_sort_column(m_resultsColumns.m_score);
+		append_column(*manage(pColumn));
+	}
 
 	// This is the title column
 	pColumn = new TreeViewColumn(_("Title"));
@@ -352,13 +358,13 @@
 #ifdef DEBUG
 		cout << "ResultsTree::onButtonPressEvent: double click on button " << ev->button << endl;
 #endif
-		m_signalViewResults();
+		m_signalDoubleClick();
 	}
 }
 
 void ResultsTree::onSelectionChanged(void)
 {
-	m_signalSelectionChanged(m_queryName);
+	m_signalSelectionChanged(m_treeName);
 }
 
 bool ResultsTree::onSelectionSelect(const RefPtr<TreeModel>& model,
@@ -496,7 +502,7 @@
 
 	QueryHistory history(m_settings.m_historyDatabase);
 	bool isNewQuery = false;
-	if (history.getLastRun(m_queryName, engineName).empty() == true)
+	if (history.getLastRun(m_treeName, engineName).empty() == true)
 	{
 		isNewQuery = true;
 	}
@@ -516,9 +522,9 @@
 		float currentScore = resultIter->getScore();
 		int rankDiff = 0;
 
-		// What group should the result go to ?
 		if (m_groupMode != FLAT)
 		{
+			// What group should the result go to ?
 			if (rootType == ResultsModelColumns::ROW_HOST)
 			{
 				Url urlObj(location);
@@ -528,36 +534,32 @@
 			{
 				groupName = engineName;
 			}
-
 			// Add the group or get its position if it's already in
 			appendGroup(groupName, rootType, groupIter);
-		}
 
-		// OK, add a row for this result within the group
-		TreeModel::iterator titleIter;
-
-		// Has the result's ranking changed ?
-		float oldestScore = 0;
-		float previousScore = history.hasItem(m_queryName, engineName,
-			location, oldestScore);
-		if (previousScore > 0)
-		{
-			// Update this result whatever the current and previous rankings were
-			history.updateItem(m_queryName, engineName, location,
-				title, extract, charset, currentScore);
-			rankDiff = (int)(currentScore - previousScore);
-		}
-		else
-		{
-			// No, this is a new result
-			history.insertItem(m_queryName, engineName, location,
-				resultIter->getTitle(), extract, charset, currentScore);
-			// New results are displayed as such only if the query has already been run on the engine
-			if (isNewQuery == false)
+			// Has the result's ranking changed ?
+			float oldestScore = 0;
+			float previousScore = history.hasItem(m_treeName, engineName,
+				location, oldestScore);
+			if (previousScore > 0)
 			{
-				// This is a magic value :-)
-				rankDiff = 666;
+				// Update this result whatever the current and previous rankings were
+				history.updateItem(m_treeName, engineName, location,
+					title, extract, charset, currentScore);
+				rankDiff = (int)(currentScore - previousScore);
 			}
+			else
+			{
+				// No, this is a new result
+				history.insertItem(m_treeName, engineName, location,
+					resultIter->getTitle(), extract, charset, currentScore);
+				// New results are displayed as such only if the query has already been run on the engine
+				if (isNewQuery == false)
+				{
+					// This is a magic value :-)
+					rankDiff = 666;
+				}
+			}
 		}
 
 		++count;
@@ -570,6 +572,8 @@
 			isIndexed = true;
 		}
 
+		// OK, add a row for this result within the group
+		TreeModel::iterator titleIter;
 		if (appendResult(title, location, resultIter->getType(), (int)currentScore, rankDiff, isIndexed,
 			docId, resultIter->getTimestamp(), engineId, indexId, titleIter, groupIter, true) == true)
 		{
@@ -622,6 +626,12 @@
 {
 	ResultsModelColumns::RowType currentType, newType;
 
+	if (m_groupMode == FLAT)
+	{
+		// No change possible
+		return;
+	}
+
 	if (m_groupMode == groupMode)
 	{
 		// No change
@@ -825,6 +835,23 @@
 }
 
 //
+// Gets the first selected item's URL.
+//
+ustring ResultsTree::getFirstSelectionURL(void)
+{
+	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
+	if (selectedItems.empty() == true)
+	{
+		return "";
+	}
+
+	list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
+	TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
+	TreeModel::Row row = *iter;
+	return row[m_resultsColumns.m_url];
+}
+
+//
 // Gets a list of selected items.
 //
 bool ResultsTree::getSelection(vector<DocumentInfo> &resultsList, bool skipIndexed)
@@ -847,13 +874,13 @@
 			continue;
 		}
 
+		bool isIndexed = row[m_resultsColumns.m_indexed];
 		if ((skipIndexed == false) ||
-			(row[m_resultsColumns.m_indexed] == false))
+			(isIndexed == false))
 		{
-			bool isIndexed = row[m_resultsColumns.m_indexed];
-
 			DocumentInfo current(from_utf8(row[m_resultsColumns.m_text]),
-				from_utf8(row[m_resultsColumns.m_url]), "", "");
+				from_utf8(row[m_resultsColumns.m_url]),
+				from_utf8(row[m_resultsColumns.m_type]), "");
 
 			if (isIndexed == true)
 			{
@@ -874,7 +901,6 @@
 					}
 				}
 			}
-			current.setType(from_utf8(row[m_resultsColumns.m_type]));
 
 			resultsList.push_back(current);
 		}
@@ -1079,6 +1105,14 @@
 }
 
 //
+// Returns the number of rows.
+//
+unsigned int ResultsTree::getRowsCount(void)
+{
+	return m_refStore->children().size();
+}
+
+//
 // Refreshes the tree.
 //
 void ResultsTree::refresh(void)
@@ -1141,6 +1175,113 @@
 }
 
 //
+// Exports results to a file.
+//
+void ResultsTree::exportResults(const string &fileName, bool csvFormat)
+{
+	QueryHistory history(m_settings.m_historyDatabase);
+	QueryProperties queryProps(m_treeName, "");
+	ResultsExporter *pExporter = NULL;
+	unsigned int maxResultsCount = 0;
+
+	if (fileName.empty() == true)
+	{
+		return;
+	}
+
+	if (csvFormat == true)
+	{
+		pExporter = new CSVExporter(fileName,
+			queryProps);
+	}
+	else
+	{
+		pExporter = new OpenSearchExporter(fileName,
+			queryProps);
+	}
+
+	// How many results are there altogether ?
+	TreeModel::Children children = m_refStore->children();
+	for (TreeModel::Children::iterator iter = children.begin();
+		iter != children.end(); ++iter)
+	{
+		TreeModel::Row row = *iter;
+		ResultsModelColumns::RowType type = row[m_resultsColumns.m_resultType];
+
+		if ((type != ResultsModelColumns::ROW_ENGINE) &&
+			(type != ResultsModelColumns::ROW_HOST))
+		{
+			continue;
+		}
+
+		TreeModel::Children groupChildren = iter->children();
+		maxResultsCount += groupChildren.size();
+	}
+
+	// Start
+	pExporter->exportStart("", maxResultsCount);
+
+	for (TreeModel::Children::iterator iter = children.begin();
+		iter != children.end(); ++iter)
+	{
+		TreeModel::Row row = *iter;
+		ResultsModelColumns::RowType type = row[m_resultsColumns.m_resultType];
+
+		if ((type != ResultsModelColumns::ROW_ENGINE) &&
+			(type != ResultsModelColumns::ROW_HOST))
+		{
+			continue;
+		}
+
+		TreeModel::Children groupChildren = iter->children();
+		for (TreeModel::Children::iterator childIter = groupChildren.begin();
+			childIter != groupChildren.end(); ++childIter)
+		{
+			set<string> engineNames, indexNames;
+			TreeModel::Row row = *childIter;
+			DocumentInfo result(from_utf8(row[m_resultsColumns.m_text]),
+				from_utf8(row[m_resultsColumns.m_url]),
+				from_utf8(row[m_resultsColumns.m_type]), "");
+			string engineName, charset;
+			unsigned int engineIds = row[m_resultsColumns.m_engines];
+			unsigned int indexIds = row[m_resultsColumns.m_indexes];
+
+#ifdef DEBUG
+			cout << "ResultsTree::exportResults: engines " << engineIds << ", indexes " << indexIds << endl;
+#endif
+			m_settings.getEngineNames(engineIds, engineNames);
+			if (engineNames.empty() == false)
+			{
+				// Get the first engine this result was obtained from
+				engineName = *engineNames.begin();
+				if (engineName == "Xapian")
+				{
+					m_settings.getIndexNames(indexIds, indexNames);
+					if (indexNames.empty() == false)
+					{
+						// Use the name of the first index as engine name
+						engineName = (*indexNames.begin());
+					}
+				}
+			}
+			if (m_groupMode != FLAT)
+			{
+				result.setExtract(history.getItemExtract(from_utf8(m_treeName),
+					engineName, result.getLocation(), charset));
+			}
+
+			// Export this
+			pExporter->exportResult(engineName, result);
+		}
+	}
+
+	// End
+	pExporter->exportEnd();
+
+	delete pExporter;
+}
+
+//
 // Returns the changed selection signal.
 //
 Signal1<void, ustring>& ResultsTree::getSelectionChangedSignal(void)
@@ -1149,11 +1290,11 @@
 }
 
 //
-// Returns the view results signal.
+// Returns the double-click signal.
 //
-Signal0<void>& ResultsTree::getViewResultsSignal(void)
+Signal0<void>& ResultsTree::getDoubleClickSignal(void)
 {
-	return m_signalViewResults;
+	return m_signalDoubleClick;
 }
 
 //
@@ -1376,7 +1517,7 @@
 #ifdef DEBUG
 		cout << "ResultsTree::findResultsExtract: first engine for " << url << " was " << engineName << endl;
 #endif
-		extract = history.getItemExtract(from_utf8(m_queryName), engineName, url, charset);
+		extract = history.getItemExtract(from_utf8(m_treeName), engineName, url, charset);
 	}
 
 	return to_utf8(extract, charset);

Modified: trunk/UI/GTK2/src/ResultsTree.h
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.h	2007-04-26 11:16:33 UTC (rev 810)
+++ trunk/UI/GTK2/src/ResultsTree.h	2007-04-26 11:20:09 UTC (rev 811)
@@ -43,7 +43,7 @@
 	public:
 		typedef enum { BY_ENGINE = 0, BY_HOST, FLAT } GroupByMode;
 
-		ResultsTree(const Glib::ustring &queryName, Gtk::Menu *pPopupMenu,
+		ResultsTree(const Glib::ustring &name, Gtk::Menu *pPopupMenu,
 			GroupByMode groupMode, PinotSettings &settings);
 		virtual ~ResultsTree();
 
@@ -69,6 +69,9 @@
 		/// Sets how results are grouped.
 		void setGroupMode(GroupByMode groupMode);
 
+		/// Gets the first selected item's URL.
+		Glib::ustring getFirstSelectionURL(void);
+
 		/// Gets a list of selected items.
 		bool getSelection(std::vector<DocumentInfo> &resultsList, bool skipIndexed = false);
 
@@ -87,6 +90,9 @@
 		/// Deletes results.
 		bool deleteResults(const std::string &engineName);
 
+		/// Returns the number of rows.
+		unsigned int getRowsCount(void);
+
 		/// Refreshes the tree.
 		void refresh(void);
 
@@ -96,19 +102,22 @@
 		/// Shows or hides the extract field.
 		void showExtract(bool show = true);
 
+		/// Exports results to a file.
+		void exportResults(const std::string &fileName, bool csvFormat);
+
 		/// Returns the changed selection signal.
 		SigC::Signal1<void, Glib::ustring>& getSelectionChangedSignal(void);
 
-		/// Returns the view results signal.
-		SigC::Signal0<void>& getViewResultsSignal(void);
+		/// Returns the double-click signal.
+		SigC::Signal0<void>& getDoubleClickSignal(void);
 
 	protected:
-		Glib::ustring m_queryName;
+		Glib::ustring m_treeName;
 		Gtk::Menu *m_pPopupMenu;
 		Gtk::ScrolledWindow *m_pResultsScrolledwindow;
 		Glib::RefPtr<Gtk::TreeStore> m_refStore;
 		SigC::Signal1<void, Glib::ustring> m_signalSelectionChanged;
-		SigC::Signal0<void> m_signalViewResults;
+		SigC::Signal0<void> m_signalDoubleClick;
 		PinotSettings &m_settings;
 		Glib::RefPtr<Gdk::Pixbuf> m_indexedIconPixbuf;
 		Glib::RefPtr<Gdk::Pixbuf> m_viewededIconPixbuf;



From fabricecolin at mail.berlios.de  Thu Apr 26 13:22:13 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:22:13 +0200
Subject: [Pinot-svn] r812 - trunk/UI/GTK2/src
Message-ID: <200704261122.l3QBMD9N020942@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:22:13 +0200 (Thu, 26 Apr 2007)
New Revision: 812

Modified:
   trunk/UI/GTK2/src/IndexPage.cpp
   trunk/UI/GTK2/src/IndexPage.h
Log:
Use ResultsTree, not IndexTree.


Modified: trunk/UI/GTK2/src/IndexPage.cpp
===================================================================
--- trunk/UI/GTK2/src/IndexPage.cpp	2007-04-26 11:20:09 UTC (rev 811)
+++ trunk/UI/GTK2/src/IndexPage.cpp	2007-04-26 11:22:13 UTC (rev 812)
@@ -35,7 +35,7 @@
 using namespace Glib;
 using namespace Gtk;
 
-IndexPage::IndexPage(const ustring &indexName, IndexTree *pTree,
+IndexPage::IndexPage(const ustring &indexName, ResultsTree *pTree,
 	PinotSettings &settings) :
 	NotebookPageBox(indexName, NotebookPageBox::INDEX_PAGE, settings),
 	m_pTree(pTree),
@@ -102,7 +102,7 @@
 	pack_start(*indexButtonsHbox, Gtk::PACK_SHRINK, 4);
 	if (pTree != NULL)
 	{
-		pack_start(*pTree->getScrolledWindow());
+		pack_start(*pTree->getResultsScrolledWindow());
 	}
 
 	// Populate
@@ -167,7 +167,7 @@
 //
 // Returns the page's tree.
 //
-IndexTree *IndexPage::getTree(void) const
+ResultsTree *IndexPage::getTree(void) const
 {
 	return m_pTree;
 }

Modified: trunk/UI/GTK2/src/IndexPage.h
===================================================================
--- trunk/UI/GTK2/src/IndexPage.h	2007-04-26 11:20:09 UTC (rev 811)
+++ trunk/UI/GTK2/src/IndexPage.h	2007-04-26 11:22:13 UTC (rev 812)
@@ -34,19 +34,19 @@
 #include <gtkmm/treeselection.h>
 
 #include "QueryProperties.h"
-#include "IndexTree.h"
+#include "ResultsTree.h"
 #include "Notebook.h"
 #include "PinotSettings.h"
 
 class IndexPage : public NotebookPageBox
 {
 	public:
-		IndexPage(const Glib::ustring &indexName, IndexTree *pTree,
+		IndexPage(const Glib::ustring &indexName, ResultsTree *pTree,
 			PinotSettings &settings);
 		virtual ~IndexPage();
 
 		/// Returns the page's tree.
-		virtual IndexTree *getTree(void) const;
+		virtual ResultsTree *getTree(void) const;
 
 		/// Returns the name of the current label.
 		Glib::ustring getLabelName(void) const;
@@ -81,7 +81,7 @@
 	protected:
 		Glib::ustring m_indexName;
 		Glib::ustring m_labelName;
-		IndexTree *m_pTree;
+		ResultsTree *m_pTree;
 		Gtk::ComboBoxText *m_pLabelCombobox;
 		Gtk::Button *m_pBackButton;
 		Gtk::Button *m_pForwardButton;



From fabricecolin at mail.berlios.de  Thu Apr 26 13:26:37 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:26:37 +0200
Subject: [Pinot-svn] r813 - in trunk/UI/GTK2: . src
Message-ID: <200704261126.l3QBQbDa021184@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:26:36 +0200 (Thu, 26 Apr 2007)
New Revision: 813

Modified:
   trunk/UI/GTK2/metase-gtk2.glade
   trunk/UI/GTK2/src/mainWindow_glade.cc
   trunk/UI/GTK2/src/mainWindow_glade.hh
Log:
Added Save As menuitem under Results.


Modified: trunk/UI/GTK2/metase-gtk2.glade
===================================================================
--- trunk/UI/GTK2/metase-gtk2.glade	2007-04-26 11:22:13 UTC (rev 812)
+++ trunk/UI/GTK2/metase-gtk2.glade	2007-04-26 11:26:36 UTC (rev 813)
@@ -187,7 +187,7 @@
 			      <property name="visible">True</property>
 			      <property name="label" translatable="yes">Host Name</property>
 			      <property name="use_underline">True</property>
-			      <property name="active">True</property>
+			      <property name="active">False</property>
 			      <property name="group">searchenginegroup1</property>
 			    </widget>
 			  </child>
@@ -197,6 +197,16 @@
 		  </child>
 
 		  <child>
+		    <widget class="GtkImageMenuItem" id="exportresults1">
+		      <property agent="glademm" name="cxx_visibility">protected</property>
+		      <property name="visible">True</property>
+		      <property name="label">gtk-save-as</property>
+		      <property name="use_stock">True</property>
+		      <signal name="activate" handler="on_exportresults_activate" last_modification_time="Tue, 17 Apr 2007 13:11:42 GMT"/>
+		    </widget>
+		  </child>
+
+		  <child>
 		    <widget class="GtkImageMenuItem" id="clearresults1">
 		      <property agent="glademm" name="cxx_visibility">protected</property>
 		      <property name="visible">True</property>
@@ -205,7 +215,7 @@
 		      <signal name="activate" handler="on_clearresults_activate" last_modification_time="Wed, 03 Mar 2004 19:51:48 GMT"/>
 
 		      <child internal-child="image">
-			<widget class="GtkImage" id="image669">
+			<widget class="GtkImage" id="image701">
 			  <property name="visible">True</property>
 			  <property name="stock">gtk-clear</property>
 			  <property name="icon_size">1</property>
@@ -252,7 +262,7 @@
 		      <signal name="activate" handler="on_morelikethis_activate" last_modification_time="Sun, 18 Jun 2006 10:50:56 GMT"/>
 
 		      <child internal-child="image">
-			<widget class="GtkImage" id="image670">
+			<widget class="GtkImage" id="image702">
 			  <property name="visible">True</property>
 			  <property name="stock">gtk-find</property>
 			  <property name="icon_size">1</property>
@@ -307,7 +317,7 @@
 		      <signal name="activate" handler="on_import_activate" last_modification_time="Tue, 02 Mar 2004 22:13:44 GMT"/>
 
 		      <child internal-child="image">
-			<widget class="GtkImage" id="image671">
+			<widget class="GtkImage" id="image703">
 			  <property name="visible">True</property>
 			  <property name="stock">gtk-open</property>
 			  <property name="icon_size">1</property>
@@ -345,7 +355,7 @@
 		      <signal name="activate" handler="on_refreshindex_activate" last_modification_time="Fri, 20 Feb 2004 18:57:09 GMT"/>
 
 		      <child internal-child="image">
-			<widget class="GtkImage" id="image672">
+			<widget class="GtkImage" id="image704">
 			  <property name="visible">True</property>
 			  <property name="stock">gtk-refresh</property>
 			  <property name="icon_size">1</property>
@@ -367,7 +377,7 @@
 		      <signal name="activate" handler="on_unindex_activate" last_modification_time="Thu, 28 Jul 2005 12:42:23 GMT"/>
 
 		      <child internal-child="image">
-			<widget class="GtkImage" id="image673">
+			<widget class="GtkImage" id="image705">
 			  <property name="visible">True</property>
 			  <property name="stock">gtk-delete</property>
 			  <property name="icon_size">1</property>
@@ -389,7 +399,7 @@
 		      <signal name="activate" handler="on_showfromindex_activate" last_modification_time="Sun, 06 Nov 2005 08:43:05 GMT"/>
 
 		      <child internal-child="image">
-			<widget class="GtkImage" id="image674">
+			<widget class="GtkImage" id="image706">
 			  <property name="visible">True</property>
 			  <property name="stock">gtk-properties</property>
 			  <property name="icon_size">1</property>

Modified: trunk/UI/GTK2/src/mainWindow_glade.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow_glade.cc	2007-04-26 11:22:13 UTC (rev 812)
+++ trunk/UI/GTK2/src/mainWindow_glade.cc	2007-04-26 11:26:36 UTC (rev 813)
@@ -1,4 +1,4 @@
-// generated 2007/2/17 18:49:42 SGT by fabrice at amra.dyndns.org.(none)
+// generated 2007/4/21 16:02:01 SGT by fabrice at amra.dyndns.org.(none)
 // using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
@@ -81,26 +81,27 @@
    hostnamegroup1 = NULL;
    Gtk::Menu *groupresults1_menu = Gtk::manage(new class Gtk::Menu());
    groupresults1 = NULL;
-   Gtk::Image *image669 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-clear"), Gtk::IconSize(1)));
+   exportresults1 = NULL;
+   Gtk::Image *image701 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-clear"), Gtk::IconSize(1)));
    clearresults1 = NULL;
    Gtk::MenuItem *separator1 = NULL;
    viewresults1 = NULL;
    viewcache1 = NULL;
-   Gtk::Image *image670 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-find"), Gtk::IconSize(1)));
+   Gtk::Image *image702 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-find"), Gtk::IconSize(1)));
    morelikethis1 = NULL;
    indexresults1 = NULL;
    Gtk::Menu *resultsMenuitem_menu = Gtk::manage(new class Gtk::Menu());
    resultsMenuitem = NULL;
    list1 = NULL;
-   Gtk::Image *image671 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-open"), Gtk::IconSize(1)));
+   Gtk::Image *image703 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-open"), Gtk::IconSize(1)));
    import1 = NULL;
    Gtk::MenuItem *separator3 = NULL;
    viewfromindex1 = NULL;
-   Gtk::Image *image672 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-refresh"), Gtk::IconSize(1)));
+   Gtk::Image *image704 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-refresh"), Gtk::IconSize(1)));
    refreshindex1 = NULL;
-   Gtk::Image *image673 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-delete"), Gtk::IconSize(1)));
+   Gtk::Image *image705 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-delete"), Gtk::IconSize(1)));
    unindex1 = NULL;
-   Gtk::Image *image674 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-properties"), Gtk::IconSize(1)));
+   Gtk::Image *image706 = Gtk::manage(new class Gtk::Image(Gtk::StockID("gtk-properties"), Gtk::IconSize(1)));
    showfromindex1 = NULL;
    Gtk::Menu *indexMenuitem_menu = Gtk::manage(new class Gtk::Menu());
    indexMenuitem = NULL;
@@ -193,7 +194,10 @@
    resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::MenuElem(_("Group By"), *groupresults1_menu));
    groupresults1 = (Gtk::MenuItem *)&resultsMenuitem_menu->items().back();
    
-   resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Clear List"), *image669));
+   resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::StockMenuElem(Gtk::StockID("gtk-save-as")));
+   exportresults1 = (Gtk::ImageMenuItem *)&resultsMenuitem_menu->items().back();
+   
+   resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Clear List"), *image701));
    clearresults1 = (Gtk::ImageMenuItem *)&resultsMenuitem_menu->items().back();
    
    resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::SeparatorElem());
@@ -205,7 +209,7 @@
    resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::MenuElem(_("View Cache")));
    viewcache1 = (Gtk::MenuItem *)&resultsMenuitem_menu->items().back();
    
-   resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("More Like This"), *image670));
+   resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("More Like This"), *image702));
    morelikethis1 = (Gtk::ImageMenuItem *)&resultsMenuitem_menu->items().back();
    
    resultsMenuitem_menu->items().push_back(Gtk::Menu_Helpers::MenuElem(_("_Index")));
@@ -214,7 +218,7 @@
    indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::MenuElem(_("List Contents Of")));
    list1 = (Gtk::MenuItem *)&indexMenuitem_menu->items().back();
    
-   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Import URL"), *image671));
+   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Import URL"), *image703));
    import1 = (Gtk::ImageMenuItem *)&indexMenuitem_menu->items().back();
    
    indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::SeparatorElem());
@@ -223,13 +227,13 @@
    indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::MenuElem(_("View")));
    viewfromindex1 = (Gtk::MenuItem *)&indexMenuitem_menu->items().back();
    
-   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Update"), *image672));
+   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Update"), *image704));
    refreshindex1 = (Gtk::ImageMenuItem *)&indexMenuitem_menu->items().back();
    
-   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Unindex"), *image673));
+   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Unindex"), *image705));
    unindex1 = (Gtk::ImageMenuItem *)&indexMenuitem_menu->items().back();
    
-   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Properties"), *image674));
+   indexMenuitem_menu->items().push_back(Gtk::Menu_Helpers::ImageMenuElem(_("Properties"), *image706));
    showfromindex1 = (Gtk::ImageMenuItem *)&indexMenuitem_menu->items().back();
    
    helpMenuitem_menu->items().push_back(Gtk::Menu_Helpers::MenuElem(_("_About")));
@@ -252,18 +256,18 @@
    showextract1->set_active(true);
    searchenginegroup1->set_active(true);
    hostnamegroup1->set_active(false);
-   image669->set_alignment(0.5,0.5);
-   image669->set_padding(0,0);
-   image670->set_alignment(0.5,0.5);
-   image670->set_padding(0,0);
-   image671->set_alignment(0.5,0.5);
-   image671->set_padding(0,0);
-   image672->set_alignment(0.5,0.5);
-   image672->set_padding(0,0);
-   image673->set_alignment(0.5,0.5);
-   image673->set_padding(0,0);
-   image674->set_alignment(0.5,0.5);
-   image674->set_padding(0,0);
+   image701->set_alignment(0.5,0.5);
+   image701->set_padding(0,0);
+   image702->set_alignment(0.5,0.5);
+   image702->set_padding(0,0);
+   image703->set_alignment(0.5,0.5);
+   image703->set_padding(0,0);
+   image704->set_alignment(0.5,0.5);
+   image704->set_padding(0,0);
+   image705->set_alignment(0.5,0.5);
+   image705->set_padding(0,0);
+   image706->set_alignment(0.5,0.5);
+   image706->set_padding(0,0);
    image439->set_alignment(0.5,0.5);
    image439->set_padding(0,0);
    addIndexButton->set_flags(Gtk::CAN_FOCUS);
@@ -292,6 +296,10 @@
    liveQueryLabel->set_line_wrap(false);
    liveQueryLabel->set_use_markup(false);
    liveQueryLabel->set_selectable(false);
+   liveQueryLabel->set_ellipsize(Pango::ELLIPSIZE_NONE);
+   liveQueryLabel->set_width_chars(-1);
+   liveQueryLabel->set_angle(0);
+   liveQueryLabel->set_single_line_mode(false);
    liveQueryEntry->set_flags(Gtk::CAN_FOCUS);
    liveQueryEntry->grab_focus();
    liveQueryEntry->set_visibility(true);
@@ -335,6 +343,10 @@
    label47->set_line_wrap(false);
    label47->set_use_markup(false);
    label47->set_selectable(false);
+   label47->set_ellipsize(Pango::ELLIPSIZE_NONE);
+   label47->set_width_chars(-1);
+   label47->set_angle(0);
+   label47->set_single_line_mode(false);
    hbox40->pack_start(*image400, Gtk::PACK_SHRINK, 0);
    hbox40->pack_start(*label47, Gtk::PACK_SHRINK, 0);
    alignment26->add(*hbox40);
@@ -363,6 +375,10 @@
    queryLabel->set_line_wrap(false);
    queryLabel->set_use_markup(false);
    queryLabel->set_selectable(false);
+   queryLabel->set_ellipsize(Pango::ELLIPSIZE_NONE);
+   queryLabel->set_width_chars(-1);
+   queryLabel->set_angle(0);
+   queryLabel->set_single_line_mode(false);
    queryExpander->set_flags(Gtk::CAN_FOCUS);
 #if GTKMM_MAJOR_VERSION==2 && GTKMM_MINOR_VERSION>=3
    queryExpander->set_expanded(false);
@@ -405,25 +421,26 @@
    searchenginegroup1->show();
    hostnamegroup1->show();
    groupresults1->show();
-   image669->show();
+   exportresults1->show();
+   image701->show();
    clearresults1->show();
    separator1->show();
    viewresults1->show();
    viewcache1->show();
-   image670->show();
+   image702->show();
    morelikethis1->show();
    indexresults1->show();
    resultsMenuitem->show();
    list1->show();
-   image671->show();
+   image703->show();
    import1->show();
    separator3->show();
    viewfromindex1->show();
-   image672->show();
+   image704->show();
    refreshindex1->show();
-   image673->show();
+   image705->show();
    unindex1->show();
-   image674->show();
+   image706->show();
    showfromindex1->show();
    indexMenuitem->show();
    about1->show();
@@ -471,6 +488,7 @@
    delete1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_delete_activate), false);
    showextract1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_showextract_activate), false);
    searchenginegroup1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_groupresults_activate), false);
+   exportresults1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_exportresults_activate), false);
    clearresults1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_clearresults_activate), false);
    viewresults1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_viewresults_activate), false);
    morelikethis1->signal_activate().connect(SigC::slot(*this, &mainWindow_glade::on_morelikethis_activate), false);

Modified: trunk/UI/GTK2/src/mainWindow_glade.hh
===================================================================
--- trunk/UI/GTK2/src/mainWindow_glade.hh	2007-04-26 11:22:13 UTC (rev 812)
+++ trunk/UI/GTK2/src/mainWindow_glade.hh	2007-04-26 11:26:36 UTC (rev 813)
@@ -1,4 +1,4 @@
-// generated 2007/2/17 18:49:42 SGT by fabrice at amra.dyndns.org.(none)
+// generated 2007/4/17 21:14:18 SGT by fabrice at amra.dyndns.org.(none)
 // using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
@@ -70,6 +70,7 @@
         class Gtk::RadioMenuItem * searchenginegroup1;
         class Gtk::RadioMenuItem * hostnamegroup1;
         class Gtk::MenuItem * groupresults1;
+        class Gtk::ImageMenuItem * exportresults1;
         class Gtk::ImageMenuItem * clearresults1;
         class Gtk::MenuItem * viewresults1;
         class Gtk::MenuItem * viewcache1;
@@ -120,6 +121,7 @@
         virtual void on_delete_activate() = 0;
         virtual void on_showextract_activate() = 0;
         virtual void on_groupresults_activate() = 0;
+        virtual void on_exportresults_activate() = 0;
         virtual void on_clearresults_activate() = 0;
         virtual void on_viewresults_activate() = 0;
         virtual void on_morelikethis_activate() = 0;



From fabricecolin at mail.berlios.de  Thu Apr 26 13:28:13 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:28:13 +0200
Subject: [Pinot-svn] r814 - trunk/UI/GTK2/src
Message-ID: <200704261128.l3QBSDr8021271@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:28:12 +0200 (Thu, 26 Apr 2007)
New Revision: 814

Removed:
   trunk/UI/GTK2/src/IndexTree.cpp
   trunk/UI/GTK2/src/IndexTree.h
Modified:
   trunk/UI/GTK2/src/Makefile.am
   trunk/UI/GTK2/src/ModelColumns.cpp
   trunk/UI/GTK2/src/ModelColumns.h
Log:
Removed IndexTree and IndexModelColumns classes.


Deleted: trunk/UI/GTK2/src/IndexTree.cpp
===================================================================
--- trunk/UI/GTK2/src/IndexTree.cpp	2007-04-26 11:26:36 UTC (rev 813)
+++ trunk/UI/GTK2/src/IndexTree.cpp	2007-04-26 11:28:12 UTC (rev 814)
@@ -1,444 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include <iostream>
-#include <gtkmm/stock.h>
-#include <gtkmm/textbuffer.h>
-
-#include "config.h"
-#include "NLS.h"
-#include "TimeConverter.h"
-#include "QueryHistory.h"
-#include "ViewHistory.h"
-#include "PinotSettings.h"
-#include "PinotUtils.h"
-#include "IndexTree.h"
-
-using namespace std;
-using namespace SigC;
-using namespace Glib;
-using namespace Gdk;
-using namespace Gtk;
-
-IndexTree::IndexTree(const ustring &indexName, Menu *pPopupMenu, PinotSettings &settings) :
-	TreeView(),
-	m_indexName(indexName),
-	m_pPopupMenu(pPopupMenu),
-	m_pIndexScrolledwindow(NULL),
-	m_settings(settings)
-{
-	m_pIndexScrolledwindow = manage(new ScrolledWindow());
-
-	// This is the actual index tree
-	set_events(Gdk::BUTTON_PRESS_MASK);
-	set_flags(CAN_FOCUS);
-	set_headers_clickable(true);
-	set_headers_visible(true);
-	set_rules_hint(true);
-	set_reorderable(false);
-	set_enable_search(true);
-	get_selection()->set_mode(SELECTION_MULTIPLE);
-	m_pIndexScrolledwindow->set_flags(Gtk::CAN_FOCUS);
-	m_pIndexScrolledwindow->set_border_width(4);
-	m_pIndexScrolledwindow->set_shadow_type(Gtk::SHADOW_NONE);
-	m_pIndexScrolledwindow->set_policy(Gtk::POLICY_AUTOMATIC, Gtk::POLICY_AUTOMATIC);
-	m_pIndexScrolledwindow->property_window_placement().set_value(Gtk::CORNER_TOP_LEFT);
-	m_pIndexScrolledwindow->add(*this);
-
-	// Associate the columns model to the index tree
-	m_refStore = ListStore::create(m_indexColumns);
-	set_model(m_refStore);
-
-	// The score column is used for status icons
-	TreeViewColumn *pColumn = create_column(_("Title"), m_indexColumns.m_text, true, true, m_indexColumns.m_text);
-	if (pColumn != NULL)
-	{
-		append_column(*manage(pColumn));
-	}
-	pColumn = create_column(_("URL"), m_indexColumns.m_url, true, true, m_indexColumns.m_url);
-	if (pColumn != NULL)
-	{
-		append_column(*manage(pColumn));
-	}
-	pColumn = create_column(_("Timestamp"), m_indexColumns.m_timestamp, false, true, m_indexColumns.m_timestampTime);
-	if (pColumn != NULL)
-	{
-		append_column(*manage(pColumn));
-	}
-
-	// Connect the signals
-	signal_button_press_event().connect_notify(
-		SigC::slot(*this, &IndexTree::onButtonPressEvent));
-	get_selection()->signal_changed().connect(
-		SigC::slot(*this, &IndexTree::onSelectionChanged));
-
-	// Enable interactive search
-	set_search_column(m_indexColumns.m_text.index());
-	// Control which rows can be selected
-	get_selection()->set_select_function(SigC::slot(*this, &IndexTree::onSelectionSelect));
-
-	// Initially, don't display the list of indexed documents
-	m_listingIndex = false;
-
-	// Show all
-	m_pIndexScrolledwindow->show();
-	show();
-}
-
-IndexTree::~IndexTree()
-{
-}
-
-void IndexTree::onButtonPressEvent(GdkEventButton *ev)
-{
-	// Check for popup click
-	if ((ev->type == GDK_BUTTON_PRESS) &&
-		(ev->button == 3) )
-	{
-		if (m_pPopupMenu != NULL)
-		{
-			m_pPopupMenu->popup(ev->button, ev->time);
-		}
-	}
-	// Check for double clicks
-	else if (ev->type == GDK_2BUTTON_PRESS)
-	{
-#ifdef DEBUG
-		cout << "IndexTree::onButtonPressEvent: double-click" << endl;
-#endif
-		m_signalEdit();
-	}
-}
-
-void IndexTree::onSelectionChanged(void)
-{
-	m_signalSelectionChanged(m_indexName);
-}
-
-bool IndexTree::onSelectionSelect(const RefPtr<TreeModel>& model,
-	const TreeModel::Path& path, bool path_currently_selected)
-{
-	const TreeModel::iterator iter = model->get_iter(path);
-	const TreeModel::Row row = *iter;
-
-	if (path_currently_selected == true)
-	{
-#ifdef DEBUG
-		cout << "IndexTree::onSelectionSelect: unselected entry " << row[m_indexColumns.m_url] << endl;
-#endif
-	}
-	else
-	{
-#ifdef DEBUG
-		cout << "IndexTree::onSelectionSelect: selected entry " << row[m_indexColumns.m_url] << endl;
-#endif
-	}
-
-	return true;
-}
-
-//
-// Returns the tree's scrolled window.
-//
-ScrolledWindow *IndexTree::getScrolledWindow(void) const
-{
-	return m_pIndexScrolledwindow;
-}
-
-//
-// Appends a new row in the index tree.
-//
-bool IndexTree::appendDocument(const DocumentInfo &docInfo)
-{
-	TreeModel::iterator newRowIter = m_refStore->append();
-	TreeModel::Row childRow = *newRowIter;
-	unsigned int indexId = 0;
-
-	childRow[m_indexColumns.m_text] = to_utf8(docInfo.getTitle());
-	childRow[m_indexColumns.m_url] = to_utf8(docInfo.getLocation());
-	childRow[m_indexColumns.m_type] = to_utf8(docInfo.getType());
-	childRow[m_indexColumns.m_language] = to_utf8(docInfo.getLanguage());
-	string timestamp(docInfo.getTimestamp());
-	childRow[m_indexColumns.m_timestamp] = to_utf8(timestamp);
-	childRow[m_indexColumns.m_timestampTime] = TimeConverter::fromTimestamp(timestamp);
-	childRow[m_indexColumns.m_id] = docInfo.getIsIndexed(indexId);
-
-	// If the tree was empty, it is no longer
-	m_listingIndex = true;
-
-	return true;
-}
-
-//
-// Adds a set of documents.
-//
-bool IndexTree::addDocuments(const vector<DocumentInfo> &documentsList)
-{
-	unsigned int count = 0;
-
-	// Unselect all
-	get_selection()->unselect_all();
-
-	// FIXME: clear the tree ?
-
-	// Get the list of indexed documents
-	for (vector<DocumentInfo>::const_iterator docIter = documentsList.begin();
-		docIter != documentsList.end(); ++docIter)
-	{
-		// Add a row
-		if (appendDocument(*docIter) == true)
-		{
-#ifdef DEBUG
-			cout << "IndexTree::addDocuments: added row for document " << count << endl;
-#endif
-			count++;
-		}
-	}
-
-	// Now we are listing the index contents
-	m_listingIndex = true;
-
-	return true;
-}
-
-//
-// Gets the first selected item's URL.
-//
-ustring IndexTree::getFirstSelectionURL(void)
-{
-	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
-	if (selectedItems.empty() == true)
-	{
-		return "";
-	}
-
-	list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
-	TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
-	TreeModel::Row row = *iter;
-	return row[m_indexColumns.m_url];
-}
-
-//
-// Gets the first selected item.
-//
-DocumentInfo IndexTree::getFirstSelection(void)
-{
-	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
-	if (selectedItems.empty() == true)
-	{
-		return DocumentInfo();
-	}
-
-	list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
-	TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
-	TreeModel::Row row = *iter;
-
-	DocumentInfo indexedDoc(from_utf8(row[m_indexColumns.m_text]),
-		from_utf8(row[m_indexColumns.m_url]),
-		from_utf8(row[m_indexColumns.m_type]),
-		from_utf8(row[m_indexColumns.m_language]));
-	indexedDoc.setTimestamp(from_utf8(row[m_indexColumns.m_timestamp]));
-	indexedDoc.setSize(row[m_indexColumns.m_size]);
-	indexedDoc.setIsIndexed(m_settings.getIndexId(m_indexName), row[m_indexColumns.m_id]);
-
-	return indexedDoc;
-}
-
-//
-// Gets a list of selected items.
-//
-bool IndexTree::getSelection(std::vector<DocumentInfo> &documentsList)
-{
-	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
-	if (selectedItems.empty() == true)
-	{
-		return false;
-	}
-
-	// Go through selected items
-	for (list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
-		itemPath != selectedItems.end(); ++itemPath)
-	{
-		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
-		TreeModel::Row row = *iter;
-
-		DocumentInfo docInfo(from_utf8(row[m_indexColumns.m_text]),
-			from_utf8(row[m_indexColumns.m_url]),
-			from_utf8(row[m_indexColumns.m_type]),
-			from_utf8(row[m_indexColumns.m_language]));
-		docInfo.setTimestamp(from_utf8(row[m_indexColumns.m_timestamp]));
-		docInfo.setSize(row[m_indexColumns.m_size]);
-		docInfo.setIsIndexed(m_settings.getIndexId(m_indexName), row[m_indexColumns.m_id]);
-
-		documentsList.push_back(docInfo);
-	}
-#ifdef DEBUG
-	cout << "IndexTree::getSelection: " << documentsList.size() << " documents selected" << endl;
-#endif
-
-	return true;
-}
-
-//
-// Updates a document's properties.
-//
-void IndexTree::updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo)
-{
-	if (docId == 0)
-	{
-		return;
-	}
-
-	// Go through the list of indexed documents
-	TreeModel::Children children = m_refStore->children();
-	for (TreeModel::Children::iterator iter = children.begin(); iter != children.end(); ++iter)
-	{
-		TreeModel::Row row = *iter;
-
-		if (docId == row[m_indexColumns.m_id])
-		{
-			row[m_indexColumns.m_text] = to_utf8(docInfo.getTitle());
-			row[m_indexColumns.m_type] = to_utf8(docInfo.getType());
-			row[m_indexColumns.m_language] = to_utf8(docInfo.getLanguage());
-			string timestamp(docInfo.getTimestamp());
-			row[m_indexColumns.m_timestamp] = to_utf8(timestamp);
-			row[m_indexColumns.m_timestampTime] = TimeConverter::fromTimestamp(timestamp);
-#ifdef DEBUG
-			cout << "IndexTree::updateDocumentInfo: language now " << docInfo.getLanguage() << endl;
-#endif
-			break;
-		}
-	}
-}
-
-//
-// Deletes the current selection.
-//
-bool IndexTree::deleteSelection(void)
-{
-	bool empty = false;
-
-	// Go through selected items
-	list<TreeModel::Path> selectedItems = get_selection()->get_selected_rows();
-	list<TreeModel::Path>::iterator itemPath = selectedItems.begin();
-	while (itemPath != selectedItems.end())
-	{
-		TreeModel::iterator iter = m_refStore->get_iter(*itemPath);
-		TreeModel::Row row = *iter;
-
-		// Unselect and erase
-		get_selection()->unselect(iter);
-		m_refStore->erase(row);
-
-		selectedItems = get_selection()->get_selected_rows();
-		itemPath = selectedItems.begin();
-	}
-#ifdef DEBUG
-	cout << "IndexTree::deleteSelection: deleted " << selectedItems.size() << " documents" << endl;
-#endif
-
-	TreeModel::Children children = m_refStore->children();
-	if (children.empty() == true)
-	{
-		// The index tree is now empty
-		m_listingIndex = false;
-		empty = true;
-	}
-
-	return empty;
-}
-
-//
-// Returns the number of rows.
-//
-unsigned int IndexTree::getRowsCount(void)
-{
-	if (m_listingIndex == false)
-	{
-		return 0;
-	}
-
-	// FIXME: cache this value ?
-	return m_refStore->children().size();
-}
-
-//
-// Refreshes the tree.
-//
-void IndexTree::refresh(void)
-{
-	// FIXME: not sure why, but this helps with refreshing the tree
-	columns_autosize();
-}
-
-//
-// Returns true if the tree is empty.
-//
-bool IndexTree::isEmpty(void)
-{
-	if (m_listingIndex == true)
-	{
-		return false;
-	}
-
-	return true;
-}
-
-//
-// Clears the tree.
-//
-void IndexTree::clear(void)
-{
-	// Unselect all
-	get_selection()->unselect_all();
-
-	// Remove existing rows in the tree
-	TreeModel::Children children = m_refStore->children();
-	if (children.empty() == false)
-	{
-		TreeModel::Children::iterator iter = children.begin();
-		while (iter != children.end())
-		{
-			// Erase this row
-			m_refStore->erase(*iter);
-
-			// Get the new first row
-			children = m_refStore->children();
-			iter = children.begin();
-		}
-		m_refStore->clear();
-
-		onSelectionChanged();
-	}
-}
-
-//
-// Returns the edit document signal.
-//
-Signal0<void>& IndexTree::getEditDocumentSignal(void)
-{
-	return m_signalEdit;
-}
-
-//
-// Returns the changed selection signal.
-//
-Signal1<void, ustring>& IndexTree::getSelectionChangedSignal(void)
-{
-	return m_signalSelectionChanged;
-}

Deleted: trunk/UI/GTK2/src/IndexTree.h
===================================================================
--- trunk/UI/GTK2/src/IndexTree.h	2007-04-26 11:26:36 UTC (rev 813)
+++ trunk/UI/GTK2/src/IndexTree.h	2007-04-26 11:28:12 UTC (rev 814)
@@ -1,115 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU Library General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#ifndef _INDEXTREE_HH
-#define _INDEXTREE_HH
-
-#include <string>
-#include <vector>
-#include <sigc++/slot.h>
-#include <glibmm/refptr.h>
-#include <glibmm/ustring.h>
-#include <gtkmm/menu.h>
-#include <gdkmm/pixbuf.h>
-#include <gtkmm/scrolledwindow.h>
-#include <gtkmm/textview.h>
-#include <gtkmm/liststore.h>
-#include <gtkmm/treeview.h>
-#include <gtkmm/treeselection.h>
-
-#include "QueryProperties.h"
-#include "ModelColumns.h"
-#include "PinotSettings.h"
-
-class IndexTree : public Gtk::TreeView
-{
-	public:
-		IndexTree(const Glib::ustring &indexName, Gtk::Menu *pPopupMenu,
-			PinotSettings &settings);
-		virtual ~IndexTree();
-
-		/// Returns the tree's scrolled window.
-		Gtk::ScrolledWindow *getScrolledWindow(void) const;
-
-		/// Adds a set of documents.
-		bool addDocuments(const std::vector<DocumentInfo> &documentsList);
-
-		/// Appends a new row in the index tree.
-		bool appendDocument(const DocumentInfo &docInfo);
-
-		/// Gets the first selected item's URL.
-		Glib::ustring getFirstSelectionURL(void);
-
-		/// Gets the first selected item.
-		DocumentInfo getFirstSelection(void);
-
-		/// Gets a list of selected items.
-		bool getSelection(std::vector<DocumentInfo> &documentsList);
-
-		/// Updates a document's properties.
-		void updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo);
-
-		/**
-		  * Deletes the current selection.
-		  * Returns true if the tree is then empty.
-		  */
-		bool deleteSelection(void);
-
-		/// Returns the number of rows.
-		unsigned int getRowsCount(void);
-
-		/// Refreshes the tree.
-		void refresh(void);
-
-		/// Returns true if the tree is empty.
-		bool isEmpty(void);
-
-		/// Clears the tree.
-		void clear(void);
-
-		/// Returns the document edit signal.
-		SigC::Signal0<void>& getEditDocumentSignal(void);
-
-		/// Returns the changed selection signal.
-		SigC::Signal1<void, Glib::ustring>& getSelectionChangedSignal(void);
-
-	protected:
-		Glib::ustring m_indexName;
-		Gtk::Menu *m_pPopupMenu;
-		Gtk::ScrolledWindow *m_pIndexScrolledwindow;
-		Glib::RefPtr<Gtk::ListStore> m_refStore;
-		SigC::Signal0<void> m_signalEdit;
-		SigC::Signal1<void, Glib::ustring> m_signalSelectionChanged;
-		PinotSettings &m_settings;
-		IndexModelColumns m_indexColumns;
-		bool m_listingIndex;
-
-		void onButtonPressEvent(GdkEventButton *ev);
-
-		void onSelectionChanged(void);
-
-		bool onSelectionSelect(const Glib::RefPtr<Gtk::TreeModel>& model,
-			const Gtk::TreeModel::Path& path, bool path_currently_selected);
-
-	private:
-		IndexTree(const IndexTree &other);
-		IndexTree &operator=(const IndexTree &other);
-
-};
-
-#endif // _INDEXTREE_HH

Modified: trunk/UI/GTK2/src/Makefile.am
===================================================================
--- trunk/UI/GTK2/src/Makefile.am	2007-04-26 11:26:36 UTC (rev 813)
+++ trunk/UI/GTK2/src/Makefile.am	2007-04-26 11:28:12 UTC (rev 814)
@@ -22,7 +22,6 @@
 	DaemonState.h \
 	EnginesTree.h \
 	IndexPage.h \
-	IndexTree.h \
 	MboxHandler.h \
 	ModelColumns.h \
 	Notebook.h \
@@ -55,7 +54,6 @@
 	statisticsDialog.cc \
 	EnginesTree.cpp \
 	IndexPage.cpp \
-	IndexTree.cpp \
 	MboxHandler.cpp \
 	ModelColumns.cpp \
 	Notebook.cpp \

Modified: trunk/UI/GTK2/src/ModelColumns.cpp
===================================================================
--- trunk/UI/GTK2/src/ModelColumns.cpp	2007-04-26 11:26:36 UTC (rev 813)
+++ trunk/UI/GTK2/src/ModelColumns.cpp	2007-04-26 11:28:12 UTC (rev 814)
@@ -76,22 +76,6 @@
 {
 }
 
-IndexModelColumns::IndexModelColumns()
-{
-	add(m_text);
-	add(m_url);
-	add(m_type);
-	add(m_language);
-	add(m_id);
-	add(m_timestamp);
-	add(m_timestampTime);
-	add(m_size);
-}
-
-IndexModelColumns::~IndexModelColumns()
-{
-}
-
 OtherIndexModelColumns::OtherIndexModelColumns()
 {
 	add(m_name);

Modified: trunk/UI/GTK2/src/ModelColumns.h
===================================================================
--- trunk/UI/GTK2/src/ModelColumns.h	2007-04-26 11:26:36 UTC (rev 813)
+++ trunk/UI/GTK2/src/ModelColumns.h	2007-04-26 11:28:12 UTC (rev 814)
@@ -97,24 +97,6 @@
 
 };
 
-/// Main window, model column for the index tree.
-class IndexModelColumns : public Gtk::TreeModel::ColumnRecord
-{
-public:
-	IndexModelColumns();
-	virtual ~IndexModelColumns();
-
-	Gtk::TreeModelColumn<Glib::ustring> m_text;
-	Gtk::TreeModelColumn<Glib::ustring> m_url;
-	Gtk::TreeModelColumn<Glib::ustring> m_type;
-	Gtk::TreeModelColumn<Glib::ustring> m_language;
-	Gtk::TreeModelColumn<unsigned int> m_id;
-	Gtk::TreeModelColumn<Glib::ustring> m_timestamp;
-	Gtk::TreeModelColumn<time_t> m_timestampTime;
-	Gtk::TreeModelColumn<off_t> m_size;
-
-};
-
 /// Preferences window, model column for the Xapian indexes tree.
 class OtherIndexModelColumns : public Gtk::TreeModel::ColumnRecord
 {
@@ -153,7 +135,7 @@
 
 };
 
-/// references window, model column for the directories tree.
+/// Preferences window, model column for the directories tree.
 class IndexableModelColumns : public Gtk::TreeModel::ColumnRecord
 {
 public:



From fabricecolin at mail.berlios.de  Thu Apr 26 13:33:09 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:33:09 +0200
Subject: [Pinot-svn] r815 - trunk/UI/GTK2/src
Message-ID: <200704261133.l3QBX9Px021714@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:33:08 +0200 (Thu, 26 Apr 2007)
New Revision: 815

Modified:
   trunk/UI/GTK2/src/mainWindow.cc
   trunk/UI/GTK2/src/mainWindow.hh
Log:
Synced with changes made to ResultsTree/IndexTree.
Implemented results export in on_exportresults_activate().
In view_documents(), open HTTP/HTTPS documents with the default browser. This
fixes a problem where documents identified as "application/x-php" were open
with a text editor.


Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-04-26 11:28:12 UTC (rev 814)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-04-26 11:33:08 UTC (rev 815)
@@ -120,7 +120,7 @@
 	m_pEnginesTree->get_selection()->signal_changed().connect(
 		SigC::slot(*this, &mainWindow::on_enginesTreeviewSelection_changed));
 	// Connect to the edit index signal
-	m_pEnginesTree->getEditIndexSignal().connect(
+	m_pEnginesTree->getDoubleClickSignal().connect(
 		SigC::slot(*this, &mainWindow::on_editindex));
 
 	// Enable completion on the live query field
@@ -527,10 +527,10 @@
 		return;
 	}
 
-	IndexTree *pIndexTree = pIndexPage->getTree();
-	if (pIndexTree != NULL)
+	ResultsTree *pResultsTree = pIndexPage->getTree();
+	if (pResultsTree != NULL)
 	{
-		string url(pIndexTree->getFirstSelectionURL());
+		string url(pResultsTree->getFirstSelectionURL());
 
 		if (url.empty() == false)
 		{
@@ -549,7 +549,7 @@
 			// Show the URL in the status bar
 			ustring statusText = _("Document location is");
 			statusText += " ";
-			statusText += pIndexTree->getFirstSelectionURL();
+			statusText += pResultsTree->getFirstSelectionURL();
 			set_status(statusText, true);
 		}
 	}
@@ -568,7 +568,7 @@
 //
 void mainWindow::on_index_changed(ustring indexName)
 {
-	IndexTree *pIndexTree = NULL;
+	ResultsTree *pResultsTree = NULL;
 	IndexPage *pIndexPage = NULL;
 	ustring labelName;
 	bool foundPage = false;
@@ -582,10 +582,10 @@
 	if (pIndexPage != NULL)
 	{
 		// Force a refresh
-		pIndexTree = pIndexPage->getTree();
-		if (pIndexTree != NULL)
+		pResultsTree = pIndexPage->getTree();
+		if (pResultsTree != NULL)
 		{
-			pIndexTree->clear();
+			pResultsTree->clear();
 		}
 		labelName = pIndexPage->getLabelName();
 		foundPage = true;
@@ -599,13 +599,14 @@
 			SigC::slot(*this, &mainWindow::on_close_page));
 
 		// Position the index tree
-		pIndexTree = manage(new IndexTree(indexName, indexMenuitem->get_submenu(), m_settings));
-		pIndexPage = manage(new IndexPage(indexName, pIndexTree, m_settings));
+		pResultsTree = manage(new ResultsTree(indexName, indexMenuitem->get_submenu(),
+			ResultsTree::FLAT, m_settings));
+		pIndexPage = manage(new IndexPage(indexName, pResultsTree, m_settings));
 		// Connect to the "changed" signal
-		pIndexTree->getSelectionChangedSignal().connect(
+		pResultsTree->getSelectionChangedSignal().connect(
 			SigC::slot(*this, &mainWindow::on_indexTreeviewSelection_changed));
 		// Connect to the edit document signal
-		pIndexTree->getEditDocumentSignal().connect(
+		pResultsTree->getDoubleClickSignal().connect(
 			SigC::slot(*this, &mainWindow::on_showfromindex_activate));
 		// Connect to the label changed signal
 		pIndexPage->getLabelChangedSignal().connect(
@@ -724,8 +725,8 @@
 	{
 		return;
 	}
-	IndexTree *pIndexTree = pIndexPage->getTree();
-	if (pIndexTree == NULL)
+	ResultsTree *pResultsTree = pIndexPage->getTree();
+	if (pResultsTree == NULL)
 	{
 		return;
 	}
@@ -860,7 +861,7 @@
 		}
 
 		IndexPage *pIndexPage = NULL;
-		IndexTree *pIndexTree = NULL;
+		ResultsTree *pResultsTree = NULL;
 		ustring indexName = to_utf8(pBrowseThread->getIndexName());
 		ustring labelName = to_utf8(pBrowseThread->getLabelName());
 
@@ -869,20 +870,20 @@
 		pIndexPage = dynamic_cast<IndexPage*>(get_page(indexName, NotebookPageBox::INDEX_PAGE));
 		if (pIndexPage != NULL)
 		{
-			pIndexTree = pIndexPage->getTree();
-			if (pIndexTree != NULL)
+			pResultsTree = pIndexPage->getTree();
+			if (pResultsTree != NULL)
 			{
 				const vector<DocumentInfo> &docsList = pBrowseThread->getDocuments();
 
 				// Add the documents to the tree
-				pIndexTree->addDocuments(docsList);
+				pResultsTree->addResults("", docsList, "");
 
 				pIndexPage->setDocumentsCount(pBrowseThread->getDocumentsCount());
 				pIndexPage->updateButtonsState(m_maxDocsCount);
 
 				status = _("Showing");
 				status += " ";
-				snprintf(docsCountStr, 64, "%u", pIndexTree->getRowsCount());
+				snprintf(docsCountStr, 64, "%u", pResultsTree->getRowsCount());
 				status += docsCountStr;
 				status += " ";
 				status += _("of");
@@ -899,7 +900,7 @@
 				if (pIndexPage->getDocumentsCount() > 0)
 				{
 					// Refresh the tree
-					pIndexTree->refresh();
+					pResultsTree->refresh();
 				}
 				m_state.m_browsingIndex = false;
 			}
@@ -965,7 +966,7 @@
 			pResultsTree->getSelectionChangedSignal().connect(
 				SigC::slot(*this, &mainWindow::on_resultsTreeviewSelection_changed));
 			// Connect to the view results signal
-			pResultsTree->getViewResultsSignal().connect(
+			pResultsTree->getDoubleClickSignal().connect(
 				SigC::slot(*this, &mainWindow::on_viewresults_activate));
 
 			// Append the page
@@ -1193,11 +1194,11 @@
 		DocumentInfo docInfo = pIndexThread->getDocumentInfo();
 
 		// Is the index still being shown ?
-		IndexTree *pIndexTree = NULL;
+		ResultsTree *pResultsTree = NULL;
 		IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_page(_("My Web Pages"), NotebookPageBox::INDEX_PAGE));
 		if (pIndexPage != NULL)
 		{
-			pIndexTree = pIndexPage->getTree();
+			pResultsTree = pIndexPage->getTree();
 		}
 
 		// Did the thread perform an update ?
@@ -1209,10 +1210,10 @@
 			snprintf(docIdStr, 64, "%u", docId);
 			status += docIdStr;
 
-			if (pIndexTree != NULL)
+			if (pResultsTree != NULL)
 			{
 				// Update the index tree
-				pIndexTree->updateDocumentInfo(docId, docInfo);
+				pResultsTree->updateResult(docInfo);
 			}
 		}
 		else
@@ -1221,9 +1222,9 @@
 			status += " ";
 			status += to_utf8(indexedUrl);
 
-			if (pIndexTree != NULL)
+			if (pResultsTree != NULL)
 			{
-				unsigned int rowsCount = pIndexTree->getRowsCount();
+				unsigned int rowsCount = pResultsTree->getRowsCount();
 
 				// Ensure the last page is being displayed and is not full
 				if ((pIndexPage->getFirstDocument() + rowsCount == pIndexPage->getDocumentsCount()) &&
@@ -1292,11 +1293,10 @@
 		IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_page(_("My Web Pages"), NotebookPageBox::INDEX_PAGE));
 		if (pIndexPage != NULL)
 		{
-			IndexTree *pIndexTree = pIndexPage->getTree();
-			if (pIndexTree != NULL)
+			ResultsTree *pResultsTree = pIndexPage->getTree();
+			if (pResultsTree != NULL)
 			{
-				pIndexTree->updateDocumentInfo(pUpdateThread->getDocumentID(),
-					pUpdateThread->getDocumentInfo());
+				pResultsTree->updateResult(pUpdateThread->getDocumentInfo());
 			}
 		}
 
@@ -1533,11 +1533,11 @@
 #ifdef DEBUG
 				cout << "mainWindow::on_copy_activate: index tree" << endl;
 #endif
-				IndexTree *pIndexTree = pIndexPage->getTree();
-				if (pIndexTree != NULL)
+				ResultsTree *pResultsTree = pIndexPage->getTree();
+				if (pResultsTree != NULL)
 				{
 					// Get the current documents selection
-					pIndexTree->getSelection(documentsList);
+					pResultsTree->getSelection(documentsList);
 				}
 			}
 
@@ -1722,6 +1722,55 @@
 }
 
 //
+// Results > Export menu selected
+//
+void mainWindow::on_exportresults_activate()
+{
+	NotebookPageBox *pNotebookPage = get_current_page();
+	if (pNotebookPage != NULL)
+	{
+		ResultsPage *pResultsPage = dynamic_cast<ResultsPage*>(pNotebookPage);
+		if (pResultsPage != NULL)
+		{
+			ResultsTree *pResultsTree = pResultsPage->getTree();
+			if (pResultsTree != NULL)
+			{
+				FileChooserDialog fileChooser(_("Export Results"));
+				FileFilter csvFilter, xmlFilter;
+				ustring location;
+				bool exportToCSV = true;
+
+				prepare_file_chooser(fileChooser, location, false);
+
+				// Add filters
+				csvFilter.add_mime_type("application/csv");
+				csvFilter.set_name("CSV");
+				fileChooser.add_filter(csvFilter);
+				xmlFilter.add_mime_type("application/xml");
+				xmlFilter.set_name("OpenSearch response");
+				fileChooser.add_filter(xmlFilter);
+
+				fileChooser.show();
+				if (fileChooser.run() == RESPONSE_OK)
+				{
+					// Retrieve the chosen location
+					location = filename_to_utf8(fileChooser.get_filename());
+					// What file format was selected ?
+					const FileFilter *pFilter = fileChooser.get_filter();
+					if ((pFilter != NULL) &&
+						(pFilter->get_name() != "CSV"))
+					{
+						exportToCSV = false;
+					}
+
+					pResultsTree->exportResults(location, exportToCSV);
+				}
+			}
+		}
+	}
+}
+
+//
 // Results > View menu selected
 //
 void mainWindow::on_viewresults_activate()
@@ -1898,13 +1947,13 @@
 	IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_current_page());
 	if (pIndexPage != NULL)
 	{
-		IndexTree *pIndexTree = pIndexPage->getTree();
+		ResultsTree *pResultsTree = pIndexPage->getTree();
 
-		if (pIndexTree != NULL)
+		if (pResultsTree != NULL)
 		{
 			vector<DocumentInfo> documentsList;
 
-			if (pIndexTree->getSelection(documentsList) == true)
+			if (pResultsTree->getSelection(documentsList) == true)
 			{
 				view_documents(documentsList);
 			}
@@ -1923,11 +1972,11 @@
 	IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_current_page());
 	if (pIndexPage != NULL)
 	{
-		IndexTree *pIndexTree = pIndexPage->getTree();
+		ResultsTree *pResultsTree = pIndexPage->getTree();
 
-		if (pIndexTree != NULL)
+		if (pResultsTree != NULL)
 		{
-			if ((pIndexTree->getSelection(documentsList) == false) ||
+			if ((pResultsTree->getSelection(documentsList) == false) ||
 				(documentsList.empty() == true))
 			{
 				// No selection
@@ -1980,13 +2029,13 @@
 #ifdef DEBUG
 	cout << "mainWindow::on_showfromindex_activate: called" << endl;
 #endif
-	IndexTree *pIndexTree = NULL;
+	ResultsTree *pResultsTree = NULL;
 	IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_current_page());
 	if (pIndexPage != NULL)
 	{
 		indexName = from_utf8(pIndexPage->getTitle());
 		labelName = from_utf8(pIndexPage->getLabelName());
-		pIndexTree = pIndexPage->getTree();
+		pResultsTree = pIndexPage->getTree();
 	}
 
 	const std::map<string, string> &indexesMap = m_settings.getIndexes();
@@ -2003,8 +2052,8 @@
 	}
 
 	// Get the current documents selection
-	if ((pIndexTree == NULL) ||
-		(pIndexTree->getSelection(documentsList) == false) ||
+	if ((pResultsTree == NULL) ||
+		(pResultsTree->getSelection(documentsList) == false) ||
 		(documentsList.empty() == true))
 	{
 		// No selection
@@ -2156,16 +2205,16 @@
 	vector<DocumentInfo> documentsList;
 	ustring boxTitle = _("Remove this document from the index ?");
 
-	IndexTree *pIndexTree = NULL;
+	ResultsTree *pResultsTree = NULL;
 	IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_current_page());
 	if (pIndexPage != NULL)
 	{
-		pIndexTree = pIndexPage->getTree();
+		pResultsTree = pIndexPage->getTree();
 	}
 
 	// Get the current documents selection
-	if ((pIndexTree == NULL) ||
-		(pIndexTree->getSelection(documentsList) == false) ||
+	if ((pResultsTree == NULL) ||
+		(pResultsTree->getSelection(documentsList) == false) ||
 		(documentsList.empty() == true))
 	{
 		return;
@@ -2187,7 +2236,7 @@
 	}
 
 	// Remove these documents from the tree
-	pIndexTree->deleteSelection();
+	pResultsTree->deleteSelection();
 
 	set<unsigned int> docIdList;
 	for (vector<DocumentInfo>::const_iterator docIter = documentsList.begin();
@@ -2635,6 +2684,7 @@
 void mainWindow::show_global_menuitems(bool showItems)
 {
 	// Results menuitems that depend on the page
+	exportresults1->set_sensitive(showItems);
 	clearresults1->set_sensitive(showItems);
 }
 
@@ -2977,11 +3027,11 @@
 	IndexPage *pIndexPage = dynamic_cast<IndexPage*>(get_page(indexName, NotebookPageBox::INDEX_PAGE));
 	if (pIndexPage != NULL)
 	{
-		IndexTree *pIndexTree = pIndexPage->getTree();
-		if (pIndexTree != NULL)
+		ResultsTree *pResultsTree = pIndexPage->getTree();
+		if (pResultsTree != NULL)
 		{
 			// Remove existing rows in the index tree
-			pIndexTree->clear();
+			pResultsTree->clear();
 		}
 		pIndexPage->setFirstDocument(startDoc);
 
@@ -3072,6 +3122,8 @@
 
 		if (type != currentType)
 		{
+			Url urlObj(url);
+
 			if ((action.m_exec.empty() == false) &&
 				(arguments.empty() == false))
 			{
@@ -3089,22 +3141,20 @@
 			}
 
 			// Get the action for this MIME type
+			if ((urlObj.getProtocol() == "http") ||
+				(urlObj.getProtocol() == "https"))
+			{
+				// Chances are the web browser will be able to open this
+				type = "text/html";
+#ifdef DEBUG
+				cout << "mainWindow::view_documents: defaulting to text/html" << endl;
+#endif
+			}
 			if (MIMEScanner::getDefaultAction(type, action) == false)
 			{
-				Url urlObj(url);
 				bool foundAction = false;
 
-				if ((urlObj.getProtocol() == "http") ||
-					(urlObj.getProtocol() == "https"))
-				{
-					// Chances are the web browser will be able to open this
-					type = "text/html";
-					foundAction = MIMEScanner::getDefaultAction(type, action);
-#ifdef DEBUG
-					cout << "mainWindow::view_documents: defaulting to text/html" << endl;
-#endif
-				}
-				else if ((type.length() > 5) &&
+				if ((type.length() > 5) &&
 					(type.substr(0, 5) == "text/"))
 				{
 					// It's a subtype of text
@@ -3185,8 +3235,8 @@
 		return false;
 	}
 
-	IndexTree *pIndexTree = pIndexPage->getTree();
-	if (pIndexTree == NULL)
+	ResultsTree *pResultsTree = pIndexPage->getTree();
+	if (pResultsTree == NULL)
 	{
 		return false;
 	}
@@ -3214,8 +3264,11 @@
 
 	if (appendToList == true)
 	{
+		vector<DocumentInfo> docsList;
+
 		// Add a row
-		pIndexTree->appendDocument(docInfo);
+		docsList.push_back(docInfo);
+		pResultsTree->addResults("", docsList, "");
 
 		return true;
 	}

Modified: trunk/UI/GTK2/src/mainWindow.hh
===================================================================
--- trunk/UI/GTK2/src/mainWindow.hh	2007-04-26 11:28:12 UTC (rev 814)
+++ trunk/UI/GTK2/src/mainWindow.hh	2007-04-26 11:33:08 UTC (rev 815)
@@ -87,6 +87,7 @@
 	virtual void on_clearresults_activate();
 	virtual void on_showextract_activate();
 	virtual void on_groupresults_activate();
+	virtual void on_exportresults_activate();
 	virtual void on_viewresults_activate();
 	virtual void on_morelikethis_activate();
 	virtual void on_indexresults_activate();



From fabricecolin at mail.berlios.de  Thu Apr 26 13:34:21 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:34:21 +0200
Subject: [Pinot-svn] r816 - trunk/Tokenize
Message-ID: <200704261134.l3QBYLtD021908@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:34:21 +0200 (Thu, 26 Apr 2007)
New Revision: 816

Modified:
   trunk/Tokenize/FilterUtils.cpp
Log:
Cosmetic change.


Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2007-04-26 11:33:08 UTC (rev 815)
+++ trunk/Tokenize/FilterUtils.cpp	2007-04-26 11:34:21 UTC (rev 816)
@@ -167,7 +167,7 @@
 		{
 			doc.setData(metaIter->second.c_str(), metaIter->second.length());
 #ifdef DEBUG
-			cout << "FilterUtils:populateDocument: set " << metaIter->second.length()
+			cout << "FilterUtils::populateDocument: set " << metaIter->second.length()
 				<< " characters of data" << endl;
 #endif
 		}



From fabricecolin at mail.berlios.de  Thu Apr 26 13:37:20 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:37:20 +0200
Subject: [Pinot-svn] r817 - trunk/Utils/xdgmime
Message-ID: <200704261137.l3QBbKI3022217@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:37:20 +0200 (Thu, 26 Apr 2007)
New Revision: 817

Modified:
   trunk/Utils/xdgmime/ChangeLog
   trunk/Utils/xdgmime/xdgmimeglob.c
Log:
Synced with gtk+'s xdgmime.


Modified: trunk/Utils/xdgmime/ChangeLog
===================================================================
--- trunk/Utils/xdgmime/ChangeLog	2007-04-26 11:34:21 UTC (rev 816)
+++ trunk/Utils/xdgmime/ChangeLog	2007-04-26 11:37:20 UTC (rev 817)
@@ -1,3 +1,9 @@
+2007-04-09  Matthias Clasen  <mclasen at redhat.com>
+
+	* xdgmimeglob.c (_xdg_glob_hash_insert_text): Duplicate the
+	mime_type when storing it in a hash node, to avoid leaks. 
+	Update all callers.
+
 2007-01-07  Matthias Clasen  <mclasen at redhat.com>
 
 	* xdgmimecache.c (cache_glob_node_lookup_suffix): Don't return "" 

Modified: trunk/Utils/xdgmime/xdgmimeglob.c
===================================================================
--- trunk/Utils/xdgmime/xdgmimeglob.c	2007-04-26 11:34:21 UTC (rev 816)
+++ trunk/Utils/xdgmime/xdgmimeglob.c	2007-04-26 11:37:20 UTC (rev 817)
@@ -263,7 +263,7 @@
 		{
 		  child = _xdg_glob_hash_node_new ();
 		  child->character = '\000';
-		  child->mime_type = mime_type;
+		  child->mime_type = strdup (mime_type);
 		  child->child = NULL;
 		  child->next = node->child;
 		  node->child = child;
@@ -272,7 +272,7 @@
 	}
       else
 	{
-	  node->mime_type = mime_type;
+	  node->mime_type = strdup (mime_type);
 	}
     }
   else
@@ -477,7 +477,7 @@
       glob_hash->literal_list = _xdg_glob_list_append (glob_hash->literal_list, strdup (glob), strdup (mime_type));
       break;
     case XDG_GLOB_SIMPLE:
-      glob_hash->simple_node = _xdg_glob_hash_insert_text (glob_hash->simple_node, glob + 1, strdup (mime_type));
+      glob_hash->simple_node = _xdg_glob_hash_insert_text (glob_hash->simple_node, glob + 1, mime_type);
       break;
     case XDG_GLOB_FULL:
       glob_hash->full_list = _xdg_glob_list_append (glob_hash->full_list, strdup (glob), strdup (mime_type));



From fabricecolin at mail.berlios.de  Thu Apr 26 13:52:11 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 13:52:11 +0200
Subject: [Pinot-svn] r818 - in trunk: . po
Message-ID: <200704261152.l3QBqBGH029085@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 13:51:58 +0200 (Thu, 26 Apr 2007)
New Revision: 818

Modified:
   trunk/AUTHORS
   trunk/po/POTFILES.in
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/it.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
Log:
Updated de (Christian Dywan) and it (Vincenzo Consales) translations.
IndexTree no longer exists.


Modified: trunk/AUTHORS
===================================================================
--- trunk/AUTHORS	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/AUTHORS	2007-04-26 11:51:58 UTC (rev 818)
@@ -30,10 +30,11 @@
 	French - Nicolas Velin <nsv at fr dot st>
 	German - Christian Dywan <christian at twotoasts dot de>
 	Italian - Michele Angrisano <darksun1988 at gmail dot com>
+		& Vincenzo Consales <aquarius987 at gmail dot com>>
 	Portuguese - _PN_boy <pedro_nuno_pn at iol dot pt>
 	Portuguese (Brazil) - Leonardo Melo <leonardovazmelo at gmail dot com>
 	Russian - Sergey Vostrikov <memphis at jabber dot snc dot ru>
 	Spanish - Jes?s Tramullas <jesus at tramullas dot com>
-		- Garbage <garbage at openfutura.com>
+		& Garbage <garbage at openfutura.com>
 	Swedish - Daniel Nylander <po at danielnylander dot se>
 

Modified: trunk/po/POTFILES.in
===================================================================
--- trunk/po/POTFILES.in	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/POTFILES.in	2007-04-26 11:51:58 UTC (rev 818)
@@ -9,7 +9,6 @@
 UI/GTK2/src/importDialog_glade.cc
 UI/GTK2/src/indexDialog.cc
 UI/GTK2/src/indexDialog_glade.cc
-UI/GTK2/src/IndexTree.cpp
 UI/GTK2/src/IndexPage.cpp
 UI/GTK2/src/launcherDialog.cc
 UI/GTK2/src/launcherDialog_glade.cc

Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/de.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-03-10 20:26+0000\n"
-"PO-Revision-Date: 2007-03-24 15:37+0800\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"PO-Revision-Date: 2007-04-13 15:30+0000\n"
 "Last-Translator: Christian Dywan <christian at twotoasts.de>\n"
 "Language-Team: German <de at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-03-24 04:08+0000\n"
+"X-Rosetta-Export-Date: 2007-04-25 00:28:10+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:70
 msgid "Search Engines"
@@ -24,27 +24,27 @@
 msgid "Current User"
 msgstr "Aktueller Benutzer"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "Meine Webseiten"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Meine Dokumente"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 msgid "Date"
 msgstr "Datum"
 
@@ -105,24 +105,10 @@
 msgid "Import"
 msgstr "Importieren"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "URL importieren"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr ""
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Zeitstempel"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Voherige anzeigen"
@@ -148,311 +134,319 @@
 msgstr ""
 
 #: UI/GTK2/src/launcherDialog_glade.cc:99
+#, fuzzy
 msgid "Helper application"
-msgstr ""
+msgstr "Hilfsprogramm"
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Alle Suchmaschinen anzeigen"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "Index hinzuf?gen"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Index entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Bereit"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
-msgstr ""
+msgstr "N/V"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 msgid "Undefined"
 msgstr "Unbestimmt"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
+#, fuzzy
 msgid "Showing"
-msgstr ""
+msgstr "Zeige"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Dokument aktualisiert"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indiziert"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "Nicht indizierte(s) Dokument(e)"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
+#, fuzzy
 msgid "is already in use"
-msgstr ""
+msgstr "wird bereits benutzt"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "Index konnte nicht umbenannt werden"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "Ergebnisse"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Dieses Dokument aus dem Index entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
-msgstr ""
+msgstr "Diese Dokumente aus dem Index entfernen?"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr "Durchsuchen Sie das Internet und Ihre Dokumente !"
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "Konnte Index nicht hinzuf?gen"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "Konnte Index nicht entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Keine Suchmaschine ausgew?hlt"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "Bitte geben Sie zuerst den Google API-Schl?ssel ein"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "Keine Standardanwendung f?r Typ angegeben"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Bearbeiten"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr "Status"
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Suchmaschine"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
-msgstr ""
+msgstr "Gruppieren nach"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
-msgstr ""
+msgstr "Liste l?schen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
-msgstr ""
+msgstr "_Anzeigen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
-msgstr ""
+msgstr "Zwischenspeicher ansehen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "_Index"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
-msgstr ""
+msgstr "Liste Inhalte von"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Ansicht"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
-msgstr ""
+msgstr "Aktualisieren"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Eigenschaften"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "_?ber"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_Sitzung"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "_Bearbeiten"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr ""
 
@@ -511,7 +505,7 @@
 
 #: UI/GTK2/src/pinot.cc:263
 msgid "Couldn't open index"
-msgstr ""
+msgstr "Konnte Index nicht ?ffnen"
 
 #: UI/GTK2/src/pinot.cc:279
 msgid "Couldn't create history database"
@@ -523,31 +517,31 @@
 
 #: UI/GTK2/src/PinotSettings.cpp:249
 msgid "Important"
-msgstr ""
+msgstr "Wichtig"
 
 #: UI/GTK2/src/PinotSettings.cpp:250
 msgid "New"
-msgstr ""
+msgstr "Neu"
 
 #: UI/GTK2/src/PinotSettings.cpp:251
 msgid "Personal"
-msgstr ""
+msgstr "Pers?nlich"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr ""
 
 #: UI/GTK2/src/prefsDialog.cc:82
 msgid "Name"
-msgstr ""
+msgstr "Name"
 
 #: UI/GTK2/src/prefsDialog.cc:90
 msgid "Monitor"
-msgstr ""
+msgstr "?berwachen"
 
 #: UI/GTK2/src/prefsDialog.cc:91 UI/GTK2/src/prefsDialog.cc:99
 msgid "Location"
-msgstr ""
+msgstr "Ort"
 
 #: UI/GTK2/src/prefsDialog.cc:107
 msgid "Pattern"
@@ -612,11 +606,11 @@
 #: UI/GTK2/src/prefsDialog_glade.cc:99 UI/GTK2/src/prefsDialog_glade.cc:119
 #: UI/GTK2/src/prefsDialog_glade.cc:132 UI/GTK2/src/prefsDialog_glade.cc:145
 msgid "Add"
-msgstr ""
+msgstr "Hinzuf?gen"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:105
 msgid "Remove"
-msgstr ""
+msgstr "Entfernen"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:113
 msgid "Labels"
@@ -625,18 +619,21 @@
 #: UI/GTK2/src/prefsDialog_glade.cc:114
 msgid "These directories will be indexed and optionally monitored for changes:"
 msgstr ""
+"Diese Verzeichnisse werden indiziert und optional auf ?nderungen ?berwacht:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:127
 msgid "Mail boxes of type mbox can be monitored and indexed:"
-msgstr ""
+msgstr "Postf?cher des Typs mbox k?nnen ?berwacht und indiziert werden:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:140
 msgid "Specify any file pattern you wish to exclude from indexing:"
 msgstr ""
+"Geben Sie beliebige Dateimuster an, die Sie vom Indizieren ausschlie?en "
+"m?chten:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:154
 msgid "Indexing"
-msgstr ""
+msgstr "Indizieren"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:566
 msgid "Preferences"
@@ -678,9 +675,17 @@
 msgid "File extension"
 msgstr "Dateiendung"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr ""
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
-msgstr ""
+msgstr "Verzeichnis"
 
 #: UI/GTK2/src/queryDialog.cc:125
 msgid "Language code"
@@ -726,12 +731,12 @@
 msgid "Query parameters"
 msgstr ""
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 #, fuzzy
 msgid "Score"
 msgstr "Relevanz"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Auslesen"
 
@@ -747,7 +752,7 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:92
 msgid "Daemon"
-msgstr ""
+msgstr "D?mon"
 
 #: UI/GTK2/src/statisticsDialog.cc:128 UI/GTK2/src/statisticsDialog.cc:143
 msgid "documents"
@@ -755,7 +760,7 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:132 UI/GTK2/src/statisticsDialog.cc:147
 msgid "Unknown error"
-msgstr ""
+msgstr "Unbekannter Fehler"
 
 #: UI/GTK2/src/statisticsDialog.cc:154
 #, fuzzy
@@ -764,7 +769,7 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:154
 msgid "results"
-msgstr ""
+msgstr "Ergebnisse"
 
 #: UI/GTK2/src/statisticsDialog.cc:171
 msgid "Running under PID"
@@ -780,71 +785,71 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
-msgstr ""
+msgstr "Dateien"
 
 #: UI/GTK2/src/statisticsDialog.cc:205
 msgid "Errors"
-msgstr ""
+msgstr "Fehler"
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Kein Titel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "Kann Dokumenttyp nicht indizieren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META-Tag verbietet das Indizieren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
-msgstr ""
+msgstr "Dokument konnte nicht aktualisiert werden"

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/es.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.70\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2006-12-03 15:05+0000\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-02-21 00:02+0000\n"
 "Last-Translator: Gar Bage <garbage at openfutura.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
@@ -25,27 +25,27 @@
 msgid "Current User"
 msgstr "Usuario"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "Mis Paginas Web"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Mis documentos"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 msgid "Date"
 msgstr "Date"
 
@@ -107,24 +107,10 @@
 msgid "Import"
 msgstr "Importar"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importar una URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "T?tulo"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Fecha"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Mostrar previos"
@@ -151,308 +137,313 @@
 msgid "Helper application"
 msgstr "Aplicaci?n de ayuda"
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr "Nombre de la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "?ltima ejecuci?n"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Sumario"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Mostrar todos los motores de b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "A?adir ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Borrar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Listo"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "Desconocido"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 msgid "Undefined"
 msgstr "Indefinido"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "La localizaci?n del resultado es"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "La localizaci?n del documento es"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Mostrando"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "documentos"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documentos comenzando en"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "B?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "en"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "finalizado"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "M?s como"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "Etiqueta(s) actualizada(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Documento actualizado"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indizado"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "Documento(s) no indizado(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "Propiedades del documento actualizadas"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "No se pudo renombrar ?ndice, nombre"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "ya est? en uso"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "No se pudo renombrar el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "resultados"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr "B?squeda activa"
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr "No se pudo a?adir la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "no existe"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "?Borrar este documento del ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "?Borrar este documento del ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Una herramienta metabuscador para el escritorio libre"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr "Busca en el web y en sus documentos"
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Nombre del ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "No se pudo a?adir el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "A?adido un nuevo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "No se pudo borrar el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Al menos una tarea no ha finalizado. ?Parar ahora?"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nombre la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "No se pudo actualizar la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "B?squeda editada"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "No se pudo a?adir la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "A?adida una nueva b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr "B?squeda no definida"
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Motor de b?squeda no seleccionado"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "Por favor, primero configure el API de Google"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "Ejecutando la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "No hay aplicaci?n predefinida para el tipo"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "B?squeda:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Editar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "B?squedas guardadas"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr "Estatus"
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Motor de b?squeda"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "Nombre del servidor"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "Mostrar extra?dos"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Agrupar por"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "Limpiar la lista"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "Ver"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Ver la cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "Documentos similares"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "Listar el contenido de"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Ver"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Actualizar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr "Des-indizar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Propiedades"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "Sobre"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "Sesi?n"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "Editar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "Resultados"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "Ayuda"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -533,7 +524,7 @@
 msgid "Personal"
 msgstr "Personal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "No clasificado"
 
@@ -678,6 +669,14 @@
 msgid "File extension"
 msgstr "Extensi?n del archivo"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "T?tulo"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Carpeta"
@@ -726,11 +725,11 @@
 msgid "Query parameters"
 msgstr "Par?metros de b?squeda"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "Cuenta"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Extra?dos"
 
@@ -786,65 +785,65 @@
 msgid "Errors"
 msgstr "Errores"
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "No se pudo indizar el buzon de correo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "ya est? indizado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr "ya excluido"
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "Error en el ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "No se pudo crear el motor de b?squeda"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "No se pudo ejecutar la b?squeda contra el motor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Sin t?tulo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "No se pudo usar un recuperador para el protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "No se pudo descargar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "No se pudo indizar el tipo de documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr "a"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "La etiqueta META Robots proh?be la indizaci?n"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "No se pudo indizar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr "No se pudo des-indizar lo(s) documento(s)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "No se pudo actualizar el documento"

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/fr.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.70\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2006-11-29 15:09+0000\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Fabrice Colin <fabricecolin at users.berlios.de>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
@@ -25,27 +25,27 @@
 msgid "Current User"
 msgstr "Utilisateur"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "Mes Pages Web"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Mes Documents"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 msgid "Date"
 msgstr "Date"
 
@@ -106,24 +106,10 @@
 msgid "Import"
 msgstr "Importer"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importer une URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "Titre"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Date"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Precedents"
@@ -152,308 +138,313 @@
 msgid "Helper application"
 msgstr "Application"
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr "Nom de la Recherche"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "Derniere Utilisation"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Sommaire"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Montrer tous les moteurs"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "Ajouter un index"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Enlever un index"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Pret"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "Inconnue"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 msgid "Undefined"
 msgstr "Indefini"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "Le chemin du resultat est"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "Le chemin du document is"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "documents,"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "au total, a partir de"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "La recherche"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "sur"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "est terminee"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "Similaire a"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "Mis a jour l(es) etiquette(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Mis a jour le document"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indexe"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "Desindexe le(s) document(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "Mis a jour les proprietes du document"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "N'a pas pu renommer l'index, le nom"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "est deja utilise"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "N'a pas pu renommer l'index"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "Edite l'index"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "resultats"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr "Recherche"
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr "N'a pas pu trouver"
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "L'index"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "n'existe pas"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Enlever ce document de l'index ?"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "Enlever ces documents de l'index ?"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Un outil de recherche pour le Bureau Libre"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr "Cherche le Web et vos documents"
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Nom de l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "N'a pas pu ajouter l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "Ajoute un nouvel index"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "N'a pas pu enlever l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Au moins une tache n'est pas terminee. Quitter maintenant ?"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nom de la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "N'a pas pu mettre a jour la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Edite la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "N'a pas pu ajouter la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Ajoute une nouvelle recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr "Recherche indefinie"
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Pas de moteur selectionne"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "Configurez la clef de l'API Google"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "Recherche en cours"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "Pas d'application definie pour le type"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "Recherche:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Editer"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "Recherches sauvegardees"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr "Statistiques"
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Moteur"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "Nom de Machine"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "Montrer l'Extrait"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Grouper Par"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "Nettoyer la Liste"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "Voir"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Voir le Cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "Documents similaires"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "Index"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "Lister le Contenu de"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Voir"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Mettre a Jour"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr "Desindexer"
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Proprietes"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "A Propos"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "Session"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "Editer"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "Resultats"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "Aide"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -534,7 +525,7 @@
 msgid "Personal"
 msgstr "Personnel"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "Sans classification"
 
@@ -679,6 +670,14 @@
 msgid "File extension"
 msgstr "Extension de fichier"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "Titre"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Repertoire"
@@ -727,11 +726,11 @@
 msgid "Query parameters"
 msgstr "Parametres de la recherche"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "Score"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Extrait"
 
@@ -784,65 +783,65 @@
 msgid "Errors"
 msgstr "Erreurs"
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "Ne peut pas indexer le courrier ici"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "est deja indexe"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr "est exclus"
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "Erreur sur l'index"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "N'a pas pu creer le moteur"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "N'a pas pu lancer la recherche sur le moteur"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Pas de titre"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "N'a pas pu obtenir un brouteur pour"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "N'a pas pu telecharger"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "Impossible d'indexer ce type de documents"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr "a"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "Le META tag Robots interdit d'indexer"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "N'a pas pu indexer"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr "N'a pas pu desindexer le(s) document(s)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "N'a pas pu mettre a jour le document"

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/it.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -7,44 +7,46 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-03-24 15:37+0800\n"
-"PO-Revision-Date: 2006-11-17 13:20+0000\n"
-"Last-Translator: Michele Angrisano <darksun1988 at gmail.com>\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"PO-Revision-Date: 2007-04-25 10:40+0000\n"
+"Last-Translator: Vincenzo Consales <aquarius987 at gmail.com>\n"
 "Language-Team: Italian <it at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-03-24 04:08+0000\n"
+"X-Rosetta-Export-Date: 2007-04-26 10:58:09+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:70
 msgid "Search Engines"
-msgstr "Motore di ricerca"
+msgstr "Motori di ricerca"
 
 #: UI/GTK2/src/EnginesTree.cpp:328
 msgid "Current User"
-msgstr "User attuale"
+msgstr "Utente attuale"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
+#, fuzzy
 msgid "My Web Pages"
-msgstr "Mia pagine web"
+msgstr "Pagine web personali"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
+#, fuzzy
 msgid "My Documents"
-msgstr "Miei Documenti"
+msgstr "Documenti personali"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 msgid "Date"
 msgstr ""
 
@@ -82,7 +84,7 @@
 
 #: UI/GTK2/src/indexDialog_glade.cc:79 UI/GTK2/src/prefsDialog_glade.cc:82
 msgid "Address:"
-msgstr ""
+msgstr "Indirizzo:"
 
 #: UI/GTK2/src/indexDialog_glade.cc:183
 msgid "External index"
@@ -105,24 +107,10 @@
 msgid "Import"
 msgstr "Importare"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importare URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "Titolo"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Timestamp"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Dimostrazione Precedente"
@@ -149,308 +137,313 @@
 msgid "Helper application"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr "Nome da interrogare"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "Prossima corsa"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Sommario"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Mostrare tutti i motori di ricerca"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "Indice da aggiungere"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Rimuovere indice"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Pronto"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "N/A"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 msgid "Undefined"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "Il risultato della posizione ?"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "La posizione Document ?"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Dimostrazione"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "dei"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documenti, inizio a"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "Query"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "sulla"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "conclusione"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "Molti gradiscono"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "Descrizione(i) aggiornata"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Documento aggiornato"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indice"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "Propriet? documento aggiornata"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "Impossibile rinominare l'indice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "? ora in uso"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "Impossibile rinominare l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "Indice modificato"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "_Risultati"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "Indice"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "non esiste"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Rimuovere questo documento dall'indice?"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "Rimuovere questi documenti dall'indice?"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Un tool metasearch per il Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Nome indice"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "Impossibile aggiungere l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "Nuovo indice aggiunto"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "Impossibile rimuovere l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nome Query"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "Impossibile aggiornare il query"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Query modificato"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "Impossibile aggiungere il query"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Nuovo query aggiunto"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Nessun motore di ricerca selezionato"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "Avviare query"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "Nessuna applicazione di default ? stata definita per tipo"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "Query:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Modifica"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "Queries conservati"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Motore di ricerca"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "Nome Host"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "Mostrare l'estratto"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Gruppo da"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "Cancellare lista"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "Vedere"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Vedere Cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "_Indice"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "Lista contenuti di"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Vedere"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Aggiornare"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Propriet?"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "_About"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_Sessione"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "_Modifica"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "_Risultati"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "_Aiuto"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -531,7 +524,7 @@
 msgid "Personal"
 msgstr "Personale"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "Non classificato"
 
@@ -679,6 +672,14 @@
 msgid "File extension"
 msgstr ""
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "Titolo"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Directory"
@@ -727,11 +728,11 @@
 msgid "Query parameters"
 msgstr "Parametri Querys"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "Valutazione"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Estrarre"
 
@@ -752,9 +753,8 @@
 msgstr ""
 
 #: UI/GTK2/src/statisticsDialog.cc:132 UI/GTK2/src/statisticsDialog.cc:147
-#, fuzzy
 msgid "Unknown error"
-msgstr "Sconosciuto"
+msgstr ""
 
 #: UI/GTK2/src/statisticsDialog.cc:154
 msgid "Viewed"
@@ -784,65 +784,65 @@
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "Impossibile indicizzare la mail qui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "? ora stato indicizzato"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "Indice errori su"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "Impossibile creare un motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "Impossibile avviare un query sul motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Nessun titolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "Impossibile ottenere download per protocollo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "Impossibile ritrovare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "Impossibile indicizzare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "Impossibile aggiornare il documento"

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/nl.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.70\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2006-12-03 15:13+0000\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Fabrice Colin <fabricecolin at users.berlios.de>\n"
 "Language-Team: Dutch <nl at li.org>\n"
@@ -24,27 +24,27 @@
 msgid "Current User"
 msgstr "Huidige gebruiker"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "Mijn webpagina's"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Mijn documenten"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 #, fuzzy
 msgid "Date"
 msgstr "bij"
@@ -107,24 +107,10 @@
 msgid "Import"
 msgstr "Importeren"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importeren URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "Titel"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Tijdstip"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Toon vorige"
@@ -151,312 +137,317 @@
 msgid "Helper application"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 #, fuzzy
 msgid "Query Name"
 msgstr "Query naam"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "Laatst geopend"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Samenvatting"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Toon alle zoekmachines"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "Toevoegen index"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Verwijderen index"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Gereed"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "NVT"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 #, fuzzy
 msgid "Undefined"
 msgstr "<niet gedefinieerd>"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "Uitvoerlocatie is"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "Documentlocatie is"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Aan het tonen"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "van"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documenten, beginnend bij"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "Query"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "op"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "Beeindigd"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "Meer zoals"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "Vernieuwde na(a)m(en)"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Vernieuwd document"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Geindexeerd"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "Niet geindexeerd(e) document(en)"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "Vernieuwde documenteigenschappen"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "Kon index niet hernoemen, naam"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "is reeds in gebruik"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "Kon index niet hernoemen"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "Bewerkte index"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "_Resultaten"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr "Rechtstreekse query"
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr "Kon query niet vinden"
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "Inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "bestaat niet"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Verwijder dit document uit de inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "Verwijder deze documenten uit de inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Een metazoek tool voor de Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 #, fuzzy
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005-2006 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Naam inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "Kon inhoudsopgave niet toevoegen"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "Nieuwe inhoudsopgave toegevoegd"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "Kon inhoudsopgave niet verwijderen"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Tenminste een taak is nog niet gereed. Nu stoppen?"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Naam query"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "Kon query niet actualiseren"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Bewerkte query"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "Kon query niet toevoegen"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Nieuwe query toegevoegd"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 #, fuzzy
 msgid "Query is not set"
 msgstr "Query niet vastgelegd"
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Geen zoekmachine geselecteerd"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "Geef eerst de Google API sleutel in"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "Lopende query"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "Geen standaard toepassing gedefinieerd voor het type"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "Query:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Bewerken"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "Opgeslagen queries"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Zoekmachine"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "Naam host"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "Toon uittreksel"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Groeperen op"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "Lijst opschonen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "_Toon"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Toon cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "Meer zoals deze"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "_Index"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "Lijstinhoud van"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Toon"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Verversen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr "De-indexeren"
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Eigenschappen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "_Over"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_Sessie"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "_Bewerken"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "_Resultaten"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "_Help"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -537,7 +528,7 @@
 msgid "Personal"
 msgstr "Persoonlijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "Niet geklassificeerd"
 
@@ -687,6 +678,14 @@
 msgid "File extension"
 msgstr "Bestandssuffix"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "Titel"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Map"
@@ -736,11 +735,11 @@
 msgid "Query parameters"
 msgstr "Queryparameters"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "Score"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Uitpakken"
 
@@ -799,65 +798,65 @@
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "Kan mail hier niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "wordt al geindexeerd"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr "staat op blacklist"
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "Indexeringsfout op"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "Kon zoekmachine niet maken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "Kon query niet uitvoeren op zoekmachine"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Geen titel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "Kon geen downloader verkrijgen voor protocol"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "Kon niet opzoeken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "Kan documenttype niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr "bij"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META taf verbiedt indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "Kon niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr "Kan indexering van bestand(en) niet ongedaan maken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "Kan document niet actualiseren"

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/pt.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-03-24 15:37+0800\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-03-11 10:32+0000\n"
 "Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
@@ -25,27 +25,27 @@
 msgid "Current User"
 msgstr "Utilizador corrente"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "As minhas p?ginas Web"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Os Meus Documentos"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 msgid "Date"
 msgstr "Data"
 
@@ -106,24 +106,10 @@
 msgid "Import"
 msgstr "Importar"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importar URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "Titulo"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Data e hora"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Mostrar anterior"
@@ -150,308 +136,313 @@
 msgid "Helper application"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Resumo"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Mostrar todos os motores de pesquisa"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "Adicionar index"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Remover index"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Pronto"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "N/D"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 msgid "Undefined"
 msgstr "Indefinido"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "A localiza??o do resultado ?"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "A localiza??o do documento ?"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Visualizando"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "de"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documentos, come?ando em"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "Pesquisa"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "activar"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "terminado"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indexado"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "j? est? em uso"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "resultados"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Remover este documento do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "Remover estes documentos do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr "Pesquise a Web e os seus documentos"
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Nome do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "Adicionar novo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "N?o foi possivel remover o ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Pelo menos uma tarefa ainda n?o foi concluida. Sair agora?"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "Pesquisa:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Editar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr "Situa??o"
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Motor de busca"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "Nome da M?quina"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Agrupar Por"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "Limpar Lista"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "M_ostrar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Ver Cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "Mais identicos"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "?nd_ice"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Visualizar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Actualizar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Propriedades"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "_Sobre"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_Sess?o"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "_Editar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "_Resultados"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "_Ajuda"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -532,7 +523,7 @@
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -677,6 +668,14 @@
 msgid "File extension"
 msgstr "Extens?o do ficheiro"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "Titulo"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Direct?rio"
@@ -725,11 +724,11 @@
 msgid "Query parameters"
 msgstr ""
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr ""
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Extrair"
 
@@ -782,65 +781,65 @@
 msgid "Errors"
 msgstr "Erros"
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Sem t?tulo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr ""

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/pt_BR.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.70\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-09 21:19+0800\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Leonardo Melo <leonardovazmelo at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
@@ -24,27 +24,27 @@
 msgid "Current User"
 msgstr "Usu?rio atual"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "Minhas P?ginas Web"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Meus Documentos"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 #, fuzzy
 msgid "Date"
 msgstr "no"
@@ -107,24 +107,10 @@
 msgid "Import"
 msgstr "Importar"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importar URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "T?tulo"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "hora"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Mostrar anterior"
@@ -151,309 +137,314 @@
 msgid "Helper application"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr "Nome da consulta"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "?ltimo executado"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Resumo"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Mostrar todos mecanimos de pesquisa"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "Adicionar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Remover ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Pronto"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "N/A"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 #, fuzzy
 msgid "Undefined"
 msgstr "<indefinido>"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "Local resultante ?"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "Localiza??o do documento ?"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Exibindo"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "de"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documentos, come?am no"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "Consulta"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "no"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "finalizada"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "Mais pr?xima"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "T?tulo(s) atualizado(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Documento atualizado"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indexado"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "Documento(s) n?o indexidado(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "Propriedade de documentos atualizados"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "N?o foi poss?vel renomear ?ndice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "j? est? em uso"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "N?o foi poss?vel renomear ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "_Resultados"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr "Query ativa"
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr "N?o foi poss?vel encontrar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Remover documento do ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "Remover documentos do ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Um mecanismo de metabusca gr?tis para Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Nome do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "N?o foi poss?vel adicionar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "Adicionar novo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "N?o foi poss?vel remover ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Pelo menos uma tarefa n?o terminou ainda. Sair assim mesmo?"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nome da consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "N?o foi poss?vel atualizar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Consulta editada"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "N?o foi poss?vel adicionar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Adicionar nova consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr "Consulta n?o foi atualizada"
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Nenhum mecanismo de pesquisa selecionado"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "Primeiro informe a tecla para Google API"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "Executando consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "Aplica??o associada ao tipo n?o definida"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "Consulta:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Editar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "Consultas armazenadas"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "Mecanismo de pesquisa"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "Nome do host"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "Mostrar extrato"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Agrupar por"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "Limpar lista"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "Exibir"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Exibir cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "Mais como este"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "_?ndice"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "Mostrar conte?do de"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Visualizar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Atualizar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr "Retirar do ?ndice"
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Propriedades"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "_Sobre"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_Sess?o"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "_Editar"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "_Resultados"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "_Ajuda"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pino"
 
@@ -534,7 +525,7 @@
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -687,6 +678,14 @@
 msgid "File extension"
 msgstr "Extens?o do arquivo"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "T?tulo"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Diret?rio"
@@ -736,11 +735,11 @@
 msgid "Query parameters"
 msgstr "Par?metros da consulta"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "Pontua??o"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Extrair"
 
@@ -799,65 +798,65 @@
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "N?o foi poss?vel indexar mail aqui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "j? est? sendo indexado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr "est? na lista negra"
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "Erro no ?ndice no"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "N?o foi poss?vel executar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Sem t?tulo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "N?o foi poss?vel obter fonte de download para o protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "N?o foi poss?vel carregar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "Imposs?vel indexar tipo de arquivo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr "no"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META tag n?o s?o permitidos no ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "N?o foi poss?vel indexar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "N?o foi poss?vel atualizar documento"

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/ru.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.70\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-01-09 21:19+0800\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
@@ -24,27 +24,27 @@
 msgid "Current User"
 msgstr "??????? ????????????"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "??? web-????????"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "??? ?????????"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 #, fuzzy
 msgid "Date"
 msgstr "?"
@@ -107,24 +107,10 @@
 msgid "Import"
 msgstr "??????"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "?????? URL"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "????????"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "URL"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "????"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "???????? ??????????"
@@ -151,309 +137,314 @@
 msgid "Helper application"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "????????? ?????????"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "??? ????????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "??????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "N/A"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 #, fuzzy
 msgid "Undefined"
 msgstr "<??????????????>"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "??????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "???????????? ?????????"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "??????????, ??????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "?????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "????????? ????? (??)"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "??????????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "?????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "?? ????????????? ??????????"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "?????????? ??????? ?????????"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "?????????? ????????????? ??????, ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "??? ????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "?????????? ????????????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "?????????????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "_?????????"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr "???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr "?????????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "??????? ???????? ?? ??????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "??????? ??? ????????? ?? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "?????????? ?????????? ??? ?????????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "(C) 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "???????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "???????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "?????????? ??????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "?? ??????? ???? ???? ?????? ??? ?? ?????????. ????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "???????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "???????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr "?????? ?? ??????????"
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "?? ???? ????????? ??????? ?? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "??????????, ??????? ????????????? ???? Google API"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "?? ???? ?????????? ?? ????????? ?? ?????????? ??? ???? ??????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "??????:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "??????????? ???????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 msgid "Status"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "????????? ??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "??? ?????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "???????? ????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "???????????? ??"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "???????? ??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "_???"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "???????? ????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "????????? ?? ????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "_??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "?????? ???????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr "????? ??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "? ?????????..."
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "_??????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "_?????????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -534,7 +525,7 @@
 msgid "Personal"
 msgstr "??????"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "??????????????"
 
@@ -680,6 +671,14 @@
 msgid "File extension"
 msgstr "?????????? ?????"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "????????"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "URL"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "???????? ??????????"
@@ -729,11 +728,11 @@
 msgid "Query parameters"
 msgstr "????????? ???????"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "????"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "??????????"
 
@@ -792,65 +791,65 @@
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "?????? ????????????? ????? ?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "??? ??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr "??????????? ? ?????? ??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "?????? ??????? ??"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "?? ??????? ??????? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "?? ??????? ????????? ?????? ? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "??? ????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "?? ??????? ???????? ????????? ??? ?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "?? ??????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "?????????? ????????????? ?????? ??? ??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr "?"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "META-???? ??????? ????????? ??????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "?????????? ????????? ??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr "?????????? ??????????????? ????????(?)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "?????????? ???????? ????????"

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2007-04-26 11:37:20 UTC (rev 817)
+++ trunk/po/sv.po	2007-04-26 11:51:58 UTC (rev 818)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.70\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2006-12-03 16:44+0000\n"
+"POT-Creation-Date: 2007-04-26 19:51+0800\n"
 "PO-Revision-Date: 2007-02-20 13:13+0800\n"
 "Last-Translator: Daniel Nylander <po at danielnylander.se>\n"
 "Language-Team: Swedish <sv at li.org>\n"
@@ -25,27 +25,27 @@
 msgid "Current User"
 msgstr "Aktuell anv?ndare"
 
-#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:325
-#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
-#: UI/GTK2/src/mainWindow.cc:1017 UI/GTK2/src/mainWindow.cc:1188
-#: UI/GTK2/src/mainWindow.cc:1231 UI/GTK2/src/mainWindow.cc:1253
-#: UI/GTK2/src/mainWindow.cc:1284 UI/GTK2/src/mainWindow.cc:1866
-#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1345
-#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:813 UI/GTK2/src/WorkerThreads.cpp:872
+#: UI/GTK2/src/EnginesTree.cpp:339 UI/GTK2/src/mainWindow.cc:324
+#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
+#: UI/GTK2/src/mainWindow.cc:1027 UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1240 UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1293 UI/GTK2/src/mainWindow.cc:1930
+#: UI/GTK2/src/PinotSettings.cpp:243 UI/GTK2/src/PinotSettings.cpp:1344
+#: UI/GTK2/src/PinotSettings.cpp:1400 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:811 UI/GTK2/src/WorkerThreads.cpp:870
 msgid "My Web Pages"
 msgstr "Mina webbsidor"
 
-#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:319
-#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1024
-#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1346
-#: UI/GTK2/src/PinotSettings.cpp:1402 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:818 UI/GTK2/src/WorkerThreads.cpp:882
+#: UI/GTK2/src/EnginesTree.cpp:340 UI/GTK2/src/mainWindow.cc:318
+#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1034
+#: UI/GTK2/src/PinotSettings.cpp:244 UI/GTK2/src/PinotSettings.cpp:1345
+#: UI/GTK2/src/PinotSettings.cpp:1401 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:816 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Documents"
 msgstr "Mina dokument"
 
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
-#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:145
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
 #, fuzzy
 msgid "Date"
 msgstr "p?"
@@ -107,24 +107,10 @@
 msgid "Import"
 msgstr "Importera"
 
-#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:217
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
 msgid "Import URL"
 msgstr "Importera url"
 
-#: UI/GTK2/src/IndexTree.cpp:68 UI/GTK2/src/queryDialog.cc:122
-#: UI/GTK2/src/ResultsTree.cpp:127
-msgid "Title"
-msgstr "Titel"
-
-#: UI/GTK2/src/IndexTree.cpp:73 UI/GTK2/src/queryDialog.cc:123
-#: UI/GTK2/src/ResultsTree.cpp:137
-msgid "URL"
-msgstr "Url"
-
-#: UI/GTK2/src/IndexTree.cpp:78
-msgid "Timestamp"
-msgstr "Tidsst?mpel"
-
 #: UI/GTK2/src/IndexPage.cpp:51
 msgid "Show Previous"
 msgstr "Visa f?reg?ende"
@@ -151,310 +137,315 @@
 msgid "Helper application"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:141
+#: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
 msgstr "Fr?genamn"
 
-#: UI/GTK2/src/mainWindow.cc:146
+#: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
 msgstr "Senaste k?rning"
 
-#: UI/GTK2/src/mainWindow.cc:151
+#: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
 msgstr "Sammandrag"
 
-#: UI/GTK2/src/mainWindow.cc:184
+#: UI/GTK2/src/mainWindow.cc:183
 msgid "Show all search engines"
 msgstr "Visa alla s?kmotorer"
 
-#: UI/GTK2/src/mainWindow.cc:185
+#: UI/GTK2/src/mainWindow.cc:184
 msgid "Add index"
 msgstr "L?gg till index"
 
-#: UI/GTK2/src/mainWindow.cc:186
+#: UI/GTK2/src/mainWindow.cc:185
 msgid "Remove index"
 msgstr "Ta bort index"
 
-#: UI/GTK2/src/mainWindow.cc:192
+#: UI/GTK2/src/mainWindow.cc:191
 msgid "Ready"
 msgstr "Redo"
 
-#: UI/GTK2/src/mainWindow.cc:243
+#: UI/GTK2/src/mainWindow.cc:242
 msgid "N/A"
 msgstr "-"
 
-#: UI/GTK2/src/mainWindow.cc:258
+#: UI/GTK2/src/mainWindow.cc:257
 #, fuzzy
 msgid "Undefined"
 msgstr "<odefinierad>"
 
-#: UI/GTK2/src/mainWindow.cc:476
+#: UI/GTK2/src/mainWindow.cc:475
 msgid "Result location is"
 msgstr "Resultatplatsen ?r"
 
-#: UI/GTK2/src/mainWindow.cc:551
+#: UI/GTK2/src/mainWindow.cc:550
 msgid "Document location is"
 msgstr "Dokumentplatsen ?r"
 
-#: UI/GTK2/src/mainWindow.cc:877
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Visar"
 
-#: UI/GTK2/src/mainWindow.cc:882
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "av"
 
-#: UI/GTK2/src/mainWindow.cc:887
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "dokument, b?rjar med"
 
-#: UI/GTK2/src/mainWindow.cc:920
+#: UI/GTK2/src/mainWindow.cc:927
 msgid "Query"
 msgstr "Fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:924 UI/GTK2/src/mainWindow.cc:2934
+#: UI/GTK2/src/mainWindow.cc:931 UI/GTK2/src/mainWindow.cc:3003
 msgid "on"
 msgstr "p?"
 
-#: UI/GTK2/src/mainWindow.cc:928
+#: UI/GTK2/src/mainWindow.cc:935
 msgid "ended"
 msgstr "slutade"
 
-#: UI/GTK2/src/mainWindow.cc:1053
+#: UI/GTK2/src/mainWindow.cc:1063
 msgid "More Like"
 msgstr "Kanske mer som"
 
-#: UI/GTK2/src/mainWindow.cc:1114
+#: UI/GTK2/src/mainWindow.cc:1124
 msgid "Updated label(s)"
 msgstr "Uppdaterade etikett(er)"
 
-#: UI/GTK2/src/mainWindow.cc:1198
+#: UI/GTK2/src/mainWindow.cc:1208
 msgid "Updated document"
 msgstr "Uppdaterade dokument"
 
-#: UI/GTK2/src/mainWindow.cc:1211
+#: UI/GTK2/src/mainWindow.cc:1221
 msgid "Indexed"
 msgstr "Indexerade"
 
-#: UI/GTK2/src/mainWindow.cc:1254
+#: UI/GTK2/src/mainWindow.cc:1263
 msgid "Unindexed document(s)"
 msgstr "Ej indexerade dokument"
 
-#: UI/GTK2/src/mainWindow.cc:1295
+#: UI/GTK2/src/mainWindow.cc:1303
 msgid "Updated document properties"
 msgstr "Egenskaper f?r uppdaterade dokument"
 
-#: UI/GTK2/src/mainWindow.cc:1348
+#: UI/GTK2/src/mainWindow.cc:1356
 msgid "Couldn't rename index, name"
 msgstr "Kunde inte byta namn p? index, namn"
 
-#: UI/GTK2/src/mainWindow.cc:1352 UI/GTK2/src/mainWindow.cc:2253
-#: UI/GTK2/src/mainWindow.cc:2764
+#: UI/GTK2/src/mainWindow.cc:1360 UI/GTK2/src/mainWindow.cc:2321
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "anv?nds redan"
 
-#: UI/GTK2/src/mainWindow.cc:1365
+#: UI/GTK2/src/mainWindow.cc:1373
 msgid "Couldn't rename index"
 msgstr "Kunde inte byta namn p? index"
 
-#: UI/GTK2/src/mainWindow.cc:1378
+#: UI/GTK2/src/mainWindow.cc:1386
 msgid "Edited index"
 msgstr "Redigerade index"
 
-#: UI/GTK2/src/mainWindow.cc:1763 UI/GTK2/src/mainWindow.cc:2423
+#: UI/GTK2/src/mainWindow.cc:1738
+#, fuzzy
+msgid "Export Results"
+msgstr "_Resultat"
+
+#: UI/GTK2/src/mainWindow.cc:1827 UI/GTK2/src/mainWindow.cc:2491
 msgid "Live query"
 msgstr "Levande fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:1789
+#: UI/GTK2/src/mainWindow.cc:1853
 msgid "Couldn't find query"
 msgstr "Kunde inte hitta fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:1982 UI/GTK2/src/WorkerThreads.cpp:629
-#: UI/GTK2/src/WorkerThreads.cpp:1625
+#: UI/GTK2/src/mainWindow.cc:2045 UI/GTK2/src/WorkerThreads.cpp:628
+#: UI/GTK2/src/WorkerThreads.cpp:1623
 msgid "Index"
 msgstr "Index"
 
-#: UI/GTK2/src/mainWindow.cc:1986 UI/GTK2/src/WorkerThreads.cpp:633
-#: UI/GTK2/src/WorkerThreads.cpp:1629
+#: UI/GTK2/src/mainWindow.cc:2049 UI/GTK2/src/WorkerThreads.cpp:632
+#: UI/GTK2/src/WorkerThreads.cpp:1627
 msgid "doesn't exist"
 msgstr "finns inte"
 
-#: UI/GTK2/src/mainWindow.cc:2140
+#: UI/GTK2/src/mainWindow.cc:2206
 msgid "Remove this document from the index ?"
 msgstr "Ta bort detta dokument fr?n indexet?"
 
-#: UI/GTK2/src/mainWindow.cc:2159
+#: UI/GTK2/src/mainWindow.cc:2225
 msgid "Remove these documents from the index ?"
 msgstr "Ta bort dessa dokument fr?n indexet?"
 
-#: UI/GTK2/src/mainWindow.cc:2203
+#: UI/GTK2/src/mainWindow.cc:2271
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Ett metas?kningsverktyg f?r Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2204
+#: UI/GTK2/src/mainWindow.cc:2272
 msgid "Search the Web and your documents !"
 msgstr "S?k p? webben och i dina dokument!"
 
-#: UI/GTK2/src/mainWindow.cc:2205
+#: UI/GTK2/src/mainWindow.cc:2273
 msgid "(C) 2005 Fabrice Colin"
 msgstr "? 2005 Fabrice Colin"
 
-#: UI/GTK2/src/mainWindow.cc:2249
+#: UI/GTK2/src/mainWindow.cc:2317
 msgid "Index name"
 msgstr "Indexnamn"
 
-#: UI/GTK2/src/mainWindow.cc:2264
+#: UI/GTK2/src/mainWindow.cc:2332
 msgid "Couldn't add index"
 msgstr "Kunde inte l?gga till index"
 
-#: UI/GTK2/src/mainWindow.cc:2278
+#: UI/GTK2/src/mainWindow.cc:2346
 msgid "Added new index"
 msgstr "Lade till nytt index"
 
-#: UI/GTK2/src/mainWindow.cc:2313
+#: UI/GTK2/src/mainWindow.cc:2381
 msgid "Couldn't remove index"
 msgstr "Kunde inte ta bort index"
 
-#: UI/GTK2/src/mainWindow.cc:2578
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "?tminstone en uppgift har inte f?rdigst?llts ?n. Avsluta nu?"
 
-#: UI/GTK2/src/mainWindow.cc:2760
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Fr?genamn"
 
-#: UI/GTK2/src/mainWindow.cc:2787
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "Kunde inte uppdatera fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2795
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Redigerade fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2802
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "Kunde inte l?gga till fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2810
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Lade till ny fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2823
+#: UI/GTK2/src/mainWindow.cc:2892
 msgid "Query is not set"
 msgstr "Fr?gan ?r inte inst?lld"
 
-#: UI/GTK2/src/mainWindow.cc:2834
+#: UI/GTK2/src/mainWindow.cc:2903
 msgid "No search engine selected"
 msgstr "Ingen s?kmotor vald"
 
-#: UI/GTK2/src/mainWindow.cc:2921
+#: UI/GTK2/src/mainWindow.cc:2990
 msgid "Please set the Google API key first"
 msgstr "St?ll in Google API-nyckeln f?rst"
 
-#: UI/GTK2/src/mainWindow.cc:2930
+#: UI/GTK2/src/mainWindow.cc:2999
 msgid "Running query"
 msgstr "K?r fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3114
+#: UI/GTK2/src/mainWindow.cc:3183
 msgid "No default application defined for type"
 msgstr "Inget standardprogram definierat f?r typen"
 
-#: UI/GTK2/src/mainWindow_glade.cc:125
+#: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
 msgstr "Fr?ga:"
 
-#: UI/GTK2/src/mainWindow_glade.cc:137
+#: UI/GTK2/src/mainWindow_glade.cc:138
 msgid "Edit"
 msgstr "Redigera"
 
-#: UI/GTK2/src/mainWindow_glade.cc:146
+#: UI/GTK2/src/mainWindow_glade.cc:147
 msgid "Stored queries"
 msgstr "Lagrade fr?gor"
 
-#: UI/GTK2/src/mainWindow_glade.cc:163 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
 #, fuzzy
 msgid "Status"
 msgstr "Statistik"
 
-#: UI/GTK2/src/mainWindow_glade.cc:184
+#: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
 msgstr "S?kmotor"
 
-#: UI/GTK2/src/mainWindow_glade.cc:187
+#: UI/GTK2/src/mainWindow_glade.cc:188
 msgid "Host Name"
 msgstr "V?rdnamn"
 
-#: UI/GTK2/src/mainWindow_glade.cc:190
+#: UI/GTK2/src/mainWindow_glade.cc:191
 msgid "Show Extract"
 msgstr "Visa utdrag"
 
-#: UI/GTK2/src/mainWindow_glade.cc:193
+#: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
 msgstr "Gruppera efter"
 
-#: UI/GTK2/src/mainWindow_glade.cc:196
+#: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
 msgstr "T?m lista"
 
-#: UI/GTK2/src/mainWindow_glade.cc:202
+#: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
 msgstr "Vi_sa"
 
-#: UI/GTK2/src/mainWindow_glade.cc:205
+#: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
 msgstr "Visa cache"
 
-#: UI/GTK2/src/mainWindow_glade.cc:208
+#: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
 msgstr "Mer som det h?r"
 
-#: UI/GTK2/src/mainWindow_glade.cc:211 UI/GTK2/src/mainWindow_glade.cc:247
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
 msgstr "_Index"
 
-#: UI/GTK2/src/mainWindow_glade.cc:214
+#: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
 msgstr "Lista inneh?ll f?r"
 
-#: UI/GTK2/src/mainWindow_glade.cc:223
+#: UI/GTK2/src/mainWindow_glade.cc:227
 msgid "View"
 msgstr "Visa"
 
-#: UI/GTK2/src/mainWindow_glade.cc:226
+#: UI/GTK2/src/mainWindow_glade.cc:230
 msgid "Update"
 msgstr "Uppdatera"
 
-#: UI/GTK2/src/mainWindow_glade.cc:229
+#: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
 msgstr "Avindexera"
 
-#: UI/GTK2/src/mainWindow_glade.cc:232
+#: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
 msgid "Properties"
 msgstr "Egenskaper"
 
-#: UI/GTK2/src/mainWindow_glade.cc:235
+#: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
 msgstr "_Om"
 
-#: UI/GTK2/src/mainWindow_glade.cc:238
+#: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
 msgstr "_Session"
 
-#: UI/GTK2/src/mainWindow_glade.cc:241
+#: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
 msgstr "R_edigera"
 
-#: UI/GTK2/src/mainWindow_glade.cc:244
+#: UI/GTK2/src/mainWindow_glade.cc:248
 msgid "_Results"
 msgstr "_Resultat"
 
-#: UI/GTK2/src/mainWindow_glade.cc:250
+#: UI/GTK2/src/mainWindow_glade.cc:254
 msgid "_Help"
 msgstr "_Hj?lp"
 
-#: UI/GTK2/src/mainWindow_glade.cc:387
+#: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
 msgstr "Pinot"
 
@@ -535,7 +526,7 @@
 msgid "Personal"
 msgstr "Personlig"
 
-#: UI/GTK2/src/PinotSettings.cpp:1141
+#: UI/GTK2/src/PinotSettings.cpp:1140
 msgid "Unclassified"
 msgstr "Oklassificerad"
 
@@ -682,6 +673,14 @@
 msgid "File extension"
 msgstr "Fil?ndelse"
 
+#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "Titel"
+
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr "Url"
+
 #: UI/GTK2/src/queryDialog.cc:124
 msgid "Directory"
 msgstr "Katalog"
@@ -731,11 +730,11 @@
 msgid "Query parameters"
 msgstr "Fr?geparametrar"
 
-#: UI/GTK2/src/ResultsTree.cpp:117
+#: UI/GTK2/src/ResultsTree.cpp:122
 msgid "Score"
 msgstr "Betyg"
 
-#: UI/GTK2/src/ResultsTree.cpp:174
+#: UI/GTK2/src/ResultsTree.cpp:180
 msgid "Extract"
 msgstr "Utdrag"
 
@@ -793,65 +792,65 @@
 msgid "Errors"
 msgstr "Fel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:302
+#: UI/GTK2/src/WorkerThreads.cpp:301
 msgid "Can't index mail here"
 msgstr "Kan inte indexera post h?r"
 
-#: UI/GTK2/src/WorkerThreads.cpp:323
+#: UI/GTK2/src/WorkerThreads.cpp:322
 msgid "is already being indexed"
 msgstr "h?ller redan p? att bli indexerad"
 
-#: UI/GTK2/src/WorkerThreads.cpp:333
+#: UI/GTK2/src/WorkerThreads.cpp:332
 msgid "is blacklisted"
 msgstr "?r svartlistad"
 
-#: UI/GTK2/src/WorkerThreads.cpp:642 UI/GTK2/src/WorkerThreads.cpp:955
-#: UI/GTK2/src/WorkerThreads.cpp:1040 UI/GTK2/src/WorkerThreads.cpp:1049
-#: UI/GTK2/src/WorkerThreads.cpp:1235 UI/GTK2/src/WorkerThreads.cpp:1505
-#: UI/GTK2/src/WorkerThreads.cpp:1638
+#: UI/GTK2/src/WorkerThreads.cpp:641 UI/GTK2/src/WorkerThreads.cpp:953
+#: UI/GTK2/src/WorkerThreads.cpp:1038 UI/GTK2/src/WorkerThreads.cpp:1047
+#: UI/GTK2/src/WorkerThreads.cpp:1233 UI/GTK2/src/WorkerThreads.cpp:1503
+#: UI/GTK2/src/WorkerThreads.cpp:1636
 msgid "Index error on"
 msgstr "Indexfel p?"
 
-#: UI/GTK2/src/WorkerThreads.cpp:765 UI/GTK2/src/WorkerThreads.cpp:976
+#: UI/GTK2/src/WorkerThreads.cpp:763 UI/GTK2/src/WorkerThreads.cpp:974
 msgid "Couldn't create search engine"
 msgstr "Kunde inte skapa s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:791 UI/GTK2/src/WorkerThreads.cpp:990
+#: UI/GTK2/src/WorkerThreads.cpp:789 UI/GTK2/src/WorkerThreads.cpp:988
 msgid "Couldn't run query on search engine"
 msgstr "Kunde inte k?ra fr?ga p? s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:835
+#: UI/GTK2/src/WorkerThreads.cpp:833
 msgid "No title"
 msgstr "Ingen titel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1141
 msgid "Couldn't obtain downloader for protocol"
 msgstr "Kunde inte f? protokollh?mtare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1168
+#: UI/GTK2/src/WorkerThreads.cpp:1166
 msgid "Couldn't retrieve"
 msgstr "Kunde inte h?mta"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1265 UI/GTK2/src/WorkerThreads.cpp:1344
+#: UI/GTK2/src/WorkerThreads.cpp:1263 UI/GTK2/src/WorkerThreads.cpp:1342
 msgid "Cannot index document type"
 msgstr "Kan inte indexera dokumenttyp"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1269 UI/GTK2/src/WorkerThreads.cpp:1348
+#: UI/GTK2/src/WorkerThreads.cpp:1267 UI/GTK2/src/WorkerThreads.cpp:1346
 msgid "at"
 msgstr "p?"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1380
+#: UI/GTK2/src/WorkerThreads.cpp:1378
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META-tagg f?rbjuder indexering"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1434
+#: UI/GTK2/src/WorkerThreads.cpp:1432
 msgid "Couldn't index"
 msgstr "Kunde inte indexera"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1516
+#: UI/GTK2/src/WorkerThreads.cpp:1514
 msgid "Couldn't unindex document(s)"
 msgstr "Kunde inte avindexera dokument"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1650
+#: UI/GTK2/src/WorkerThreads.cpp:1648
 msgid "Couldn't update document"
 msgstr "Kunde inte uppdatera dokument"



From fabricecolin at mail.berlios.de  Thu Apr 26 15:39:48 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 15:39:48 +0200
Subject: [Pinot-svn] r819 - trunk/Index
Message-ID: <200704261339.l3QDdmNL008568@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 15:39:47 +0200 (Thu, 26 Apr 2007)
New Revision: 819

Modified:
   trunk/Index/XapianIndex.cpp
Log:
Add term XDIR:/ to documents so that searches can be restricted with "dir:/".


Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-04-26 11:51:58 UTC (rev 818)
+++ trunk/Index/XapianIndex.cpp	2007-04-26 13:39:47 UTC (rev 819)
@@ -340,6 +340,10 @@
 	if (tree.empty() == false)
 	{
 		doc.add_term(string("XDIR:") + XapianDatabase::limitTermLength(Url::escapeUrl(tree), true));
+		if (tree[0] == '/')
+		{
+			doc.add_term("XDIR:/");
+		}
 		string::size_type slashPos = tree.find('/', 1);
 		while (slashPos != string::npos)
 		{
@@ -455,6 +459,10 @@
 	if (tree.empty() == false)
 	{
 		commonTerms.insert(string("XDIR:") + XapianDatabase::limitTermLength(Url::escapeUrl(tree), true));
+		if (tree[0] == '/')
+		{
+			commonTerms.insert("XDIR:/");
+		}
 		string::size_type slashPos = tree.find('/', 1);
 		while (slashPos != string::npos)
 		{



From fabricecolin at mail.berlios.de  Thu Apr 26 16:25:41 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 16:25:41 +0200
Subject: [Pinot-svn] r820 - trunk
Message-ID: <200704261425.l3QEPftV021699@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 16:25:41 +0200 (Thu, 26 Apr 2007)
New Revision: 820

Modified:
   trunk/README
Log:
Explain saving of results.


Modified: trunk/README
===================================================================
--- trunk/README	2007-04-26 13:39:47 UTC (rev 819)
+++ trunk/README	2007-04-26 14:25:41 UTC (rev 820)
@@ -13,11 +13,12 @@
 8. File formats
 9. File patterns
 10. More Like This
-11. D-Bus service
-12. Deskbar Applet plugin
-13. How to reset indexes
-14. Dependencies
-15. FAQ
+11. Saving results
+12. D-Bus service
+13. Deskbar Applet plugin
+14. How to reset indexes
+15. Dependencies
+16. FAQ
 
 
 1. What is Pinot
@@ -272,9 +273,22 @@
    "More Like Me".
 
 
-11. D-Bus service
+11. Saving results
 
 
+   Starting with version 0.72, lists of results can be saved to disk by
+   selecting the Save As menuitem under Results. Two output formats are
+   available to choose from in the file selector opened by Save As :
+     * CSV, a text format
+       The semi-colon character (';') is used to delimit fields.
+     * OpenSearch response, a XML/RSS format
+       See http://www.opensearch.org/Specifications/OpenSearch/1.1#OpenSearch_response_elements
+       for details.
+
+
+12. D-Bus service
+
+
    D-Bus activation makes sure the service is running whenever one of its
    methods is invoked by any consumer application. For instance, when
    directories or mbox files are configured for indexing in the UI, clicking
@@ -314,7 +328,7 @@
   For a list of available D-Bus methods, see the file pinot-dbus-daemon.xml.
 
 
-12. Deskbar Applet plugin
+13. Deskbar Applet plugin
 
 
   Deskbar Applet provides an omnipresent versatile search interface for Gnome.
@@ -330,7 +344,7 @@
   results in the same order as the Pinot UI.
 
 
-13. How to reset indexes
+14. How to reset indexes
 
 
   You may wish to reset one of the index and start from scratch. There
@@ -350,7 +364,7 @@
     delete from CrawlSources;"
 
 
-14. Dependencies
+15. Dependencies
 
 
   The version numbers indicate the minimum version Pinot has been tested
@@ -427,7 +441,7 @@
 ---------------------------------------------------------------
 
 
-15. FAQ
+16. FAQ
 
 
   * At startup, when listing an index or indexing documents, Pinot complains



From fabricecolin at mail.berlios.de  Thu Apr 26 16:27:31 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 26 Apr 2007 16:27:31 +0200
Subject: [Pinot-svn] r821 - in trunk: . UI/GTK2/src
Message-ID: <200704261427.l3QERVkV021825@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-26 16:27:30 +0200 (Thu, 26 Apr 2007)
New Revision: 821

Modified:
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   trunk/configure.in
Log:
Upped versio number to 0.72.
Older versions of My Documents are upgraded by the daemon.


Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-04-26 14:25:41 UTC (rev 820)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-04-26 14:27:30 UTC (rev 821)
@@ -366,7 +366,7 @@
 	XapianIndex daemonIndex(settings.m_daemonIndexLocation);
 	double indexVersion = daemonIndex.getVersion();
 	// Is an upgrade necessary ?
-	if (indexVersion <= 0.70)
+	if (indexVersion < 0.72)
 	{
 		cout << "Upgrading index from version " << indexVersion << " to " << daemonVersion << endl;
 

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2007-04-26 14:25:41 UTC (rev 820)
+++ trunk/configure.in	2007-04-26 14:27:30 UTC (rev 821)
@@ -2,7 +2,7 @@
 # using glademm V2.6.0
 
 AC_PREREQ(2.50)
-AC_INIT(pinot, 0.71,[fabricecolin at users.berlios.de])
+AC_INIT(pinot, 0.72,[fabricecolin at users.berlios.de])
 AM_INIT_AUTOMAKE
 AC_CONFIG_HEADERS(config.h)
 



From fabricecolin at mail.berlios.de  Fri Apr 27 15:35:45 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 27 Apr 2007 15:35:45 +0200
Subject: [Pinot-svn] r822 - trunk
Message-ID: <200704271335.l3RDZj7M028602@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-27 15:35:45 +0200 (Fri, 27 Apr 2007)
New Revision: 822

Modified:
   trunk/TODO
Log:
Update.


Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-04-26 14:27:30 UTC (rev 821)
+++ trunk/TODO	2007-04-27 13:35:45 UTC (rev 822)
@@ -28,6 +28,7 @@
 - XmLFilter is slow
 - Filters should have a version number so that new versions force reindexing documents of the
  given type
+- Distribute filters' ChangeLog
 
 Monitor
 - Implement support for Solaris FEM
@@ -52,7 +53,6 @@
 - Get hold of stopwords lists for the languages supported by Xapian's stemmers
  and remove stopwords from queries as first step of search
 - Make multi-step index search optional
-- AbstractGenerator seed terms should only be the query terms matched by the document
 
 Index
 - Play around with the XAPIAN_FLUSH_THRESHOLD env var
@@ -132,8 +132,6 @@
  when the daemon is busy indexing : is it because we are trying to get hold of
  a revision of the index ?
 - Delete all temporary files when exiting
-- Size is lost by both Index and ResultsTree
-- Add less than, equal to. greater than filters on size for stored queries
+- Add less than, equal to, greater than filters on size for stored queries
 - Allow filtering index lists with a stored query instead of just labels
 - Show with icons which stored queries are fully, partially or not at all Web friendly
-



From fabricecolin at mail.berlios.de  Fri Apr 27 16:00:51 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 27 Apr 2007 16:00:51 +0200
Subject: [Pinot-svn] r823 - in trunk: Index Search UI/GTK2/src
Message-ID: <200704271400.l3RE0pZN030267@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-27 16:00:50 +0200 (Fri, 27 Apr 2007)
New Revision: 823

Modified:
   trunk/Index/pinot-index.1
   trunk/Search/pinot-search.1
   trunk/UI/GTK2/src/pinot-dbus-daemon.1
   trunk/UI/GTK2/src/pinot.1
Log:
Updated man pages.


Modified: trunk/Index/pinot-index.1
===================================================================
--- trunk/Index/pinot-index.1	2007-04-27 13:35:45 UTC (rev 822)
+++ trunk/Index/pinot-index.1	2007-04-27 14:00:50 UTC (rev 823)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-INDEX "1" "March 2007" "pinot-index - pinot 0.70" "User Commands"
+.TH PINOT-INDEX "1" "April 2007" "pinot-index - pinot 0.72" "User Commands"
 .SH NAME
 pinot-index \- Index documents from the command-line
 .SH SYNOPSIS

Modified: trunk/Search/pinot-search.1
===================================================================
--- trunk/Search/pinot-search.1	2007-04-27 13:35:45 UTC (rev 822)
+++ trunk/Search/pinot-search.1	2007-04-27 14:00:50 UTC (rev 823)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-SEARCH "1" "March 2007" "pinot-search - pinot 0.70" "User Commands"
+.TH PINOT-SEARCH "1" "April 2007" "pinot-search - pinot 0.72" "User Commands"
 .SH NAME
 pinot-search \- Query search engines from the command-line
 .SH SYNOPSIS
@@ -24,6 +24,12 @@
 \fB\-t\fR, \fB\-\-proxytype\fR
 proxy type (default HTTP, SOCKS4, SOCKS5)
 .TP
+\fB\-c\fR, \fB\-\-tocsv\fR
+file to export results in CSV format to
+.TP
+\fB\-x\fR, \fB\-\-toxml\fR
+file to export results in XML format to
+.TP
 \fB\-v\fR, \fB\-\-version\fR
 output version information and exit
 .PP

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.1
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.1	2007-04-27 13:35:45 UTC (rev 822)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.1	2007-04-27 14:00:50 UTC (rev 823)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-DBUS-DAEMON "1" "March 2007" "pinot-dbus-daemon - pinot 0.70" "User Commands"
+.TH PINOT-DBUS-DAEMON "1" "April 2007" "pinot-dbus-daemon - pinot 0.72" "User Commands"
 .SH NAME
 pinot-dbus-daemon \- D-Bus search and index daemon
 .SH SYNOPSIS

Modified: trunk/UI/GTK2/src/pinot.1
===================================================================
--- trunk/UI/GTK2/src/pinot.1	2007-04-27 13:35:45 UTC (rev 822)
+++ trunk/UI/GTK2/src/pinot.1	2007-04-27 14:00:50 UTC (rev 823)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT "1" "March 2007" "pinot - pinot 0.70" "User Commands"
+.TH PINOT "1" "April 2007" "pinot - pinot 0.72" "User Commands"
 .SH NAME
 pinot \- A metasearch tool for the Free Desktop
 .SH SYNOPSIS



From fabricecolin at mail.berlios.de  Fri Apr 27 17:48:26 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 27 Apr 2007 17:48:26 +0200
Subject: [Pinot-svn] r824 - trunk/Tokenize
Message-ID: <200704271548.l3RFmQ5Q005224@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-27 17:48:25 +0200 (Fri, 27 Apr 2007)
New Revision: 824

Modified:
   trunk/Tokenize/Makefile.am
Log:
Better have Filter.cc in the libraries source lists.


Modified: trunk/Tokenize/Makefile.am
===================================================================
--- trunk/Tokenize/Makefile.am	2007-04-27 14:00:50 UTC (rev 823)
+++ trunk/Tokenize/Makefile.am	2007-04-27 15:48:25 UTC (rev 824)
@@ -17,6 +17,7 @@
 noinst_LTLIBRARIES = libTokenize.la
 
 libexternalfilter_la_SOURCES = \
+	filters/Filter.cc \
 	filters/ExternalFilter.cc
 
 libexternalfilter_la_LDFLAGS = -module @XML_CFLAGS@
@@ -24,6 +25,7 @@
 libexternalfilter_la_LIBADD = -L../Utils -lBasicUtils
 
 libmboxfilter_la_SOURCES = \
+	filters/Filter.cc \
 	filters/GMimeMboxFilter.cc
 
 libmboxfilter_la_LDFLAGS = -module @GMIME_CFLAGS@
@@ -31,6 +33,7 @@
 libmboxfilter_la_LIBADD = -L../Utils -lBasicUtils
 
 libtaglibfilter_la_SOURCES = \
+	filters/Filter.cc \
 	filters/TagLibMusicFilter.cc
 
 libtaglibfilter_la_LDFLAGS = -module @TAGLIB_LIBS@



From fabricecolin at mail.berlios.de  Fri Apr 27 17:52:42 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 27 Apr 2007 17:52:42 +0200
Subject: [Pinot-svn] r825 - trunk/UI/GTK2/src
Message-ID: <200704271552.l3RFqg4J005574@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-27 17:52:41 +0200 (Fri, 27 Apr 2007)
New Revision: 825

Modified:
   trunk/UI/GTK2/src/DaemonState.cpp
   trunk/UI/GTK2/src/DaemonState.h
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
Log:
Sometimes when the daemon is started via D-Bus activation and spends too long
upgrading the index, it receives a SIGKILL... I have moved the upgrade to
DaemonState::start() so that it happens after D-Bus is initialized and before
the main loop is run. This seems to help.


Modified: trunk/UI/GTK2/src/DaemonState.cpp
===================================================================
--- trunk/UI/GTK2/src/DaemonState.cpp	2007-04-27 15:48:25 UTC (rev 824)
+++ trunk/UI/GTK2/src/DaemonState.cpp	2007-04-27 15:52:41 UTC (rev 825)
@@ -95,11 +95,32 @@
 	return false;
 }
 
-void DaemonState::start(void)
+void DaemonState::start(bool doUpgrade)
 {
 	// Disable implicit flushing after a change
 	WorkerThread::immediateFlush(false);
 
+	// Reset the index ?
+	if (doUpgrade == true)
+	{
+		XapianIndex daemonIndex(PinotSettings::getInstance().m_daemonIndexLocation);
+
+		if (daemonIndex.unindexAllDocuments() == true)
+		{
+			CrawlHistory history(PinotSettings::getInstance().m_historyDatabase);
+			map<unsigned int, string> sources;
+
+			// ...and the history
+			history.getSources(sources);
+			for (std::map<unsigned int, string>::iterator sourceIter = sources.begin();
+				sourceIter != sources.end(); ++sourceIter)
+			{
+				history.deleteItems(sourceIter->first);
+				history.deleteSource(sourceIter->first);
+			}
+		}
+	}
+
 	// Fire up the mail monitor thread now
 	m_pMailHandler = new MboxHandler();
 	MonitorThread *pMailMonitorThread = new MonitorThread(m_pMailMonitor, m_pMailHandler);

Modified: trunk/UI/GTK2/src/DaemonState.h
===================================================================
--- trunk/UI/GTK2/src/DaemonState.h	2007-04-27 15:48:25 UTC (rev 824)
+++ trunk/UI/GTK2/src/DaemonState.h	2007-04-27 15:52:41 UTC (rev 825)
@@ -33,7 +33,7 @@
 		DaemonState();
 		virtual ~DaemonState();
 
-		void start(void);
+		void start(bool doUpgrade);
 
 		void signal_scanner(void);
 

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-04-27 15:48:25 UTC (rev 824)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-04-27 15:52:41 UTC (rev 825)
@@ -171,6 +171,7 @@
 	string prefixDir(PREFIX);
 	struct sigaction newAction;
 	int longOptionIndex = 0, priority = 15;
+	bool doUpgrade = false;
 
 	// Look at the options
 	int optionChar = getopt_long(argc, argv, "hpv", g_longOptions, &longOptionIndex);
@@ -317,6 +318,7 @@
 	newAction.sa_flags = 0;
 	newAction.sa_handler = quitAll;
 	sigaction(SIGINT, &newAction, NULL);
+	sigaction(SIGKILL, &newAction, NULL);
 	sigaction(SIGQUIT, &newAction, NULL);
 
 	// Open the daemon index in read-write mode 
@@ -362,32 +364,22 @@
 
 	// What version of the daemon is this ?
 	double daemonVersion = atof(VERSION);
-	// What version is the index at ?
-	XapianIndex daemonIndex(settings.m_daemonIndexLocation);
-	double indexVersion = daemonIndex.getVersion();
-	// Is an upgrade necessary ?
-	if (indexVersion < 0.72)
+	if (daemonVersion > 0.0)
 	{
-		cout << "Upgrading index from version " << indexVersion << " to " << daemonVersion << endl;
+		// What version is the index at ?
+		XapianIndex daemonIndex(settings.m_daemonIndexLocation);
+		double indexVersion = daemonIndex.getVersion();
 
-		// Yes, it is
-		// Reset the index
-		if (daemonIndex.unindexAllDocuments() == true)
+		// Is an upgrade necessary ?
+		if (indexVersion < 0.72)
 		{
-			CrawlHistory history(settings.m_historyDatabase);
-			map<unsigned int, string> sources;
+			cout << "Upgrading index from version " << indexVersion << " to " << daemonVersion << endl;
 
-			// ...and the history
-			history.getSources(sources);
-			for (std::map<unsigned int, string>::iterator sourceIter = sources.begin();
-				sourceIter != sources.end(); ++sourceIter)
-			{
-				history.deleteItems(sourceIter->first);
-				history.deleteSource(sourceIter->first);
-			}
+			// Yes, it is
+			doUpgrade = true;
 		}
+		daemonIndex.setVersion(daemonVersion);
 	}
-	daemonIndex.setVersion(daemonVersion);
 
 	GError *pError = NULL;
 	DBusGConnection *pBus = dbus_g_bus_get(DBUS_BUS_SESSION, &pError);
@@ -433,7 +425,7 @@
 			// Connect to threads' finished signal
 			server.connect();
 
-			server.start();
+			server.start(doUpgrade);
 
 			// Run the main loop
 			g_refMainLoop->run();



From fabricecolin at mail.berlios.de  Sat Apr 28 03:58:37 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 28 Apr 2007 03:58:37 +0200
Subject: [Pinot-svn] r826 - trunk/po
Message-ID: <200704280158.l3S1wbfx017426@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-28 03:58:35 +0200 (Sat, 28 Apr 2007)
New Revision: 826

Modified:
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/it.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
Log:
Synced with current source.


Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/de.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -5,9 +5,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-04-13 15:30+0000\n"
 "Last-Translator: Christian Dywan <christian at twotoasts.de>\n"
 "Language-Team: German <de at li.org>\n"
@@ -450,56 +450,56 @@
 msgid "Pinot"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Englisch"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Finnisch"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Franz?sisch"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Deutsch"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italienisch"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Norwegisch"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugiesisch"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Spanisch"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Schwedisch"
 

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/es.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -6,9 +6,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.70\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-02-21 00:02+0000\n"
 "Last-Translator: Gar Bage <garbage at openfutura.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
@@ -447,56 +447,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Desconocido"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Dan?s"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Finland?s"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Alem?n"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Noruego"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Ruso"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Espa?ol"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Sueco"
 

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/fr.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -6,9 +6,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.70\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Fabrice Colin <fabricecolin at users.berlios.de>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
@@ -448,56 +448,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Inconnu"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Danois"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Hollandais"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Anglais"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Finlandais"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Francais"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Allemand"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italien"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Norvegien"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugais"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Russe"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Espagnol"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Suedois"
 

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/it.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -5,9 +5,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-04-25 10:40+0000\n"
 "Last-Translator: Vincenzo Consales <aquarius987 at gmail.com>\n"
 "Language-Team: Italian <it at li.org>\n"
@@ -447,56 +447,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Sconosciuto"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Danese"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Olandese"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Inglese"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Finlandese"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Francese"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Tedesco"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Norvegese"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portoghese"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Spagnolo"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Svedese"
 

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/nl.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -5,9 +5,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.70\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Fabrice Colin <fabricecolin at users.berlios.de>\n"
 "Language-Team: Dutch <nl at li.org>\n"
@@ -451,56 +451,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Niet bekend"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Deens"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Nederlands"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Engels"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Fins"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Frans"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Duits"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italiaans"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Noors"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugees"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Spaans"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Zweeds"
 

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/pt.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -5,9 +5,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-03-11 10:32+0000\n"
 "Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
@@ -446,56 +446,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Dinamarqu?s"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Finl?ndes"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Alem?o"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Noruegu?s"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Espanhol"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Sueco"
 

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/pt_BR.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -5,9 +5,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.70\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Leonardo Melo <leonardovazmelo at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
@@ -448,56 +448,56 @@
 msgid "Pinot"
 msgstr "Pino"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Danish"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Dutch"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "English"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Terminar"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "French"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "German"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italian"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Norwegian"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Russian"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Spanish"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Swedish"
 

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/ru.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -5,9 +5,9 @@
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.70\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-02-17 17:34+0800\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
@@ -448,56 +448,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "?????????????"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "?????????"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "????????"
 

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2007-04-27 15:52:41 UTC (rev 825)
+++ trunk/po/sv.po	2007-04-28 01:58:35 UTC (rev 826)
@@ -1,14 +1,13 @@
 # Swedish translation for pinot
 # Copyright (c) 2006 Rosetta Contributors and Canonical Ltd 2006
 # This file is distributed under the same license as the pinot package.
-# FIRST AUTHOR <EMAIL at ADDRESS>, 2006.
 #
 #, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.70\n"
+"Project-Id-Version: pinot 0.72\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-04-26 19:51+0800\n"
+"POT-Creation-Date: 2007-04-27 23:44+0800\n"
 "PO-Revision-Date: 2007-02-20 13:13+0800\n"
 "Last-Translator: Daniel Nylander <po at danielnylander.se>\n"
 "Language-Team: Swedish <sv at li.org>\n"
@@ -449,56 +448,56 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:293
+#: UI/GTK2/src/pinot.cc:226 UI/GTK2/src/pinot-dbus-daemon.cc:294
 #: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/propertiesDialog.cc:69
 msgid "Unknown"
 msgstr "Ok?nd"
 
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:294
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:295
 msgid "Danish"
 msgstr "Danska"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:295
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:296
 msgid "Dutch"
 msgstr "Nederl?ndska"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:296
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:297
 msgid "English"
 msgstr "Engelska"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:297
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:298
 msgid "Finnish"
 msgstr "Finska"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:298
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:299
 msgid "French"
 msgstr "Franska"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:299
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:300
 msgid "German"
 msgstr "Tyska"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:300
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:301
 msgid "Italian"
 msgstr "Italienska"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:302
 msgid "Norwegian"
 msgstr "Norska"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:303
 msgid "Portuguese"
 msgstr "Portugisiska"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:304
 msgid "Russian"
 msgstr "Ryska"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:305
 msgid "Spanish"
 msgstr "Spanska"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:306
 msgid "Swedish"
 msgstr "Svenska"
 



From fabricecolin at mail.berlios.de  Sat Apr 28 04:32:45 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 28 Apr 2007 04:32:45 +0200
Subject: [Pinot-svn] r827 - trunk
Message-ID: <200704280232.l3S2WjFU019020@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-28 04:32:44 +0200 (Sat, 28 Apr 2007)
New Revision: 827

Modified:
   trunk/AUTHORS
   trunk/NEWS
Log:
Releasing 0.72 today.


Modified: trunk/AUTHORS
===================================================================
--- trunk/AUTHORS	2007-04-28 01:58:35 UTC (rev 826)
+++ trunk/AUTHORS	2007-04-28 02:32:44 UTC (rev 827)
@@ -8,7 +8,7 @@
 	Marcus Rueckert <darix at web dot de>
 	Manuel Breitfeld <manu_foren at gmx dot net>
 	Gauvain Pocentek <gauvainpocentek at gmail dot com>
-	Oskar <???>
+	Oskar <sebastian dot jauch at web dot de>
 	Thierry Thomas <thierry at freebsd dot org>
 	Neal Becker <ndbecker2 at gmail dot com>
 	Gabriel C <nix dot or dot die at googlemail dot com> 

Modified: trunk/NEWS
===================================================================
--- trunk/NEWS	2007-04-28 01:58:35 UTC (rev 826)
+++ trunk/NEWS	2007-04-28 02:32:44 UTC (rev 827)
@@ -1,3 +1,19 @@
+2007/04/28 version_0_7_2
+General :
+ - synced with gtk+'s xdgmime
+Index :
+ - add extra term to documents so that filter "dir:/" can be applied
+Search :
+ - results lists can be saved as CSV or OpenSearch response XML/RSS
+Daemon :
+ - indexes created with version < 0.72 will be automatically upgraded
+ - fixed problem where too much time spent upgrading would cause the daemon
+  to be killed
+UI :
+ - open documents on HTTP/HTTPS with the default Web browser
+ - updated German translation by Christian Dywan
+ - updated Italian translation by Vincenzo Consales
+
 2007/03/31 version_0_7_1
 Tokenize :
  - HTML filter wasn't always properly initialized, which could cause a crash



From fabricecolin at mail.berlios.de  Sat Apr 28 04:36:11 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 28 Apr 2007 04:36:11 +0200
Subject: [Pinot-svn] r828 - tags
Message-ID: <200704280236.l3S2aBPE019239@sheep.berlios.de>

Author: fabricecolin
Date: 2007-04-28 04:36:10 +0200 (Sat, 28 Apr 2007)
New Revision: 828

Added:
   tags/version_0_7_2/
Log:
Releasing 0.72 today.


Copied: tags/version_0_7_2 (from rev 827, trunk)



