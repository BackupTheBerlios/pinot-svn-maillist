From fabricecolin at mail.berlios.de  Sun Mar  1 03:36:03 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 1 Mar 2009 03:36:03 +0100
Subject: [Pinot-svn] r1567 - in trunk: . Core
Message-ID: <200903010236.n212a3cK000340@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-01 03:35:42 +0100 (Sun, 01 Mar 2009)
New Revision: 1567

Modified:
   trunk/Core/UniqueApplication.cpp
   trunk/Core/WorkerThreads.cpp
   trunk/configure.in
Log:
Functions kill() and lstat() may not be available.


Modified: trunk/Core/UniqueApplication.cpp
===================================================================
--- trunk/Core/UniqueApplication.cpp	2009-02-28 12:44:09 UTC (rev 1566)
+++ trunk/Core/UniqueApplication.cpp	2009-03-01 02:35:42 UTC (rev 1567)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2008 Fabrice Colin
+ *  Copyright 2008-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -24,6 +24,7 @@
 #include <fstream>
 #include <sstream>
 
+#include "config.h"
 #include "UniqueApplication.h"
 
 using std::cout;
@@ -136,6 +137,7 @@
 				}
 			}
 
+#ifdef HAVE_KILL
 			if (checkProcess == true)
 			{
 				if (kill(processID, 0) == 0)
@@ -150,6 +152,7 @@
 				}
 			}
 #endif
+#endif
 
 			if (stillRunning == true)
 			{

Modified: trunk/Core/WorkerThreads.cpp
===================================================================
--- trunk/Core/WorkerThreads.cpp	2009-02-28 12:44:09 UTC (rev 1566)
+++ trunk/Core/WorkerThreads.cpp	2009-03-01 02:35:42 UTC (rev 1567)
@@ -2098,6 +2098,7 @@
 	cout << "DirectoryScannerThread::scanEntry: checking " << entryName << endl;
 #endif
 
+#ifdef HAVE_LSTAT
 	// Stat links, or the stuff it refers to ?
 	if (statLinks == true)
 	{
@@ -2105,8 +2106,11 @@
 	}
 	else
 	{
+#endif
 		entryStatus = stat(entryName.c_str(), &fileStat);
+#ifdef HAVE_LSTAT
 	}
+#endif
 
 	if (entryStatus == -1)
 	{
@@ -2116,6 +2120,7 @@
 		cout << "DirectoryScannerThread::scanEntry: stat failed with error " << entryStatus << endl;
 #endif
 	}
+#ifdef HAVE_LSTAT
 	// Special processing applies if it's a symlink
 	else if (S_ISLNK(fileStat.st_mode))
 	{
@@ -2210,6 +2215,7 @@
 			reportFile = true;
 		}
 	}
+#endif
 
 	// Is this item in the database already ?
 	itemExists = wasCrawled(location, itemDate);
@@ -2301,8 +2307,11 @@
 		}
 	}
 	// Is it some unknown type ?
-	else if ((entryStatus == 0) &&
-		(!S_ISLNK(fileStat.st_mode)))
+	else if ((entryStatus == 0)
+#ifdef HAVE_LSTAT
+		&& (!S_ISLNK(fileStat.st_mode))
+#endif
+		)
 	{
 #ifdef DEBUG
 		cout << "DirectoryScannerThread::scanEntry: unknown entry type" << endl;

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2009-02-28 12:44:09 UTC (rev 1566)
+++ trunk/configure.in	2009-03-01 02:35:42 UTC (rev 1567)
@@ -438,6 +438,7 @@
 AC_CHECK_FUNCS(sysconf)
 AC_CHECK_FUNCS(getloadavg)
 AC_CHECK_FUNCS(pipe)
+AC_CHECK_FUNCS(kill)
 
 AC_OUTPUT( pinot.spec Core/de.berlios.Pinot.service Makefile \
 	Utils/Makefile Tokenize/Makefile SQL/Makefile po/Makefile.in Collect/Makefile \



From fabricecolin at mail.berlios.de  Sun Mar  1 03:39:15 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 1 Mar 2009 03:39:15 +0100
Subject: [Pinot-svn] r1568 - trunk/Core
Message-ID: <200903010239.n212dFqW000593@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-01 03:39:08 +0100 (Sun, 01 Mar 2009)
New Revision: 1568

Modified:
   trunk/Core/DaemonState.cpp
   trunk/Core/DaemonState.h
Log:
Flush the index when all foreground threads have returned so that it doesn't
interfere with indexing.


Modified: trunk/Core/DaemonState.cpp
===================================================================
--- trunk/Core/DaemonState.cpp	2009-03-01 02:35:42 UTC (rev 1567)
+++ trunk/Core/DaemonState.cpp	2009-03-01 02:39:08 UTC (rev 1568)
@@ -312,6 +312,7 @@
 	m_fullScan(false),
 	m_isReindex(false),
 	m_reload(false),
+	m_flush(false),
 	m_pDiskMonitor(MonitorFactory::getMonitor()),
 	m_pDiskHandler(NULL),
 	m_crawlers(0)
@@ -628,20 +629,11 @@
 		{
 			// Pop the queue
 			m_crawlQueue.pop();
+			m_flush = true;
 		}
 		// Else, the directory wasn't fully crawled so better leave it in the queue
 
-		if (start_crawling() == false)
-		{
-			// Flush the index if no new crawler was started
-			IndexInterface *pIndex = PinotSettings::getInstance().getIndex(PinotSettings::getInstance().m_daemonIndexLocation);
-			if (pIndex != NULL)
-			{
-				pIndex->flush();
-
-				delete pIndex;
-			}
-		}
+		start_crawling();
 	}
 	else if (type == "IndexingThread")
 	{
@@ -756,34 +748,43 @@
 	// Delete the thread
 	delete pThread;
 
-	// Are we supposed to reload the configuration ?
 	// Wait until there are no threads running (except background ones)
-	if ((m_reload == true) &&
-		(get_threads_count() == 0))
+	// to flush the index or reload the configuration
+	if (get_threads_count() == 0)
 	{
-#ifdef DEBUG
-		cout << "DaemonState::on_thread_end: stopping all threads" << endl;
-#endif
-		// Stop background threads
-		stop_threads();
-		// ...clear the queues
-		clear_queues();
+		if (m_flush == true)
+		{
+			m_flush = false;
 
-		// Reload
-		PinotSettings &settings = PinotSettings::getInstance();
-		settings.clear();
-		settings.load(PinotSettings::LOAD_ALL);
-		m_reload = false;
+			IndexInterface *pIndex = PinotSettings::getInstance().getIndex(PinotSettings::getInstance().m_daemonIndexLocation);
+			if (pIndex != NULL)
+			{
+				pIndex->flush();
+
+				delete pIndex;
+			}
+		}
+
+		if (m_reload == true)
+		{
 #ifdef DEBUG
-		cout << "DaemonState::on_thread_end: reloading" << endl;
+			cout << "DaemonState::on_thread_end: stopping all threads" << endl;
 #endif
+			// Stop background threads
+			stop_threads();
+			// ...clear the queues
+			clear_queues();
 
-		// ...and restart everything 
-		start(true, false);
+			// Reload
+			PinotSettings &settings = PinotSettings::getInstance();
+			settings.clear();
+			settings.load(PinotSettings::LOAD_ALL);
+			m_reload = false;
+
+			// ...and restart everything 
+			start(true, false);
+		}
 	}
-#ifdef DEBUG
-	cout << "DaemonState::on_thread_end: reload status " << m_reload << endl;
-#endif
 
 	// Try to run a queued action unless threads were stopped
 	if (isStopped == false)

Modified: trunk/Core/DaemonState.h
===================================================================
--- trunk/Core/DaemonState.h	2009-03-01 02:35:42 UTC (rev 1567)
+++ trunk/Core/DaemonState.h	2009-03-01 02:39:08 UTC (rev 1568)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -104,6 +104,7 @@
 		bool m_fullScan;
 		bool m_isReindex;
 		bool m_reload;
+		bool m_flush;
 		fd_set m_flagsSet;
 		MonitorInterface *m_pDiskMonitor;
 		MonitorHandler *m_pDiskHandler;



From fabricecolin at mail.berlios.de  Sun Mar  1 08:54:06 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 1 Mar 2009 08:54:06 +0100
Subject: [Pinot-svn] r1569 - trunk/Core
Message-ID: <200903010754.n217s6lM026142@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-01 08:54:00 +0100 (Sun, 01 Mar 2009)
New Revision: 1569

Modified:
   trunk/Core/OnDiskHandler.cpp
   trunk/Core/OnDiskHandler.h
   trunk/Core/WorkerThreads.cpp
Log:
Don't flush the index on file events.


Modified: trunk/Core/OnDiskHandler.cpp
===================================================================
--- trunk/Core/OnDiskHandler.cpp	2009-03-01 02:39:08 UTC (rev 1568)
+++ trunk/Core/OnDiskHandler.cpp	2009-03-01 07:54:00 UTC (rev 1569)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -310,16 +310,6 @@
 	}
 }
 
-void OnDiskHandler::flushIndex(void)
-{
-	pthread_mutex_lock(&m_mutex);
-	if (m_pIndex != NULL)
-	{
-		m_pIndex->flush();
-	}
-	pthread_mutex_unlock(&m_mutex);
-}
-
 bool OnDiskHandler::fileExists(const string &fileName)
 {
 	// Nothing to do here

Modified: trunk/Core/OnDiskHandler.h
===================================================================
--- trunk/Core/OnDiskHandler.h	2009-03-01 02:39:08 UTC (rev 1568)
+++ trunk/Core/OnDiskHandler.h	2009-03-01 07:54:00 UTC (rev 1569)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -40,9 +40,6 @@
 		/// Initializes things before starting monitoring.
 		virtual void initialize(void);
 
-		/// Handles flushing the index.
-		virtual void flushIndex(void);
-
 		/// Handles file existence events.
 		virtual bool fileExists(const std::string &fileName);
 

Modified: trunk/Core/WorkerThreads.cpp
===================================================================
--- trunk/Core/WorkerThreads.cpp	2009-03-01 02:39:08 UTC (rev 1568)
+++ trunk/Core/WorkerThreads.cpp	2009-03-01 07:54:00 UTC (rev 1569)
@@ -1911,8 +1911,6 @@
 			FD_SET(m_ctrlReadPipe, &listenSet);
 		}
 
-		m_pHandler->flushIndex();
-
 		// The file descriptor may change over time
 		int monitorFd = m_pMonitor->getFileDescriptor();
 		FD_SET(monitorFd, &listenSet);



From fabricecolin at mail.berlios.de  Sun Mar  1 14:36:32 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 1 Mar 2009 14:36:32 +0100
Subject: [Pinot-svn] r1570 - trunk/Utils
Message-ID: <200903011336.n21DaWQI022910@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-01 14:36:26 +0100 (Sun, 01 Mar 2009)
New Revision: 1570

Modified:
   trunk/Utils/DocumentInfo.cpp
Log:
Missing include, reported by Adel Gadllah, with gcc 4.4.


Modified: trunk/Utils/DocumentInfo.cpp
===================================================================
--- trunk/Utils/DocumentInfo.cpp	2009-03-01 07:54:00 UTC (rev 1569)
+++ trunk/Utils/DocumentInfo.cpp	2009-03-01 13:36:26 UTC (rev 1570)
@@ -18,6 +18,7 @@
 
 #include <stdio.h>
 #include <stdlib.h>
+#include <string.h>
 #include <time.h>
 #include <algorithm>
 



From fabricecolin at mail.berlios.de  Sun Mar  1 14:37:45 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 1 Mar 2009 14:37:45 +0100
Subject: [Pinot-svn] r1571 - trunk/SQL
Message-ID: <200903011337.n21DbjN3023138@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-01 14:37:34 +0100 (Sun, 01 Mar 2009)
New Revision: 1571

Modified:
   trunk/SQL/CrawlHistory.cpp
Log:
Fixed update query in updateItemsStatus().


Modified: trunk/SQL/CrawlHistory.cpp
===================================================================
--- trunk/SQL/CrawlHistory.cpp	2009-03-01 13:36:26 UTC (rev 1570)
+++ trunk/SQL/CrawlHistory.cpp	2009-03-01 13:37:34 UTC (rev 1571)
@@ -75,13 +75,13 @@
 {
 	CrawlStatus status = UNKNOWN;
 
-	if (text == "CRAWLING")
+	if (text == "TO_CRAWL")
 	{
-		status = CRAWLING;
+		status = TO_CRAWL;
 	}
-	else if (text == "TO_CRAWL")
+	else if (text == "CRAWLING")
 	{
-		status = TO_CRAWL;
+		status = CRAWLING;
 	}
 	else if (text == "CRAWLED")
 	{
@@ -146,7 +146,7 @@
 	if (createHistoryTable == true)
 	{
 		if (db.executeSimpleStatement("CREATE TABLE CrawlHistory (Url VARCHAR(255) PRIMARY KEY, \
-			Status VARCHAR(255), SourceID INTEGER, DATE INTEGER, ErrorNum INTEGER);") == false)
+			Status VARCHAR(255), SourceID INTEGER, Date INTEGER, ErrorNum INTEGER);") == false)
 		{
 			return false;
 		}
@@ -356,7 +356,7 @@
 	{
 		// Ignore the source
 		results = executeStatement("UPDATE CrawlHistory \
-			SET Status='%q' AND Status='%q';",
+			SET Status='%q' WHERE Status='%q';",
 			statusToText(newStatus).c_str(), statusToText(oldStatus).c_str());
 	}
 



From fabricecolin at mail.berlios.de  Sun Mar  1 15:34:27 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 1 Mar 2009 15:34:27 +0100
Subject: [Pinot-svn] r1572 - in trunk: . po
Message-ID: <200903011434.n21EYRMg029640@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-01 15:34:20 +0100 (Sun, 01 Mar 2009)
New Revision: 1572

Modified:
   trunk/AUTHORS
   trunk/po/de.po
   trunk/po/pt.po
Log:
Updated translations by Gena Haltmair (German) and Fl?\195?\161vio Martins (Portuguese).


Modified: trunk/AUTHORS
===================================================================
--- trunk/AUTHORS	2009-03-01 13:37:34 UTC (rev 1571)
+++ trunk/AUTHORS	2009-03-01 14:34:20 UTC (rev 1572)
@@ -33,7 +33,14 @@
 <loic at senga dot org>).
 
 Some code is borrowed from Xapian Omega, which is "largely the work of
-Olly Betts, Mark Shinwell (omindex-config) and Richard Boulton".
+Olly Betts, Mark Shinwell (omindex-config) and Richard Boulton",
+including its HTML parser. The file Tokenize/filters/HtmlParser.cc is :
+	Copyright 1999,2000,2001 BrightStation PLC
+	Copyright 2001 Ananova Ltd
+	Copyright 2002,2006,2007,2008 Olly Betts
+while the file Tokenize/filters/HtmlParser.h is :
+	Copyright 1999,2000,2001 BrightStation PLC
+	Copyright 2002,2006,2008 Olly Betts
 
 Code for mktime_from_utc() in Utils/TimeConverter.cpp was borrowed from
 wget (http://wget.sunsite.dk/).
@@ -58,6 +65,7 @@
 	Japanese - Takeo Mizuki <???>
 	Portuguese - _PN_boy <pedro_nuno_pn at iol dot pt>
 		& Tiago Silva <???>
+		& Fl?vio Martins <xhaker at gmail dot com>
 	Portuguese (Brazil) - Leonardo Melo <leonardovazmelo at gmail dot com>
 		& Rafael Porto Rodrigues <rafporto at gmail dot com>
 		& Andr? Gondim <andregondim at ubuntu dot com>

Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2009-03-01 13:37:34 UTC (rev 1571)
+++ trunk/po/de.po	2009-03-01 14:34:20 UTC (rev 1572)
@@ -4,23 +4,242 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
-"PO-Revision-Date: 2008-09-22 12:23+0000\n"
+"POT-Creation-Date: 2009-03-01 17:08+0800\n"
+"PO-Revision-Date: 2009-02-22 10:04+0000\n"
 "Last-Translator: Gena Haltmair <Unknown>\n"
 "Language-Team: German <de at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2008-11-15 08:36+0000\n"
+"X-Launchpad-Export-Date: 2009-02-28 15:40+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Unbekannt"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "D?nisch"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Niederl?nisch"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Englisch"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Finnisch"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Franz?sisch"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Deutsch"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "Ungarisch"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italienisch"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Norwegisch"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugiesisch"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Rum?nisch"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Russisch"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Spanisch"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Schwedisch"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "T?rkisch"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1015 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Meine Webseiten"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1025 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Meine Dokumente"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Wichtig"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Neu"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Pers?nlich"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Ich"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Letze zuerst"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Eigene Dateien"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Kategorie \"Neu\""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Hat CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "Auf Englisch"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "10kb und kleiner"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "nicht klassifiziert"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Indizierungsfehler"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "Dokument konnte nicht indiziert werden"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "Dokument konnte nicht aktualisiert werden"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "Dokument(e) konnte(n) nicht aus dem Index entfernt werden"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "Suchanfrange konnte nicht in der Suchmasche ausgef?hrt werden"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "Konnte Verlaufsdatenbank nicht anlegen"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "Dokument konnte nicht aktualisiert werden"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Fehler bei der Datei?berwachung"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "Verzeichnis konnte nicht ge?ffnet werden"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "Index existiert nicht"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "Suchmaschine konnte nicht angelegt werden"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Kann Dokumenttyp nicht indizieren"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "Kein Downloadprogramm f?r dieses Protokoll vorhanden"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots META-Tag verbietet das Indizieren"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Kein ?berwachungsprogramm vorhanden"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Unbekannter Fehler"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "Indizierung angehalten"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "E-Mail kann hier nicht indiziert werden"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:742
+msgid "is already being indexed"
+msgstr "bereits indiziert"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "auf Blacklist gesetzt"
+
+#: Core/WorkerThreads.cpp:978
+msgid "No title"
+msgstr "Kein Titel"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Suchmaschinen"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Aktueller Benutzer"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "URL importieren"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Zur?ck"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Weiter"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Alle"
 
@@ -183,43 +402,18 @@
 msgstr "Unbestimmt"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Suche"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Meine Webseiten"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Meine Dokumente"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
 msgstr "Dokoment befindet sich in"
 
 #: UI/GTK2/src/mainWindow.cc:1095
-#, fuzzy
 msgid "Couldn't search in results"
-msgstr "Suchmaschine konnte nicht angelegt werden"
+msgstr "Ergebnisse konnten nicht durchsucht werden"
 
 #: UI/GTK2/src/mainWindow.cc:1105
 msgid "In Results"
@@ -237,7 +431,7 @@
 msgid "Query"
 msgstr "Suche"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "am"
 
@@ -270,8 +464,8 @@
 msgid "Couldn't rename index, name"
 msgstr "Index konnte nicht umbenannt werden, Name"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "wird bereits benutzt"
 
@@ -283,111 +477,109 @@
 msgid "Edited index"
 msgstr "Ge?nderter Index"
 
-#: UI/GTK2/src/mainWindow.cc:2134
-#, fuzzy
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
-msgstr "Ergebnisse exportieren"
+msgstr "Exportieren"
 
-#: UI/GTK2/src/mainWindow.cc:2179
-#, fuzzy
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
-msgstr "Dokument konnte nicht indiziert werden"
+msgstr "Konnte keine ?hnliche Dokumente finden"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "Index"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "existiert nicht"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Soll dieses Dokument aus dem Index entfernt werden?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Sollen diese Dokumente aus dem Index entfernt werden?"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Indizierung entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Ein Werkzeug zur Metasuche f?r den Freien Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Durchsuchen Sie das Internet und Ihre Dokumente !"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Indexbezeichnung"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "Konnte Index nicht hinzuf?gen"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Neuer Index hinzugef?gt"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "Konnte Index nicht entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Kein Verlauf vorhanden f?r"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr ""
 "Mindestens ein Vorgang wurde noch nicht abgeschlossen. Jetzt trotzdem "
 "beenden?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Beenden"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Nache der Suchanfrage"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "Suchanfrage konnte nicht aktualisiert werden"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Ge?nderte Suchanfrage"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "Suchanfrage konnte nicht hinzugef?gt werden"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Neue Suchanfrage hinzugef?gt"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Keine Suchanfrage eingestellt"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Keine Suchmaschine ausgew?hlt"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Bitte geben Sie zuerst den Google API-Schl?ssel ein"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "Suche l?uft"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Keine Standardanwendung f?r Typ angegeben"
 
@@ -404,18 +596,16 @@
 msgstr "Gespeicherte Suchanfragen"
 
 #: UI/GTK2/src/mainWindow_glade.cc:165
-#, fuzzy
 msgid "Open Cache"
-msgstr "Zwischenspeicher ansehen"
+msgstr "Cachespeicher ?ffnen"
 
 #: UI/GTK2/src/mainWindow_glade.cc:168
 msgid "Open Parent"
-msgstr ""
+msgstr "Vorg?nger ?ffnen"
 
 #: UI/GTK2/src/mainWindow_glade.cc:174
-#, fuzzy
 msgid "_Add To Index"
-msgstr "Index hinzuf?gen"
+msgstr "_zum Index hinzuf?gen"
 
 #: UI/GTK2/src/mainWindow_glade.cc:186
 msgid "More Like This"
@@ -438,19 +628,16 @@
 msgstr "Liste Inhalte von"
 
 #: UI/GTK2/src/mainWindow_glade.cc:231
-#, fuzzy
 msgid "Group Results By"
-msgstr "Gruppieren nach"
+msgstr "Ergebnisse gruppieren nach"
 
 #: UI/GTK2/src/mainWindow_glade.cc:234
-#, fuzzy
 msgid "Show Extracts"
-msgstr "Auszug anzeigen"
+msgstr "Exzerpten anzeigen"
 
 #: UI/GTK2/src/mainWindow_glade.cc:243
-#, fuzzy
 msgid "Export List"
-msgstr "Ergebnisse exportieren"
+msgstr "Liste exportieren"
 
 #: UI/GTK2/src/mainWindow_glade.cc:249 UI/GTK2/src/statisticsDialog.cc:121
 #: UI/GTK2/src/statisticsDialog_glade.cc:86
@@ -458,9 +645,8 @@
 msgstr "Status"
 
 #: UI/GTK2/src/mainWindow_glade.cc:255
-#, fuzzy
 msgid "_File"
-msgstr "Titel"
+msgstr "_Datei"
 
 #: UI/GTK2/src/mainWindow_glade.cc:258
 msgid "_Edit"
@@ -468,7 +654,7 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:261
 msgid "_Options"
-msgstr ""
+msgstr "_Optionen"
 
 #: UI/GTK2/src/mainWindow_glade.cc:264
 msgid "_Help"
@@ -478,139 +664,29 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
-msgstr ""
+msgstr "Meinten Sie?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "Schliessen"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Unbekannt"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "D?nisch"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Niederl?nisch"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Englisch"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Finnisch"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Franz?sisch"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Deutsch"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "Ungarisch"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italienisch"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Norwegisch"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugiesisch"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Rum?nisch"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Russisch"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Spanisch"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Schwedisch"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "T?rkisch"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Konnte Index nicht ?ffnen"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Konnte Verlaufsdatenbank nicht anlegen"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Wichtig"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Neu"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Pers?nlich"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Ich"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Letze zuerst"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Eigene Dateien"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Kategorie \"Neu\""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Hat CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "Auf Englisch"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "10kb und kleiner"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "nicht klassifiziert"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
-msgstr ""
+msgstr "Datei indizieren und suchen"
 
 #: UI/GTK2/src/prefsWindow.cc:150
 msgid "Configure Pinot to index your files"
-msgstr ""
+msgstr "Pinot zum indizieren Ihrer Dateien konfigurieren"
 
 #: UI/GTK2/src/prefsWindow.cc:208
 msgid "Name"
@@ -716,12 +792,11 @@
 
 #: UI/GTK2/src/prefsWindow_glade.cc:149
 msgid "Miscellaneous"
-msgstr ""
+msgstr "Verschiedenes"
 
 #: UI/GTK2/src/prefsWindow_glade.cc:523
-#, fuzzy
 msgid "Pinot Preferences"
-msgstr "Einstellungen"
+msgstr "Pinots Einstellungen"
 
 #: UI/GTK2/src/propertiesDialog.cc:105
 msgid "Per document"
@@ -768,12 +843,12 @@
 msgstr "Dateiendung"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -783,7 +858,7 @@
 
 #: UI/GTK2/src/queryDialog.cc:116
 msgid "Path"
-msgstr ""
+msgstr "Dateipfad"
 
 #: UI/GTK2/src/queryDialog.cc:117
 msgid "Language code"
@@ -802,7 +877,7 @@
 msgstr "Kategorie"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Datum"
 
@@ -856,14 +931,13 @@
 msgstr "Suchanfrage Parameter"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Relevanz"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
-#, fuzzy
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
-msgstr "Ergebnisse"
+msgstr "Keine Ergebnisse"
 
 #: UI/GTK2/src/statisticsDialog.cc:154
 msgid "Indexes"
@@ -872,7 +946,7 @@
 #: UI/GTK2/src/statisticsDialog.cc:160 UI/GTK2/src/statisticsDialog.cc:166
 #: UI/GTK2/src/statisticsDialog.cc:197
 msgid "Checking"
-msgstr ""
+msgstr "?berpr?fen"
 
 #: UI/GTK2/src/statisticsDialog.cc:194
 msgid "Daemon"
@@ -898,11 +972,6 @@
 msgid "documents"
 msgstr "Dokumente"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Unbekannter Fehler"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -935,83 +1004,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Fehler"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Indizierungsfehler"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "Dokument konnte nicht indiziert werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "Dokument konnte nicht aktualisiert werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "Dokument(e) konnte(n) nicht aus dem Index entfernt werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "Suchanfrange konnte nicht in der Suchmasche ausgef?hrt werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "Konnte Verlaufsdatenbank nicht anlegen"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "Dokument konnte nicht aktualisiert werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Fehler bei der Datei?berwachung"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "Verzeichnis konnte nicht ge?ffnet werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "Index existiert nicht"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "Suchmaschine konnte nicht angelegt werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Kann Dokumenttyp nicht indizieren"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "Kein Downloadprogramm f?r dieses Protokoll vorhanden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots META-Tag verbietet das Indizieren"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Kein ?berwachungsprogramm vorhanden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "Indizierung angehalten"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "E-Mail kann hier nicht indiziert werden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "bereits indiziert"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "auf Blacklist gesetzt"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Kein Titel"

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2009-03-01 13:37:34 UTC (rev 1571)
+++ trunk/po/pt.po	2009-03-01 14:34:20 UTC (rev 1572)
@@ -4,23 +4,242 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.88\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
-"PO-Revision-Date: 2009-01-10 22:28+0000\n"
-"Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
+"POT-Creation-Date: 2009-03-01 17:08+0800\n"
+"PO-Revision-Date: 2009-02-22 20:27+0000\n"
+"Last-Translator: Fl?vio Martins <xhaker at gmail.com>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Launchpad-Export-Date: 2009-01-11 04:36+0000\n"
+"X-Launchpad-Export-Date: 2009-02-28 15:40+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Desconhecido"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Dinamarqu?s"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Holand?s"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Ingl?s"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Finl?ndes"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Franc?s"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Alem?o"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "H?ngaro"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italiano"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Noruegu?s"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugu?s"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Romeno"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Russo"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Espanhol"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Sueco"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turco"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1015 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "As minhas p?ginas Web"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1025 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Os Meus Documentos"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Importante"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Novo"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Pessoal"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Eu"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Primeiro os ?ltimos"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Coisas do direct?rio pessoal"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Com r?tulo novo"
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Tem CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "Em ingl?s"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "10kb e menor"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "N?o classificado"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Erro na indexa??o"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "N?o foi poss?vel indexar o documento"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "N?o foi poss?vel actualizar o documento"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "N?o foi poss?vel efectuar consulta no mecanismo de pesquisa"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "N?o foi poss?vel obter o hist?rico do mecanismo de pesquisa"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "N?o foi poss?vel obter o documento"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Monitor de erros de ficheiro"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "N?o foi poss?vel abrir o direct?rio"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "?ndice n?o existe"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Imposs?vel indexar tipo de ficheiro"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "N?o existe programa para efectuar a transfer?ncia neste protocolo"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots META tag n?o s?o permitidos no ?ndice"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Nenhum programa de monitoriza??o"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Erro desconhecido"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "A indexa??o foi parada"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "N?o foi poss?vel indexar o mail aqui"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:742
+msgid "is already being indexed"
+msgstr "j? est? a ser indexado"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "est? na lista negra"
+
+#: Core/WorkerThreads.cpp:978
+msgid "No title"
+msgstr "Sem t?tulo"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Motores de pesquisa"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Utilizador Actual"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "Importar URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Mostrar anterior"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Mostrar pr?ximo"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Todos"
 
@@ -183,34 +402,10 @@
 msgstr "Indefinido"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Consulta activa"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "As minhas p?ginas Web"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Os Meus Documentos"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -236,7 +431,7 @@
 msgid "Query"
 msgstr "Pesquisa"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "activar"
 
@@ -269,8 +464,8 @@
 msgid "Couldn't rename index, name"
 msgstr "N?o foi poss?vel renomear o ?ndice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "j? est? em uso"
 
@@ -282,107 +477,107 @@
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "Exportar"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "N?o foi poss?vel encontrar documentos semelhantes"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Remover este documento do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Remover estes documentos do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Retirar do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Um mecanismo de metabusca para o Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Pesquise a Web e os seus documentos"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Nome do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "N?o foi poss?vel adicionar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Adicionar novo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "N?o foi possivel remover o ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Nenhum hist?rico para"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Pelo menos uma tarefa ainda n?o foi concluida. Sair agora?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Sair"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Nome da consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "N?o foi poss?vel actualizar a consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Consulta editada"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "N?o foi poss?vel adicionar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Adicionar nova consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Consulta n?o foi actualizada"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Nenhum mecanismo de pesquisa seleccionado"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Primeiro escolha a tecla para a API Google"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "A executar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Nenhuma aplica??o associada ao tipo"
 
@@ -467,132 +662,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr "Quis dizer ?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "Fechar"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Desconhecido"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Dinamarqu?s"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Holand?s"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Ingl?s"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Finl?ndes"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Franc?s"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Alem?o"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "H?ngaro"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italiano"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Noruegu?s"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugu?s"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Romeno"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Russo"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Espanhol"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Sueco"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turco"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "N?o foi poss?vel abrir o ?ndice"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "N?o foi poss?vel criar base de dados do hist?rico"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Importante"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Novo"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Pessoal"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Eu"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Primeiro os ?ltimos"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Coisas do direct?rio pessoal"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Com r?tulo novo"
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Tem CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "Em ingl?s"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "10kb e menor"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "N?o classificado"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -603,7 +688,7 @@
 
 #: UI/GTK2/src/prefsWindow.cc:208
 msgid "Name"
-msgstr "Nome :"
+msgstr "Nome"
 
 #: UI/GTK2/src/prefsWindow.cc:226
 msgid "Monitor"
@@ -757,12 +842,12 @@
 msgstr "Extens?o do ficheiro"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "Titulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -791,7 +876,7 @@
 msgstr "Etiqueta"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Data"
 
@@ -845,11 +930,11 @@
 msgstr "Par?metros da consulta"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Pontua??o"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "Sem resultados"
 
@@ -886,11 +971,6 @@
 msgid "documents"
 msgstr "documentos"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Erro desconhecido"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -923,83 +1003,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Erros"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Erro na indexa??o"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "N?o foi poss?vel indexar o documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "N?o foi poss?vel actualizar o documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "N?o foi poss?vel efectuar consulta no mecanismo de pesquisa"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "N?o foi poss?vel obter o hist?rico do mecanismo de pesquisa"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "N?o foi poss?vel obter o documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Monitor de erros de ficheiro"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "N?o foi poss?vel abrir o direct?rio"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "?ndice n?o existe"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Imposs?vel indexar tipo de ficheiro"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "N?o existe programa para efectuar a transfer?ncia neste protocolo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots META tag n?o s?o permitidos no ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Nenhum programa de monitoriza??o"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "A indexa??o foi parada"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "N?o foi poss?vel indexar o mail aqui"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "j? est? a ser indexado"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "est? na lista negra"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Sem t?tulo"



From fabricecolin at mail.berlios.de  Wed Mar  4 14:59:56 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Wed, 4 Mar 2009 14:59:56 +0100
Subject: [Pinot-svn] r1573 - trunk/Core
Message-ID: <200903041359.n24DxuN9014930@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-04 14:59:49 +0100 (Wed, 04 Mar 2009)
New Revision: 1573

Modified:
   trunk/Core/WorkerThreads.cpp
Log:
Don't reset m_backgroundThreadsCount.


Modified: trunk/Core/WorkerThreads.cpp
===================================================================
--- trunk/Core/WorkerThreads.cpp	2009-03-01 14:34:20 UTC (rev 1572)
+++ trunk/Core/WorkerThreads.cpp	2009-03-04 13:59:49 UTC (rev 1573)
@@ -494,8 +494,6 @@
 		ActionQueue actionQueue(PinotSettings::getInstance().getHistoryDatabaseName(), get_application_name());
 
 		actionQueue.expireItems(time(NULL));
-
-		m_backgroundThreadsCount = 0;
 	}
 }
 



From fabricecolin at mail.berlios.de  Thu Mar  5 14:21:18 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 14:21:18 +0100
Subject: [Pinot-svn] r1574 - trunk/IndexSearch/Xapian
Message-ID: <200903051321.n25DLIkV021785@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 14:21:13 +0100 (Thu, 05 Mar 2009)
New Revision: 1574

Modified:
   trunk/IndexSearch/Xapian/XapianIndex.cpp
Log:
TokensIndexer guesstimates where it's at in the original document and doesn't
generate terms past 5Mb.


Modified: trunk/IndexSearch/Xapian/XapianIndex.cpp
===================================================================
--- trunk/IndexSearch/Xapian/XapianIndex.cpp	2009-03-04 13:59:49 UTC (rev 1573)
+++ trunk/IndexSearch/Xapian/XapianIndex.cpp	2009-03-05 13:21:13 UTC (rev 1574)
@@ -84,7 +84,8 @@
 			m_nGramCount(0),
 			m_doSpelling(doSpelling),
 			m_termPos(termPos),
-			m_hasCJKV(false)
+			m_hasCJKV(false),
+			m_totalSize(0)
 		{
 		}
 
@@ -106,6 +107,13 @@
 				return false;
 			}
 
+			m_totalSize += tok.size() + 1;
+			if (m_totalSize > 5242880)
+			{
+				// Enough for this document
+				return true;
+			}
+
 			// Lower case the term and trim spaces
 			string term(StringManip::toLowerCase(tok));
 			StringManip::trimSpaces(term);
@@ -194,6 +202,7 @@
 		bool &m_doSpelling;
 		Xapian::termcount &m_termPos;
 		bool m_hasCJKV;
+		unsigned int m_totalSize;
 
 };
 



From fabricecolin at mail.berlios.de  Thu Mar  5 14:32:30 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 14:32:30 +0100
Subject: [Pinot-svn] r1575 - trunk
Message-ID: <200903051332.n25DWUPb022761@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 14:32:25 +0100 (Thu, 05 Mar 2009)
New Revision: 1575

Modified:
   trunk/FAQ
Log:
Give tips on how to reduce memory usage a bit.


Modified: trunk/FAQ
===================================================================
--- trunk/FAQ	2009-03-05 13:21:13 UTC (rev 1574)
+++ trunk/FAQ	2009-03-05 13:32:25 UTC (rev 1575)
@@ -13,6 +13,17 @@
     You may also want to disable support for spelling. See the README for more
     details.
 
+  * Memory usage is too high ! How can I reduce it ?
+    The environment variable XAPIAN_FLUSH_THRESHOLD controls how many documents
+    are buffered in memory before changes are flushed to the disk. The default
+    value is 10000. The daemon explicitely flushes the index once it has crawled
+    the directories configured in Preferences.
+    Exporting the environment variable GLIBCXX_FORCE_NEW will disable the memory
+    pool maintained by the STL and could reduce memory usage at the cost of a
+    slight performance decrease.
+    If the above doesn't help and there is a large number of documents to index,
+    you may want to configure Pinot to index your corpus in stages.
+
   * Pinot doesn't use my favourite browser XYZ to open HTML documents
     Even if you have set XYZ as your favourite Web browser in your desktop
     environment, it may not be setup as the default application for HTML files.
@@ -74,12 +85,3 @@
     $(kde-config --prefix)/share/autostart (for all users) or ~/.kde/Autostart
     (current user only).
 
-  * Flushing is not directly configurable in Pinot, but some control is
-    possible with the environment variable XAPIAN_FLUSH_THRESHOLD. It can be
-    set to the number of documents after which changes should be flushed to the
-    index. The default value is 10000.
-    The daemon explicitely flushes the index once it has crawled one of the
-    directories configured in Preferences, Indexing. if this directory has more
-    documents than XAPIAN_FLUSH_THRESHOLD, changes will be buffered in RAM until
-    the directory is fully crawled.
-



From fabricecolin at mail.berlios.de  Thu Mar  5 14:33:30 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 14:33:30 +0100
Subject: [Pinot-svn] r1576 - trunk/Collect
Message-ID: <200903051333.n25DXUQf022809@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 14:33:26 +0100 (Thu, 05 Mar 2009)
New Revision: 1576

Modified:
   trunk/Collect/CurlDownloader.cpp
Log:
Use a regex to get to the refresh META tag, rather than HtmlFilter.


Modified: trunk/Collect/CurlDownloader.cpp
===================================================================
--- trunk/Collect/CurlDownloader.cpp	2009-03-05 13:32:25 UTC (rev 1575)
+++ trunk/Collect/CurlDownloader.cpp	2009-03-05 13:33:26 UTC (rev 1576)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -16,18 +16,19 @@
  *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
  */
 
-#include <cstdio>
+#include <stdio.h>
 #include <string.h>
 #include <strings.h>
 #include <stdarg.h>
+#ifdef HAVE_REGEX_H
+#include <regex.h>
+#endif
+#include <stdlib.h>
 #include <iostream>
-#include <cstdlib>
 
 #include <curl/curl.h>
 
 #include "Url.h"
-#include "HtmlFilter.h"
-#include "FilterUtils.h"
 #include "CurlDownloader.h"
 
 using namespace std;
@@ -88,6 +89,9 @@
 		while ((pBadChar = memchr((void*)pInfo->m_pContent, '\0', pInfo->m_contentLen)) != NULL)
 		{
 			((char*)pBadChar)[0] = ' ';
+#ifdef DEBUG
+			cout << "writeCallback: bad character" << endl;
+#endif
 		}
 	}
 
@@ -254,34 +258,39 @@
 					pDocument->setTimestamp(pContentInfo->m_lastModified);
 				}
 
+#ifdef HAVE_REGEX_H
+				regex_t refreshRegex;
+				regmatch_t pMatches[2];
+
 				// Any REFRESH META tag ?
-				Dijon::HtmlFilter htmlFilter("text/html");
-				if ((FilterUtils::feedFilter(*pDocument, &htmlFilter) == true) &&
-					(htmlFilter.next_document() == true))
+				// Look for <meta http-equiv="refresh" content="SECS;url=URL">
+				if (regcomp(&refreshRegex,
+					"<meta http-equiv=\"refresh\" content=\"([0-9]*);url=([^\"]*)\">"
+					REG_EXTENDED|REG_ICASE) == 0)
 				{
-					const map<string, string> &metaData = htmlFilter.get_meta_data();
-					map<string, string>::const_iterator refreshIter = metaData.find("refresh");
-					if (refreshIter != metaData.end())
+					if (regexec(&refreshRegex, pContentInfo->m_pContent, 2,
+						pMatches, REG_NOTBOL|REG_NOTEOL) == 0)
 					{
-						// Try again
-						string::size_type urlPos = refreshIter->second.find("URL=");
-						if (urlPos != string::npos)
-						{
-							url = refreshIter->second.substr(urlPos + 4);
+						url = pMatches[1];
 #ifdef DEBUG
-							cout << "CurlDownloader::retrieveUrl: redirected to URL " << url << endl;
+						cout << "CurlDownloader::retrieveUrl: redirected to URL " << url << endl;
 #endif
-							delete pDocument;
-							pDocument = NULL;
-							freeContentInfo(pContentInfo);
-							++redirectionsCount;
-							continue;
-						}
+						delete pDocument;
+						pDocument = NULL;
+						freeContentInfo(pContentInfo);
+						++redirectionsCount;
+						continue;
 					}
+#ifdef DEBUG
+					else cout << "CurlDownloader::retrieveUrl: no REFRESH META tag" << endl;
+#endif
+
+					regfree(&refreshRegex);
 				}
 #ifdef DEBUG
-				else cout << "CurlDownloader::retrieveUrl: failed to parse HTML" << endl;
+				else cout << "CurlDownloader::retrieveUrl: couldn't look for a REFRESH META tag" << endl;
 #endif
+#endif
 			}
 			else
 			{



From fabricecolin at mail.berlios.de  Thu Mar  5 15:17:27 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 15:17:27 +0100
Subject: [Pinot-svn] r1577 - trunk
Message-ID: <200903051417.n25EHRO0027498@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 15:17:21 +0100 (Thu, 05 Mar 2009)
New Revision: 1577

Modified:
   trunk/TODO
   trunk/configure.in
Log:
Bumped version number to 0.91, added tasks to the TODO list.


Modified: trunk/TODO
===================================================================
--- trunk/TODO	2009-03-05 13:33:26 UTC (rev 1576)
+++ trunk/TODO	2009-03-05 14:17:21 UTC (rev 1577)
@@ -4,8 +4,7 @@
 - MIME type should be as returned by xdg-utils' 'xdg-mime query filetype ...'
 - Try listing names of dependency packages for most distros
 - How to trouble-shoot with delve, get to a file with filters and labels
-- Explain when indexing and updating are done, eg in the results list, Index on
- a result already indexed doesn't update it
+- Explain when indexing and updating are done
 
 General
 - Fix the FIXMEs
@@ -27,9 +26,11 @@
 - HtmlFilter to look for META tags Author, Creator, Publisher and CreationDate
 - XmlFilter is slow-ish, rewrite file parsing with the TextReader interface
 - Filters should at least return errno when they fail
+- Use libpng to extract PNGs' metadata
 
 SQL
 - Move history files into the index directories
+- Set any PRAGMA ?
 
 Monitor
 - Implement support for Solaris FEM
@@ -66,6 +67,7 @@
 - Indexes have no knowledge of indexId's
 - Be ready to catch DatabaseModifiedError exceptions and reopen the index
 - Think about security issues, especially when indexes are shared, based on http://plg.uwaterloo.ca/~claclark/fast2005.pdf
+- Split "compound_word", index separately and as whole
 
 Mail
 - Find out what kind of locking scheme Mozilla uses (POSIX lock ?) and use that
@@ -125,10 +127,7 @@
 - For each query group in the results list, show Next and Previous buttons to page through results
 - Browse mode to be merged with the new search and page mode
 - The query builder for stored queries should be available for live queries too
-- PinotSettings and threads to be moved outside of UI
-- CLI programs shouldn't require details about backends, should know indexes by name and
- know their backends
-- pinot-search should be able to run stored queries found in the configuration file
-- pinot-index should be able to index directories recursively, as done by the daemon
-- Command-line tools to work with relative paths
+- Make sure all of Core is localized
+- HtmlParser should use CJKVTokenizer's Unicode conversion function
+- Think about how to stage indexing, based on memory usage
 

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2009-03-05 13:33:26 UTC (rev 1576)
+++ trunk/configure.in	2009-03-05 14:17:21 UTC (rev 1577)
@@ -2,7 +2,7 @@
 # using glademm V2.6.0
 
 AC_PREREQ(2.50)
-AC_INIT(pinot, 0.90,[fabricecolin at users.berlios.de])
+AC_INIT(pinot, 0.91,[fabricecolin at users.berlios.de])
 AM_INIT_AUTOMAKE
 AC_CONFIG_HEADERS(config.h)
 
@@ -419,26 +419,26 @@
 fi
 
 dnl Check for specific functions
-AC_CHECK_FUNCS(vsnprintf)
+AC_CHECK_FUNCS(fork)
+AC_CHECK_FUNCS(getloadavg)
 AC_CHECK_FUNCS(gettimeofday)
-AC_CHECK_FUNCS(timegm)
 AC_CHECK_FUNCS(gmtime_r)
+AC_CHECK_FUNCS(kill)
 AC_CHECK_FUNCS(localtime_r)
-AC_CHECK_FUNCS(strptime)
 AC_CHECK_FUNCS(lstat)
+AC_CHECK_FUNCS(mkstemp)
 AC_CHECK_FUNCS(mmap)
+AC_CHECK_FUNCS(pipe)
+AC_CHECK_FUNCS(setrlimit)
+AC_CHECK_FUNCS(sigaction)
 AC_CHECK_FUNCS(socketpair)
-AC_CHECK_FUNCS(fork)
-AC_CHECK_FUNCS(setrlimit)
+AC_CHECK_FUNCS(statfs)
 AC_CHECK_FUNCS(statvfs)
-AC_CHECK_FUNCS(statfs)
+AC_CHECK_FUNCS(strptime)
+AC_CHECK_FUNCS(sysconf)
 AC_CHECK_FUNCS(sysctlbyname)
-AC_CHECK_FUNCS(mkstemp)
-AC_CHECK_FUNCS(sigaction)
-AC_CHECK_FUNCS(sysconf)
-AC_CHECK_FUNCS(getloadavg)
-AC_CHECK_FUNCS(pipe)
-AC_CHECK_FUNCS(kill)
+AC_CHECK_FUNCS(timegm)
+AC_CHECK_FUNCS(vsnprintf)
 
 AC_OUTPUT( pinot.spec Core/de.berlios.Pinot.service Makefile \
 	Utils/Makefile Tokenize/Makefile SQL/Makefile po/Makefile.in Collect/Makefile \



From fabricecolin at mail.berlios.de  Thu Mar  5 15:27:34 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 15:27:34 +0100
Subject: [Pinot-svn] r1578 - in trunk: Core IndexSearch UI/GTK2/src
Message-ID: <200903051427.n25ERY8A028171@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 15:27:23 +0100 (Thu, 05 Mar 2009)
New Revision: 1578

Modified:
   trunk/Core/pinot-dbus-daemon.1
   trunk/Core/pinot-index.1
   trunk/Core/pinot-search.1
   trunk/IndexSearch/pinot-label.1
   trunk/UI/GTK2/src/pinot.1
Log:
Updated manual pages.


Modified: trunk/Core/pinot-dbus-daemon.1
===================================================================
--- trunk/Core/pinot-dbus-daemon.1	2009-03-05 14:17:21 UTC (rev 1577)
+++ trunk/Core/pinot-dbus-daemon.1	2009-03-05 14:27:23 UTC (rev 1578)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-DBUS-DAEMON "1" "February 2009" "pinot-dbus-daemon - pinot 0.90" "User Commands"
+.TH PINOT-DBUS-DAEMON "1" "March 2009" "pinot-dbus-daemon - pinot 0.91" "User Commands"
 .SH NAME
 pinot-dbus-daemon \- D-Bus search and index daemon
 .SH SYNOPSIS

Modified: trunk/Core/pinot-index.1
===================================================================
--- trunk/Core/pinot-index.1	2009-03-05 14:17:21 UTC (rev 1577)
+++ trunk/Core/pinot-index.1	2009-03-05 14:27:23 UTC (rev 1578)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-INDEX "1" "February 2009" "pinot-index - pinot 0.90" "User Commands"
+.TH PINOT-INDEX "1" "March 2009" "pinot-index - pinot 0.91" "User Commands"
 .SH NAME
 pinot-index \- Index documents from the command-line
 .SH SYNOPSIS

Modified: trunk/Core/pinot-search.1
===================================================================
--- trunk/Core/pinot-search.1	2009-03-05 14:17:21 UTC (rev 1577)
+++ trunk/Core/pinot-search.1	2009-03-05 14:27:23 UTC (rev 1578)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-SEARCH "1" "February 2009" "pinot-search - pinot 0.90" "User Commands"
+.TH PINOT-SEARCH "1" "March 2009" "pinot-search - pinot 0.91" "User Commands"
 .SH NAME
 pinot-search \- Query search engines from the command-line
 .SH SYNOPSIS

Modified: trunk/IndexSearch/pinot-label.1
===================================================================
--- trunk/IndexSearch/pinot-label.1	2009-03-05 14:17:21 UTC (rev 1577)
+++ trunk/IndexSearch/pinot-label.1	2009-03-05 14:27:23 UTC (rev 1578)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-LABEL "1" "February 2009" "pinot-label - pinot 0.90" "User Commands"
+.TH PINOT-LABEL "1" "March 2009" "pinot-label - pinot 0.91" "User Commands"
 .SH NAME
 pinot-label \- Label files from the command-line
 .SH SYNOPSIS

Modified: trunk/UI/GTK2/src/pinot.1
===================================================================
--- trunk/UI/GTK2/src/pinot.1	2009-03-05 14:17:21 UTC (rev 1577)
+++ trunk/UI/GTK2/src/pinot.1	2009-03-05 14:27:23 UTC (rev 1578)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT "1" "February 2009" "pinot - pinot 0.90" "User Commands"
+.TH PINOT "1" "March 2009" "pinot - pinot 0.91" "User Commands"
 .SH NAME
 pinot \- A metasearch tool for the Free Desktop
 .SH SYNOPSIS



From fabricecolin at mail.berlios.de  Thu Mar  5 15:30:45 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 15:30:45 +0100
Subject: [Pinot-svn] r1579 - trunk/po
Message-ID: <200903051430.n25EUjuw028540@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 15:30:19 +0100 (Thu, 05 Mar 2009)
New Revision: 1579

Modified:
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/he.po
   trunk/po/it.po
   trunk/po/ja.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
   trunk/po/zh_CN.po
   trunk/po/zh_TW.po
Log:
Updated translations.


Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/de.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.88\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-03-01 17:08+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-02-22 10:04+0000\n"
 "Last-Translator: Gena Haltmair <Unknown>\n"
 "Language-Team: German <de at li.org>\n"
@@ -86,7 +86,7 @@
 #. Add a row to the index tree
 #. Allow this only for internal indexes
 #: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
-#: Core/WorkerThreads.cpp:1015 UI/GTK2/src/mainWindow.cc:844
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
 #: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
 #: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
 #: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
@@ -97,7 +97,7 @@
 
 #. Spawn new threads
 #: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
-#: Core/WorkerThreads.cpp:1025 UI/GTK2/src/mainWindow.cc:847
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
 #: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
 #: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
 #: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
@@ -223,7 +223,7 @@
 msgid "Can't index mail here"
 msgstr "E-Mail kann hier nicht indiziert werden"
 
-#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:742
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
 msgid "is already being indexed"
 msgstr "bereits indiziert"
 
@@ -231,7 +231,7 @@
 msgid "is blacklisted"
 msgstr "auf Blacklist gesetzt"
 
-#: Core/WorkerThreads.cpp:978
+#: Core/WorkerThreads.cpp:976
 msgid "No title"
 msgstr "Kein Titel"
 

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/es.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2008-08-23 16:14+0000\n"
 "Last-Translator: Jesus Tramullas <jesus at tramullas.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
@@ -17,11 +17,230 @@
 "X-Launchpad-Export-Date: 2008-11-15 08:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Desconocido"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Dan?s"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Holand?s"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Ingl?s"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Finland?s"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Franc?s"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Alem?n"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "H?ngaro"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italiano"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Noruego"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugu?s"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Rumano"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Ruso"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Espa?ol"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Sueco"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turco"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Mis Paginas Web"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Mis documentos"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Importante"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Nuevo"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Personal"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Yo"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr ""
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr ""
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr ""
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr ""
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr ""
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "No clasificado"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Error en el ?ndice"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "No se pudo indizar el documento"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "No se pudo actualizar el documento"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "No se pudo des-indizar lo(s) documento(s)"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "No se pudo ejecutar la b?squeda contra el motor"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "No se pudo recuperar el hist?rico de b?squedas de este motor"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "No se pudo recuperar el documento"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Error del monitor de ficheros"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "No se pudo abrir el directorio"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "No existe el ?ndice"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "No se pudo crear el motor de b?squeda"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "No se pudo indizar el tipo de documento"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "No hay recuperador para este protocolo"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "La etiqueta META Robots proh?be la indizaci?n"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "No hay monitorizaci?n"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Error desconocido"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "La indizaci?n se ha detenido"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "No se pudo indizar el buzon de correo"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "ya est? indizado"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "ya excluido"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "Sin t?tulo"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Motores de b?squeda"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Usuario"
 
@@ -85,15 +304,15 @@
 msgid "Import URL"
 msgstr "Importar una URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Mostrar previos"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Mostrar siguientes"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Todos"
 
@@ -184,34 +403,10 @@
 msgstr "Indefinido"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "B?squeda activa"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Mis Paginas Web"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Mis documentos"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -238,7 +433,7 @@
 msgid "Query"
 msgstr "B?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "en"
 
@@ -271,8 +466,8 @@
 msgid "Couldn't rename index, name"
 msgstr "No se pudo renombrar ?ndice, nombre"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "ya est? en uso"
 
@@ -284,109 +479,109 @@
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 #, fuzzy
 msgid "Export"
 msgstr "Exportar t?rminos"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 #, fuzzy
 msgid "Couldn't find similar documents"
 msgstr "No se pudo indizar el documento"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "no existe"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "?Borrar este documento del ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "?Borrar este documento del ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Des-indizar"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Una herramienta metabuscador para el escritorio libre"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Busca en el web y en sus documentos"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Nombre del ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "No se pudo a?adir el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "A?adido un nuevo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "No se pudo borrar el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "No hay hist?rico para"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Al menos una tarea no ha finalizado. ?Parar ahora?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Salir"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Nombre la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "No se pudo actualizar la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "B?squeda editada"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "No se pudo a?adir la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "A?adida una nueva b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "B?squeda no definida"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Motor de b?squeda no seleccionado"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Por favor, primero configure el API de Google"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "Ejecutando la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "No hay aplicaci?n predefinida para el tipo"
 
@@ -477,132 +672,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr ""
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Desconocido"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Dan?s"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Holand?s"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Ingl?s"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Finland?s"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Franc?s"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Alem?n"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "H?ngaro"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italiano"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Noruego"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugu?s"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Rumano"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Ruso"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Espa?ol"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Sueco"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turco"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "No se pudo abrir el ?ndice"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "No se pudo crear la base de datos del hist?rico"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Importante"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Nuevo"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Personal"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Yo"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "No clasificado"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -766,12 +851,12 @@
 msgstr "Extensi?n del archivo"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "T?tulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -800,7 +885,7 @@
 msgstr "Etiqueta"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Date"
 
@@ -854,11 +939,11 @@
 msgstr "Par?metros de b?squeda"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Cuenta"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 #, fuzzy
 msgid "No results"
 msgstr "resultados"
@@ -896,11 +981,6 @@
 msgid "documents"
 msgstr "documentos"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Error desconocido"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -933,83 +1013,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Errores"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Error en el ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "No se pudo indizar el documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "No se pudo actualizar el documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "No se pudo des-indizar lo(s) documento(s)"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "No se pudo ejecutar la b?squeda contra el motor"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "No se pudo recuperar el hist?rico de b?squedas de este motor"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "No se pudo recuperar el documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Error del monitor de ficheros"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "No se pudo abrir el directorio"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "No existe el ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "No se pudo crear el motor de b?squeda"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "No se pudo indizar el tipo de documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "No hay recuperador para este protocolo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "La etiqueta META Robots proh?be la indizaci?n"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "No hay monitorizaci?n"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "La indizaci?n se ha detenido"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "No se pudo indizar el buzon de correo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "ya est? indizado"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "ya excluido"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Sin t?tulo"

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/fr.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-12 11:07+0000\n"
 "Last-Translator: Fr?d?ric Grosshans <frederic.grosshans at gmail.com>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
@@ -17,11 +17,230 @@
 "X-Launchpad-Export-Date: 2009-01-13 14:12+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Inconnu"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Danois"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Hollandais"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Anglais"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Finlandais"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Francais"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Allemand"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "Hongrois"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italien"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Norvegien"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugais"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Roumain"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Russe"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Espagnol"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Su?dois"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turc"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Mes Pages Web"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Mes Documents"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Important"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Nouveau"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Personnel"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Moi"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Plus Recents"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Mes Trucs"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Avec L'Etiquette Nouveau"
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Avec CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "En Anglais"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "10ko Et Plus Petits"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "Sans classification"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Erreur sur l'index"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "N'a pas pu indexer le document"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "N'a pas pu mettre a jour le document"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "N'a pas pu desindexer le(s) document(s)"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "N'a pas pu lancer la recherche sur le moteur"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "N'a pas pu obtenir l'historique de la recherche"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "N'a pas pu telecharger le document"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Erreur du moniteur de fichiers"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "N'a pas pu ouvrir le repertoire"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "L'index n'existe pas"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "N'a pas pu creer le moteur"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Impossible d'indexer ce type de documents"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "Pas de brouteur pour ce protocole"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Le META tag Robots interdit d'indexer"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Pas de moniteur de fichiers disponible"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Erreur inconnue"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "Indexation est arretee"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "Ne peut pas indexer le courrier ici"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "est deja indexe"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "est exclus"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "Pas de titre"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Moteurs"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Utilisateur"
 
@@ -85,15 +304,15 @@
 msgid "Import URL"
 msgstr "Importer une URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Precedents"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Suivants"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Tout"
 
@@ -184,34 +403,10 @@
 msgstr "Indefini"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Recherche"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Mes Pages Web"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Mes Documents"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -237,7 +432,7 @@
 msgid "Query"
 msgstr "La recherche"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "sur"
 
@@ -270,8 +465,8 @@
 msgid "Couldn't rename index, name"
 msgstr "N'a pas pu renommer l'index, le nom"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "est deja utilise"
 
@@ -283,107 +478,107 @@
 msgid "Edited index"
 msgstr "Edite l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "Exporter"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "N'a pas pu trouver de documents similaires"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "L'index"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "n'existe pas"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Enlever ce document de l'index ?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Enlever ces documents de l'index ?"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Desindexer"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Un outil de recherche pour le Bureau Libre"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Cherche le Web et vos documents"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Nom de l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "N'a pas pu ajouter l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Ajoute un nouvel index"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "N'a pas pu enlever l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Pas d'historique pour"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Au moins une tache n'est pas terminee. Quitter maintenant ?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Quitter"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Nom de la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "N'a pas pu mettre a jour la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Edite la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "N'a pas pu ajouter la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Ajoute une nouvelle recherche"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Recherche indefinie"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Pas de moteur selectionne"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Configurez la clef de l'API Google"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "Recherche en cours"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Pas d'application definie pour le type"
 
@@ -468,132 +663,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr "Vouliez vous dire ?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "Fermer"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Inconnu"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Danois"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Hollandais"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Anglais"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Finlandais"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Francais"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Allemand"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "Hongrois"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italien"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Norvegien"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugais"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Roumain"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Russe"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Espagnol"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Su?dois"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turc"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "N'a pas pu ouvrir l'index"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "N'a pas pu creer la base d'historiques"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Important"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Nouveau"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Personnel"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Moi"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Plus Recents"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Mes Trucs"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Avec L'Etiquette Nouveau"
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Avec CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "En Anglais"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "10ko Et Plus Petits"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "Sans classification"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr "Recherche de Fichiers"
@@ -756,12 +841,12 @@
 msgstr "Extension de fichier"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "Titre"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -790,7 +875,7 @@
 msgstr "Etiquette"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Date"
 
@@ -844,11 +929,11 @@
 msgstr "Parametres de la recherche"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Score"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "Pas de resultats"
 
@@ -885,11 +970,6 @@
 msgid "documents"
 msgstr "documents"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Erreur inconnue"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -922,83 +1002,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Erreurs"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Erreur sur l'index"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "N'a pas pu indexer le document"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "N'a pas pu mettre a jour le document"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "N'a pas pu desindexer le(s) document(s)"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "N'a pas pu lancer la recherche sur le moteur"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "N'a pas pu obtenir l'historique de la recherche"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "N'a pas pu telecharger le document"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Erreur du moniteur de fichiers"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "N'a pas pu ouvrir le repertoire"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "L'index n'existe pas"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "N'a pas pu creer le moteur"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Impossible d'indexer ce type de documents"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "Pas de brouteur pour ce protocole"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Le META tag Robots interdit d'indexer"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Pas de moniteur de fichiers disponible"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "Indexation est arretee"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "Ne peut pas indexer le courrier ici"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "est deja indexe"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "est exclus"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Pas de titre"

Modified: trunk/po/he.po
===================================================================
--- trunk/po/he.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/he.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-10 16:34+0000\n"
 "Last-Translator: Yaron <sh.yaron at gmail.com>\n"
 "Language-Team: Hebrew <he at li.org>\n"
@@ -17,11 +17,230 @@
 "X-Launchpad-Export-Date: 2009-01-11 04:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr ""
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "????? ???????? ???"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "??????? ???"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr ""
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr ""
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr ""
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr ""
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr ""
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr ""
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr ""
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr ""
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr ""
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "????? ?????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "????? ?????"
 
@@ -85,15 +304,15 @@
 msgid "Import URL"
 msgstr "????? ??????"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "???? ?????"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "???? ???"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "????"
 
@@ -184,34 +403,10 @@
 msgstr "?? ?????"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "?????? ???"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "????? ???????? ???"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "??????? ???"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -237,7 +432,7 @@
 msgid "Query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "??"
 
@@ -270,8 +465,8 @@
 msgid "Couldn't rename index, name"
 msgstr "?? ???? ????? ?? ??????, ??"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "??? ???? ??????"
 
@@ -283,107 +478,107 @@
 msgid "Edited index"
 msgstr "??????? ????"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "?? ???? ????? ?????? ?????"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "?? ????"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "??? ????? ???? ?? ???????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "??? ????? ?????? ??? ?????????"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "???? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "??? ????????? ?????? ?????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "????? ???????? ???????? ??? !"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "?? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "?? ???? ?????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "???? ?????? ???"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "?? ???? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "??? ???????? ????"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "????? ????? ??? ?? ?????? ?????. ???? ????"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "?? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "?? ???? ????? ?? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "??????? ?????"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "?? ???? ?????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "????? ?????? ????"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "??????? ?? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "?? ???? ???? ?????"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "??? ???? ?? ???? ??API ?? ???? ?????"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "??????? ???"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "?? ????? ????? ?????? ???? ????"
 
@@ -468,132 +663,22 @@
 msgid "Pinot"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr ""
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr ""
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr ""
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -756,12 +841,12 @@
 msgstr ""
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr ""
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr ""
 
@@ -790,7 +875,7 @@
 msgstr ""
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr ""
 
@@ -844,11 +929,11 @@
 msgstr ""
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr ""
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr ""
 
@@ -885,11 +970,6 @@
 msgid "documents"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr ""
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -922,83 +1002,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr ""

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/it.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-10 18:59+0000\n"
 "Last-Translator: MarcoBazzani <alfred.einstein at gmail.com>\n"
 "Language-Team: Italian <it at li.org>\n"
@@ -16,11 +16,230 @@
 "X-Launchpad-Export-Date: 2009-01-11 07:48+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Sconosciuto"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Danese"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Olandese"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Inglese"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Finlandese"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Francese"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Tedesco"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "Ungherese"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italiano"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Norvegese"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portoghese"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Romeno"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Russo"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Spagnolo"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Svedese"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turco"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Pagine Web Personali"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Documenti Personali"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Importante"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Nuovo"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Personale"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Io"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Gli Ultimi All'inizio"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Home Stuff"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Con Nuove Etichette"
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Ha CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "In Inglese"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "10kb E Pi? Piccoli"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "Non classificato"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Indice errori"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "Impossibile indicizzare il documento"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "Impossibile aggiornare il documento"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "Impossiible rimuovere i(l) documento/i dall'indice"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "Impossibile avviare un ricerca sul motore"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "Impossibile recuperare la cronologia per il motore di ricerca"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "Impossibile recuperare il documento"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Error nel monitoraggio dei file"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "Impossibile aprire la directory"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "L'indice non esiste"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "Impossibile creare un motore di ricerca"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Impossibile indicizzare il tipo di documento"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "Nessun downloader per questo protocollo"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "il Robots META tag vieta l'indicizzazione"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Nessun servizio di monitoraggio"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Errore sconosciuto"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "L'indicizzazione ? stata fermata"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "Impossibile indicizzare la mail qui"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "? gia' stato indicizzato"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "? segnato come da non indicizzare"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "Senza titolo"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Motori di ricerca"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Utente attuale"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "Importa URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Mostra Precedenti"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Mostra Seguente"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Tutto"
 
@@ -185,34 +404,10 @@
 msgstr "Non Definito"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Ricerca Istantanea"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Pagine Web Personali"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Documenti Personali"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -238,7 +433,7 @@
 msgid "Query"
 msgstr "Ricerca"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "sul"
 
@@ -271,8 +466,8 @@
 msgid "Couldn't rename index, name"
 msgstr "Impossibile rinominare l'indice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "? gi? in uso"
 
@@ -284,107 +479,107 @@
 msgid "Edited index"
 msgstr "Indice modificato"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "Esporta"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "Impossibile trovare documenti simili"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "Indice"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "non esiste"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Rimuovere questo documento dall'indice?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Rimuovere questi documenti dall'indice?"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Rimuovi dall'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Un metamotore di ricerca per il Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Cerca nel Web e nei documenti !"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Nome indice"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "Impossibile aggiungere l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Nuovo indice aggiunto"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "Impossibile rimuovere l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Nessuna cronologia per"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Almeno un'operazione non ? stata ancora completata. Uscire comunque?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Esci"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Nome della ricerca"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "Impossibile aggiornare la ricerca"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Ricerca Modificata"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "Impossibile aggiungere la ricerca"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Nuova ricerca aggiunta"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Ricerca non ancora configurata"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Nessun motore di ricerca selezionato"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Prima inserisci la tua Google API key"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "Ricerca in esecuzione"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Nessuna applicazione predefinita esistente"
 
@@ -469,132 +664,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr "Forse intendevi ?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "Chiudi"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Sconosciuto"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Danese"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Olandese"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Inglese"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Finlandese"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Francese"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Tedesco"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "Ungherese"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italiano"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Norvegese"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portoghese"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Romeno"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Russo"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Spagnolo"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Svedese"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turco"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Impossibile aprire l'indice"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Impossibile creare una cronologia del database"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Importante"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Nuovo"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Personale"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Io"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Gli Ultimi All'inizio"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Home Stuff"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Con Nuove Etichette"
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Ha CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "In Inglese"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "10kb E Pi? Piccoli"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "Non classificato"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -759,12 +844,12 @@
 msgstr "Estensione file"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "Titolo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "Indirizzo:"
 
@@ -793,7 +878,7 @@
 msgstr "Etichetta"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Data"
 
@@ -847,11 +932,11 @@
 msgstr "Parametri di Ricerca"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Punteggio"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "Nessun risultato"
 
@@ -888,11 +973,6 @@
 msgid "documents"
 msgstr "documenti"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Errore sconosciuto"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -925,83 +1005,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Errori"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Indice errori"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "Impossibile indicizzare il documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "Impossibile aggiornare il documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "Impossiible rimuovere i(l) documento/i dall'indice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "Impossibile avviare un ricerca sul motore"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "Impossibile recuperare la cronologia per il motore di ricerca"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "Impossibile recuperare il documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Error nel monitoraggio dei file"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "Impossibile aprire la directory"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "L'indice non esiste"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "Impossibile creare un motore di ricerca"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Impossibile indicizzare il tipo di documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "Nessun downloader per questo protocollo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "il Robots META tag vieta l'indicizzazione"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Nessun servizio di monitoraggio"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "L'indicizzazione ? stata fermata"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "Impossibile indicizzare la mail qui"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "? gia' stato indicizzato"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "? segnato come da non indicizzare"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Senza titolo"

Modified: trunk/po/ja.po
===================================================================
--- trunk/po/ja.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/ja.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-13 00:43+0000\n"
 "Last-Translator: Takeo Mizuki <Unknown>\n"
 "Language-Team: Japanese <ja at li.org>\n"
@@ -17,11 +17,230 @@
 "X-Launchpad-Export-Date: 2009-01-13 14:12+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "??????"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "?????"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "?????"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "??????"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "?????"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "??????"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "??????"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "??????"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "?????"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "???????"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "????"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "????????"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "????????"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "??"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "????"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "???"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "??"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "??????"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr ""
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "CJKV???"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr ""
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr ""
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "???"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "?????????"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "?????????????????"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "??????????"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "??????????????????"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "???????????????????"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "??????????????????"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "??????????"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "???????????"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "????????????"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "?????????????"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "??????????????"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "????????????????????"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "????????????????????????"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "????????????????????"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "?????????????????"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "???????????????"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "??????????????????"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "??????????????????"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "?????????????????"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "??????"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "??????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "???????"
 
@@ -85,15 +304,15 @@
 msgid "Import URL"
 msgstr "URL?????"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "????"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "????"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "???"
 
@@ -184,34 +403,10 @@
 msgstr "???"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "???????"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "????????"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "????????"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -237,7 +432,7 @@
 msgid "Query"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "on"
 
@@ -270,8 +465,8 @@
 msgid "Couldn't rename index, name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "??????????"
 
@@ -283,108 +478,108 @@
 msgid "Edited index"
 msgstr "?????????"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "????????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "????????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "??????????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "???????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "????????????????!"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "??????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "???????????"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "??????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "???????????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr ""
 "?????????????????????????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "?????????"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "??????????????"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "????Google API???????????"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "??????????????????????????????"
 
@@ -469,132 +664,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "???"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "??????"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "?????"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "?????"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "??????"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "?????"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "??????"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "??????"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "??????"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "?????"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "???????"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "????????????"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "????????????????"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "??"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "????"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "???"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "??"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "??????"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "CJKV???"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "???"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -758,12 +843,12 @@
 msgstr "???????"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "????"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -792,7 +877,7 @@
 msgstr "???"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "??"
 
@@ -846,11 +931,11 @@
 msgstr "?????????"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "???"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "????"
 
@@ -887,11 +972,6 @@
 msgid "documents"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "??????"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -924,83 +1004,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "???"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "?????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "?????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "??????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "??????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "???????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "??????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "??????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "???????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "?????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "??????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "????????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "????????????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "????????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "?????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "???????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "??????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "??????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "?????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "??????"

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/nl.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-10 20:38+0000\n"
 "Last-Translator: JW <jw00000 at gmail.com>\n"
 "Language-Team: Dutch <nl at li.org>\n"
@@ -16,11 +16,230 @@
 "X-Launchpad-Export-Date: 2009-01-11 04:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Niet bekend"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Deens"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Nederlands"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Engels"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Fins"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Frans"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Duits"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "Hongaars"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italiaans"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Noors"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugees"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Roemeens"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Russisch"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Spaans"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Zweeds"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turks"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Mijn webpagina's"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Mijn documenten"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Belangrijk"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Nieuw"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Persoonlijk"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Ik"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Laatste eerst"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Dingen uit persoonlijke map"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Met het label 'Nieuw'"
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Met CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "In het Engels"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "10kb en kleiner"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "Niet geclassificeerd"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Indexfout"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "Het document kon niet ge?ndexeerd worden"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "Kan document niet actualiseren"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "Kan indexering van bestand(en) niet ongedaan maken"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "Kon query niet uitvoeren op zoekmachine"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "De geschiedenis voor de zoekmachine kon niet verkregen worden"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "Het document kon niet verkregen worden"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Fout bij het bijhouden van bestanden"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "De map kon niet geopend worden"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "De index bestaat niet"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "Kon zoekmachine niet maken"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Kan documenttype niet indexeren"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "Er is geen downloader voor dit protocol"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots META taf verbiedt indexeren"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Geen monitoring handler"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Onbekende fout."
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "Indexeren is gestopt"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "Kan mail hier niet indexeren"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "wordt al geindexeerd"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "staat op blacklist"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "Geen titel"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Zoekmachines"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Huidige gebruiker"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "Importeren URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Toon vorige"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Toon volgende"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Alle"
 
@@ -184,34 +403,10 @@
 msgstr "Niet gedefinieerd"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Rechtstreekse query"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Mijn webpagina's"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Mijn documenten"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -237,7 +432,7 @@
 msgid "Query"
 msgstr "Query"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "op"
 
@@ -270,8 +465,8 @@
 msgid "Couldn't rename index, name"
 msgstr "Kon index niet hernoemen, naam"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "is reeds in gebruik"
 
@@ -283,107 +478,107 @@
 msgid "Edited index"
 msgstr "Bewerkte index"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "Exporteren"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "Niet gevonden in gelijkaardige documenten"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "Inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "bestaat niet"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Verwijder dit document uit de inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Verwijder deze documenten uit de inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "De-indexeren"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Een metazoek tool voor de Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Zoek het web en uw documenten!"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Naam inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "Kon inhoudsopgave niet toevoegen"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Nieuwe inhoudsopgave toegevoegd"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "Kon inhoudsopgave niet verwijderen"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Geen geschiedenis voor"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Tenminste een taak is nog niet gereed. Nu stoppen?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Afsluiten"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Naam query"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "Kon query niet actualiseren"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Bewerkte query"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "Kon query niet toevoegen"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Nieuwe query toegevoegd"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Query niet vastgelegd"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Geen zoekmachine geselecteerd"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Geef eerst de Google API sleutel in"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "Lopende query"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Geen standaard toepassing gedefinieerd voor het type"
 
@@ -468,132 +663,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr "Bedoelde u?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "Sluiten"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Niet bekend"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Deens"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Nederlands"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Engels"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Fins"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Frans"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Duits"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "Hongaars"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italiaans"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Noors"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugees"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Roemeens"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Russisch"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Spaans"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Zweeds"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turks"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Kan index niet openen"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Kon historische database niet maken"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Belangrijk"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Nieuw"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Persoonlijk"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Ik"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Laatste eerst"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Dingen uit persoonlijke map"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Met het label 'Nieuw'"
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Met CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "In het Engels"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "10kb en kleiner"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "Niet geclassificeerd"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -759,12 +844,12 @@
 msgstr "Bestandsextensie"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -793,7 +878,7 @@
 msgstr "Bijschrift"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Datum"
 
@@ -847,11 +932,11 @@
 msgstr "Queryparameters"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Score"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "Geen resultaten"
 
@@ -888,11 +973,6 @@
 msgid "documents"
 msgstr "documenten"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Onbekende fout."
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -925,83 +1005,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Fouten"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Indexfout"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "Het document kon niet ge?ndexeerd worden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "Kan document niet actualiseren"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "Kan indexering van bestand(en) niet ongedaan maken"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "Kon query niet uitvoeren op zoekmachine"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "De geschiedenis voor de zoekmachine kon niet verkregen worden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "Het document kon niet verkregen worden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Fout bij het bijhouden van bestanden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "De map kon niet geopend worden"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "De index bestaat niet"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "Kon zoekmachine niet maken"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Kan documenttype niet indexeren"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "Er is geen downloader voor dit protocol"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots META taf verbiedt indexeren"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Geen monitoring handler"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "Indexeren is gestopt"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "Kan mail hier niet indexeren"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "wordt al geindexeerd"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "staat op blacklist"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Geen titel"

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/pt.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.88\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-03-01 17:08+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-02-22 20:27+0000\n"
 "Last-Translator: Fl?vio Martins <xhaker at gmail.com>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
@@ -86,7 +86,7 @@
 #. Add a row to the index tree
 #. Allow this only for internal indexes
 #: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
-#: Core/WorkerThreads.cpp:1015 UI/GTK2/src/mainWindow.cc:844
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
 #: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
 #: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
 #: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
@@ -97,7 +97,7 @@
 
 #. Spawn new threads
 #: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
-#: Core/WorkerThreads.cpp:1025 UI/GTK2/src/mainWindow.cc:847
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
 #: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
 #: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
 #: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
@@ -223,7 +223,7 @@
 msgid "Can't index mail here"
 msgstr "N?o foi poss?vel indexar o mail aqui"
 
-#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:742
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
 msgid "is already being indexed"
 msgstr "j? est? a ser indexado"
 
@@ -231,7 +231,7 @@
 msgid "is blacklisted"
 msgstr "est? na lista negra"
 
-#: Core/WorkerThreads.cpp:978
+#: Core/WorkerThreads.cpp:976
 msgid "No title"
 msgstr "Sem t?tulo"
 

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/pt_BR.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-10 23:12+0000\n"
 "Last-Translator: Henrique P. Machado <zehrique at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
@@ -16,11 +16,230 @@
 "X-Launchpad-Export-Date: 2009-01-11 04:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Desconhecido"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Danish"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Dutch"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "English"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Terminar"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "French"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "German"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "H?ngaro"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italiano"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Noruegu?s"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugu?s"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Romeno"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Russian"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Spanish"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Swedish"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turco"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Minhas P?ginas Web"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Meus Documentos"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Importante"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Novo"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Pessoal"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Eu"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Primeiro dos ?ltimos"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Coisas do Usu?rio"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Com r?tulo novo"
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Tem CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "Em ingl?s"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "1kb e menor"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "N?o classificado"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Erro no ?ndice"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "N?o foi poss?vel indexar documento"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "N?o foi poss?vel atualizar documento"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "N?o foi poss?vel executar consulta no mecanismo de pesquisa"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "N?o foi poss?vel pegar hist?rico para mecanismo de pesquisa"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "N?o foi poss?vel obter documento"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Monitor de erros de arquivo"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "N?o foi poss?vel abrir diret?rio"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "?ndice n?o existe"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Imposs?vel indexar tipo de arquivo"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "N?o h? programa para baixar este protocolo"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots META tag n?o s?o permitidos no ?ndice"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Nenhum manipulador de monitoramento"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Erro desconhecido"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "?ndice foi parado"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "N?o foi poss?vel indexar mail aqui"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "j? est? sendo indexado"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "est? na lista negra"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "Sem t?tulo"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "Mecanismos de Pesquisa"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Usu?rio atual"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "Importar URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Mostrar anterior"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Mostrar pr?ximo"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Todos"
 
@@ -183,34 +402,10 @@
 msgstr "N?o definido"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Query ativa"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Minhas P?ginas Web"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Meus Documentos"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -236,7 +431,7 @@
 msgid "Query"
 msgstr "Consulta"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "no"
 
@@ -269,8 +464,8 @@
 msgid "Couldn't rename index, name"
 msgstr "N?o foi poss?vel renomear ?ndice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "j? est? em uso"
 
@@ -282,107 +477,107 @@
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "Exportar"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "N?o foi poss?vel achar documentos similares"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Remover documento do ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Remover documentos do ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Retirar do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Um mecanismo de metabusca gr?tis para Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "Procurar a Rede e seus documentos!"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Nome do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "N?o foi poss?vel adicionar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Adicionar novo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "N?o foi poss?vel remover ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Nenhum hist?rico para"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Pelo menos uma tarefa n?o terminou ainda. Sair assim mesmo?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Sair"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Nome da consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "N?o foi poss?vel atualizar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Consulta editada"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "N?o foi poss?vel adicionar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Adicionar nova consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Consulta n?o foi atualizada"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Nenhum mecanismo de pesquisa selecionado"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "Primeiro informe a tecla para Google API"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "Executando consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Aplica??o associada ao tipo n?o definida"
 
@@ -467,132 +662,22 @@
 msgid "Pinot"
 msgstr "Pino"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr "Voc? quis dizer ?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "Fechar"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Desconhecido"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Danish"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Dutch"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "English"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Terminar"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "French"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "German"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "H?ngaro"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italiano"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Noruegu?s"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugu?s"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Romeno"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Russian"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Spanish"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Swedish"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turco"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "N?o foi poss?vel abrir ?ndice"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "N?o foi poss?vel criar base de hist?rico"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Importante"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Novo"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Pessoal"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Eu"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Primeiro dos ?ltimos"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Coisas do Usu?rio"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Com r?tulo novo"
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Tem CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "Em ingl?s"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "1kb e menor"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "N?o classificado"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -757,12 +842,12 @@
 msgstr "Extens?o do arquivo"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "T?tulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -791,7 +876,7 @@
 msgstr "T?tulo"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Data"
 
@@ -845,11 +930,11 @@
 msgstr "Par?metros da consulta"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Pontua??o"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "Nenhum resultado"
 
@@ -886,11 +971,6 @@
 msgid "documents"
 msgstr "documentos"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Erro desconhecido"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -923,83 +1003,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Erros"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Erro no ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "N?o foi poss?vel indexar documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "N?o foi poss?vel atualizar documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "N?o foi poss?vel executar consulta no mecanismo de pesquisa"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "N?o foi poss?vel pegar hist?rico para mecanismo de pesquisa"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "N?o foi poss?vel obter documento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Monitor de erros de arquivo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "N?o foi poss?vel abrir diret?rio"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "?ndice n?o existe"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Imposs?vel indexar tipo de arquivo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "N?o h? programa para baixar este protocolo"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots META tag n?o s?o permitidos no ?ndice"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Nenhum manipulador de monitoramento"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "?ndice foi parado"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "N?o foi poss?vel indexar mail aqui"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "j? est? sendo indexado"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "est? na lista negra"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Sem t?tulo"

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/ru.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2008-08-23 16:14+0000\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
@@ -16,11 +16,230 @@
 "X-Launchpad-Export-Date: 2008-11-15 08:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "???????????"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "???????"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "???????????"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "??????????"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "???????"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "???????????"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "????????"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "???????????"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "??????????"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "?????????????"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "???????"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "?????????"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "????????"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr ""
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "??? web-????????"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "??? ?????????"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "?????"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "???????"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "??????"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr ""
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr ""
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr ""
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr ""
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr ""
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr ""
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "??????????????"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "?????????? ???????? ????????"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "?????????? ??????????????? ????????(?)"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "?? ??????? ????????? ?????? ? ????????? ???????"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "?????????? ??????? ???????"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "?? ??????? ??????? ????????? ???????"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "?????????? ????????????? ?????? ??? ??????????"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "META-???? ??????? ????????? ??????????????"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "??? ???????? ???????????"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "?????? ????????????? ????? ?????"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "??? ??????????????????"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "??????????? ? ?????? ??????"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "??? ????????"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "????????? ??????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "??????? ????????????"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "?????? URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "???????? ??????????"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "???????? ?????????"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr ""
 
@@ -181,34 +400,10 @@
 msgstr ""
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "???????? ??????"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "??? web-????????"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "??? ?????????"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -235,7 +430,7 @@
 msgid "Query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "??"
 
@@ -268,8 +463,8 @@
 msgid "Couldn't rename index, name"
 msgstr "?????????? ????????????? ??????, ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "??? ????????????"
 
@@ -281,109 +476,109 @@
 msgid "Edited index"
 msgstr "?????????????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 #, fuzzy
 msgid "Export"
 msgstr "??????????"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 #, fuzzy
 msgid "Couldn't find similar documents"
 msgstr "?????????? ??????????????? ????????(?)"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "??????? ???????? ?? ??????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "??????? ??? ????????? ?? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "?????????? ?????????? ??? ?????????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "???????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "???????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "?????????? ??????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "?? ??????? ???? ???? ?????? ??? ?? ?????????. ????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "???????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "???????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "?????? ?? ??????????"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "?? ???? ????????? ??????? ?? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "??????????, ??????? ????????????? ???? Google API"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "?? ???? ?????????? ?? ????????? ?? ?????????? ??? ???? ??????????"
 
@@ -473,132 +668,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr ""
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "???????????"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "???????"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "???????????"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "??????????"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "???????"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "???????????"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "????????"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "???????????"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "??????????"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "?????????????"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "???????"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "?????????"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "????????"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "?????????? ??????? ??????"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "?? ??????? ??????? ???? ?????? ???????"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "?????"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "???????"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "??????"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "??????????????"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -763,12 +848,12 @@
 msgstr "?????????? ?????"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "????????"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "URL"
 
@@ -797,7 +882,7 @@
 msgstr "?????"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr ""
 
@@ -851,11 +936,11 @@
 msgstr "????????? ???????"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "????"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 #, fuzzy
 msgid "No results"
 msgstr "????? ??????????:"
@@ -893,11 +978,6 @@
 msgid "documents"
 msgstr ""
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr ""
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -930,83 +1010,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "?????????? ???????? ????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "?????????? ??????????????? ????????(?)"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "?? ??????? ????????? ?????? ? ????????? ???????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "?????????? ??????? ???????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "?? ??????? ??????? ????????? ???????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "?????????? ????????????? ?????? ??? ??????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "META-???? ??????? ????????? ??????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "??? ???????? ???????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "?????? ????????????? ????? ?????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "??? ??????????????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "??????????? ? ?????? ??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "??? ????????"

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/sv.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2009-01-10 19:04+0000\n"
 "Last-Translator: Daniel Nylander <yeager at ubuntu.com>\n"
 "Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
@@ -17,11 +17,230 @@
 "X-Launchpad-Export-Date: 2009-01-11 04:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr "Ok?nd"
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "Danska"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "Nederl?ndska"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "Engelska"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "Finska"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "Franska"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "Tyska"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "Ungerska"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "Italienska"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "Norska"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "Portugisiska"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "Rum?nska"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "Ryska"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "Spanska"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "Svenska"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "Turkiska"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "Mina webbsidor"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "Mina dokument"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "Viktigt"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "Ny"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "Personlig"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr "Jag"
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr "Senaste f?rst"
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr "Personliga saker"
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr "Med etiketten Ny"
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr "Har CJKV"
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr "P? engelska"
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr "10kb och mindre"
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "Oklassificerad"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr "Indexfel"
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr "Kunde inte indexera dokument"
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "Kunde inte uppdatera dokument"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "Kunde inte avindexera dokument"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "Kunde inte k?ra fr?ga p? s?kmotor"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr "Kunde inte h?mta historik f?r s?kmotor"
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr "Kunde inte h?mta dokument"
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr "Fel i fil?vervakare"
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr "Kunde inte ?ppna katalog"
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr "Indexet finns inte"
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "Kunde inte skapa s?kmotor"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "Kan inte indexera dokumenttyp"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr "Ingen h?mtare f?r detta protokoll"
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots META-tagg f?rbjuder indexering"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr "Ingen ?vervakningshanterare"
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "Ok?nt fel"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr "Indexeringen stoppades"
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "Kan inte indexera post h?r"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "h?ller redan p? att bli indexerad"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "?r svartlistad"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "Ingen titel"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "S?kmotorer"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "Aktuell anv?ndare"
 
@@ -85,15 +304,15 @@
 msgid "Import URL"
 msgstr "Importera url"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "Visa f?reg?ende"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "Visa n?sta"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "Alla"
 
@@ -184,34 +403,10 @@
 msgstr "Odefinierad"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr "Levande fr?ga"
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "Mina webbsidor"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "Mina dokument"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -237,7 +432,7 @@
 msgid "Query"
 msgstr "Fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr "p?"
 
@@ -270,8 +465,8 @@
 msgid "Couldn't rename index, name"
 msgstr "Kunde inte byta namn p? index, namn"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "anv?nds redan"
 
@@ -283,107 +478,107 @@
 msgid "Edited index"
 msgstr "Redigerade index"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr "Exportera"
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Couldn't find similar documents"
 msgstr "Kunde inte hitta liknande dokument"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "Index"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "finns inte"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "Ta bort detta dokument fr?n indexet?"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "Ta bort dessa dokument fr?n indexet?"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "Avindexera"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Ett metas?kningsverktyg f?r Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "S?k p? webben och i dina dokument!"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "Indexnamn"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "Kunde inte l?gga till index"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "Lade till nytt index"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "Kunde inte ta bort index"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr "Ingen historik f?r"
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "?tminstone en uppgift har inte f?rdigst?llts ?n. Avsluta nu?"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr "Avsluta"
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "Fr?genamn"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "Kunde inte uppdatera fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "Redigerade fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "Kunde inte l?gga till fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "Lade till ny fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "Fr?gan ?r inte inst?lld"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "Ingen s?kmotor vald"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "St?ll in Google API-nyckeln f?rst"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "K?r fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "Inget standardprogram definierat f?r typen"
 
@@ -468,132 +663,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr "Menade du?"
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr "St?ng"
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr "Ok?nd"
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "Danska"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "Nederl?ndska"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "Engelska"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "Finska"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "Franska"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "Tyska"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "Ungerska"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "Italienska"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "Norska"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "Portugisiska"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "Rum?nska"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "Ryska"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "Spanska"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "Svenska"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "Turkiska"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Kunde inte ?ppna index"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Kunde inte skapa historikdatabas"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "Viktigt"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "Ny"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "Personlig"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr "Jag"
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr "Senaste f?rst"
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr "Personliga saker"
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr "Med etiketten Ny"
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr "Har CJKV"
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr "P? engelska"
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr "10kb och mindre"
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "Oklassificerad"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -758,12 +843,12 @@
 msgstr "Fil?ndelse"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "Url"
 
@@ -792,7 +877,7 @@
 msgstr "Etikett"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "Datum"
 
@@ -846,11 +931,11 @@
 msgstr "Fr?geparametrar"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "Betyg"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 msgid "No results"
 msgstr "Inga tr?ffar"
 
@@ -887,11 +972,6 @@
 msgid "documents"
 msgstr "dokument"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "Ok?nt fel"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -924,83 +1004,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "Fel"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr "Indexfel"
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr "Kunde inte indexera dokument"
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "Kunde inte uppdatera dokument"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "Kunde inte avindexera dokument"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "Kunde inte k?ra fr?ga p? s?kmotor"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr "Kunde inte h?mta historik f?r s?kmotor"
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr "Kunde inte h?mta dokument"
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr "Fel i fil?vervakare"
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr "Kunde inte ?ppna katalog"
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr "Indexet finns inte"
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "Kunde inte skapa s?kmotor"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "Kan inte indexera dokumenttyp"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr "Ingen h?mtare f?r detta protokoll"
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots META-tagg f?rbjuder indexering"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr "Ingen ?vervakningshanterare"
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr "Indexeringen stoppades"
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "Kan inte indexera post h?r"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "h?ller redan p? att bli indexerad"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "?r svartlistad"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "Ingen titel"

Modified: trunk/po/zh_CN.po
===================================================================
--- trunk/po/zh_CN.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/zh_CN.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -4,9 +4,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2008-11-01 03:08+0000\n"
 "Last-Translator: rainofchaos <rainofchaos at gmail.com>\n"
 "Language-Team: LANGUAGE <LL at li.org>\n"
@@ -16,11 +16,230 @@
 "X-Launchpad-Export-Date: 2008-11-15 08:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "?????"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "????"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "????"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "????"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "???"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "??"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "????"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr ""
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr ""
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr ""
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr ""
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr ""
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr ""
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "????"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "?????????"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "??????????"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "????????"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "????????"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots?meta???????"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "???????"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "?????"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "???"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "??????"
 
@@ -84,15 +303,15 @@
 msgid "Import URL"
 msgstr "??URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "???????"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "???????"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "???"
 
@@ -181,34 +400,10 @@
 msgstr "???"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr ""
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "????"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "????"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -235,7 +430,7 @@
 msgid "Query"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr ""
 
@@ -268,8 +463,8 @@
 msgid "Couldn't rename index, name"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "??????"
 
@@ -281,108 +476,108 @@
 msgid "Edited index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 #, fuzzy
 msgid "Couldn't find similar documents"
 msgstr "?????????"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "???????????"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Free Desktop ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "???????????"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "??????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "????Google API key"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "????????????"
 
@@ -472,132 +667,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr ""
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "?????"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "?????????"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "???"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "??"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "????"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "????"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -761,12 +846,12 @@
 msgstr "???"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "??"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "??"
 
@@ -795,7 +880,7 @@
 msgstr "??"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "??"
 
@@ -849,11 +934,11 @@
 msgstr "?????"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "??"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 #, fuzzy
 msgid "No results"
 msgstr "??"
@@ -891,11 +976,6 @@
 msgid "documents"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "???????"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -928,83 +1008,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "??"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "?????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "??????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots?meta???????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "?????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "???"

Modified: trunk/po/zh_TW.po
===================================================================
--- trunk/po/zh_TW.po	2009-03-05 14:27:23 UTC (rev 1578)
+++ trunk/po/zh_TW.po	2009-03-05 14:30:19 UTC (rev 1579)
@@ -5,9 +5,9 @@
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.90\n"
+"Project-Id-Version: pinot 0.91\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2009-01-28 23:35+0800\n"
+"POT-Creation-Date: 2009-03-05 23:19+0800\n"
 "PO-Revision-Date: 2008-08-23 16:15+0000\n"
 "Last-Translator: Yung-chung Lin <henearkrxern at gmail.com>\n"
 "Language-Team: Traditional Chinese <zh_TW at li.org>\n"
@@ -17,11 +17,230 @@
 "X-Launchpad-Export-Date: 2008-11-15 08:36+0000\n"
 "X-Generator: Launchpad (build Unknown)\n"
 
-#: UI/GTK2/src/EnginesTree.cpp:68 UI/GTK2/src/statisticsDialog.cc:171
+#. Localize language names
+#: Core/pinot-dbus-daemon.cpp:446 UI/GTK2/src/pinot.cc:255
+msgid "Unknown"
+msgstr ""
+
+#: Core/pinot-dbus-daemon.cpp:447 UI/GTK2/src/pinot.cc:256
+msgid "Danish"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:448 UI/GTK2/src/pinot.cc:257
+msgid "Dutch"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:449 UI/GTK2/src/pinot.cc:258
+msgid "English"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:450 UI/GTK2/src/pinot.cc:259
+msgid "Finnish"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:451 UI/GTK2/src/pinot.cc:260
+msgid "French"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:452 UI/GTK2/src/pinot.cc:261
+msgid "German"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:453 UI/GTK2/src/pinot.cc:262
+msgid "Hungarian"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:454 UI/GTK2/src/pinot.cc:263
+msgid "Italian"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:455 UI/GTK2/src/pinot.cc:264
+msgid "Norwegian"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:456 UI/GTK2/src/pinot.cc:265
+msgid "Portuguese"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:457 UI/GTK2/src/pinot.cc:266
+msgid "Romanian"
+msgstr "?????"
+
+#: Core/pinot-dbus-daemon.cpp:458 UI/GTK2/src/pinot.cc:267
+msgid "Russian"
+msgstr "??"
+
+#: Core/pinot-dbus-daemon.cpp:459 UI/GTK2/src/pinot.cc:268
+msgid "Spanish"
+msgstr "????"
+
+#: Core/pinot-dbus-daemon.cpp:460 UI/GTK2/src/pinot.cc:269
+msgid "Swedish"
+msgstr "???"
+
+#: Core/pinot-dbus-daemon.cpp:461 UI/GTK2/src/pinot.cc:270
+msgid "Turkish"
+msgstr "????"
+
+#. Internal indices
+#. Apply this label
+#. Add a row to the index tree
+#. Allow this only for internal indexes
+#: Core/PinotSettings.cpp:433 Core/PinotSettings.cpp:1709
+#: Core/WorkerThreads.cpp:1013 UI/GTK2/src/mainWindow.cc:844
+#: UI/GTK2/src/mainWindow.cc:1114 UI/GTK2/src/mainWindow.cc:1377
+#: UI/GTK2/src/mainWindow.cc:1537 UI/GTK2/src/mainWindow.cc:1540
+#: UI/GTK2/src/mainWindow.cc:1641 UI/GTK2/src/mainWindow.cc:1677
+#: UI/GTK2/src/mainWindow.cc:1699 UI/GTK2/src/mainWindow.cc:2408
+#: UI/GTK2/src/statisticsDialog.cc:157
+msgid "My Web Pages"
+msgstr "????"
+
+#. Spawn new threads
+#: Core/PinotSettings.cpp:434 Core/PinotSettings.cpp:1710
+#: Core/WorkerThreads.cpp:1023 UI/GTK2/src/mainWindow.cc:847
+#: UI/GTK2/src/mainWindow.cc:1109 UI/GTK2/src/mainWindow.cc:1367
+#: UI/GTK2/src/mainWindow.cc:1381 UI/GTK2/src/mainWindow.cc:1548
+#: UI/GTK2/src/mainWindow.cc:1551 UI/GTK2/src/mainWindow.cc:2412
+#: UI/GTK2/src/statisticsDialog.cc:163
+msgid "My Documents"
+msgstr "????"
+
+#. Add default labels
+#: Core/PinotSettings.cpp:439
+msgid "Important"
+msgstr "???"
+
+#: Core/PinotSettings.cpp:440
+msgid "New"
+msgstr "??"
+
+#: Core/PinotSettings.cpp:441
+msgid "Personal"
+msgstr "????"
+
+#: Core/PinotSettings.cpp:463
+msgid "Me"
+msgstr ""
+
+#: Core/PinotSettings.cpp:471
+msgid "Latest First"
+msgstr ""
+
+#: Core/PinotSettings.cpp:474
+msgid "Home Stuff"
+msgstr ""
+
+#: Core/PinotSettings.cpp:475
+msgid "With Label New"
+msgstr ""
+
+#: Core/PinotSettings.cpp:476
+msgid "Have CJKV"
+msgstr ""
+
+#: Core/PinotSettings.cpp:477
+msgid "In English"
+msgstr ""
+
+#: Core/PinotSettings.cpp:478
+msgid "10kb And Smaller"
+msgstr ""
+
+#: Core/PinotSettings.cpp:523
+msgid "Unclassified"
+msgstr "????"
+
+#: Core/WorkerThreads.cpp:93
+msgid "Index error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:95
+msgid "Couldn't index document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:97
+msgid "Couldn't update document"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:99
+msgid "Couldn't unindex document(s)"
+msgstr "?????????"
+
+#: Core/WorkerThreads.cpp:101
+msgid "Couldn't run query on search engine"
+msgstr "??????????"
+
+#: Core/WorkerThreads.cpp:103
+msgid "Couldn't get history for search engine"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:105
+msgid "Couldn't retrieve document"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:107
+msgid "File monitor error"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:109
+msgid "Couldn't open directory"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:111
+msgid "Index doesn't exist"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:113
+msgid "Couldn't create search engine"
+msgstr "????????"
+
+#: Core/WorkerThreads.cpp:115
+msgid "Cannot index document type"
+msgstr "????????"
+
+#: Core/WorkerThreads.cpp:117
+msgid "No downloader for this protocol"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:119
+msgid "Robots META tag forbids indexing"
+msgstr "Robots?meta???????"
+
+#: Core/WorkerThreads.cpp:121
+msgid "No monitoring handler"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:126 UI/GTK2/src/statisticsDialog.cc:245
+#: UI/GTK2/src/statisticsDialog.cc:263
+msgid "Unknown error"
+msgstr "???????"
+
+#: Core/WorkerThreads.cpp:423
+msgid "Indexing was stopped"
+msgstr ""
+
+#: Core/WorkerThreads.cpp:436
+msgid "Can't index mail here"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:457 Core/WorkerThreads.cpp:740
+msgid "is already being indexed"
+msgstr "??????"
+
+#: Core/WorkerThreads.cpp:467
+msgid "is blacklisted"
+msgstr "?????"
+
+#: Core/WorkerThreads.cpp:976
+msgid "No title"
+msgstr "???"
+
+#: UI/GTK2/src/EnginesTree.cc:68 UI/GTK2/src/statisticsDialog.cc:171
 msgid "Search Engines"
 msgstr "????"
 
-#: UI/GTK2/src/EnginesTree.cpp:250
+#: UI/GTK2/src/EnginesTree.cc:250
 msgid "Current User"
 msgstr "??????"
 
@@ -85,15 +304,15 @@
 msgid "Import URL"
 msgstr "??URL"
 
-#: UI/GTK2/src/IndexPage.cpp:48
+#: UI/GTK2/src/IndexPage.cc:48
 msgid "Show Previous"
 msgstr "???????"
 
-#: UI/GTK2/src/IndexPage.cpp:54
+#: UI/GTK2/src/IndexPage.cc:54
 msgid "Show Next"
 msgstr "???????"
 
-#: UI/GTK2/src/IndexPage.cpp:180
+#: UI/GTK2/src/IndexPage.cc:180
 msgid "All"
 msgstr "???"
 
@@ -182,34 +401,10 @@
 msgstr "???"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2779
+#: UI/GTK2/src/mainWindow.cc:598 UI/GTK2/src/mainWindow.cc:2781
 msgid "Live query"
 msgstr ""
 
-#. Apply this label
-#. Add a row to the index tree
-#. Allow this only for internal indexes
-#. Internal indices
-#: UI/GTK2/src/mainWindow.cc:844 UI/GTK2/src/mainWindow.cc:1114
-#: UI/GTK2/src/mainWindow.cc:1377 UI/GTK2/src/mainWindow.cc:1537
-#: UI/GTK2/src/mainWindow.cc:1540 UI/GTK2/src/mainWindow.cc:1641
-#: UI/GTK2/src/mainWindow.cc:1677 UI/GTK2/src/mainWindow.cc:1699
-#: UI/GTK2/src/mainWindow.cc:2406 UI/GTK2/src/PinotSettings.cpp:429
-#: UI/GTK2/src/PinotSettings.cpp:1705 UI/GTK2/src/statisticsDialog.cc:157
-#: UI/GTK2/src/WorkerThreads.cpp:1089
-msgid "My Web Pages"
-msgstr "????"
-
-#. Spawn new threads
-#: UI/GTK2/src/mainWindow.cc:847 UI/GTK2/src/mainWindow.cc:1109
-#: UI/GTK2/src/mainWindow.cc:1367 UI/GTK2/src/mainWindow.cc:1381
-#: UI/GTK2/src/mainWindow.cc:1548 UI/GTK2/src/mainWindow.cc:1551
-#: UI/GTK2/src/mainWindow.cc:2410 UI/GTK2/src/PinotSettings.cpp:430
-#: UI/GTK2/src/PinotSettings.cpp:1706 UI/GTK2/src/statisticsDialog.cc:163
-#: UI/GTK2/src/WorkerThreads.cpp:1099
-msgid "My Documents"
-msgstr "????"
-
 #. Show the URL of the first document in the status bar
 #: UI/GTK2/src/mainWindow.cc:876
 msgid "Document location is"
@@ -236,7 +431,7 @@
 msgid "Query"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3324
+#: UI/GTK2/src/mainWindow.cc:1332 UI/GTK2/src/mainWindow.cc:3326
 msgid "on"
 msgstr ""
 
@@ -269,8 +464,8 @@
 msgid "Couldn't rename index, name"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2607
-#: UI/GTK2/src/mainWindow.cc:3130
+#: UI/GTK2/src/mainWindow.cc:1799 UI/GTK2/src/mainWindow.cc:2609
+#: UI/GTK2/src/mainWindow.cc:3132
 msgid "is already in use"
 msgstr "??????"
 
@@ -282,108 +477,108 @@
 msgid "Edited index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2134
+#: UI/GTK2/src/mainWindow.cc:2136
 msgid "Export"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2179
+#: UI/GTK2/src/mainWindow.cc:2181
 #, fuzzy
 msgid "Couldn't find similar documents"
 msgstr "?????????"
 
-#: UI/GTK2/src/mainWindow.cc:2422
+#: UI/GTK2/src/mainWindow.cc:2424
 msgid "Index"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:2426
+#: UI/GTK2/src/mainWindow.cc:2428
 msgid "doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow.cc:2494
+#: UI/GTK2/src/mainWindow.cc:2496
 msgid "Remove this document from the index ?"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2513
+#: UI/GTK2/src/mainWindow.cc:2515
 msgid "Remove these documents from the index ?"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2518 UI/GTK2/src/mainWindow_glade.cc:180
+#: UI/GTK2/src/mainWindow.cc:2520 UI/GTK2/src/mainWindow_glade.cc:180
 msgid "Unindex"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:2557
+#: UI/GTK2/src/mainWindow.cc:2559
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Free Desktop ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2558
+#: UI/GTK2/src/mainWindow.cc:2560
 msgid "Search the Web and your documents !"
 msgstr "????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2603
+#: UI/GTK2/src/mainWindow.cc:2605
 msgid "Index name"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:2617
+#: UI/GTK2/src/mainWindow.cc:2619
 msgid "Couldn't add index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2633
+#: UI/GTK2/src/mainWindow.cc:2635
 msgid "Added new index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2668
+#: UI/GTK2/src/mainWindow.cc:2670
 msgid "Couldn't remove index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2868
+#: UI/GTK2/src/mainWindow.cc:2870
 msgid "No history for"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2940 UI/GTK2/src/prefsWindow.cc:960
+#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:960
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "??????????????????"
 
-#: UI/GTK2/src/mainWindow.cc:2942 UI/GTK2/src/prefsWindow.cc:962
+#: UI/GTK2/src/mainWindow.cc:2944 UI/GTK2/src/prefsWindow.cc:962
 msgid "Quit"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3126
+#: UI/GTK2/src/mainWindow.cc:3128
 msgid "Query name"
 msgstr "????"
 
-#: UI/GTK2/src/mainWindow.cc:3153
+#: UI/GTK2/src/mainWindow.cc:3155
 msgid "Couldn't update query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:3164
+#: UI/GTK2/src/mainWindow.cc:3166
 msgid "Edited query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:3171
+#: UI/GTK2/src/mainWindow.cc:3173
 msgid "Couldn't add query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:3179
+#: UI/GTK2/src/mainWindow.cc:3181
 msgid "Added new query"
 msgstr "?????"
 
-#: UI/GTK2/src/mainWindow.cc:3213
+#: UI/GTK2/src/mainWindow.cc:3215
 msgid "Query is not set"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:3224
+#: UI/GTK2/src/mainWindow.cc:3226
 msgid "No search engine selected"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:3311
+#: UI/GTK2/src/mainWindow.cc:3313
 msgid "Please set the Google API key first"
 msgstr "????Google API key"
 
-#: UI/GTK2/src/mainWindow.cc:3320
+#: UI/GTK2/src/mainWindow.cc:3322
 msgid "Running query"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:3529
+#: UI/GTK2/src/mainWindow.cc:3531
 msgid "No default application defined for type"
 msgstr "????????????"
 
@@ -473,132 +668,22 @@
 msgid "Pinot"
 msgstr "Pinot"
 
-#: UI/GTK2/src/Notebook.cpp:84
+#: UI/GTK2/src/Notebook.cc:84
 msgid "Did you mean ?"
 msgstr ""
 
-#: UI/GTK2/src/Notebook.cpp:95 UI/GTK2/src/Notebook.cpp:236
+#: UI/GTK2/src/Notebook.cc:95 UI/GTK2/src/Notebook.cc:236
 msgid "Close"
 msgstr ""
 
-#. Localize language names
-#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:443
-msgid "Unknown"
-msgstr ""
-
-#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:444
-msgid "Danish"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:445
-msgid "Dutch"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:446
-msgid "English"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:447
-msgid "Finnish"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:448
-msgid "French"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:449
-msgid "German"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:450
-msgid "Hungarian"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:451
-msgid "Italian"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:452
-msgid "Norwegian"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:453
-msgid "Portuguese"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:454
-msgid "Romanian"
-msgstr "?????"
-
-#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:455
-msgid "Russian"
-msgstr "??"
-
-#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:456
-msgid "Spanish"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:272 UI/GTK2/src/pinot-dbus-daemon.cc:457
-msgid "Swedish"
-msgstr "???"
-
-#: UI/GTK2/src/pinot.cc:273 UI/GTK2/src/pinot-dbus-daemon.cc:458
-msgid "Turkish"
-msgstr "????"
-
-#: UI/GTK2/src/pinot.cc:299
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:320
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "?????????"
 
-#. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:435
-msgid "Important"
-msgstr "???"
-
-#: UI/GTK2/src/PinotSettings.cpp:436
-msgid "New"
-msgstr "??"
-
-#: UI/GTK2/src/PinotSettings.cpp:437
-msgid "Personal"
-msgstr "????"
-
-#: UI/GTK2/src/PinotSettings.cpp:459
-msgid "Me"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:467
-msgid "Latest First"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:470
-msgid "Home Stuff"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:471
-msgid "With Label New"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:472
-msgid "Have CJKV"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:473
-msgid "In English"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:474
-msgid "10kb And Smaller"
-msgstr ""
-
-#: UI/GTK2/src/PinotSettings.cpp:519
-msgid "Unclassified"
-msgstr "????"
-
 #: UI/GTK2/src/prefsWindow.cc:149
 msgid "File Indexing and Search"
 msgstr ""
@@ -762,12 +847,12 @@
 msgstr "???"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cpp:141
+#: UI/GTK2/src/queryDialog.cc:113 UI/GTK2/src/ResultsTree.cc:141
 msgid "Title"
 msgstr "??"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cpp:151
+#: UI/GTK2/src/queryDialog.cc:114 UI/GTK2/src/ResultsTree.cc:151
 msgid "URL"
 msgstr "??"
 
@@ -796,7 +881,7 @@
 msgstr "??"
 
 #. The last column is for the timestamp
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:159
+#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cc:159
 msgid "Date"
 msgstr "??"
 
@@ -850,11 +935,11 @@
 msgstr "?????"
 
 #. This is the score column
-#: UI/GTK2/src/ResultsTree.cpp:130
+#: UI/GTK2/src/ResultsTree.cc:130
 msgid "Score"
 msgstr "??"
 
-#: UI/GTK2/src/ResultsTree.cpp:1555
+#: UI/GTK2/src/ResultsTree.cc:1555
 #, fuzzy
 msgid "No results"
 msgstr "??"
@@ -892,11 +977,6 @@
 msgid "documents"
 msgstr "??"
 
-#: UI/GTK2/src/statisticsDialog.cc:245 UI/GTK2/src/statisticsDialog.cc:263
-#: UI/GTK2/src/WorkerThreads.cpp:125
-msgid "Unknown error"
-msgstr "???????"
-
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:284
 msgid "Running under PID"
@@ -929,83 +1009,3 @@
 #: UI/GTK2/src/statisticsDialog.cc:402
 msgid "Errors"
 msgstr "??"
-
-#: UI/GTK2/src/WorkerThreads.cpp:92
-msgid "Index error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:94
-msgid "Couldn't index document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:96
-msgid "Couldn't update document"
-msgstr "??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:98
-msgid "Couldn't unindex document(s)"
-msgstr "?????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:100
-msgid "Couldn't run query on search engine"
-msgstr "??????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:102
-msgid "Couldn't get history for search engine"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:104
-msgid "Couldn't retrieve document"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:106
-msgid "File monitor error"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:108
-msgid "Couldn't open directory"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:110
-msgid "Index doesn't exist"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:112
-msgid "Couldn't create search engine"
-msgstr "????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:114
-msgid "Cannot index document type"
-msgstr "????????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:116
-msgid "No downloader for this protocol"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:118
-msgid "Robots META tag forbids indexing"
-msgstr "Robots?meta???????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:120
-msgid "No monitoring handler"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:420
-msgid "Indexing was stopped"
-msgstr ""
-
-#: UI/GTK2/src/WorkerThreads.cpp:433
-msgid "Can't index mail here"
-msgstr "??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:454 UI/GTK2/src/WorkerThreads.cpp:729
-msgid "is already being indexed"
-msgstr "??????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:464
-msgid "is blacklisted"
-msgstr "?????"
-
-#: UI/GTK2/src/WorkerThreads.cpp:1052
-msgid "No title"
-msgstr "???"



From fabricecolin at mail.berlios.de  Thu Mar  5 15:58:01 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Thu, 5 Mar 2009 15:58:01 +0100
Subject: [Pinot-svn] r1580 - trunk
Message-ID: <200903051458.n25Ew1R2030350@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-05 15:57:55 +0100 (Thu, 05 Mar 2009)
New Revision: 1580

Modified:
   trunk/ChangeLog-dijon
Log:
Current Dijon ChangeLog.


Modified: trunk/ChangeLog-dijon
===================================================================
--- trunk/ChangeLog-dijon	2009-03-05 14:30:19 UTC (rev 1579)
+++ trunk/ChangeLog-dijon	2009-03-05 14:57:55 UTC (rev 1580)
@@ -1,4 +1,49 @@
 ------------------------------------------------------------------------
+r138 | fabricecolin | 2009-03-05 21:51:00 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/HtmlFilter.cc
+
+Fixed findCharset().
+
+------------------------------------------------------------------------
+r137 | fabricecolin | 2009-03-05 21:19:24 +0800 (Thu, 05 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/filters/ExternalFilter.cc
+   M /trunk/filters/ExternalFilter.h
+   M /trunk/filters/HtmlFilter.cc
+
+If ExternalFilter is getting plain text, it will only grab the first 5Mb.
+Less chatty DEBUG in HtmlFilter.
+
+------------------------------------------------------------------------
+r136 | fabricecolin | 2009-02-28 14:39:52 +0800 (Sat, 28 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/filters/Filter.h
+   M /trunk/filters/GMimeMboxFilter.cc
+
+Allow initializing of dynamic filters when they are loaded with GCC's
+__attribute__((constructor)).
+
+------------------------------------------------------------------------
+r135 | fabricecolin | 2009-02-28 10:32:22 +0800 (Sat, 28 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/filters/HtmlFilter.cc
+   M /trunk/filters/HtmlFilter.h
+   A /trunk/filters/HtmlParser.cc
+   A /trunk/filters/HtmlParser.h
+
+Imported Xapian Omega's htmlparse.cc/h files, made some small changes. Rewrote
+HtmlFilter to use that instead of libxml2.
+
+------------------------------------------------------------------------
+r134 | fabricecolin | 2009-02-15 22:39:04 +0800 (Sun, 15 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/filters/external-filters.xml
+
+A hack to prevent rpm from chocking on text files mistakenly identified as RPMs
+by a broken shared-mime.
+
+------------------------------------------------------------------------
 r132 | fabricecolin | 2009-01-11 12:53:43 +0800 (Sun, 11 Jan 2009) | 2 lines
 Changed paths:
    M /trunk/filters/external-filters.xml



From fabricecolin at mail.berlios.de  Sat Mar  7 04:11:16 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 7 Mar 2009 04:11:16 +0100
Subject: [Pinot-svn] r1581 - trunk
Message-ID: <200903070311.n273BGKU020309@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-07 04:11:11 +0100 (Sat, 07 Mar 2009)
New Revision: 1581

Modified:
   trunk/NEWS
Log:
Updated NEWS, set 0.91 release date to today.


Modified: trunk/NEWS
===================================================================
--- trunk/NEWS	2009-03-05 14:57:55 UTC (rev 1580)
+++ trunk/NEWS	2009-03-07 03:11:11 UTC (rev 1581)
@@ -1,3 +1,29 @@
+2009/03/07 version_0_9_1
+General :
+ - patch by Adel Gadllah for gcc 4.4
+ - removed obsolete Encoding field from .desktop files
+Tokenize :
+ - new HTML filter based on Xapian Omega's HTML parser
+ - prevent rpm from choking on files with the ".rpm" extension that are not RPMs
+ - look for the ROBOTS metatag in remote documents only
+ - only consider the first 5Mb of documents
+IndexSearch :
+ - pinot-search can run stored queries created by the UI
+ - pinot-index can deal with relative paths, index directories and their contents,
+  open My Web Pages, My Documents or other UI-configured index by name
+Daemon :
+ - fixed issue where symlinks would get unindexed every second run
+ - fixed memory leak in time to timestamp conversions
+ - fixed memory leak when reapplying user-set metadata
+ - fixed memory leak when skipping the download of a local file
+ - don't flush the index while files are being indexed
+UI :
+ - fixed spelling suggestions on the live query
+ - the Import URL option can import local directories and their contents in
+  My Web Pages
+ - updated German translation by Gena Haltmair
+ - updated Portuguese translation by Fl?vio Martins
+
 2009/01/29 version_0_9_0
 General :
  - builds with MingW
@@ -52,7 +78,7 @@
   clicking the Yes button, a new query based on the selected suggestion will be
   created.
  - restructured menus
- - queries' Index Results option updatea documents already in My Web Pages. This
+ - queries' Index Results option updates documents already in My Web Pages. This
   doesn't apply to those in My Documents
  - on More Like This, selected documents are indexed to My Web Pages if necessary
  - both results and index lists can be exported to CSV or XML



From fabricecolin at mail.berlios.de  Sat Mar  7 04:15:09 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 7 Mar 2009 04:15:09 +0100
Subject: [Pinot-svn] r1582 - trunk
Message-ID: <200903070315.n273F93X020566@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-07 04:15:02 +0100 (Sat, 07 Mar 2009)
New Revision: 1582

Modified:
   trunk/ChangeLog
Log:
Current ChangeLog.


Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2009-03-07 03:11:11 UTC (rev 1581)
+++ trunk/ChangeLog	2009-03-07 03:15:02 UTC (rev 1582)
@@ -1,4 +1,574 @@
 ------------------------------------------------------------------------
+r1581 | fabricecolin | 2009-03-07 11:11:11 +0800 (Sat, 07 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/NEWS
+
+Updated NEWS, set 0.91 release date to today.
+
+------------------------------------------------------------------------
+r1580 | fabricecolin | 2009-03-05 22:57:55 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/ChangeLog-dijon
+
+Current Dijon ChangeLog.
+
+------------------------------------------------------------------------
+r1579 | fabricecolin | 2009-03-05 22:30:19 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/po/de.po
+   M /trunk/po/es.po
+   M /trunk/po/fr.po
+   M /trunk/po/he.po
+   M /trunk/po/it.po
+   M /trunk/po/ja.po
+   M /trunk/po/nl.po
+   M /trunk/po/pt.po
+   M /trunk/po/pt_BR.po
+   M /trunk/po/ru.po
+   M /trunk/po/sv.po
+   M /trunk/po/zh_CN.po
+   M /trunk/po/zh_TW.po
+
+Updated translations.
+
+------------------------------------------------------------------------
+r1578 | fabricecolin | 2009-03-05 22:27:23 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-dbus-daemon.1
+   M /trunk/Core/pinot-index.1
+   M /trunk/Core/pinot-search.1
+   M /trunk/IndexSearch/pinot-label.1
+   M /trunk/UI/GTK2/src/pinot.1
+
+Updated manual pages.
+
+------------------------------------------------------------------------
+r1577 | fabricecolin | 2009-03-05 22:17:21 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/TODO
+   M /trunk/configure.in
+
+Bumped version number to 0.91, added tasks to the TODO list.
+
+------------------------------------------------------------------------
+r1576 | fabricecolin | 2009-03-05 21:33:26 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Collect/CurlDownloader.cpp
+
+Use a regex to get to the refresh META tag, rather than HtmlFilter.
+
+------------------------------------------------------------------------
+r1575 | fabricecolin | 2009-03-05 21:32:25 +0800 (Thu, 05 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/FAQ
+
+Give tips on how to reduce memory usage a bit.
+
+------------------------------------------------------------------------
+r1574 | fabricecolin | 2009-03-05 21:21:13 +0800 (Thu, 05 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
+
+TokensIndexer guesstimates where it's at in the original document and doesn't
+generate terms past 5Mb.
+
+------------------------------------------------------------------------
+r1573 | fabricecolin | 2009-03-04 21:59:49 +0800 (Wed, 04 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/WorkerThreads.cpp
+
+Don't reset m_backgroundThreadsCount.
+
+------------------------------------------------------------------------
+r1572 | fabricecolin | 2009-03-01 22:34:20 +0800 (Sun, 01 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/AUTHORS
+   M /trunk/po/de.po
+   M /trunk/po/pt.po
+
+Updated translations by Gena Haltmair (German) and Fl?vio Martins (Portuguese).
+
+------------------------------------------------------------------------
+r1571 | fabricecolin | 2009-03-01 21:37:34 +0800 (Sun, 01 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/SQL/CrawlHistory.cpp
+
+Fixed update query in updateItemsStatus().
+
+------------------------------------------------------------------------
+r1570 | fabricecolin | 2009-03-01 21:36:26 +0800 (Sun, 01 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Utils/DocumentInfo.cpp
+
+Missing include, reported by Adel Gadllah, with gcc 4.4.
+
+------------------------------------------------------------------------
+r1569 | fabricecolin | 2009-03-01 15:54:00 +0800 (Sun, 01 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/OnDiskHandler.cpp
+   M /trunk/Core/OnDiskHandler.h
+   M /trunk/Core/WorkerThreads.cpp
+
+Don't flush the index on file events.
+
+------------------------------------------------------------------------
+r1568 | fabricecolin | 2009-03-01 10:39:08 +0800 (Sun, 01 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/DaemonState.cpp
+   M /trunk/Core/DaemonState.h
+
+Flush the index when all foreground threads have returned so that it doesn't
+interfere with indexing.
+
+------------------------------------------------------------------------
+r1567 | fabricecolin | 2009-03-01 10:35:42 +0800 (Sun, 01 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/UniqueApplication.cpp
+   M /trunk/Core/WorkerThreads.cpp
+   M /trunk/configure.in
+
+Functions kill() and lstat() may not be available.
+
+------------------------------------------------------------------------
+r1566 | fabricecolin | 2009-02-28 20:44:09 +0800 (Sat, 28 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Utils/Url.cpp
+
+Missing include.
+
+------------------------------------------------------------------------
+r1565 | fabricecolin | 2009-02-28 19:37:26 +0800 (Sat, 28 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/DaemonState.cpp
+   M /trunk/Core/DaemonState.h
+
+Flush the index explicitely when a crawler returns and no other is started.
+
+------------------------------------------------------------------------
+r1564 | fabricecolin | 2009-02-28 14:37:41 +0800 (Sat, 28 Feb 2009) | 4 lines
+Changed paths:
+   M /trunk/Core/PinotSettings.cpp
+   M /trunk/Core/pinot-dbus-daemon.cpp
+   M /trunk/Core/pinot-index.cpp
+   M /trunk/UI/GTK2/src/pinot.cc
+
+PinotSettings::getInstance() will initialize libxml2.
+HtmlFilter doesn't need initializing any more.
+Don't unload filters at exit time to avoid a so far unexplained crash.
+
+------------------------------------------------------------------------
+r1563 | fabricecolin | 2009-02-28 10:46:18 +0800 (Sat, 28 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/Makefile.am
+
+HtmlParser files.
+
+------------------------------------------------------------------------
+r1562 | fabricecolin | 2009-02-18 19:29:22 +0800 (Wed, 18 Feb 2009) | 7 lines
+Changed paths:
+   M /trunk/configure.in
+
+Disable check for linux/sched.h, and therefore support for SCHED_IDLE, for the
+time being. See :
+http://lkml.org/lkml/2009/1/11/70
+http://lkml.org/lkml/2009/1/22/416
+http://lkml.org/lkml/2009/1/30/297
+Thanks to John Werden for reporting this.
+
+------------------------------------------------------------------------
+r1561 | fabricecolin | 2009-02-16 22:14:13 +0800 (Mon, 16 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-index.1
+   M /trunk/Core/pinot-index.cpp
+   M /trunk/README
+
+Running pinot-index --index on My Web Pages or My Documents isn't a good idea.
+
+------------------------------------------------------------------------
+r1560 | fabricecolin | 2009-02-15 22:31:13 +0800 (Sun, 15 Feb 2009) | 4 lines
+Changed paths:
+   M /trunk/Core/DaemonState.cpp
+   M /trunk/Core/ServerThreads.cpp
+   M /trunk/SQL/CrawlHistory.cpp
+   M /trunk/SQL/CrawlHistory.h
+
+Be selective when changing the status of crawled items on full scan. The status
+of links shouldn't be changed or they would be skipped during the crawl and
+what they point to would get unindexed.
+
+------------------------------------------------------------------------
+r1559 | fabricecolin | 2009-02-15 20:19:43 +0800 (Sun, 15 Feb 2009) | 5 lines
+Changed paths:
+   M /trunk/Core/WorkerThreads.cpp
+   M /trunk/Core/WorkerThreads.h
+
+Cache what type of downloader DownloadingThread last got to avoid getting a new
+one every time. IndexingThread doesn't get a new Index on every call to its
+doWork() method.
+Look for the ROBOTS meta tag in remote documents only.
+
+------------------------------------------------------------------------
+r1558 | fabricecolin | 2009-02-15 10:25:00 +0800 (Sun, 15 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/pinot-dbus-daemon.cpp
+   M /trunk/configure.in
+
+If linux/sched.h is available, use sched_setscheduler(SCHED_IDLE) in place of
+setpriority().
+
+------------------------------------------------------------------------
+r1557 | fabricecolin | 2009-02-15 10:23:39 +0800 (Sun, 15 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/pinot-index.cpp
+
+Don't allow threads to flush the index.
+Delete the state object before exit.
+
+------------------------------------------------------------------------
+r1556 | fabricecolin | 2009-02-15 10:22:11 +0800 (Sun, 15 Feb 2009) | 5 lines
+Changed paths:
+   M /trunk/Core/ServerThreads.cpp
+   M /trunk/Core/WorkerThreads.cpp
+   M /trunk/Utils/TimeConverter.cpp
+
+Fixed some memory leaks :
+- when converting to a timestamp (struct tm)
+- when reapplying user-set metadata (Index)
+- when skipping the download of local files (Document)
+
+------------------------------------------------------------------------
+r1555 | fabricecolin | 2009-02-14 10:39:19 +0800 (Sat, 14 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/README
+
+Specify that attachments and documents embedded in mbox email are indexed, and
+can be opened from the UI.
+
+------------------------------------------------------------------------
+r1554 | fabricecolin | 2009-02-12 22:06:02 +0800 (Thu, 12 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/pinot-dbus-daemon.desktop
+   M /trunk/pinot-prefs.desktop
+   M /trunk/pinot.desktop
+
+Removed deprecated Encoding field.
+
+------------------------------------------------------------------------
+r1553 | fabricecolin | 2009-02-12 22:04:00 +0800 (Thu, 12 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/ServerThreads.cpp
+
+Don't have monitorEntry() return false if no monitor is available, this would
+log an error.
+
+------------------------------------------------------------------------
+r1552 | fabricecolin | 2009-02-12 22:02:28 +0800 (Thu, 12 Feb 2009) | 5 lines
+Changed paths:
+   M /trunk/Core/WorkerThreads.cpp
+   M /trunk/Core/WorkerThreads.h
+   M /trunk/Core/pinot-index.cpp
+   M /trunk/UI/GTK2/src/Makefile.am
+   A /trunk/UI/GTK2/src/UIThreads.cc
+   A /trunk/UI/GTK2/src/UIThreads.hh
+   M /trunk/UI/GTK2/src/mainWindow.cc
+   M /trunk/UI/GTK2/src/mainWindow.hh
+   M /trunk/UI/GTK2/src/prefsWindow.hh
+   M /trunk/UI/GTK2/src/statisticsDialog.hh
+   M /trunk/po/POTFILES.in
+
+ThreadsManager needs to know whether local files should be scanned with
+DirectoryScanner or indexed right away with IndexingThread. This only makes
+sense in pinot-index and the UI.
+Moved UI-specific thread classes to UIThreads.
+
+------------------------------------------------------------------------
+r1551 | fabricecolin | 2009-02-07 17:37:40 +0800 (Sat, 07 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-index.1
+   M /trunk/Core/pinot-index.cpp
+
+Make it clear that -d/--db is mandatory.
+
+------------------------------------------------------------------------
+r1550 | fabricecolin | 2009-02-07 17:36:04 +0800 (Sat, 07 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Utils/Url.cpp
+
+Fix for previous check-in.
+
+------------------------------------------------------------------------
+r1549 | fabricecolin | 2009-02-07 12:20:06 +0800 (Sat, 07 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+   M /trunk/Core/pinot-index.cpp
+   M /trunk/IndexSearch/pinot-label.cpp
+
+Let Url deal with relative paths.
+
+------------------------------------------------------------------------
+r1548 | fabricecolin | 2009-02-07 12:17:39 +0800 (Sat, 07 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Utils/Url.cpp
+   M /trunk/Utils/Url.h
+
+Additional Url constructor for absolute and relative paths.
+
+------------------------------------------------------------------------
+r1547 | fabricecolin | 2009-02-06 22:49:54 +0800 (Fri, 06 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/DaemonState.cpp
+
+Swapped DirectoryScanner for Crawler threads.
+
+------------------------------------------------------------------------
+r1546 | fabricecolin | 2009-02-06 22:47:31 +0800 (Fri, 06 Feb 2009) | 4 lines
+Changed paths:
+   M /trunk/Core/pinot-index.cpp
+
+IndexingState is a ThreadsManager subclass that enables this program to rely on
+IndexingThread and DirectoryScannerThread. In practice, this means it can index
+directories recursively at last.
+
+------------------------------------------------------------------------
+r1545 | fabricecolin | 2009-02-06 22:43:55 +0800 (Fri, 06 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-dbus-daemon.cpp
+
+Minor includes fix.
+
+------------------------------------------------------------------------
+r1544 | fabricecolin | 2009-02-06 22:43:22 +0800 (Fri, 06 Feb 2009) | 4 lines
+Changed paths:
+   M /trunk/Core/ServerThreads.cpp
+   M /trunk/Core/ServerThreads.h
+   M /trunk/Core/WorkerThreads.cpp
+   M /trunk/Core/WorkerThreads.h
+
+Moved crawl history and monitoring out of DirectoryScanner so that it's usable
+outside of the daemon, and moved the class to WorkerThreads.
+Crawler inherits from DirectoryScanner and handles crawl history and monitoring.
+
+------------------------------------------------------------------------
+r1543 | fabricecolin | 2009-02-05 21:16:55 +0800 (Thu, 05 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-index.cpp
+
+Resolve local URLs only.
+
+------------------------------------------------------------------------
+r1542 | fabricecolin | 2009-02-04 19:36:33 +0800 (Wed, 04 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/ServerThreads.cpp
+
+Use Url::resolvePath().
+
+------------------------------------------------------------------------
+r1541 | fabricecolin | 2009-02-03 21:25:58 +0800 (Tue, 03 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-search.cpp
+
+Support for gettext().
+
+------------------------------------------------------------------------
+r1540 | fabricecolin | 2009-02-03 21:25:11 +0800 (Tue, 03 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/pinot-index.cpp
+
+Urls passed as parameters may exclude "file://", be relative paths.
+Support for gettext().
+
+------------------------------------------------------------------------
+r1539 | fabricecolin | 2009-02-03 21:14:49 +0800 (Tue, 03 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Utils/Url.cpp
+   M /trunk/Utils/Url.h
+
+Url::resolvePath() is based on the path resolver code written for ServerThreads.
+
+------------------------------------------------------------------------
+r1538 | fabricecolin | 2009-02-02 21:59:23 +0800 (Mon, 02 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-dbus-daemon.1
+   M /trunk/Core/pinot-search.1
+   M /trunk/IndexSearch/pinot-label.1
+   M /trunk/UI/GTK2/src/pinot.1
+
+Updated manual pages.
+
+------------------------------------------------------------------------
+r1537 | fabricecolin | 2009-02-02 21:44:00 +0800 (Mon, 02 Feb 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+   A /trunk/Core/pinot-index.1 (from /trunk/IndexSearch/pinot-index.1:1536)
+   A /trunk/Core/pinot-index.cpp (from /trunk/IndexSearch/pinot-index.cpp:1536)
+   M /trunk/IndexSearch/Makefile.am
+   D /trunk/IndexSearch/pinot-index.1
+   D /trunk/IndexSearch/pinot-index.cpp
+   M /trunk/Makefile.am
+
+Moved pinot-index to Core. Use PinotSettings for proxy parameters.
+The -d/--db option may be the name of an index.
+
+------------------------------------------------------------------------
+r1536 | fabricecolin | 2009-02-01 22:28:52 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+   M /trunk/Makefile.am
+
+Minor fixes.
+
+------------------------------------------------------------------------
+r1535 | fabricecolin | 2009-02-01 21:59:46 +0800 (Sun, 01 Feb 2009) | 4 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+   A /trunk/Core/pinot-search.1 (from /trunk/IndexSearch/pinot-search.1:1533)
+   A /trunk/Core/pinot-search.cpp (from /trunk/IndexSearch/pinot-search.cpp:1533)
+   M /trunk/IndexSearch/Makefile.am
+   D /trunk/IndexSearch/pinot-search.1
+   D /trunk/IndexSearch/pinot-search.cpp
+   M /trunk/Makefile.am
+
+Moved pinot-search to Core. Use PinotSettings for proxy parameters and plugins'
+editable parameters. Added -r/--storedquery option to find a stored query by
+name and run it.
+
+------------------------------------------------------------------------
+r1534 | fabricecolin | 2009-02-01 21:53:59 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-dbus-daemon.cpp
+   M /trunk/UI/GTK2/src/pinot.cc
+
+Removed reference to tokenizer libraries.
+
+------------------------------------------------------------------------
+r1533 | fabricecolin | 2009-02-01 19:55:37 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+
+Daemon specifics don't need be in libCore.
+
+------------------------------------------------------------------------
+r1532 | fabricecolin | 2009-02-01 19:49:12 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/po/POTFILES.in
+
+Files were renamed.
+
+------------------------------------------------------------------------
+r1531 | fabricecolin | 2009-02-01 19:47:02 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+   D /trunk/Core/pinot-dbus-daemon.cc
+   A /trunk/Core/pinot-dbus-daemon.cpp (from /trunk/Core/pinot-dbus-daemon.cc:1530)
+   A /trunk/UI/GTK2/src/EnginesTree.cc (from /trunk/UI/GTK2/src/EnginesTree.cpp:1529)
+   D /trunk/UI/GTK2/src/EnginesTree.cpp
+   D /trunk/UI/GTK2/src/EnginesTree.h
+   A /trunk/UI/GTK2/src/EnginesTree.hh (from /trunk/UI/GTK2/src/EnginesTree.h:1529)
+   A /trunk/UI/GTK2/src/IndexPage.cc (from /trunk/UI/GTK2/src/IndexPage.cpp:1529)
+   D /trunk/UI/GTK2/src/IndexPage.cpp
+   D /trunk/UI/GTK2/src/IndexPage.h
+   A /trunk/UI/GTK2/src/IndexPage.hh (from /trunk/UI/GTK2/src/IndexPage.h:1529)
+   M /trunk/UI/GTK2/src/Makefile.am
+   A /trunk/UI/GTK2/src/ModelColumns.cc (from /trunk/UI/GTK2/src/ModelColumns.cpp:1529)
+   D /trunk/UI/GTK2/src/ModelColumns.cpp
+   D /trunk/UI/GTK2/src/ModelColumns.h
+   A /trunk/UI/GTK2/src/ModelColumns.hh (from /trunk/UI/GTK2/src/ModelColumns.h:1529)
+   A /trunk/UI/GTK2/src/Notebook.cc (from /trunk/UI/GTK2/src/Notebook.cpp:1529)
+   D /trunk/UI/GTK2/src/Notebook.cpp
+   D /trunk/UI/GTK2/src/Notebook.h
+   A /trunk/UI/GTK2/src/Notebook.hh (from /trunk/UI/GTK2/src/Notebook.h:1529)
+   A /trunk/UI/GTK2/src/ResultsTree.cc (from /trunk/UI/GTK2/src/ResultsTree.cpp:1529)
+   D /trunk/UI/GTK2/src/ResultsTree.cpp
+   D /trunk/UI/GTK2/src/ResultsTree.h
+   A /trunk/UI/GTK2/src/ResultsTree.hh (from /trunk/UI/GTK2/src/ResultsTree.h:1529)
+   M /trunk/UI/GTK2/src/importDialog.hh
+   M /trunk/UI/GTK2/src/indexDialog.hh
+   M /trunk/UI/GTK2/src/mainWindow.hh
+   M /trunk/UI/GTK2/src/prefsWindow.hh
+   M /trunk/UI/GTK2/src/propertiesDialog.hh
+   M /trunk/UI/GTK2/src/queryDialog.hh
+   M /trunk/UI/GTK2/src/statisticsDialog.hh
+
+Use the same naming conventions as glademm where appropriate.
+
+------------------------------------------------------------------------
+r1530 | fabricecolin | 2009-02-01 19:04:31 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   A /trunk/Core
+   A /trunk/Core/DaemonState.cpp (from /trunk/UI/GTK2/src/DaemonState.cpp:1529)
+   A /trunk/Core/DaemonState.h (from /trunk/UI/GTK2/src/DaemonState.h:1529)
+   A /trunk/Core/Makefile.am
+   A /trunk/Core/OnDiskHandler.cpp (from /trunk/UI/GTK2/src/OnDiskHandler.cpp:1529)
+   A /trunk/Core/OnDiskHandler.h (from /trunk/UI/GTK2/src/OnDiskHandler.h:1529)
+   A /trunk/Core/PinotSettings.cpp (from /trunk/UI/GTK2/src/PinotSettings.cpp:1529)
+   A /trunk/Core/PinotSettings.h (from /trunk/UI/GTK2/src/PinotSettings.h:1529)
+   A /trunk/Core/PinotUtils.cpp (from /trunk/UI/GTK2/src/PinotUtils.cpp:1529)
+   A /trunk/Core/PinotUtils.h (from /trunk/UI/GTK2/src/PinotUtils.h:1529)
+   A /trunk/Core/ServerThreads.cpp (from /trunk/UI/GTK2/src/ServerThreads.cpp:1529)
+   A /trunk/Core/ServerThreads.h (from /trunk/UI/GTK2/src/ServerThreads.h:1529)
+   A /trunk/Core/UniqueApplication.cpp (from /trunk/UI/GTK2/src/UniqueApplication.cpp:1529)
+   A /trunk/Core/UniqueApplication.h (from /trunk/UI/GTK2/src/UniqueApplication.h:1529)
+   A /trunk/Core/WorkerThreads.cpp (from /trunk/UI/GTK2/src/WorkerThreads.cpp:1529)
+   A /trunk/Core/WorkerThreads.h (from /trunk/UI/GTK2/src/WorkerThreads.h:1529)
+   A /trunk/Core/de.berlios.Pinot.service.in (from /trunk/UI/GTK2/src/de.berlios.Pinot.service.in:1529)
+   A /trunk/Core/pinot-dbus-daemon.1 (from /trunk/UI/GTK2/src/pinot-dbus-daemon.1:1529)
+   A /trunk/Core/pinot-dbus-daemon.cc (from /trunk/UI/GTK2/src/pinot-dbus-daemon.cc:1529)
+   A /trunk/Core/pinot-dbus-daemon.xml (from /trunk/UI/GTK2/src/pinot-dbus-daemon.xml:1529)
+   M /trunk/Makefile.am
+   D /trunk/UI/GTK2/src/DaemonState.cpp
+   D /trunk/UI/GTK2/src/DaemonState.h
+   M /trunk/UI/GTK2/src/Makefile.am
+   D /trunk/UI/GTK2/src/OnDiskHandler.cpp
+   D /trunk/UI/GTK2/src/OnDiskHandler.h
+   D /trunk/UI/GTK2/src/PinotSettings.cpp
+   D /trunk/UI/GTK2/src/PinotSettings.h
+   D /trunk/UI/GTK2/src/PinotUtils.cpp
+   D /trunk/UI/GTK2/src/PinotUtils.h
+   D /trunk/UI/GTK2/src/ServerThreads.cpp
+   D /trunk/UI/GTK2/src/ServerThreads.h
+   D /trunk/UI/GTK2/src/UniqueApplication.cpp
+   D /trunk/UI/GTK2/src/UniqueApplication.h
+   D /trunk/UI/GTK2/src/WorkerThreads.cpp
+   D /trunk/UI/GTK2/src/WorkerThreads.h
+   D /trunk/UI/GTK2/src/de.berlios.Pinot.service.in
+   D /trunk/UI/GTK2/src/pinot-dbus-daemon.1
+   D /trunk/UI/GTK2/src/pinot-dbus-daemon.cc
+   D /trunk/UI/GTK2/src/pinot-dbus-daemon.xml
+   M /trunk/configure.in
+   M /trunk/po/POTFILES.in
+
+Moved daemon and non-UI specific code out of UI/GTK2/src to Core.
+
+------------------------------------------------------------------------
+r1529 | fabricecolin | 2009-02-01 17:53:30 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/DaemonState.cpp
+
+Don't pop actions out of the queue when threads are being stopped.
+
+------------------------------------------------------------------------
+r1528 | fabricecolin | 2009-02-01 17:51:33 +0800 (Sun, 01 Feb 2009) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/pinot-search.cpp
+
+Use getResults()'s return by reference as it should be.
+
+------------------------------------------------------------------------
+r1527 | fabricecolin | 2009-01-30 22:53:45 +0800 (Fri, 30 Jan 2009) | 3 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/mainWindow.cc
+
+When a spelling suggestion is selected, don't fail if the query can't be found.
+This fixes the bug where nothing happens when the suggestion is on Live query.
+
+------------------------------------------------------------------------
+r1525 | fabricecolin | 2009-01-28 22:43:35 +0800 (Wed, 28 Jan 2009) | 2 lines
+Changed paths:
+   M /trunk/ChangeLog
+
+Even more current log :-)
+
+------------------------------------------------------------------------
 r1524 | fabricecolin | 2009-01-28 22:41:03 +0800 (Wed, 28 Jan 2009) | 2 lines
 Changed paths:
    M /trunk/ChangeLog



From fabricecolin at mail.berlios.de  Sat Mar  7 04:16:54 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 7 Mar 2009 04:16:54 +0100
Subject: [Pinot-svn] r1583 - tags
Message-ID: <200903070316.n273GsCK021011@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-07 04:16:47 +0100 (Sat, 07 Mar 2009)
New Revision: 1583

Added:
   tags/version_0_9_1/
Log:
Releasing v0.91.


Copied: tags/version_0_9_1 (from rev 1582, trunk)



From fabricecolin at mail.berlios.de  Sat Mar  7 23:48:02 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 7 Mar 2009 23:48:02 +0100
Subject: [Pinot-svn] r1584 - trunk/Core
Message-ID: <200903072248.n27Mm2BD016360@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-07 23:47:58 +0100 (Sat, 07 Mar 2009)
New Revision: 1584

Modified:
   trunk/Core/pinot-index.cpp
Log:
Don't start the main loop if the document wasn't queued for indexing, eg
because it's black-listed.


Modified: trunk/Core/pinot-index.cpp
===================================================================
--- trunk/Core/pinot-index.cpp	2009-03-07 03:16:47 UTC (rev 1583)
+++ trunk/Core/pinot-index.cpp	2009-03-07 22:47:58 UTC (rev 1584)
@@ -423,11 +423,17 @@
 			// Connect to threads' finished signal
 			g_pState->connect();
 
-			g_pState->queue_index(docInfo);
+			Glib::ustring status(g_pState->queue_index(docInfo));
+			if (status.empty() == true)
+			{
+				// Run the main loop
+				g_refMainLoop->run();
+			}
+			else
+			{
+				cerr << status << endl;
+			}
 
-			// Run the main loop
-			g_refMainLoop->run();
-
 			// Stop everything
 			g_pState->disconnect();
 



From fabricecolin at mail.berlios.de  Tue Mar 10 13:07:36 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 10 Mar 2009 13:07:36 +0100
Subject: [Pinot-svn] r1585 - trunk/Tokenize
Message-ID: <200903101207.n2AC7a20012470@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-10 13:07:31 +0100 (Tue, 10 Mar 2009)
New Revision: 1585

Modified:
   trunk/Tokenize/FilterUtils.cpp
Log:
Feeding the data through a temporary file is the second most preferred way to
feed filters as having the data very likely means that the original file
already went through one filter.
There's no point trying to convert to UTF8 stuff that's not plain text.


Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2009-03-07 22:47:58 UTC (rev 1584)
+++ trunk/Tokenize/FilterUtils.cpp	2009-03-10 12:07:31 UTC (rev 1585)
@@ -188,6 +188,43 @@
 	{
 		fedInput = pFilter->set_document_data(pData, dataLength);
 	}
+	// ... to feeding the data through a temporary file
+	if ((fedInput == false) &&
+		((dataLength > 0) && (pData != NULL)) &&
+		(pFilter->is_data_input_ok(Dijon::Filter::DOCUMENT_FILE_NAME) == true))
+	{
+		char inTemplate[18] = "/tmp/filterXXXXXX";
+
+#ifdef HAVE_MKSTEMP
+		int inFd = mkstemp(inTemplate);
+#else
+		int inFd = -1;
+		char *pInFile = mktemp(inTemplate);
+		if (pInFile != NULL)
+		{
+			inFd = open(pInFile, O_RDONLY);
+		}
+#endif
+		if (inFd != -1)
+		{
+#ifdef DEBUG
+			cout << "FilterUtils::feedFilter: feeding temporary file " << inTemplate << endl;
+#endif
+
+			// Save the data
+			if (write(inFd, (const void*)pData, dataLength) != -1)
+			{
+				fedInput = pFilter->set_document_file(inTemplate, true);
+				if (fedInput == false)
+				{
+					// We might as well delete the file now
+					unlink(inTemplate);
+				}
+			}
+
+			close(inFd);
+		}
+	}
 	// ... to feeding the file
 	if ((fedInput == false) &&
 		(fileName.empty() == false))
@@ -228,44 +265,7 @@
 			}
 		}
 	}
-	// ... to feeding data through a temporary file
-	if ((fedInput == false) &&
-		((dataLength > 0) && (pData != NULL)) &&
-		(pFilter->is_data_input_ok(Dijon::Filter::DOCUMENT_FILE_NAME) == true))
-	{
-		char inTemplate[18] = "/tmp/filterXXXXXX";
 
-#ifdef HAVE_MKSTEMP
-		int inFd = mkstemp(inTemplate);
-#else
-		int inFd = -1;
-		char *pInFile = mktemp(inTemplate);
-		if (pInFile != NULL)
-		{
-			inFd = open(pInFile, O_RDONLY);
-		}
-#endif
-		if (inFd != -1)
-		{
-#ifdef DEBUG
-			cout << "FilterUtils::feedFilter: feeding temporary file " << inTemplate << endl;
-#endif
-
-			// Save the data
-			if (write(inFd, (const void*)pData, dataLength) != -1)
-			{
-				fedInput = pFilter->set_document_file(inTemplate, true);
-				if (fedInput == false)
-				{
-					// We might as well delete the file now
-					unlink(inTemplate);
-				}
-			}
-
-			close(inFd);
-		}
-	}
-
 	if (fedInput == false)
 	{
 		cerr << "Couldn't feed filter for " << doc.getLocation() << endl;
@@ -317,7 +317,7 @@
 			}
 			else
 			{
-				doc.setType(StringManip::toLowerCase(metaIter->second));
+				doc.setType(mimeType);
 			}
 		}
 		else if (metaIter->first == "size")
@@ -364,23 +364,25 @@
 	map<string, string>::const_iterator contentIter = metaData.find("content");
 	if (contentIter != metaData.end())
 	{
-		string utf8Data(converter.toUTF8(contentIter->second, charset));
-
-		if (converter.getErrorsCount() > 0)
+		if (checkType == true)
 		{
-			cerr << doc.getLocation() << " may not have been fully converted to UTF-8" << endl;
+			doc.setType(MIMEScanner::scanData(contentIter->second.c_str(), contentIter->second.length()));
 		}
-		doc.setData(utf8Data.c_str(), utf8Data.length());
 
-		if (checkType == true)
+		if (doc.getType().substr(0, 10) == "text/plain")
 		{
-			doc.setType(MIMEScanner::scanData(utf8Data.c_str(), utf8Data.length()));
+			string utf8Data(converter.toUTF8(contentIter->second, charset));
+
+			if (converter.getErrorsCount() > 0)
+			{
+				cerr << doc.getLocation() << " may not have been fully converted to UTF-8" << endl;
+			}
+			doc.setData(utf8Data.c_str(), utf8Data.length());
 		}
-
-#ifdef DEBUG
-		cout << "FilterUtils::populateDocument: set " << utf8Data.length() << "/" << contentIter->second.length()
-			<< " bytes, converted from charset " << charset << endl;
-#endif
+		else
+		{
+			doc.setData(contentIter->second.c_str(), contentIter->second.length());
+		}
 	}
 	contentIter = metaData.find("title");
 	if (contentIter != metaData.end())



From fabricecolin at mail.berlios.de  Tue Mar 10 13:09:02 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 10 Mar 2009 13:09:02 +0100
Subject: [Pinot-svn] r1586 - in trunk: . Tokenize
Message-ID: <200903101209.n2AC92nb014332@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-10 13:08:56 +0100 (Tue, 10 Mar 2009)
New Revision: 1586

Modified:
   trunk/Tokenize/Makefile.am
   trunk/pinot.spec.in
Log:
Build the new tar filter by default. This requires libtar >= 1.2.11.


Modified: trunk/Tokenize/Makefile.am
===================================================================
--- trunk/Tokenize/Makefile.am	2009-03-10 12:07:31 UTC (rev 1585)
+++ trunk/Tokenize/Makefile.am	2009-03-10 12:08:56 UTC (rev 1586)
@@ -12,10 +12,11 @@
 	$(top_srcdir)/Tokenize/filters/HtmlFilter.h \
 	$(top_srcdir)/Tokenize/filters/HtmlParser.h \
 	$(top_srcdir)/Tokenize/filters/TagLibMusicFilter.h \
+	$(top_srcdir)/Tokenize/filters/TarFilter.h \
 	$(top_srcdir)/Tokenize/filters/TextFilter.h \
 	$(top_srcdir)/Tokenize/filters/XmlFilter.h
 
-lib_LTLIBRARIES = libexifimagefilter.la libexternalfilter.la libmboxfilter.la libtaglibfilter.la
+lib_LTLIBRARIES = libexifimagefilter.la libexternalfilter.la libmboxfilter.la libtaglibfilter.la libtarfilter.la
 
 noinst_LTLIBRARIES = libTokenize.la
 
@@ -51,6 +52,14 @@
 
 libtaglibfilter_la_LIBADD =
 
+libtarfilter_la_SOURCES = \
+	$(top_srcdir)/Tokenize/filters/Filter.cc \
+	$(top_srcdir)/Tokenize/filters/TarFilter.cc
+
+libtarfilter_la_LDFLAGS = -module -ltar 
+
+libtarfilter_la_LIBADD =
+
 libTokenize_la_SOURCES = \
 	FilterUtils.cpp \
 	TextConverter.cpp \

Modified: trunk/pinot.spec.in
===================================================================
--- trunk/pinot.spec.in	2009-03-10 12:07:31 UTC (rev 1585)
+++ trunk/pinot.spec.in	2009-03-10 12:08:56 UTC (rev 1586)
@@ -26,11 +26,11 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
 Requires: xapian-core-libs >= 1.0.4, libtextcat >= 2.2, sqlite >= 3.3.1, libcurl >= 7.13, gmime >= 2.1
 Requires: gtkmm24 >= 2.10, libxml++ >= 2.12, %{dbus_pkg} >= 0.60, shared-mime-info
-Requires: taglib >= 1.4, libexif >= 0.6, unzip, antiword, unrtf, %{pftotext_pkg}
+Requires: taglib >= 1.4, libexif >= 0.6, libtar >= 1.2.11, unzip, antiword, unrtf, %{pftotext_pkg}
 #Suggests: xapian-omega
 BuildRequires: xapian-core-devel >= 1.0.4, libtextcat-devel >= 2.2, sqlite-devel >= 3.3.1, libcurl-devel >= 7.13, gmime-devel >= 2.1, boost-devel >= 1.32
 BuildRequires: gtkmm24-devel >= 2.10, libxml++-devel >= 2.12, %{dbus_dev_pkg} >= 0.60, gettext-devel, desktop-file-utils
-BuildRequires: taglib-devel >= 1.4, libexif-devel >= 0.6
+BuildRequires: taglib-devel >= 1.4, libexif-devel >= 0.6, libtar-devel >= 1.2.11
 BuildRequires: gcc-c++
 %if 0%{?_with_soap:1}
 BuildRequires: gsoap >= 2.7.9e
@@ -98,6 +98,7 @@
 %{_libdir}/pinot/filters/libexternalfilter.so*
 %{_libdir}/pinot/filters/libmboxfilter.so*
 %{_libdir}/pinot/filters/libtaglibfilter.so*
+%{_libdir}/pinot/filters/libtarfilter.so*
 %{_libdir}/pinot/backends/lib*backend.so*
 %{_datadir}/dbus-1/services/de.berlios.Pinot.service
 %{_datadir}/pinot/



From fabricecolin at mail.berlios.de  Wed Mar 11 15:30:23 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Wed, 11 Mar 2009 15:30:23 +0100
Subject: [Pinot-svn] r1587 - trunk/Core
Message-ID: <200903111430.n2BEUNu6004235@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-11 15:30:17 +0100 (Wed, 11 Mar 2009)
New Revision: 1587

Modified:
   trunk/Core/pinot-index.cpp
Log:
Missing include signal.h. Reported by Robert Wotzlaw.


Modified: trunk/Core/pinot-index.cpp
===================================================================
--- trunk/Core/pinot-index.cpp	2009-03-10 12:08:56 UTC (rev 1586)
+++ trunk/Core/pinot-index.cpp	2009-03-11 14:30:17 UTC (rev 1587)
@@ -20,6 +20,7 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <strings.h>
+#include <signal.h>
 #include <iostream>
 #include <string>
 #include <fstream>



From fabricecolin at mail.berlios.de  Tue Mar 17 15:37:23 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 17 Mar 2009 15:37:23 +0100
Subject: [Pinot-svn] r1588 - trunk/IndexSearch/Xapian
Message-ID: <200903171437.n2HEbN4b017086@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-17 15:37:13 +0100 (Tue, 17 Mar 2009)
New Revision: 1588

Modified:
   trunk/IndexSearch/Xapian/LanguageDetector.cpp
   trunk/IndexSearch/Xapian/LanguageDetector.h
   trunk/IndexSearch/Xapian/XapianDatabaseFactory.h
   trunk/IndexSearch/Xapian/XapianIndex.cpp
Log:
LanguageDetector is a singleton, and textcat is initialized once.


Modified: trunk/IndexSearch/Xapian/LanguageDetector.cpp
===================================================================
--- trunk/IndexSearch/Xapian/LanguageDetector.cpp	2009-03-11 14:30:17 UTC (rev 1587)
+++ trunk/IndexSearch/Xapian/LanguageDetector.cpp	2009-03-17 14:37:13 UTC (rev 1588)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -16,13 +16,9 @@
  *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
  */
 
+#include "config.h"
 #include <strings.h>
 #include <sys/time.h>
-#include <iostream>
-#include <utility>
-#include <cstring>
-
-#include "config.h"
 extern "C"
 {
 #define USE_TEXTCAT 1
@@ -36,6 +32,9 @@
 #endif
 #endif
 }
+#include <iostream>
+#include <utility>
+#include <cstring>
 
 #include "StringManip.h"
 #include "Timer.h"
@@ -49,32 +48,17 @@
 using std::vector;
 using std::min;
 
-unsigned int LanguageDetector::m_maxTextSize = 1000;
+#define MAX_TEXT_SIZE 1000
 
-LanguageDetector::LanguageDetector()
-{
-}
+LanguageDetector LanguageDetector::m_instance;
 
-LanguageDetector::~LanguageDetector()
+LanguageDetector::LanguageDetector() :
+	m_pHandle(NULL)
 {
-}
-
-/**
-  * Attempts to guess the language.
-  * Returns a list of candidates, or "unknown" if detection failed.
-  */
-void LanguageDetector::guessLanguage(const char *pData, unsigned int dataLength,
-			std::vector<std::string> &candidates)
-{
 #ifdef USE_TEXTCAT
 	string confFile(SYSCONFDIR);
 	char *textCatVersion = textcat_Version();
-#ifdef HAVE_TEXTCAT_CAT
-	const char *catResults[10];
-#endif
 
-	candidates.clear();
-
 	// What configuration file should we use ?
 	confFile += "/pinot/";
 #ifdef DEBUG
@@ -91,22 +75,58 @@
 	}
 
 	// Initialize
-	void *td = textcat_Init(confFile.c_str());
-	if (td == NULL)
+	pthread_mutex_init(&m_mutex, NULL);
+	m_pHandle = textcat_Init(confFile.c_str());
+#endif
+}
+
+LanguageDetector::~LanguageDetector()
+{
+#ifdef USE_TEXTCAT
+	// Close the descriptor
+	textcat_Done(m_pHandle);
+	pthread_mutex_destroy(&m_mutex);
+#endif
+}
+
+LanguageDetector &LanguageDetector::getInstance(void)
+{
+	return m_instance;
+}
+
+/**
+  * Attempts to guess the language.
+  * Returns a list of candidates, or "unknown" if detection failed.
+  */
+void LanguageDetector::guessLanguage(const char *pData, unsigned int dataLength,
+	vector<string> &candidates)
+{
+#ifdef HAVE_TEXTCAT_CAT
+	const char *catResults[10];
+#endif
+
+	candidates.clear();
+#ifdef USE_TEXTCAT
+	if (m_pHandle == NULL)
 	{
 		candidates.push_back("unknown");
 		return;
 	}
 
-	// Classify
 #ifdef DEBUG
 	Timer timer;
 	timer.start();
-	cout << "LanguageDetector::guessLanguage: starting" << endl;
 #endif
+	// Lock the handle
+	if (pthread_mutex_lock(&m_mutex) != 0)
+	{
+		return;
+	}
+
+	// Classify
 #ifdef HAVE_TEXTCAT_CAT
-	unsigned int resultNum = textcat_Cat(td, pData,
-		min(dataLength, m_maxTextSize), catResults, 10);
+	unsigned int resultNum = textcat_Cat(m_pHandle, pData,
+		min(dataLength, (unsigned int)MAX_TEXT_SIZE), catResults, 10);
 	if (resultNum == 0 )
 	{
 		candidates.push_back("unknown");
@@ -130,8 +150,8 @@
 		}
 	}
 #else
-	const char *languages = textcat_Classify(td, pData,
-		min(dataLength, m_maxTextSize));
+	const char *languages = textcat_Classify(m_pHandle, pData,
+		min(dataLength, (unsigned int)MAX_TEXT_SIZE));
 	if (languages == NULL)
 	{
 		candidates.push_back("unknown");
@@ -176,13 +196,13 @@
 		}
 	}
 #endif
+
+	// Unlock
+	pthread_mutex_unlock(&m_mutex);
 #ifdef DEBUG
 	cout << "LanguageDetector::guessLanguage: language guessing took "
 		<< timer.stop() << " ms" << endl;
 #endif
-
-	// Close the descriptor
-	textcat_Done(td);
 #else
 	candidates.push_back("unknown");
 #endif

Modified: trunk/IndexSearch/Xapian/LanguageDetector.h
===================================================================
--- trunk/IndexSearch/Xapian/LanguageDetector.h	2009-03-11 14:30:17 UTC (rev 1587)
+++ trunk/IndexSearch/Xapian/LanguageDetector.h	2009-03-17 14:37:13 UTC (rev 1588)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -19,6 +19,7 @@
 #ifndef _LANGUAGE_DETECTOR_H
 #define _LANGUAGE_DETECTOR_H
 
+#include <pthread.h>
 #include <string>
 #include <vector>
 
@@ -26,9 +27,10 @@
 class LanguageDetector
 {
 	public:
-		LanguageDetector();
 		virtual ~LanguageDetector();
 
+		static LanguageDetector &getInstance(void);
+
 		/**
 		  * Attempts to guess the language.
 		  * Returns a list of candidates, or "unknown" if detection failed.
@@ -37,8 +39,12 @@
 			std::vector<std::string> &candidates);
 
 	protected:
-		static unsigned int m_maxTextSize;
+		static LanguageDetector m_instance;
+		pthread_mutex_t m_mutex;
+		void *m_pHandle;
 
+		LanguageDetector();
+
 	private:
 		LanguageDetector(const LanguageDetector &other);
 		LanguageDetector &operator=(const LanguageDetector &other);

Modified: trunk/IndexSearch/Xapian/XapianDatabaseFactory.h
===================================================================
--- trunk/IndexSearch/Xapian/XapianDatabaseFactory.h	2009-03-11 14:30:17 UTC (rev 1587)
+++ trunk/IndexSearch/Xapian/XapianDatabaseFactory.h	2009-03-17 14:37:13 UTC (rev 1588)
@@ -19,9 +19,9 @@
 #ifndef _XAPIAN_DATABASE_FACTORY_H
 #define _XAPIAN_DATABASE_FACTORY_H
 
+#include <pthread.h>
 #include <string>
 #include <map>
-#include <pthread.h>
 
 #include "XapianDatabase.h"
 

Modified: trunk/IndexSearch/Xapian/XapianIndex.cpp
===================================================================
--- trunk/IndexSearch/Xapian/XapianIndex.cpp	2009-03-11 14:30:17 UTC (rev 1587)
+++ trunk/IndexSearch/Xapian/XapianIndex.cpp	2009-03-17 14:37:13 UTC (rev 1588)
@@ -838,7 +838,6 @@
 string XapianIndex::scanDocument(const string &suggestedLanguage,
 	const char *pData, unsigned int dataLength)
 {
-	LanguageDetector lang;
 	vector<string> candidates;
 	string language;
 	bool scannedDocument = false;
@@ -851,7 +850,7 @@
 	else
 	{
 		// Try to determine the document's language right away
-		lang.guessLanguage(pData, max(dataLength, (unsigned int)2048), candidates);
+		LanguageDetector::getInstance().guessLanguage(pData, max(dataLength, (unsigned int)2048), candidates);
 
 		scannedDocument = true;
 	}
@@ -878,7 +877,7 @@
 			{
 				// The suggested language is not suitable
 				candidates.clear();
-				lang.guessLanguage(pData, max(dataLength, (unsigned int)2048), candidates);
+				LanguageDetector::getInstance().guessLanguage(pData, max(dataLength, (unsigned int)2048), candidates);
 
 				langIter = candidates.begin();
 				scannedDocument = true;



From fabricecolin at mail.berlios.de  Sat Mar 21 06:03:24 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 21 Mar 2009 06:03:24 +0100
Subject: [Pinot-svn] r1589 - in trunk: . Utils
Message-ID: <200903210503.n2L53Owd024615@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-21 06:03:11 +0100 (Sat, 21 Mar 2009)
New Revision: 1589

Added:
   trunk/Utils/Memory.cpp
   trunk/Utils/Memory.h
Modified:
   trunk/configure.in
Log:
Check for boost/pool/poolfwd.hpp, ext/malloc_allocator.h, mallinfo(),
malloc_trim() and madvise().
Memory wraps all this together. It provides dstring, a basic_string class
backed by a boost::pool memory pool, and either malloc() or umem as allocators,
functions to allocate and free buffers out of the same pool, and a function to
let the OS reclaim memory.
Support for umem is untested at the moment.


Added: trunk/Utils/Memory.cpp
===================================================================
--- trunk/Utils/Memory.cpp	2009-03-17 14:37:13 UTC (rev 1588)
+++ trunk/Utils/Memory.cpp	2009-03-21 05:03:11 UTC (rev 1589)
@@ -0,0 +1,116 @@
+/*
+ *  Copyright 2009 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#include "config.h"
+#ifdef HAVE_MALLINFO
+#include <malloc.h>
+#else
+#ifdef HAVE_MALLOC_TRIM
+#include <malloc.h>
+#endif
+#endif
+
+#include "Memory.h"
+
+#ifdef HAVE_BOOST_POOL_POOLFWD_HPP
+#ifdef HAVE_UMEM_H
+// Memory pool with umem
+typedef fixed_singleton_pool<umem_allocator_tag,
+	sizeof(char), umem_allocator,
+	boost::details::pool::default_mutex, 131072> filter_pool;
+#else
+// Memory pool with malloc (glibc's or any other implementation)
+// The tag is actually ignored
+typedef fixed_singleton_pool<fixed_pool_allocator_tag,
+	sizeof(char), boost::default_user_allocator_malloc_free,
+	boost::details::pool::default_mutex, 131072> filter_pool;
+#endif
+#endif
+
+using std::string;
+
+Memory::Memory()
+{
+}
+
+char *Memory::allocateBuffer(unsigned int length)
+{
+#ifdef HAVE_BOOST_POOL_POOLFWD_HPP
+	return static_cast<char*>(filter_pool::ordered_malloc(length));
+#else
+#ifdef HAVE_UMEM_H
+	return static_cast<char*>(umem_alloc(sizeof(char) * length, UMEM_DEFAULT));
+#else
+	return static_cast<char*>(malloc(sizeof(char) * length));
+#endif
+#endif
+}
+
+void Memory::freeBuffer(char *pBuffer, unsigned int length)
+{
+#ifdef HAVE_BOOST_POOL_POOLFWD_HPP
+	filter_pool::ordered_free(static_cast<void*>(pBuffer), length);
+#else
+#ifdef HAVE_UMEM_H
+	umem_free(static_cast<void*>(pBuffer), n * sizeof(char));
+#else
+	free(pBuffer);
+#endif
+#endif
+}
+
+void Memory::reclaim(void)
+{
+#ifdef HAVE_BOOST_POOL_POOLFWD_HPP
+#ifdef HAVE_UMEM_H
+	bool releasedMemory = fixed_singleton_pool<fixed_pool_allocator_tag, sizeof(char), umem_allocator, boost::details::pool::default_mutex, 131072>::release_memory();
+#ifdef DEBUG
+	std::cout << "Memory::reclaim: released umem allocated memory pool (" << releasedMemory << ")" << std::endl;
+#endif
+#else
+	bool releasedMemory = fixed_singleton_pool<fixed_pool_allocator_tag, sizeof(char), boost::default_user_allocator_malloc_free, boost::details::pool::default_mutex, 131072>::release_memory();
+#ifdef DEBUG
+	std::cout << "Memory::reclaim: released malloc allocated memory pool (" << releasedMemory << ")" << std::endl;
+#endif
+#endif
+#endif
+
+#ifndef HAVE_UMEM_H
+	// All this only makes sense if umem isn't in use
+#ifdef HAVE_MALLINFO
+	struct mallinfo info = mallinfo();
+	/* arena: total space allocated from the heap (that is, how much the ?break? point has moved since the start of the process).
+	 * uordblks:number of bytes allocated and in use.
+	 * fordblks:number of bytes allocated but not in use.
+	 * keepcost:size of the area that can be released with a malloc_trim ().
+	 * hblks:number of chunks allocated via mmap ().
+	 * hblkhd:total number of bytes allocated via mmap ().
+	 */
+#ifdef DEBUG
+	std::cout << "Memory::reclaim: allocated on the heap " << info.arena << ", mmap'ed " << info.hblkhd
+		<< ", in use " << info.uordblks << ", not in use " << info.fordblks << ", can be trimmed " << info.keepcost << std::endl;
+#endif
+#endif
+#ifdef HAVE_MALLOC_TRIM
+	int trimmedMemory = malloc_trim(0);
+#ifdef DEBUG
+	std::cout << "Memory::reclaim: trimmed malloc allocated memory (" << trimmedMemory << ")" << std::endl;
+#endif
+#endif
+#endif
+}

Added: trunk/Utils/Memory.h
===================================================================
--- trunk/Utils/Memory.h	2009-03-17 14:37:13 UTC (rev 1588)
+++ trunk/Utils/Memory.h	2009-03-21 05:03:11 UTC (rev 1589)
@@ -0,0 +1,430 @@
+/*
+ *  Copyright 2009 Fabrice Colin
+ *
+ *  This program is free software; you can redistribute it and/or modify
+ *  it under the terms of the GNU General Public License as published by
+ *  the Free Software Foundation; either version 2 of the License, or
+ *  (at your option) any later version.
+ *
+ *  This program is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ *  GNU General Public License for more details.
+ *
+ *  You should have received a copy of the GNU General Public License
+ *  along with this program; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
+ */
+
+#ifndef _MEMORY_H
+#define _MEMORY_H
+
+#include <string>
+#include <iostream>
+#ifdef HAVE_UMEM_H
+#include <umem.h>
+
+struct umem_allocator_tag
+{
+};
+
+/// Based on an example gven at http://www.ddj.com/cpp/184403759
+template <typename T>
+class umem_allocator
+{
+	public:
+		typedef T                 value_type;
+		typedef value_type*       pointer;
+		typedef const value_type* const_pointer;
+		typedef value_type&       reference;
+		typedef const value_type& const_reference;
+		typedef typename std::size_t size_type;
+		typedef typename std::ptrdiff_t difference_type;
+
+		template <typename U>
+		struct rebind
+		{
+			typedef umem_allocator<U> other;
+		};
+
+		umem_allocator()
+		{
+		}
+		template <typename U>
+		umem_allocator(const umem_allocator<U> &)
+		{
+		}
+		~umem_allocator()
+		{
+		}
+
+		static pointer address(reference x)
+		{
+			return &x;
+		}
+
+		static const_pointer address(const_reference x)
+		{
+			return x;
+		}
+
+		static size_type max_size()
+		{
+			return (std::numeric_limits<size_type>::max)();
+		}
+
+		static void construct(pointer p, const value_type &t)
+		{
+			new(p) T(t);
+		}
+
+		static void destroy(pointer p)
+		{
+			p->~T();
+			// Avoid unused variable warning
+			(void)p;
+		}
+
+		bool operator==(const umem_allocator &) const
+		{
+			return true;
+		}
+
+		bool operator!=(const umem_allocator &) const
+		{
+			return false;
+		}
+
+		static pointer allocate(size_type n)
+		{
+#ifdef DEBUG
+			std::cout << "umem_allocator::allocate: allocating " << n << std::endl;
+#endif
+			void *ret = umem_alloc(n * sizeof(T), UMEM_DEFAULT);
+			if (ret == NULL)
+			{
+				throw std::bad_alloc();
+			}
+			return static_cast<pointer>(ret);
+		}
+
+		static pointer allocate(const size_type n, const void *const)
+		{
+			return allocate(n);
+		}
+
+		static void deallocate(pointer p, size_type n)
+		{
+			if ((p == NULL) ||
+				(n == 0))
+			{
+				return;
+			}
+
+#ifdef DEBUG
+			std::cout << "umem_allocator::deallocate: freeing " << n << std::endl;
+#endif
+			umem_free(static_cast<void*>(p), n * sizeof(T));
+		}
+
+};
+
+/// Specialization for void.
+template<>
+class umem_allocator<void>
+{
+	typedef void        value_type;
+	typedef void*       pointer;
+	typedef const void* const_pointer;
+
+	template <class U>
+	struct rebind
+	{
+		typedef umem_allocator<U> other;
+	};
+
+};
+#else
+#ifdef HAVE_EXT_MALLOC_ALLOCATOR_H
+#include <ext/malloc_allocator.h>
+#endif
+#endif
+#ifdef HAVE_BOOST_POOL_POOLFWD_HPP
+// This header should be available if poolfwd.hpp is
+#include <boost/pool/pool_alloc.hpp>
+
+/// Based on boost::singleton_pool, with changes to release_memory() and purge_memory()
+template <typename Tag,
+	unsigned RequestedSize,
+	typename UserAllocator,
+	typename Mutex,
+	unsigned NextSize>
+struct fixed_singleton_pool
+{
+	public:
+		typedef Tag           tag;
+		typedef Mutex         mutex;
+		typedef UserAllocator user_allocator;
+		typedef typename boost::pool<UserAllocator>::size_type size_type;
+		typedef typename boost::pool<UserAllocator>::difference_type difference_type;
+
+		BOOST_STATIC_CONSTANT(unsigned, requested_size = RequestedSize);
+		BOOST_STATIC_CONSTANT(unsigned, next_size = NextSize);
+
+	private:
+		struct pool_type: Mutex
+		{
+			boost::pool<UserAllocator> p;
+			pool_type():p(RequestedSize, NextSize)
+			{
+			}
+		};
+
+		typedef boost::details::pool::singleton_default<pool_type> singleton;
+
+		fixed_singleton_pool();
+
+	public:
+		static void *malloc()
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			return p.p.malloc();
+		}
+		static void *ordered_malloc()
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			return p.p.ordered_malloc();
+		}
+		static void *ordered_malloc(const size_type n)
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+#ifdef DEBUG
+			std::cout << "fixed_singleton_pool::ordered_malloc: allocating " << n << std::endl;
+#endif
+			return p.p.ordered_malloc(n);
+		}
+		static bool is_from(void *const ptr)
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			return p.p.is_from(ptr);
+		}
+		static void free(void *const ptr)
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			p.p.free(ptr);
+		}
+		static void ordered_free(void *const ptr)
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			p.p.ordered_free(ptr);
+		}
+		static void free(void *const ptr, const size_type n)
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			p.p.free(ptr, n);
+		}
+		static void ordered_free(void *const ptr, const size_type n)
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+#ifdef DEBUG
+			std::cout << "fixed_singleton_pool::ordered_free: freeing " << n << std::endl;
+#endif
+			p.p.ordered_free(ptr, n);
+		}
+		static bool release_memory()
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			size_type next_size_before_release = p.p.get_next_size();
+			bool has_released = p.p.release_memory();
+			size_type next_size_after_release = p.p.get_next_size();
+#ifdef DEBUG
+			std::cout << "fixed_singleton_pool::release_memory: next size before " << next_size_before_release
+				<< " after " << next_size_after_release << std::endl; 
+#endif
+			p.p.set_next_size(NextSize);
+			return has_released;
+		}
+		static bool purge_memory()
+		{
+			pool_type &p = singleton::instance();
+			boost::details::pool::guard<Mutex> g(p);
+			size_type next_size_before_release = p.p.get_next_size();
+			bool has_purged = p.p.purge_memory();
+			size_type next_size_after_release = p.p.get_next_size();
+#ifdef DEBUG
+			std::cout << "fixed_singleton_pool::purge_memory: next size before " << next_size_before_release
+				<< " after " << next_size_after_release << std::endl; 
+#endif
+			p.p.set_next_size(NextSize);
+			return has_purged;
+		}
+
+};
+
+struct fixed_pool_allocator_tag { };
+
+/// Based on an example gven at http://www.ddj.com/cpp/184403759
+template <typename T,
+	typename UserAllocator,
+	typename Mutex,
+	unsigned NextSize>
+class fixed_pool_allocator
+{
+	public:
+		typedef T                 value_type;
+		typedef UserAllocator     user_allocator;
+		typedef Mutex             mutex;
+		BOOST_STATIC_CONSTANT(unsigned, next_size = NextSize);
+		typedef value_type*       pointer;
+		typedef const value_type* const_pointer;
+		typedef value_type&       reference;
+		typedef const value_type& const_reference;
+		typedef typename boost::pool<UserAllocator>::size_type size_type;
+		typedef typename boost::pool<UserAllocator>::difference_type difference_type;
+
+		template <typename U>
+		struct rebind
+		{
+			typedef fixed_pool_allocator<U, UserAllocator, Mutex, NextSize> other;
+		};
+
+		fixed_pool_allocator()
+		{
+		}
+		template <typename U>
+		fixed_pool_allocator(const fixed_pool_allocator<U, UserAllocator, Mutex, NextSize> &)
+		{
+		}
+		~fixed_pool_allocator()
+		{
+		}
+
+		static pointer address(reference x)
+		{
+			return &x;
+		}
+
+		static const_pointer address(const_reference x)
+		{
+			return x;
+		}
+
+		static size_type max_size()
+		{
+			return (std::numeric_limits<size_type>::max)();
+		}
+
+		static void construct(pointer p, const value_type &t)
+		{
+			new(p) T(t);
+		}
+
+		static void destroy(pointer p)
+		{
+			p->~T();
+			// Avoid unused variable warning
+			(void)p;
+		}
+
+		bool operator==(const fixed_pool_allocator &) const
+		{
+			return true;
+		}
+
+		bool operator!=(const fixed_pool_allocator &) const
+		{
+			return false;
+		}
+
+		static pointer allocate(size_type n)
+		{
+			const pointer ret = static_cast<pointer>(
+					fixed_singleton_pool<fixed_pool_allocator_tag, sizeof(T), UserAllocator, Mutex,
+					NextSize>::ordered_malloc(n) );
+			if (ret == NULL)
+			{
+				throw std::bad_alloc();
+			}
+			return ret;
+		}
+
+		static pointer allocate(const size_type n, const void *const)
+		{
+			return allocate(n);
+		}
+
+		static void deallocate(pointer p, size_type n)
+		{
+			if ((p == NULL) ||
+				(n == 0))
+			{
+				return;
+			}
+
+			fixed_singleton_pool<fixed_pool_allocator_tag, sizeof(T), UserAllocator, Mutex,
+				NextSize>::ordered_free(p, n);
+		}
+
+};
+#endif
+
+#include "Visibility.h"
+
+#ifdef HAVE_BOOST_POOL_POOLFWD_HPP
+#ifdef HAVE_UMEM_H
+// Memory pool with umem
+typedef fixed_pool_allocator<char,
+	umem_allocator> filter_allocator;
+#else
+// Memory pool with malloc (glibc's or any other implementation)
+typedef fixed_pool_allocator<char,
+	boost::default_user_allocator_malloc_free,
+	boost::details::pool::default_mutex, 131072> filter_allocator;
+#endif
+typedef std::basic_string<char, std::char_traits<char>, filter_allocator > dstring;
+#else
+#ifdef HAVE_UMEM_H
+// No memory pool, plain umem
+typedef umem_allocator<char> filter_allocator;
+typedef std::basic_string<char, std::char_traits<char>, filter_allocator > dstring;
+#else
+#ifdef HAVE_EXT_MALLOC_ALLOCATOR_H
+// No memory pool, plain malloc (glibc's or any other implementation)
+typedef __gnu_cxx::malloc_allocator<char> filter_allocator;
+typedef std::basic_string<char, std::char_traits<char>, filter_allocator > dstring;
+#else
+// No memory pool, default STL allocator
+typedef std::allocator<char> filter_allocator;
+typedef std::string dstring;
+#endif
+#endif
+#endif
+
+/// Memory usage related utilities.
+class PINOT_EXPORT Memory
+{
+	public:
+		/// Allocates a buffer.
+		static char *allocateBuffer(unsigned int length);
+
+		/// Frees a buffer.
+		static void freeBuffer(char *pBuffer, unsigned int length);
+
+		/// Hints to the OS it can reclaim unused memory.
+		static void reclaim(void);
+
+	protected:
+		Memory();
+
+};
+
+#endif // _MEMORY_H

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2009-03-17 14:37:13 UTC (rev 1588)
+++ trunk/configure.in	2009-03-21 05:03:11 UTC (rev 1589)
@@ -251,11 +251,12 @@
    [AM_CONDITIONAL(HAVE_LINUX_INOTIFY, true)
    ])
 
-dnl boost Spirit 
+dnl boost
 AM_CONDITIONAL(HAVE_BOOST_SPIRIT, false)
 AC_CHECK_HEADERS([boost/spirit/core.hpp],
    [AM_CONDITIONAL(HAVE_BOOST_SPIRIT, true)
    ])
+AC_CHECK_HEADERS([boost/pool/poolfwd.hpp])
 
 dnl TextCat
 AC_CHECK_HEADERS([textcat.h],,
@@ -369,7 +370,7 @@
 MISC_LIBS="$PTHREAD_LIBS"
 AC_SUBST(MISC_CFLAGS)
 AC_SUBST(MISC_LIBS)
-AC_CHECK_HEADERS([sys/vfs.h sys/statfs.h sys/mount.h sys/statvfs.h attr/xattr.h dlfcn.h regex.h fnmatch.h pwd.h])
+AC_CHECK_HEADERS([sys/vfs.h sys/statfs.h sys/mount.h sys/statvfs.h attr/xattr.h dlfcn.h regex.h fnmatch.h pwd.h ext/malloc_allocator.h])
 PKG_CHECK_MODULES(MIMEINFO, shared-mime-info )
 SHARED_MIME_INFO_PREFIX=`pkg-config --variable=prefix shared-mime-info`
 AC_SUBST(SHARED_MIME_INFO_PREFIX)
@@ -426,6 +427,9 @@
 AC_CHECK_FUNCS(kill)
 AC_CHECK_FUNCS(localtime_r)
 AC_CHECK_FUNCS(lstat)
+AC_CHECK_FUNCS(madvise)
+AC_CHECK_FUNCS(mallinfo)
+AC_CHECK_FUNCS(malloc_trim)
 AC_CHECK_FUNCS(mkstemp)
 AC_CHECK_FUNCS(mmap)
 AC_CHECK_FUNCS(pipe)



From fabricecolin at mail.berlios.de  Sat Mar 21 12:00:46 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 21 Mar 2009 12:00:46 +0100
Subject: [Pinot-svn] r1590 - in trunk: Core UI/GTK2/src
Message-ID: <200903211100.n2LB0kvO011463@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-21 12:00:39 +0100 (Sat, 21 Mar 2009)
New Revision: 1590

Modified:
   trunk/Core/DaemonState.cpp
   trunk/Core/WorkerThreads.cpp
   trunk/UI/GTK2/src/mainWindow.cc
   trunk/UI/GTK2/src/mainWindow.hh
Log:
Set the number of daemon's indexing threads to 2, unless overriden with the
environment variable PINOT_MAXIMUM_INDEX_THREADS.
Changed flushing again, this time to happen when the queue is empty. This means
that the index will be flushed when everything has been indexed.


Modified: trunk/Core/DaemonState.cpp
===================================================================
--- trunk/Core/DaemonState.cpp	2009-03-21 05:03:11 UTC (rev 1589)
+++ trunk/Core/DaemonState.cpp	2009-03-21 11:00:39 UTC (rev 1590)
@@ -17,7 +17,9 @@
  */
 
 #include "config.h"
+#include <string.h>
 #include <strings.h>
+#include <stdlib.h>
 #include <sys/types.h>
 #include <dirent.h>
 #include <sys/stat.h>
@@ -308,7 +310,7 @@
 #endif
 
 DaemonState::DaemonState() :
-	ThreadsManager(PinotSettings::getInstance().m_daemonIndexLocation, 10),
+	ThreadsManager(PinotSettings::getInstance().m_daemonIndexLocation, 2),
 	m_fullScan(false),
 	m_isReindex(false),
 	m_reload(false),
@@ -319,6 +321,19 @@
 {
 	FD_ZERO(&m_flagsSet);
 
+	// Override the number of indexing threads ?
+	char *pEnvVar = getenv("PINOT_MAXIMUM_INDEX_THREADS");
+	if ((pEnvVar != NULL) &&
+		(strlen(pEnvVar) > 0))
+	{
+		int threadsNum = atoi(pEnvVar);
+
+		if (threadsNum > 0)
+		{
+			m_maxIndexThreads = (unsigned int)threadsNum;
+		}
+	}
+
 	// Check disk usage every minute
 	m_timeoutConnection = Glib::signal_timeout().connect(sigc::mem_fun(*this,
 		&DaemonState::on_activity_timeout), 60000);
@@ -599,6 +614,7 @@
 void DaemonState::on_thread_end(WorkerThread *pThread)
 {
 	string indexedUrl;
+	bool emptyQueue = false;
 
 	if (pThread == NULL)
 	{
@@ -749,48 +765,53 @@
 	delete pThread;
 
 	// Wait until there are no threads running (except background ones)
-	// to flush the index or reload the configuration
-	if (get_threads_count() == 0)
+	// to reload the configuration
+	if ((m_reload == true) &&
+		(get_threads_count() == 0))
 	{
-		if (m_flush == true)
-		{
-			m_flush = false;
-
-			IndexInterface *pIndex = PinotSettings::getInstance().getIndex(PinotSettings::getInstance().m_daemonIndexLocation);
-			if (pIndex != NULL)
-			{
-				pIndex->flush();
-
-				delete pIndex;
-			}
-		}
-
-		if (m_reload == true)
-		{
 #ifdef DEBUG
-			cout << "DaemonState::on_thread_end: stopping all threads" << endl;
+		cout << "DaemonState::on_thread_end: stopping all threads" << endl;
 #endif
-			// Stop background threads
-			stop_threads();
-			// ...clear the queues
-			clear_queues();
+		// Stop background threads
+		stop_threads();
+		// ...clear the queues
+		clear_queues();
 
-			// Reload
-			PinotSettings &settings = PinotSettings::getInstance();
-			settings.clear();
-			settings.load(PinotSettings::LOAD_ALL);
-			m_reload = false;
+		// Reload
+		PinotSettings &settings = PinotSettings::getInstance();
+		settings.clear();
+		settings.load(PinotSettings::LOAD_ALL);
+		m_reload = false;
 
-			// ...and restart everything 
-			start(true, false);
-		}
+		// ...and restart everything 
+		start(true, false);
 	}
 
 	// Try to run a queued action unless threads were stopped
 	if (isStopped == false)
 	{
-		pop_queue(indexedUrl);
+		emptyQueue = pop_queue(indexedUrl);
 	}
+
+	// Wait until there are no threads running (except background ones)
+	// and the queue is empty to flush the index
+	if ((m_flush == true) &&
+		(emptyQueue == true) &&
+		(get_threads_count() == 0))
+	{
+		m_flush = false;
+
+		IndexInterface *pIndex = PinotSettings::getInstance().getIndex(PinotSettings::getInstance().m_daemonIndexLocation);
+		if (pIndex != NULL)
+		{
+#ifdef DEBUG
+			cout << "DaemonState::on_thread_end: flushing" << endl;
+#endif
+			pIndex->flush();
+
+			delete pIndex;
+		}
+	}
 }
 
 void DaemonState::on_message_filefound(DocumentInfo docInfo, bool isDirectory)

Modified: trunk/Core/WorkerThreads.cpp
===================================================================
--- trunk/Core/WorkerThreads.cpp	2009-03-21 05:03:11 UTC (rev 1589)
+++ trunk/Core/WorkerThreads.cpp	2009-03-21 11:00:39 UTC (rev 1590)
@@ -688,7 +688,7 @@
 bool ThreadsManager::pop_queue(const string &urlWasIndexed)
 {
 	bool getItem = true;
-	bool foundItem = false;
+	bool emptyQueue = false;
 
 #ifdef DEBUG
 	cout << "ThreadsManager::pop_queue: called" << endl;
@@ -723,6 +723,9 @@
 			DocumentInfo docInfo;
 			string previousLocation;
 
+			// Assume the queue is empty
+			emptyQueue = true;
+
 			while (actionQueue.popItem(type, docInfo) == true)
 			{
 				ustring status;
@@ -732,6 +735,9 @@
 					continue;
 				}
 
+				// The queue isn't actually empty
+				emptyQueue = false;
+
 				if (docInfo.getLocation() == previousLocation)
 				{
 					// Something dodgy is going on, we got the same item twice !
@@ -746,7 +752,6 @@
 
 				if (status.empty() == true)
 				{
-					foundItem = true;
 					break;
 				}
 
@@ -755,7 +760,7 @@
 		}
 	}
 
-	return foundItem;
+	return emptyQueue;
 }
 
 ListerThread::ListerThread(const PinotSettings::IndexProperties &indexProps,

Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2009-03-21 05:03:11 UTC (rev 1589)
+++ trunk/UI/GTK2/src/mainWindow.cc	2009-03-21 11:00:39 UTC (rev 1590)
@@ -91,7 +91,6 @@
 
 // FIXME: this ought to be configurable
 unsigned int mainWindow::m_maxDocsCount = 100;
-unsigned int mainWindow::m_maxIndexThreads = 2;
 
 mainWindow::ExpandSet::ExpandSet()
 {
@@ -101,8 +100,8 @@
 {
 }
 
-mainWindow::InternalState::InternalState(unsigned int maxIndexThreads, mainWindow *pWindow) :
-	ThreadsManager(PinotSettings::getInstance().m_docsIndexLocation, maxIndexThreads, 60, true),
+mainWindow::InternalState::InternalState(mainWindow *pWindow) :
+	ThreadsManager(PinotSettings::getInstance().m_docsIndexLocation, 2, 60, true),
 	m_liveQueryLength(0),
 	m_currentPage(0),
 	m_browsingIndex(false)
@@ -127,7 +126,7 @@
 	m_pFindMenu(NULL),
 	m_pSettingsMonitor(MonitorFactory::getMonitor()),
 	m_pSettingsHandler(NULL),
-	m_state(m_maxIndexThreads, this)
+	m_state(this)
 {
 	// Reposition and resize the window
 	// Make sure the coordinates and sizes make sense

Modified: trunk/UI/GTK2/src/mainWindow.hh
===================================================================
--- trunk/UI/GTK2/src/mainWindow.hh	2009-03-21 05:03:11 UTC (rev 1589)
+++ trunk/UI/GTK2/src/mainWindow.hh	2009-03-21 11:00:39 UTC (rev 1590)
@@ -187,7 +187,7 @@
 	class InternalState : public ThreadsManager
 	{
 		public:
-			InternalState(unsigned int maxIndexThreads, mainWindow *pWindow);
+			InternalState(mainWindow *pWindow);
 			virtual ~InternalState();
 
 			// Query
@@ -199,7 +199,6 @@
 
 	} m_state;
 	static unsigned int m_maxDocsCount;
-	static unsigned int m_maxIndexThreads;
 
 };
 



From fabricecolin at mail.berlios.de  Sun Mar 22 02:31:15 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 22 Mar 2009 02:31:15 +0100
Subject: [Pinot-svn] r1591 - trunk/Utils
Message-ID: <200903220131.n2M1VFmf002434@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-22 02:31:09 +0100 (Sun, 22 Mar 2009)
New Revision: 1591

Modified:
   trunk/Utils/Document.cpp
   trunk/Utils/Document.h
   trunk/Utils/Makefile.am
Log:
Document relies on Memory for its internal buffer, uses madvise() if available
whenever mmap'ing a file.


Modified: trunk/Utils/Document.cpp
===================================================================
--- trunk/Utils/Document.cpp	2009-03-21 11:00:39 UTC (rev 1590)
+++ trunk/Utils/Document.cpp	2009-03-22 01:31:09 UTC (rev 1591)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -36,6 +36,7 @@
 
 #include "Document.h"
 #include "TimeConverter.h"
+#include "Memory.h"
 
 using std::cout;
 using std::cerr;
@@ -143,7 +144,7 @@
 	// Discard existing data
 	resetData();
 
-	m_pData = (char *)malloc(sizeof(char) * (length + 1));
+	m_pData = Memory::allocateBuffer(length + 1);
 	if (m_pData != NULL)
 	{
 		memcpy(m_pData, data, length);
@@ -212,16 +213,24 @@
 
 #ifdef HAVE_MMAP
 	// Request a private mapping of the whole file
-	void *mapSpace = mmap(NULL, fileStat.st_size, PROT_READ, MAP_PRIVATE, fd, 0);
+	void *mapSpace = mmap(NULL, (size_t)fileStat.st_size, PROT_READ, MAP_PRIVATE, fd, 0);
 	if (mapSpace != MAP_FAILED)
 	{
 		m_pData = (char*)mapSpace;
 		m_dataLength = fileStat.st_size;
 		m_isMapped = true;
+#ifdef HAVE_MADVISE
+		if (madvise(mapSpace, (size_t)fileStat.st_size, MADV_SEQUENTIAL) != 0)
+		{
+#ifdef DEBUG
+			cout << "Document::setDataFromFile: ignored memory advice" << endl;
+#endif
+		}
+#endif
 	}
 	else cerr << "Document::setDataFromFile: mapping failed" << endl;
 #else
-	m_pData = (char *)malloc(sizeof(char) * (fileStat.st_size + 1));
+	m_pData = Memory::allocateBuffer(fileStat.st_size + 1);
 	if (m_pData != NULL)
 	{
 		if (read(fd, (void*)m_pData, fileStat.st_size) == fileStat.st_size)
@@ -231,7 +240,7 @@
 		}
 		else
 		{
-			free(m_pData);
+			Memory::freeBuffer(m_pData, fileStat.st_size + 1);
 			m_pData = NULL;
 		}
 	}
@@ -327,13 +336,21 @@
 		if (m_isMapped == false)
 		{
 			// Free
-			free(m_pData);
+			Memory::freeBuffer(m_pData, m_dataLength + 1);
 		}
 #ifdef HAVE_MMAP
 		else
 		{
+#ifdef HAVE_MADVISE
+			if (madvise((void*)m_pData, (size_t)m_dataLength, MADV_DONTNEED) != 0)
+			{
+#ifdef DEBUG
+				cout << "Document::resetData: ignored memory advice" << endl;
+#endif
+			}
+#endif
 			// Unmap
-			munmap((void*)m_pData, m_dataLength);
+			munmap((void*)m_pData, (size_t)m_dataLength);
 		}
 #endif
 	}

Modified: trunk/Utils/Document.h
===================================================================
--- trunk/Utils/Document.h	2009-03-21 11:00:39 UTC (rev 1590)
+++ trunk/Utils/Document.h	2009-03-22 01:31:09 UTC (rev 1591)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by

Modified: trunk/Utils/Makefile.am
===================================================================
--- trunk/Utils/Makefile.am	2009-03-21 11:00:39 UTC (rev 1590)
+++ trunk/Utils/Makefile.am	2009-03-22 01:31:09 UTC (rev 1591)
@@ -6,6 +6,7 @@
 	DocumentInfo.h \
 	Languages.h \
 	MIMEScanner.h \
+	Memory.h \
 	NLS.h \
 	StringManip.h \
 	TimeConverter.h \
@@ -46,7 +47,8 @@
 
 libUtils_la_SOURCES = \
 	Languages.cpp \
-	MIMEScanner.cpp
+	MIMEScanner.cpp \
+	Memory.cpp
 
 if HAVE_GIO_MIME
 else



From fabricecolin at mail.berlios.de  Sun Mar 22 15:01:26 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 22 Mar 2009 15:01:26 +0100
Subject: [Pinot-svn] r1592 - trunk/Utils
Message-ID: <200903221401.n2ME1Qmu009593@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-22 15:01:22 +0100 (Sun, 22 Mar 2009)
New Revision: 1592

Modified:
   trunk/Utils/Memory.h
Log:
Better include config.h since the whole thing is driven by ifdef's.


Modified: trunk/Utils/Memory.h
===================================================================
--- trunk/Utils/Memory.h	2009-03-22 01:31:09 UTC (rev 1591)
+++ trunk/Utils/Memory.h	2009-03-22 14:01:22 UTC (rev 1592)
@@ -19,6 +19,7 @@
 #ifndef _MEMORY_H
 #define _MEMORY_H
 
+#include "config.h"
 #include <string>
 #include <iostream>
 #ifdef HAVE_UMEM_H



From fabricecolin at mail.berlios.de  Sun Mar 22 15:01:59 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 22 Mar 2009 15:01:59 +0100
Subject: [Pinot-svn] r1593 - trunk/Tokenize
Message-ID: <200903221401.n2ME1xmi009687@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-22 15:01:54 +0100 (Sun, 22 Mar 2009)
New Revision: 1593

Modified:
   trunk/Tokenize/TextConverter.cpp
Log:
Clear the output on exception.


Modified: trunk/Tokenize/TextConverter.cpp
===================================================================
--- trunk/Tokenize/TextConverter.cpp	2009-03-22 14:01:22 UTC (rev 1592)
+++ trunk/Tokenize/TextConverter.cpp	2009-03-22 14:01:54 UTC (rev 1593)
@@ -146,12 +146,14 @@
 #ifdef DEBUG
 		cout << "TextConverter::toUTF8: " << ce.what() << endl;
 #endif
+		outputText.clear();
 	}
 	catch (...)
 	{
 #ifdef DEBUG
 		cout << "TextConverter::toUTF8: unknown exception" << endl;
 #endif
+		outputText.clear();
 	}
 
 	return outputText;



From fabricecolin at mail.berlios.de  Sun Mar 22 15:04:32 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 22 Mar 2009 15:04:32 +0100
Subject: [Pinot-svn] r1594 - in trunk: IndexSearch Tokenize
Message-ID: <200903221404.n2ME4WdN010004@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-22 15:04:23 +0100 (Sun, 22 Mar 2009)
New Revision: 1594

Modified:
   trunk/IndexSearch/FilterWrapper.cpp
   trunk/Tokenize/FilterUtils.cpp
Log:
Retrieve content out with Filter::get_content().
Don't set dummy documents when the file is empty or of an unsupported type, just
go ahead and index its metadata.


Modified: trunk/IndexSearch/FilterWrapper.cpp
===================================================================
--- trunk/IndexSearch/FilterWrapper.cpp	2009-03-22 14:01:54 UTC (rev 1593)
+++ trunk/IndexSearch/FilterWrapper.cpp	2009-03-22 14:04:23 UTC (rev 1594)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007-2008 Fabrice Colin
+ *  Copyright 2007-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -32,16 +32,6 @@
 using std::set;
 using namespace Dijon;
 
-static string convertToUTF8(const char *pData, unsigned int dataLen, const string &charset)
-{
-	TextConverter converter(20);
-
-#ifdef DEBUG
-	cout << "FilterWrapper::filterDocument: filter requested conversion from " << charset << endl;
-#endif
-	return converter.toUTF8(pData, dataLen, charset);
-}
-
 ReducedAction::ReducedAction()
 {
 }
@@ -183,35 +173,25 @@
 
 	if (pFilter != NULL)
 	{
-		// The filter may have to convert the content to UTF-8 itself
-    		pFilter->set_utf8_converter(convertToUTF8);
-
 		fedFilter = FilterUtils::feedFilter(doc, pFilter);
 	}
-	else
+
+	if (fedFilter == false)
 	{
-		// Chances are this type is not supported
-		pFilter = new TextFilter("text/plain");
+		Document docCopy(doc);
 
-		Document emptyDoc(doc.getTitle(), doc.getLocation(), doc.getType(), doc.getLanguage());
+		// Take the appropriate action now
+		finalSuccess = action.takeAction(docCopy, false);
 
-		emptyDoc.setTimestamp(doc.getTimestamp());
-		emptyDoc.setSize(doc.getSize());
-		emptyDoc.setData(" ", 1);
+		if (pFilter != NULL)
+		{
+			delete pFilter;
+		}
 
-#ifdef DEBUG
-		cout << "FilterWrapper::filterDocument: unsupported type " << doc.getType() << endl;
-#endif
-		fedFilter = FilterUtils::feedFilter(emptyDoc, pFilter);
+		return finalSuccess;
 	}
 
-	if (fedFilter == false)
-	{
-		delete pFilter;
-
-		return false;
-	}
-
+	// At this point, pFilter cannot be NULL
 	bool hasDocs = pFilter->has_documents();
 #ifdef DEBUG
 	cout << "FilterWrapper::filterDocument: has documents " << hasDocs << endl;

Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2009-03-22 14:01:54 UTC (rev 1593)
+++ trunk/Tokenize/FilterUtils.cpp	2009-03-22 14:04:23 UTC (rev 1594)
@@ -258,11 +258,7 @@
 			{
 				fedInput = pFilter->set_document_data(pData, dataLength);
 			}
-			else
-			{
-				// The file may be empty
-				fedInput = pFilter->set_document_data(" ", 1);
-			}
+			// Else, the file may be empty
 		}
 	}
 
@@ -361,17 +357,17 @@
 	TextConverter converter(20);
 
 	// Content and title may have to be converted
-	map<string, string>::const_iterator contentIter = metaData.find("content");
-	if (contentIter != metaData.end())
+	const dstring &content = pFilter->get_content();
+	if (content.empty() == false)
 	{
 		if (checkType == true)
 		{
-			doc.setType(MIMEScanner::scanData(contentIter->second.c_str(), contentIter->second.length()));
+			doc.setType(MIMEScanner::scanData(content.c_str(), content.length()));
 		}
 
 		if (doc.getType().substr(0, 10) == "text/plain")
 		{
-			string utf8Data(converter.toUTF8(contentIter->second, charset));
+			string utf8Data(converter.toUTF8(content.c_str(), content.length(), charset));
 
 			if (converter.getErrorsCount() > 0)
 			{
@@ -381,13 +377,16 @@
 		}
 		else
 		{
-			doc.setData(contentIter->second.c_str(), contentIter->second.length());
+			doc.setData(content.c_str(), content.length());
 		}
 	}
-	contentIter = metaData.find("title");
-	if (contentIter != metaData.end())
+	map<string, string>::const_iterator contentIter = metaData.find("title");
+	if ((contentIter != metaData.end()) &&
+		(contentIter->second.empty() == false))
 	{
-		doc.setTitle(converter.toUTF8(contentIter->second, charset));
+		string utf8Data(converter.toUTF8(contentIter->second, charset));
+
+		doc.setTitle(utf8Data);
 	}
 
 	return true;
@@ -414,11 +413,10 @@
 	if ((feedFilter(doc, pFilter) == true) &&
 		(pFilter->next_document() == true))
 	{
-		const map<string, string> &metaData = pFilter->get_meta_data();
-		map<string, string>::const_iterator contentIter = metaData.find("content");
-		if (contentIter != metaData.end())
+		const dstring &content = pFilter->get_content();
+		if (content.empty() == false)
 		{
-			strippedText = contentIter->second;
+			strippedText = string(content.c_str(), content.length());
 		}
 	}
 



From fabricecolin at mail.berlios.de  Sun Mar 22 15:06:51 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 22 Mar 2009 15:06:51 +0100
Subject: [Pinot-svn] r1595 - trunk/Core
Message-ID: <200903221406.n2ME6pET010401@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-22 15:06:39 +0100 (Sun, 22 Mar 2009)
New Revision: 1595

Modified:
   trunk/Core/Makefile.am
   trunk/Core/WorkerThreads.cpp
Log:
Attempt to reclaim, or rather let the OS reclaim, memory every 1000 threads.
Link against libBasicUtils first.


Modified: trunk/Core/Makefile.am
===================================================================
--- trunk/Core/Makefile.am	2009-03-22 14:04:23 UTC (rev 1594)
+++ trunk/Core/Makefile.am	2009-03-22 14:06:39 UTC (rev 1595)
@@ -50,7 +50,7 @@
 	-L$(top_builddir)/Collect \
 	-L$(top_builddir)/IndexSearch \
 	-lCore -lIndexSearch -lMonitor -lCollect -lSQL \
-	-lTokenize -lUtils -lBasicUtils @LIBS@ \
+	-lTokenize -lBasicUtils -lUtils @LIBS@ \
 	@GLIBMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @XML_LIBS@ \
 	@HTTP_LIBS@ @SQL_LIBS@ @MISC_LIBS@
 
@@ -67,7 +67,7 @@
 	-L$(top_builddir)/Collect \
 	-L$(top_builddir)/IndexSearch \
 	-lCore -lIndexSearch -lCollect -lTokenize \
-	-lUtils -lBasicUtils @LIBS@ \
+	-lBasicUtils -lUtils @LIBS@ \
 	@GLIBMM_LIBS@ @DBUS_LIBS@ \
 	@XML_LIBS@ @HTTP_LIBS@ @MISC_LIBS@
 
@@ -87,7 +87,7 @@
 	-L$(top_builddir)/Collect \
 	-L$(top_builddir)/IndexSearch \
 	-lCore -lIndexSearch -lMonitor -lCollect -lSQL \
-	-lTokenize -lUtils -lBasicUtils @LIBS@ \
+	-lTokenize -lBasicUtils -lUtils @LIBS@ \
 	@GLIBMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @XML_LIBS@ \
 	@HTTP_LIBS@ @SQL_LIBS@ @MISC_LIBS@
 

Modified: trunk/Core/WorkerThreads.cpp
===================================================================
--- trunk/Core/WorkerThreads.cpp	2009-03-22 14:04:23 UTC (rev 1594)
+++ trunk/Core/WorkerThreads.cpp	2009-03-22 14:06:39 UTC (rev 1595)
@@ -37,6 +37,7 @@
 #include "config.h"
 #include "NLS.h"
 #include "Languages.h"
+#include "Memory.h"
 #include "MIMEScanner.h"
 #include "StringManip.h"
 #include "TimeConverter.h"
@@ -501,6 +502,12 @@
 {
 	unsigned int nextThreadId = ++m_nextThreadId;
 
+	// Reclaim memory on a regular basis
+	if (nextThreadId % 1000 == 0)
+	{
+		Memory::reclaim();
+	}
+
 	return nextThreadId;
 }
 



From fabricecolin at mail.berlios.de  Sun Mar 22 15:07:33 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sun, 22 Mar 2009 15:07:33 +0100
Subject: [Pinot-svn] r1596 - trunk/UI/GTK2/src
Message-ID: <200903221407.n2ME7XH2010480@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-22 15:07:25 +0100 (Sun, 22 Mar 2009)
New Revision: 1596

Modified:
   trunk/UI/GTK2/src/Makefile.am
Log:
Link against libBasicUtils first.


Modified: trunk/UI/GTK2/src/Makefile.am
===================================================================
--- trunk/UI/GTK2/src/Makefile.am	2009-03-22 14:06:39 UTC (rev 1595)
+++ trunk/UI/GTK2/src/Makefile.am	2009-03-22 14:07:25 UTC (rev 1596)
@@ -80,7 +80,7 @@
 	-L$(top_builddir)/IndexSearch \
 	-L$(top_srcdir)/Core \
 	-lCore -lIndexSearch -lMonitor -lCollect -lSQL \
-	-lTokenize -lUtils -lBasicUtils @LIBS@ \
+	-lTokenize -lBasicUtils -lUtils @LIBS@ \
 	@GTKMM_LIBS@ @DBUS_LIBS@ @GTHREAD_LIBS@ @XML_LIBS@ \
 	@HTTP_LIBS@ @SQL_LIBS@ @MISC_LIBS@
 



From fabricecolin at mail.berlios.de  Wed Mar 25 14:41:10 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Wed, 25 Mar 2009 14:41:10 +0100
Subject: [Pinot-svn] r1597 - in trunk: IndexSearch IndexSearch/Xapian Utils
Message-ID: <200903251341.n2PDfA1b000882@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-25 14:41:00 +0100 (Wed, 25 Mar 2009)
New Revision: 1597

Modified:
   trunk/IndexSearch/DBusIndex.cpp
   trunk/IndexSearch/Xapian/XapianDatabase.cpp
   trunk/Utils/DocumentInfo.cpp
   trunk/Utils/DocumentInfo.h
Log:
ipath is a property of DocumentInfo.


Modified: trunk/IndexSearch/DBusIndex.cpp
===================================================================
--- trunk/IndexSearch/DBusIndex.cpp	2009-03-22 14:07:25 UTC (rev 1596)
+++ trunk/IndexSearch/DBusIndex.cpp	2009-03-25 13:41:00 UTC (rev 1597)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2007-2008 Fabrice Colin
+ *  Copyright 2007-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -243,7 +243,7 @@
 				value = docInfo.getTitle();
 				break;
 			case 1:
-				value = docInfo.getLocation();
+				value = docInfo.getLocation(true);
 				break;
 			case 2:
 				value = docInfo.getType();

Modified: trunk/IndexSearch/Xapian/XapianDatabase.cpp
===================================================================
--- trunk/IndexSearch/Xapian/XapianDatabase.cpp	2009-03-22 14:07:25 UTC (rev 1596)
+++ trunk/IndexSearch/Xapian/XapianDatabase.cpp	2009-03-25 13:41:00 UTC (rev 1597)
@@ -542,7 +542,7 @@
 
 	// A bad field is one that includes one of our field delimiters
 	if (regcomp(&fieldRegex,
-		"(url|sample|caption|type|modtime|language|size)=",
+		"(url|ipath|sample|caption|type|modtime|language|size)=",
 		REG_EXTENDED|REG_ICASE) == 0)
 	{
 		if (regexec(&fieldRegex, field.c_str(), 1,
@@ -554,13 +554,14 @@
 	regfree(&fieldRegex);
 #else
 	// A bad field is one that includes one of our field delimiters
-	if ((field.find("url") != string::npos) ||
-		(field.find("sample") != string::npos) ||
-		(field.find("caption") != string::npos) ||
-		(field.find("type") != string::npos) ||
-		(field.find("modtime") != string::npos) ||
-		(field.find("language") != string::npos) ||
-		(field.find("size") != string::npos))
+	if ((field.find("url=") != string::npos) ||
+		(field.find("ipath=") != string::npos) ||
+		(field.find("sample=") != string::npos) ||
+		(field.find("caption=") != string::npos) ||
+		(field.find("type=") != string::npos) ||
+		(field.find("modtime=") != string::npos) ||
+		(field.find("language=") != string::npos) ||
+		(field.find("size=") != string::npos))
 	{
 		isBadField = true;
 	}
@@ -584,6 +585,8 @@
 
 	// Set the document data omindex-style
 	record += pDoc->getLocation();
+	record += "\nipath=";
+	record += Url::escapeUrl(pDoc->getInternalPath());
 	// The sample will be generated at query time
 	record += "\nsample=";
 	record += "\ncaption=";
@@ -640,6 +643,13 @@
 		url = Url::canonicalizeUrl(url);
 	}
 	pDoc->setLocation(url);
+	// Get the internal path 
+	string ipath(StringManip::extractField(record, "ipath=", "\n"));
+	if (ipath.empty() == false)
+	{
+		ipath = Url::unescapeUrl(ipath);
+	}
+	pDoc->setInternalPath(ipath);
 	// Get the type
 	pDoc->setType(StringManip::extractField(record, "type=", "\n"));
 	// ... the language, if available

Modified: trunk/Utils/DocumentInfo.cpp
===================================================================
--- trunk/Utils/DocumentInfo.cpp	2009-03-22 14:07:25 UTC (rev 1596)
+++ trunk/Utils/DocumentInfo.cpp	2009-03-25 13:41:00 UTC (rev 1597)
@@ -91,10 +91,20 @@
 
 bool DocumentInfo::operator<(const DocumentInfo& other) const
 {
-	if (getField("url") < other.getField("url"))
+	string thisUrl(getField("url"));
+	string otherUrl(other.getField("url"));
+
+	if (thisUrl < otherUrl)
 	{
 		return true;
 	}
+	else if (thisUrl == otherUrl)
+	{
+		if (getField("ipath") < other.getField("ipath"))
+		{
+			return true;
+		}
+	}
 
 	return false;
 }
@@ -160,6 +170,7 @@
 	{
 		setField("caption", StringManip::extractField(unescapedInfo, "caption=", "\n"));
 		setField("url", StringManip::extractField(unescapedInfo, "url=", "\n"));
+		setField("ipath", StringManip::extractField(unescapedInfo, "ipath=", "\n"));
 		setField("type", StringManip::extractField(unescapedInfo, "type=", "\n"));
 		setField("language", StringManip::extractField(unescapedInfo, "language=", "\n"));
 		setField("modtime", StringManip::extractField(unescapedInfo, "modtime=", "\n"));
@@ -217,11 +228,38 @@
 }
 
 /// Returns the original location of the document.
-string DocumentInfo::getLocation(void) const
+string DocumentInfo::getLocation(bool withIPath) const
 {
-	return getField("url");
+	string url(getField("url"));
+
+	if (withIPath == false)
+	{
+		return url;
+	}
+
+	string ipath(getField("ipath"));
+
+	if (ipath.empty() == false)
+	{
+		url += "?";
+		url += ipath;
+	}
+
+	return url;
 }
 
+/// Sets the internal path to the document.
+void DocumentInfo::setInternalPath(const string &ipath)
+{
+	setField("ipath", ipath);
+}
+
+/// Returns the internal path to the document.
+string DocumentInfo::getInternalPath(void) const
+{
+	return getField("ipath");
+}
+
 /// Sets the type of the document.
 void DocumentInfo::setType(const string &type)
 {

Modified: trunk/Utils/DocumentInfo.h
===================================================================
--- trunk/Utils/DocumentInfo.h	2009-03-22 14:07:25 UTC (rev 1596)
+++ trunk/Utils/DocumentInfo.h	2009-03-25 13:41:00 UTC (rev 1597)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -58,8 +58,14 @@
 		virtual void setLocation(const std::string &location);
 
 		/// Returns the original location of the document.
-		virtual std::string getLocation(void) const;
+		virtual std::string getLocation(bool withIPath = false) const;
 
+		/// Sets the internal path to the document.
+		void setInternalPath(const std::string &ipath);
+
+		/// Returns the internal path to the document.
+		std::string getInternalPath(void) const;
+
 		/// Sets the type of the document.
 		virtual void setType(const std::string &type);
 



From fabricecolin at mail.berlios.de  Sat Mar 28 03:33:24 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 28 Mar 2009 03:33:24 +0100
Subject: [Pinot-svn] r1598 - in trunk: IndexSearch Tokenize
Message-ID: <200903280233.n2S2XOLb018394@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-28 03:33:16 +0100 (Sat, 28 Mar 2009)
New Revision: 1598

Modified:
   trunk/IndexSearch/FilterWrapper.cpp
   trunk/IndexSearch/FilterWrapper.h
   trunk/Tokenize/FilterUtils.cpp
   trunk/Tokenize/FilterUtils.h
Log:
Moved filterDocument() and related to FilterUtils.


Modified: trunk/IndexSearch/FilterWrapper.cpp
===================================================================
--- trunk/IndexSearch/FilterWrapper.cpp	2009-03-25 13:41:00 UTC (rev 1597)
+++ trunk/IndexSearch/FilterWrapper.cpp	2009-03-28 02:33:16 UTC (rev 1598)
@@ -32,14 +32,6 @@
 using std::set;
 using namespace Dijon;
 
-ReducedAction::ReducedAction()
-{
-}
-
-ReducedAction::~ReducedAction()
-{
-}
-
 class IndexAction : public ReducedAction
 {
 	public:
@@ -109,14 +101,6 @@
 {
 }
 
-bool FilterWrapper::reduceToText(const Document &doc, ReducedAction &action)
-{
-	string originalType(doc.getType());
-	unsigned int indexId = 0;
-
-	return filterDocument(doc, originalType, action);
-}
-
 bool FilterWrapper::indexDocument(const Document &doc, const set<string> &labels, unsigned int &docId)
 {
 	string originalType(doc.getType());
@@ -130,7 +114,7 @@
 
 	IndexAction action(m_pIndex, labels, docId, false);
 
-	bool filteredDoc = filterDocument(doc, originalType, action);
+	bool filteredDoc = FilterUtils::filterDocument(doc, originalType, action);
 	docId = action.getId();
 
 	return filteredDoc;
@@ -150,7 +134,7 @@
 
 	IndexAction action(m_pIndex, labels, docId, true);
 
-	return filterDocument(doc, originalType, action);
+	return FilterUtils::filterDocument(doc, originalType, action);
 }
 
 bool FilterWrapper::unindexDocument(const string &location)
@@ -165,129 +149,6 @@
 	return m_pIndex->unindexDocument(location);
 }
 
-bool FilterWrapper::filterDocument(const Document &doc, const string &originalType,
-	ReducedAction &action)
-{
-	Filter *pFilter = FilterUtils::getFilter(doc.getType());
-	bool fedFilter = false, docSuccess = false, finalSuccess = false;
-
-	if (pFilter != NULL)
-	{
-		fedFilter = FilterUtils::feedFilter(doc, pFilter);
-	}
-
-	if (fedFilter == false)
-	{
-		Document docCopy(doc);
-
-		// Take the appropriate action now
-		finalSuccess = action.takeAction(docCopy, false);
-
-		if (pFilter != NULL)
-		{
-			delete pFilter;
-		}
-
-		return finalSuccess;
-	}
-
-	// At this point, pFilter cannot be NULL
-	bool hasDocs = pFilter->has_documents();
-#ifdef DEBUG
-	cout << "FilterWrapper::filterDocument: has documents " << hasDocs << endl;
-#endif
-	while (hasDocs == true)
-	{
-		string actualType(originalType);
-		bool isNested = false;
-		bool emptyTitle = false;
-
-		if (pFilter->next_document() == false)
-		{
-#ifdef DEBUG
-			cout << "FilterWrapper::filterDocument: no more documents in " << doc.getLocation() << endl;
-#endif
-			break;
-		}
-
-		string originalTitle(doc.getTitle());
-		Document filteredDoc(originalTitle, doc.getLocation(), "text/plain", doc.getLanguage());
-
-		filteredDoc.setTimestamp(doc.getTimestamp());
-		filteredDoc.setSize(doc.getSize());
-		docSuccess = false;
-
-		if (FilterUtils::populateDocument(filteredDoc, pFilter) == false)
-		{
-			hasDocs = pFilter->has_documents();
-			continue;
-		}
-
-		// Is this a nested document ?
-		if (filteredDoc.getLocation().length() > doc.getLocation().length())
-		{
-			actualType = filteredDoc.getType();
-#ifdef DEBUG
-			cout << "FilterWrapper::filterDocument: nested document of type " << actualType << endl;
-#endif
-			isNested = true;
-		}
-		else if (originalTitle.empty() == false)
-		{
-			// Preserve the top-level document's title
-			filteredDoc.setTitle(originalTitle);
-		}
-		else if (filteredDoc.getTitle().empty() == true)
-		{
-			emptyTitle = true;
-		}
-
-		// Pass it down to another filter ?
-		if ((filteredDoc.getType().length() >= 10) &&
-			(filteredDoc.getType().substr(0, 10) == "text/plain"))
-		{
-			// Do we need to set a default title ?
-			if (emptyTitle == true)
-			{
-				Url urlObj(doc.getLocation());
-
-				// Default to the file name as title
-				filteredDoc.setTitle(urlObj.getFile());
-#ifdef DEBUG
-				cout << "FilterWrapper::filterDocument: set default title " << urlObj.getFile() << endl;
-#endif
-			}
-
-			// No, it's been reduced to plain text
-			filteredDoc.setType(actualType);
-
-			// Take the appropriate action
-			docSuccess = action.takeAction(filteredDoc, isNested);
-		}
-		else
-		{
-			docSuccess = filterDocument(filteredDoc, actualType, action);
-		}
-
-		// Consider indexing anything a success
-		if (docSuccess == true)
-		{
-			finalSuccess = true;
-		}
-
-		// Next
-		hasDocs = pFilter->has_documents();
-	}
-
-	delete pFilter;
-
-#ifdef DEBUG
-	cout << "FilterWrapper::filterDocument: done with " << doc.getLocation() << " status " << finalSuccess << endl;
-#endif
-
-	return finalSuccess;
-}
-
 bool FilterWrapper::unindexNestedDocuments(const string &url)
 {
 	// Unindex all documents that stem from this file

Modified: trunk/IndexSearch/FilterWrapper.h
===================================================================
--- trunk/IndexSearch/FilterWrapper.h	2009-03-25 13:41:00 UTC (rev 1597)
+++ trunk/IndexSearch/FilterWrapper.h	2009-03-28 02:33:16 UTC (rev 1598)
@@ -27,21 +27,6 @@
 #include "Filter.h"
 #include "IndexInterface.h"
 
-/// Takes action on a document that's been reduced to text.
-class PINOT_EXPORT ReducedAction
-{
-	public:
-		ReducedAction();
-		virtual ~ReducedAction();
-
-		virtual bool takeAction(Document &doc, bool isNested) = 0;
-
-	private:
-		ReducedAction(const ReducedAction &other);
-		ReducedAction &operator=(const ReducedAction &other);
-
-};
-
 /// A wrapper around Dijon filters.
 class PINOT_EXPORT FilterWrapper
 {
@@ -49,9 +34,6 @@
 		FilterWrapper(IndexInterface *pIndex);
 		virtual ~FilterWrapper();
 
-		/// Reduces a document to text.
-		bool reduceToText(const Document &doc, ReducedAction &action);
-
 		/// Indexes the given data.
 		bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId);
@@ -65,9 +47,6 @@
 	protected:
 		IndexInterface *m_pIndex;
 
-		bool filterDocument(const Document &doc, const std::string &originalType,
-			ReducedAction &action);
-
 		bool unindexNestedDocuments(const std::string &url);
 
 	private:

Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2009-03-25 13:41:00 UTC (rev 1597)
+++ trunk/Tokenize/FilterUtils.cpp	2009-03-28 02:33:16 UTC (rev 1598)
@@ -25,6 +25,7 @@
 #include <set>
 
 #include "config.h"
+#include "Memory.h"
 #include "MIMEScanner.h"
 #include "StringManip.h"
 #include "TimeConverter.h"
@@ -34,6 +35,7 @@
 #include "FilterUtils.h"
 
 #define UNSUPPORTED_TYPE "X-Unsupported"
+#define SIZE_THRESHOLD 5242880
 
 using std::cout;
 using std::cerr;
@@ -45,6 +47,31 @@
 set<string> FilterUtils::m_types;
 map<string, string> FilterUtils::m_typeAliases;
 
+ReducedAction::ReducedAction()
+{
+}
+
+ReducedAction::~ReducedAction()
+{
+}
+
+bool ReducedAction::positionFilter(const Document &doc, Dijon::Filter *pFilter)
+{
+	return false;
+}
+
+bool ReducedAction::isReduced(const Document &doc)
+{
+	// Is it reduced to plain text ?
+	if ((doc.getType().length() >= 10) &&
+		(doc.getType().substr(0, 10) == "text/plain"))
+	{
+		return true;
+	}
+
+	return false;
+}
+
 FilterUtils::FilterUtils()
 {
 }
@@ -177,7 +204,7 @@
 	}
 
 	if ((urlObj.getProtocol() == "file") &&
-		(location .length() > 7))
+		(location.length() > 7))
 	{
 		fileName = location.substr(7);
 	}
@@ -227,7 +254,8 @@
 	}
 	// ... to feeding the file
 	if ((fedInput == false) &&
-		(fileName.empty() == false))
+		(fileName.empty() == false) &&
+		(doc.getInternalPath().empty() == true))
 	{ 
 		if (pFilter->is_data_input_ok(Dijon::Filter::DOCUMENT_FILE_NAME) == true)
 		{
@@ -264,7 +292,7 @@
 
 	if (fedInput == false)
 	{
-		cerr << "Couldn't feed filter for " << doc.getLocation() << endl;
+		cerr << "Couldn't feed filter for " << doc.getLocation(true) << endl;
 
 		return false;
 	}
@@ -275,6 +303,7 @@
 bool FilterUtils::populateDocument(Document &doc, Dijon::Filter *pFilter)
 {
 	string charset, uri, ipath;
+	off_t size = 0;
 	bool checkType = false;
 
 	if (pFilter == NULL)
@@ -318,7 +347,7 @@
 		}
 		else if (metaIter->first == "size")
 		{
-			off_t size = (off_t)atoi(metaIter->second.c_str());
+			size = (off_t)atoi(metaIter->second.c_str());
 
 			if (size > 0)
 			{
@@ -333,7 +362,7 @@
 			uri = metaIter->second;
 
 			if ((uri.length() >= 18) &&
-				(uri.substr(0, 18) == "file:///tmp/filter"))
+				(uri.find(":///tmp/filter") != string::npos))
 			{
 				// We fed the filter a temporary file
 				uri.clear();
@@ -347,11 +376,17 @@
 	}
 	if (ipath.empty() == false)
 	{
-		string location(doc.getLocation());
+		string currentIPath(doc.getInternalPath());
 
-		location += "?";
-		location += ipath;
-		doc.setLocation(location);
+		if (currentIPath.empty() == false)
+		{
+			currentIPath += "&next&";
+		}
+		currentIPath += ipath;
+		doc.setInternalPath(currentIPath);
+#ifdef DEBUG
+		cout << "FilterUtils::populateDocument: ipath " << currentIPath << endl;
+#endif
 	}
 
 	TextConverter converter(20);
@@ -371,7 +406,7 @@
 
 			if (converter.getErrorsCount() > 0)
 			{
-				cerr << doc.getLocation() << " may not have been fully converted to UTF-8" << endl;
+				cerr << doc.getLocation(true) << " may not have been fully converted to UTF-8" << endl;
 			}
 			doc.setData(utf8Data.c_str(), utf8Data.length());
 		}
@@ -389,9 +424,153 @@
 		doc.setTitle(utf8Data);
 	}
 
+	// If the document is big'ish, try and reclaim memory
+	int inUse = Memory::getUsage();
+	if ((size > SIZE_THRESHOLD) ||
+		(content.length() > SIZE_THRESHOLD))
+	{
+		Memory::reclaim();
+	}
+
 	return true;
 }
 
+bool FilterUtils::filterDocument(const Document &doc, const string &originalType,
+	ReducedAction &action)
+{
+	Dijon::Filter *pFilter = FilterUtils::getFilter(doc.getType());
+	bool fedFilter = false, positionedFilter = false, docSuccess = false, finalSuccess = false;
+
+	if (pFilter != NULL)
+	{
+		fedFilter = FilterUtils::feedFilter(doc, pFilter);
+	}
+	positionedFilter = action.positionFilter(doc, pFilter);
+
+	if (fedFilter == false)
+	{
+		Document docCopy(doc);
+
+		// Take the appropriate action now
+		finalSuccess = action.takeAction(docCopy, false);
+
+		if (pFilter != NULL)
+		{
+			delete pFilter;
+		}
+
+		return finalSuccess;
+	}
+
+	// At this point, pFilter cannot be NULL
+	bool hasDocs = pFilter->has_documents();
+#ifdef DEBUG
+	cout << "FilterUtils::filterDocument: has documents " << hasDocs << endl;
+#endif
+	while (hasDocs == true)
+	{
+		string actualType(originalType);
+		bool isNested = false;
+		bool emptyTitle = false;
+
+		if ((positionedFilter == false) &&
+			(pFilter->next_document() == false))
+		{
+#ifdef DEBUG
+			cout << "FilterUtils::filterDocument: no more documents in " << doc.getLocation(true) << endl;
+#endif
+			break;
+		}
+
+		string originalTitle(doc.getTitle());
+		Document filteredDoc(originalTitle, doc.getLocation(), "text/plain", doc.getLanguage());
+
+		filteredDoc.setInternalPath(doc.getInternalPath());
+		filteredDoc.setTimestamp(doc.getTimestamp());
+		filteredDoc.setSize(doc.getSize());
+		docSuccess = false;
+
+		if (populateDocument(filteredDoc, pFilter) == false)
+		{
+			hasDocs = pFilter->has_documents();
+			continue;
+		}
+
+		// Is this a nested document ?
+		if (filteredDoc.getInternalPath().length() > doc.getInternalPath().length())
+		{
+			actualType = filteredDoc.getType();
+#ifdef DEBUG
+			cout << "FilterUtils::filterDocument: nested document of type " << actualType << endl;
+#endif
+			isNested = true;
+		}
+		else if (originalTitle.empty() == false)
+		{
+			// Preserve the top-level document's title
+			filteredDoc.setTitle(originalTitle);
+		}
+		else if (filteredDoc.getTitle().empty() == true)
+		{
+			emptyTitle = true;
+		}
+
+		// Pass it down to another filter ?
+		if (action.isReduced(filteredDoc) == true)
+		{
+			// Do we need to set a default title ?
+			if (emptyTitle == true)
+			{
+				Url urlObj(doc.getLocation());
+
+				// Default to the file name as title
+				filteredDoc.setTitle(urlObj.getFile());
+#ifdef DEBUG
+				cout << "FilterUtils::filterDocument: set default title " << urlObj.getFile() << endl;
+#endif
+			}
+
+			filteredDoc.setType(actualType);
+
+			// Take the appropriate action
+			docSuccess = action.takeAction(filteredDoc, isNested);
+		}
+		else
+		{
+			docSuccess = filterDocument(filteredDoc, actualType, action);
+		}
+
+		// Consider indexing anything a success
+		if (docSuccess == true)
+		{
+			finalSuccess = true;
+		}
+
+		if (positionedFilter == true)
+		{
+			break;
+		}
+
+		// Next
+		hasDocs = pFilter->has_documents();
+	}
+
+	delete pFilter;
+
+#ifdef DEBUG
+	cout << "FilterUtils::filterDocument: done with " << doc.getLocation(true) << " status " << finalSuccess << endl;
+#endif
+
+	return finalSuccess;
+}
+
+bool FilterUtils::reduceDocument(const Document &doc, ReducedAction &action)
+{
+	string originalType(doc.getType());
+
+	return filterDocument(doc, originalType, action);
+}
+
 string FilterUtils::stripMarkup(const string &text)
 {
 	if (text.empty() == true)

Modified: trunk/Tokenize/FilterUtils.h
===================================================================
--- trunk/Tokenize/FilterUtils.h	2009-03-25 13:41:00 UTC (rev 1597)
+++ trunk/Tokenize/FilterUtils.h	2009-03-28 02:33:16 UTC (rev 1598)
@@ -26,6 +26,25 @@
 #include "Visibility.h"
 #include "filters/Filter.h"
 
+/// Drives document reduction and takes action on the final document.
+class PINOT_EXPORT ReducedAction
+{
+	public:
+		ReducedAction();
+		virtual ~ReducedAction();
+
+		virtual bool positionFilter(const Document &doc, Dijon::Filter *pFilter);
+
+		virtual bool isReduced(const Document &doc);
+
+		virtual bool takeAction(Document &doc, bool isNested) = 0;
+
+	private:
+		ReducedAction(const ReducedAction &other);
+		ReducedAction &operator=(const ReducedAction &other);
+
+};
+
 /// Utility functions for dealing with Dijon filters.
 class PINOT_EXPORT FilterUtils
 {
@@ -44,6 +63,13 @@
 		/// Populates a document based on metadata extracted by the filter.
 		static bool populateDocument(Document &doc, Dijon::Filter *pFilter);
 
+		/// Filters a document until reduced to the minimum.
+		static bool filterDocument(const Document &doc, const std::string &originalType,
+			ReducedAction &action);
+
+		/// Convenient front-end for filterDocument() to reduce documents.
+		static bool reduceDocument(const Document &doc, ReducedAction &action);
+
 		/// Strips markup from a piece of text.
 		static std::string stripMarkup(const std::string &text);
 



From fabricecolin at mail.berlios.de  Sat Mar 28 03:36:44 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 28 Mar 2009 03:36:44 +0100
Subject: [Pinot-svn] r1599 - trunk/Collect
Message-ID: <200903280236.n2S2aiuv018513@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-28 03:36:40 +0100 (Sat, 28 Mar 2009)
New Revision: 1599

Modified:
   trunk/Collect/FileCollector.cpp
Log:
If ipath isn't empty, drill down with FilterUtils::reduceDocument(). 


Modified: trunk/Collect/FileCollector.cpp
===================================================================
--- trunk/Collect/FileCollector.cpp	2009-03-28 02:33:16 UTC (rev 1598)
+++ trunk/Collect/FileCollector.cpp	2009-03-28 02:36:40 UTC (rev 1599)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -21,10 +21,98 @@
 
 #include "MIMEScanner.h"
 #include "Url.h"
+#include "FilterUtils.h"
 #include "FileCollector.h"
 
 using namespace std;
 
+class LastIPathAction : public ReducedAction
+{
+	public:
+		LastIPathAction(const string &ipath) :
+			ReducedAction(),
+			m_ipath(ipath),
+			m_pDocument(NULL)
+		{
+		}
+		virtual ~LastIPathAction()
+		{
+		}
+
+		virtual bool positionFilter(const Document &doc, Dijon::Filter *pFilter)
+		{
+			string::size_type nextPos = m_ipath.find("&next&");
+			string thisIPath(m_ipath);
+
+			if (nextPos != string::npos)
+			{
+				thisIPath = m_ipath.substr(0, nextPos);
+			}
+
+			if (pFilter != NULL)
+			{
+#ifdef DEBUG
+				cout << "LastIPathAction::positionFilter: moving filter for "
+					<< pFilter->get_mime_type() << " to " << thisIPath << endl;
+#endif
+				// Skip forward
+				pFilter->skip_to_document(thisIPath);
+			}
+
+			if (nextPos != string::npos)
+			{
+				 m_ipath.erase(0, nextPos + 6);
+			}
+			else
+			{
+				m_ipath.clear();
+			}
+
+			return true;
+		}
+
+		virtual bool isReduced(const Document &doc)
+		{
+			if (m_ipath.empty() == false)
+			{
+				// Go one level deeper
+#ifdef DEBUG
+				cout << "LastIPathAction::isReduced: not final" << endl;
+#endif
+				return false;
+			}
+
+			return true;
+		}
+
+		virtual bool takeAction(Document &doc, bool isNested)
+		{
+			if (m_ipath.empty() == true)
+			{
+				m_pDocument = new Document(doc);
+#ifdef DEBUG
+				cout << "LastIPathAction::takeAction: " << doc.getInternalPath() << " final" << endl;
+#endif
+			}
+
+			return true;
+		}
+
+		Document *getDocument(void)
+		{
+			return m_pDocument;
+		}
+
+	protected:
+		string m_ipath;
+		Document *m_pDocument;
+
+	private:
+		LastIPathAction(const LastIPathAction &other);
+		LastIPathAction &operator=(const LastIPathAction &other);
+
+};
+
 FileCollector::FileCollector() :
 	DownloaderInterface()
 {
@@ -42,7 +130,8 @@
 Document *FileCollector::retrieveUrl(const DocumentInfo &docInfo)
 {
 	Url thisUrl(docInfo.getLocation());
-	string protocol = thisUrl.getProtocol();
+	string protocol(thisUrl.getProtocol());
+	string ipath(docInfo.getInternalPath());
 
 	if (protocol != "file")
 	{
@@ -61,12 +150,39 @@
 		delete pDocument;
 		return NULL;
 	}
-	if (pDocument->getType().empty() == true)
+
+	// Determine the file type
+	string type(MIMEScanner::scanFile(fileLocation));
+
+	// Stop here ?
+	if (ipath.empty() == true)
 	{
-		// Determine the file type
-		pDocument->setType(MIMEScanner::scanFile(fileLocation));
+		if (pDocument->getType().empty() == true)
+		{
+			pDocument->setType(type);
+		}
+
+		return pDocument;
 	}
 
+	// Reset these to avoid confusing the filters
+	pDocument->setInternalPath("");
+	pDocument->setType(type);
+
+	LastIPathAction action(ipath);
+	bool reduced = FilterUtils::reduceDocument(*pDocument, action);
+	if (reduced == true)
+	{
+		Document *pBottomMostDocument = action.getDocument();
+
+		if (pBottomMostDocument != NULL)
+		{
+			delete pDocument;
+
+			return pBottomMostDocument;
+		}
+	}
+
 	return pDocument;
 }
 



From fabricecolin at mail.berlios.de  Sat Mar 28 03:46:39 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 28 Mar 2009 03:46:39 +0100
Subject: [Pinot-svn] r1600 - trunk/Utils
Message-ID: <200903280246.n2S2kdD2019217@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-28 03:46:32 +0100 (Sat, 28 Mar 2009)
New Revision: 1600

Modified:
   trunk/Utils/Memory.cpp
   trunk/Utils/Memory.h
Log:
Added getUsage().
In reclaim(), call umem_reap() if umem support is on.


Modified: trunk/Utils/Memory.cpp
===================================================================
--- trunk/Utils/Memory.cpp	2009-03-28 02:36:40 UTC (rev 1599)
+++ trunk/Utils/Memory.cpp	2009-03-28 02:46:32 UTC (rev 1600)
@@ -74,6 +74,32 @@
 #endif
 }
 
+int Memory::getUsage(void)
+{
+	int inUse = 0;
+
+#ifndef HAVE_UMEM_H
+	// All this only makes sense if umem isn't in use
+#ifdef HAVE_MALLINFO
+	struct mallinfo info = mallinfo();
+	/* arena: total space allocated from the heap (that is, how much the ?break? point has moved since the start of the process).
+	 * uordblks:number of bytes allocated and in use.
+	 * fordblks:number of bytes allocated but not in use.
+	 * keepcost:size of the area that can be released with a malloc_trim ().
+	 * hblks:number of chunks allocated via mmap ().
+	 * hblkhd:total number of bytes allocated via mmap ().
+	 */
+	inUse = info.uordblks;
+#ifdef DEBUG
+	std::cout << "Memory::getUsage: allocated on the heap " << info.arena << ", mmap'ed " << info.hblkhd
+		<< ", in use " << inUse << ", not in use " << info.fordblks << ", can be trimmed " << info.keepcost << std::endl;
+#endif
+#endif
+#endif
+
+	return inUse;
+}
+
 void Memory::reclaim(void)
 {
 #ifdef HAVE_BOOST_POOL_POOLFWD_HPP
@@ -90,22 +116,9 @@
 #endif
 #endif
 
-#ifndef HAVE_UMEM_H
-	// All this only makes sense if umem isn't in use
-#ifdef HAVE_MALLINFO
-	struct mallinfo info = mallinfo();
-	/* arena: total space allocated from the heap (that is, how much the ?break? point has moved since the start of the process).
-	 * uordblks:number of bytes allocated and in use.
-	 * fordblks:number of bytes allocated but not in use.
-	 * keepcost:size of the area that can be released with a malloc_trim ().
-	 * hblks:number of chunks allocated via mmap ().
-	 * hblkhd:total number of bytes allocated via mmap ().
-	 */
-#ifdef DEBUG
-	std::cout << "Memory::reclaim: allocated on the heap " << info.arena << ", mmap'ed " << info.hblkhd
-		<< ", in use " << info.uordblks << ", not in use " << info.fordblks << ", can be trimmed " << info.keepcost << std::endl;
-#endif
-#endif
+#ifdef HAVE_UMEM_H
+	umem_reap();
+#else
 #ifdef HAVE_MALLOC_TRIM
 	int trimmedMemory = malloc_trim(0);
 #ifdef DEBUG

Modified: trunk/Utils/Memory.h
===================================================================
--- trunk/Utils/Memory.h	2009-03-28 02:36:40 UTC (rev 1599)
+++ trunk/Utils/Memory.h	2009-03-28 02:46:32 UTC (rev 1600)
@@ -420,6 +420,9 @@
 		/// Frees a buffer.
 		static void freeBuffer(char *pBuffer, unsigned int length);
 
+		/// Returns the number of bytes in use.
+		static int getUsage(void);
+
 		/// Hints to the OS it can reclaim unused memory.
 		static void reclaim(void);
 



From fabricecolin at mail.berlios.de  Sat Mar 28 04:50:51 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Sat, 28 Mar 2009 04:50:51 +0100
Subject: [Pinot-svn] r1601 - in trunk: IndexSearch Tokenize
Message-ID: <200903280350.n2S3ooou027927@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-28 04:50:41 +0100 (Sat, 28 Mar 2009)
New Revision: 1601

Modified:
   trunk/IndexSearch/FilterWrapper.cpp
   trunk/Tokenize/TextConverter.cpp
   trunk/Tokenize/TextConverter.h
Log:
Work-around documents that declare an invalid charset, eg iso_8859_1 instead of
iso-8859-1.


Modified: trunk/IndexSearch/FilterWrapper.cpp
===================================================================
--- trunk/IndexSearch/FilterWrapper.cpp	2009-03-28 02:46:32 UTC (rev 1600)
+++ trunk/IndexSearch/FilterWrapper.cpp	2009-03-28 03:50:41 UTC (rev 1601)
@@ -23,7 +23,6 @@
 #include "FilterFactory.h"
 #include "TextFilter.h"
 #include "FilterUtils.h"
-#include "TextConverter.h"
 #include "FilterWrapper.h"
 
 using std::cout;

Modified: trunk/Tokenize/TextConverter.cpp
===================================================================
--- trunk/Tokenize/TextConverter.cpp	2009-03-28 02:46:32 UTC (rev 1600)
+++ trunk/Tokenize/TextConverter.cpp	2009-03-28 03:50:41 UTC (rev 1601)
@@ -42,7 +42,7 @@
 {
 }
 
-string TextConverter::toUTF8(const string &text, const string &charset)
+string TextConverter::toUTF8(const string &text, string &charset)
 {
 	unsigned int textLen = (unsigned int)text.length();
 
@@ -50,7 +50,7 @@
 	return toUTF8(text.c_str(), textLen, charset);
 }
 
-string TextConverter::toUTF8(const char *pText, unsigned int textLen, const string &charset)
+string TextConverter::toUTF8(const char *pText, unsigned int textLen, string &charset)
 {
 	string textCharset(StringManip::toLowerCase(charset));
 	char outputBuffer[8192];
@@ -147,6 +147,19 @@
 		cout << "TextConverter::toUTF8: " << ce.what() << endl;
 #endif
 		outputText.clear();
+
+		string::size_type pos = textCharset.find('_');
+		if (pos != string::npos)
+		{
+			string fixedCharset(StringManip::replaceSubString(textCharset, "_", "-"));
+
+#ifdef DEBUG
+			cout << "TextConverter::toUTF8: trying with charset " << fixedCharset << endl;
+#endif
+
+			textCharset = fixedCharset;
+			outputText = toUTF8(pText, textLen, fixedCharset);
+		}
 	}
 	catch (...)
 	{
@@ -156,6 +169,7 @@
 		outputText.clear();
 	}
 
+	charset = textCharset;
 	return outputText;
 }
 

Modified: trunk/Tokenize/TextConverter.h
===================================================================
--- trunk/Tokenize/TextConverter.h	2009-03-28 02:46:32 UTC (rev 1600)
+++ trunk/Tokenize/TextConverter.h	2009-03-28 03:50:41 UTC (rev 1601)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2008 Fabrice Colin
+ *  Copyright 2008-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -30,10 +30,10 @@
 		virtual ~TextConverter();
 
 		/// Converts to UTF-8.
-		std::string toUTF8(const std::string &text, const std::string &charset);
+		std::string toUTF8(const std::string &text, std::string &charset);
 
 		/// Converts to UTF-8.
-		std::string toUTF8(const char *pText, unsigned int textLen, const std::string &charset);
+		std::string toUTF8(const char *pText, unsigned int textLen, std::string &charset);
 
 		/// Gets the number of conversion errors for the previous toUTF8() call.
 		unsigned int getErrorsCount(void) const;



From fabricecolin at mail.berlios.de  Tue Mar 31 15:00:50 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 31 Mar 2009 15:00:50 +0200
Subject: [Pinot-svn] r1602 - trunk/SQL
Message-ID: <200903311300.n2VD0o0J018827@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-31 15:00:45 +0200 (Tue, 31 Mar 2009)
New Revision: 1602

Modified:
   trunk/SQL/MetaDataBackup.cpp
   trunk/SQL/MetaDataBackup.h
Log:
Changes to accomodate ipath.


Modified: trunk/SQL/MetaDataBackup.cpp
===================================================================
--- trunk/SQL/MetaDataBackup.cpp	2009-03-28 03:50:41 UTC (rev 1601)
+++ trunk/SQL/MetaDataBackup.cpp	2009-03-31 13:00:45 UTC (rev 1602)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -50,16 +50,18 @@
 {
 }
 
-bool MetaDataBackup::setAttribute(const string &url,
+bool MetaDataBackup::setAttribute(const DocumentInfo &docInfo,
 	const string &name, const string &value, bool noXAttr)
 {
+	string url(docInfo.getLocation());
+	string urlWithIPath(docInfo.getLocation(true));
 #ifdef HAVE_ATTR_XATTR_H
 	Url urlObj(url);
 
 	// If the file is local and isn't a nested document, use an extended attribute
 	if ((noXAttr == false) &&
 		(urlObj.isLocal() == true) &&
-		(urlObj.getParameters().empty() == true))
+		(docInfo.getInternalPath().empty() == true))
 	{
 		string fileName(url.substr(urlObj.getProtocol().length() + 3));
 		string attrName("pinot." + name);
@@ -79,7 +81,7 @@
 	// Is there already such an item for this URL ?
 	SQLResults *results = executeStatement("SELECT Url FROM MetaDataBackup \
 		WHERE Url='%q' AND Name='%q';",
-		Url::escapeUrl(url).c_str(), name.c_str());
+		Url::escapeUrl(urlWithIPath).c_str(), name.c_str());
 	if (results != NULL)
 	{
 		SQLRow *row = results->nextRow();
@@ -98,13 +100,13 @@
 	{
 		results = executeStatement("INSERT INTO MetaDataBackup \
 			VALUES('%q', '%q', '%q');",
-			Url::escapeUrl(url).c_str(), name.c_str(), value.c_str());
+			Url::escapeUrl(urlWithIPath).c_str(), name.c_str(), value.c_str());
 	}
 	else
 	{
 		results = executeStatement("UPDATE MetaDataBackup \
 			SET Value='%q' WHERE Url='%q' AND Name='%q';",
-			value.c_str(), Url::escapeUrl(url).c_str(), name.c_str());
+			value.c_str(), Url::escapeUrl(urlWithIPath).c_str(), name.c_str());
 	}
 	if (results != NULL)
 	{
@@ -117,9 +119,11 @@
 
 }
 
-bool MetaDataBackup::getAttribute(const string &url,
+bool MetaDataBackup::getAttribute(const DocumentInfo &docInfo,
 	const string &name, string &value, bool noXAttr)
 {
+	string url(docInfo.getLocation());
+	string urlWithIPath(docInfo.getLocation(true));
 	bool success = false;
 #ifdef HAVE_ATTR_XATTR_H
 	Url urlObj(url);
@@ -127,7 +131,7 @@
 	// If the file is local and isn't a nested document, use an extended attribute
 	if ((noXAttr == false) &&
 		(urlObj.isLocal() == true) &&
-		(urlObj.getParameters().empty() == true))
+		(docInfo.getInternalPath().empty() == true))
 	{
 		string fileName(url.substr(urlObj.getProtocol().length() + 3));
 		string attrName("pinot." + name);
@@ -156,7 +160,7 @@
 
 	SQLResults *results = executeStatement("SELECT Value FROM MetaDataBackup \
 		WHERE Url='%q' AND Name='%q';",
-		Url::escapeUrl(url).c_str(), name.c_str());
+		Url::escapeUrl(urlWithIPath).c_str(), name.c_str());
 	if (results != NULL)
 	{
 		SQLRow *row = results->nextRow();
@@ -174,16 +178,18 @@
 	return success;
 }
 
-bool MetaDataBackup::getAttributes(const string &url,
+bool MetaDataBackup::getAttributes(const DocumentInfo &docInfo,
 	const string &name, set<string> &values)
 {
+	string url(docInfo.getLocation());
+	string urlWithIPath(docInfo.getLocation(true));
 	bool success = false;
 #if 0
 	Url urlObj(url);
 
 	// If the file is local and isn't a nested document, use an extended attribute
 	if ((urlObj.isLocal() == true) &&
-		(urlObj.getParameters().empty() == true))
+		(docInfo.getInternalPath().empty() == true))
 	{
 		string likeName("pinot." + name);
 
@@ -233,7 +239,7 @@
 
 	SQLResults *results = executeStatement("SELECT Value FROM MetaDataBackup \
 		WHERE Url='%q' AND Name LIKE '%q%%';",
-		Url::escapeUrl(url).c_str(), name.c_str());
+		Url::escapeUrl(urlWithIPath).c_str(), name.c_str());
 	if (results != NULL)
 	{
 		while (results->hasMoreRows() == true)
@@ -256,11 +262,12 @@
 	return success;
 }
 
-bool MetaDataBackup::removeAttribute(const string &url,
+bool MetaDataBackup::removeAttribute(const DocumentInfo &docInfo, 
 	const string &name, bool noXAttr, bool likeName)
 {
+	string url(docInfo.getLocation());
+	string urlWithIPath(docInfo.getLocation(true));
 	bool success = false;
-
 #ifdef HAVE_ATTR_XATTR_H
 	Url urlObj(url);
 
@@ -268,7 +275,7 @@
 	if ((noXAttr == false) &&
 		(url.empty() == false) &&
 		(urlObj.isLocal() == true) &&
-		(urlObj.getParameters().empty() == true))
+		(docInfo.getInternalPath().empty() == true))
 	{
 		string fileName(url.substr(urlObj.getProtocol().length() + 3));
 		string attrName("pinot." + name);
@@ -288,19 +295,19 @@
 	// Delete from MetaDataBackup
 	SQLResults *results = NULL;
 
-	if (url.empty() == false)
+	if (urlWithIPath.empty() == false)
 	{
 		if (likeName == false)
 		{
 			results = executeStatement("DELETE FROM MetaDataBackup \
 				WHERE Url='%q' AND NAME='%q';",
-				Url::escapeUrl(url).c_str(), name.c_str());
+				Url::escapeUrl(urlWithIPath).c_str(), name.c_str());
 		}
 		else
 		{
 			results = executeStatement("DELETE FROM MetaDataBackup \
 				WHERE Url='%q' AND NAME LIKE '%q%%';",
-				Url::escapeUrl(url).c_str(), name.c_str());
+				Url::escapeUrl(urlWithIPath).c_str(), name.c_str());
 		}
 	}
 	else
@@ -351,13 +358,12 @@
 /// Adds an item.
 bool MetaDataBackup::addItem(const DocumentInfo &docInfo, DocumentInfo::SerialExtent extent)
 {
-	string url(docInfo.getLocation());
 	bool success = false;
 
 	if ((extent == DocumentInfo::SERIAL_FIELDS) ||
 		(extent == DocumentInfo::SERIAL_ALL))
 	{
-		if (setAttribute(url, "fields",
+		if (setAttribute(docInfo, "fields",
 			docInfo.serialize(DocumentInfo::SERIAL_FIELDS)) == false)
 		{
 			return false;
@@ -380,7 +386,7 @@
 				continue;
 			}
 
-			if (setAttribute(url, string("label.") + *labelIter, *labelIter, true) == false)
+			if (setAttribute(docInfo, string("label.") + *labelIter, *labelIter, true) == false)
 			{
 				success = false;
 			}
@@ -393,13 +399,13 @@
 /// Gets an item.
 bool MetaDataBackup::getItem(DocumentInfo &docInfo, DocumentInfo::SerialExtent extent)
 {
-	string url(docInfo.getLocation()), value;
+	string value;
 	bool success = false;
 
 	if ((extent == DocumentInfo::SERIAL_FIELDS) ||
 		(extent == DocumentInfo::SERIAL_ALL))
 	{
-		if (getAttribute(url, "fields", value) == false)
+		if (getAttribute(docInfo, "fields", value) == false)
 		{
 			return false;
 		}
@@ -414,7 +420,7 @@
 
 		success = true;
 
-		if (getAttributes(url, "label", labels) == false)
+		if (getAttributes(docInfo, "label", labels) == false)
 		{
 			success = false;
 		}
@@ -473,13 +479,12 @@
 bool MetaDataBackup::deleteItem(const DocumentInfo &docInfo, DocumentInfo::SerialExtent extent,
 	const string &value)
 {
-	string url(docInfo.getLocation());
 	bool success = false;
 
 	if ((extent == DocumentInfo::SERIAL_FIELDS) ||
 		(extent == DocumentInfo::SERIAL_ALL))
 	{
-		if (removeAttribute(url, "fields") == false)
+		if (removeAttribute(docInfo, "fields") == false)
 		{
 			return false;
 		}
@@ -491,11 +496,11 @@
 	{
 		if (value.empty() == false)
 		{
-			success = removeAttribute(url, string("label.") + value, true);
+			success = removeAttribute(docInfo, string("label.") + value, true);
 		}
 		else
 		{
-			success = removeAttribute(url, "label.", true, true);
+			success = removeAttribute(docInfo, "label.", true, true);
 		}
 	}
 
@@ -506,7 +511,8 @@
 bool MetaDataBackup::deleteLabel(const string &value)
 {
 	if ((value.empty() == true) ||
-		(removeAttribute("", string("label.") + value, true) == false))
+		(removeAttribute(DocumentInfo("", "", "", ""),
+			string("label.") + value, true) == false))
 	{
 		return false;
 	}

Modified: trunk/SQL/MetaDataBackup.h
===================================================================
--- trunk/SQL/MetaDataBackup.h	2009-03-28 03:50:41 UTC (rev 1601)
+++ trunk/SQL/MetaDataBackup.h	2009-03-31 13:00:45 UTC (rev 1602)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005-2008 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -55,18 +55,18 @@
 		bool deleteLabel(const std::string &value);
 
         protected:
-		bool setAttribute(const std::string &url,
+		bool setAttribute(const DocumentInfo &docInfo,
 			const std::string &name, const std::string &value,
 			bool noXAttr = false);
 
-		bool getAttribute(const std::string &url,
+		bool getAttribute(const DocumentInfo &docInfo,
 			const std::string &name, std::string &value,
 			bool noXAttr = false);
 
-		bool getAttributes(const std::string &url,
+		bool getAttributes(const DocumentInfo &docInfo,
 			const std::string &name, std::set<std::string> &values);
 
-		bool removeAttribute(const std::string &url,
+		bool removeAttribute(const DocumentInfo &docInfo,
 			const std::string &name,
 			bool noXAttr = false, bool likeName = false);
 



From fabricecolin at mail.berlios.de  Tue Mar 31 15:04:36 2009
From: fabricecolin at mail.berlios.de (fabricecolin at mail.berlios.de)
Date: Tue, 31 Mar 2009 15:04:36 +0200
Subject: [Pinot-svn] r1603 - trunk/Collect
Message-ID: <200903311304.n2VD4aYh019325@sheep.berlios.de>

Author: fabricecolin
Date: 2009-03-31 15:04:29 +0200 (Tue, 31 Mar 2009)
New Revision: 1603

Removed:
   trunk/Collect/MboxCollector.cpp
   trunk/Collect/MboxCollector.h
Modified:
   trunk/Collect/DownloaderFactory.cpp
   trunk/Collect/Makefile.am
Log:
Dropped MboxCollector.


Modified: trunk/Collect/DownloaderFactory.cpp
===================================================================
--- trunk/Collect/DownloaderFactory.cpp	2009-03-31 13:00:45 UTC (rev 1602)
+++ trunk/Collect/DownloaderFactory.cpp	2009-03-31 13:04:29 UTC (rev 1603)
@@ -1,5 +1,5 @@
 /*
- *  Copyright 2005,2006 Fabrice Colin
+ *  Copyright 2005-2009 Fabrice Colin
  *
  *  This program is free software; you can redistribute it and/or modify
  *  it under the terms of the GNU General Public License as published by
@@ -24,7 +24,6 @@
 #endif
 #endif
 #include "FileCollector.h"
-#include "MboxCollector.h"
 #include "DownloaderFactory.h"
 
 using std::string;
@@ -58,10 +57,6 @@
 	{
 		pDownloader = new FileCollector();
 	}
-	else if (protocol == "mailbox")
-	{
-		pDownloader = new MboxCollector();
-	}
 
 	return pDownloader;
 }

Modified: trunk/Collect/Makefile.am
===================================================================
--- trunk/Collect/Makefile.am	2009-03-31 13:00:45 UTC (rev 1602)
+++ trunk/Collect/Makefile.am	2009-03-31 13:04:29 UTC (rev 1603)
@@ -5,7 +5,6 @@
 	DownloaderFactory.h \
 	DownloaderInterface.h \
 	FileCollector.h \
-	MboxCollector.h \
 	NeonDownloader.h
 
 noinst_LTLIBRARIES = libCollect.la
@@ -14,8 +13,7 @@
 	@HTTP_DOWNLOADER at .cpp \
 	DownloaderFactory.cpp \
 	DownloaderInterface.cpp \
-	FileCollector.cpp \
-	MboxCollector.cpp
+	FileCollector.cpp
 
 libCollect_la_CXXFLAGS = \
 	@MISC_CFLAGS@ \

Deleted: trunk/Collect/MboxCollector.cpp
===================================================================
--- trunk/Collect/MboxCollector.cpp	2009-03-31 13:00:45 UTC (rev 1602)
+++ trunk/Collect/MboxCollector.cpp	2009-03-31 13:04:29 UTC (rev 1603)
@@ -1,100 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#include <iostream>
-#include <algorithm>
-
-#include "StringManip.h"
-#include "Url.h"
-#include "FilterFactory.h"
-#include "FilterUtils.h"
-#include "MboxCollector.h"
-
-using namespace std;
-
-MboxCollector::MboxCollector() :
-	DownloaderInterface()
-{
-}
-
-MboxCollector::~MboxCollector()
-{
-}
-
-//
-// Implementation of DownloaderInterface
-//
-
-/// Retrieves the specified document; NULL if error.
-Document *MboxCollector::retrieveUrl(const DocumentInfo &docInfo)
-{
-	string location(docInfo.getLocation());
-	Url thisUrl(location);
-	string protocol(thisUrl.getProtocol());
-	string parameters(thisUrl.getParameters());
-
-	if (protocol != "mailbox")
-	{
-		// We can't handle that type of protocol...
-		return NULL;
-	}
-
-	// Is there an offset and part number ?
-	if ((parameters.find("o=") == string::npos) ||
-		(parameters.find("p=") == string::npos))
-	{
-		return NULL;
-	}
-
-	// Get the mbox filter
-	Dijon::Filter *pFilter = Dijon::FilterFactory::getFilter("application/mbox");
-	if (pFilter == NULL)
-	{
-		return NULL;
-	}
-
-	Document *pMessage = new Document(docInfo);
-
-	location.replace(0, 7, "file");
-	string::size_type paramPos = location.find_last_of("?");
-	if (paramPos != string::npos)
-	{
-		location.resize(paramPos);
-	}
-
-	pMessage->setLocation(location);
-	if (FilterUtils::feedFilter(*pMessage, pFilter) == false)
-	{
-		delete pFilter;
-		return NULL;
-	}
-
-	// We want to get extra content like headers
-	pFilter->set_property(Dijon::Filter::OPERATING_MODE, "view");
-
-	// The first document should be the message we are interested in
-	if ((pFilter->skip_to_document(parameters) == true) &&
-		(pFilter->has_documents() == true))
-	{
-		FilterUtils::populateDocument(*pMessage, pFilter);
-	}
-
-	delete pFilter;
-
-	return pMessage;
-}

Deleted: trunk/Collect/MboxCollector.h
===================================================================
--- trunk/Collect/MboxCollector.h	2009-03-31 13:00:45 UTC (rev 1602)
+++ trunk/Collect/MboxCollector.h	2009-03-31 13:04:29 UTC (rev 1603)
@@ -1,42 +0,0 @@
-/*
- *  Copyright 2005,2006 Fabrice Colin
- *
- *  This program is free software; you can redistribute it and/or modify
- *  it under the terms of the GNU General Public License as published by
- *  the Free Software Foundation; either version 2 of the License, or
- *  (at your option) any later version.
- *
- *  This program is distributed in the hope that it will be useful,
- *  but WITHOUT ANY WARRANTY; without even the implied warranty of
- *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
- *  GNU General Public License for more details.
- *
- *  You should have received a copy of the GNU General Public License
- *  along with this program; if not, write to the Free Software
- *  Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
- */
-
-#ifndef _MBOX_COLLECTOR_H
-#define _MBOX_COLLECTOR_H
-
-#include <string>
-
-#include "DownloaderInterface.h"
-
-/// Pseudo-downloader for messages in mbox files.
-class MboxCollector : public DownloaderInterface
-{
-	public:
-		MboxCollector();
-		virtual ~MboxCollector();
-
-		/// Retrieves the specified document; NULL if error. Caller deletes.
-		virtual Document *retrieveUrl(const DocumentInfo &docInfo);
-
-	private:
-		MboxCollector(const MboxCollector &other);
-		MboxCollector &operator=(const MboxCollector &other);
-
-};
-
-#endif // _MBOX_COLLECTOR_H



