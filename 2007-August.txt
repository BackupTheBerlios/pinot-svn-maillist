From fabricecolin at mail.berlios.de  Wed Aug  1 15:51:03 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 1 Aug 2007 15:51:03 +0200
Subject: [Pinot-svn] r896 - in trunk: Index UI/GTK2/src
Message-ID: <200708011351.l71Dp3HU018639@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-01 15:51:01 +0200 (Wed, 01 Aug 2007)
New Revision: 896

Modified:
   trunk/Index/DBusXapianIndex.cpp
   trunk/Index/DBusXapianIndex.h
   trunk/UI/GTK2/src/DaemonState.cpp
   trunk/UI/GTK2/src/DaemonState.h
   trunk/UI/GTK2/src/PinotSettings.cpp
   trunk/UI/GTK2/src/ServerThreads.cpp
   trunk/UI/GTK2/src/WorkerThreads.cpp
   trunk/UI/GTK2/src/WorkerThreads.h
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   trunk/UI/GTK2/src/pinot-dbus-daemon.xml
Log:
New D-Bus method Reload asks the daemon to reload its configuration and restart
crawling and monitoring. The UI now uses this method instead of GetStatistics
when the Preferences box' OK button is pressed.


Modified: trunk/Index/DBusXapianIndex.cpp
===================================================================
--- trunk/Index/DBusXapianIndex.cpp	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/Index/DBusXapianIndex.cpp	2007-08-01 13:51:01 UTC (rev 896)
@@ -299,10 +299,10 @@
 	return true;
 }
 
-/// Asks the D-Bus service for statistics.
-bool DBusXapianIndex::getStatistics(unsigned int &crawledCount, unsigned int &docsCount)
+/// Asks the D-Bus service to reload its configuration.
+bool DBusXapianIndex::reload(void)
 {
-	bool gotStats = false;
+	bool reloading = false;
 
 	DBusGConnection *pBus = getBusConnection();
 	if (pBus == NULL)
@@ -313,24 +313,19 @@
 	DBusGProxy *pBusProxy = getBusProxy(pBus);
 	if (pBusProxy == NULL)
 	{
-		cerr << "DBusXapianIndex::getStatistics: couldn't get bus proxy" << endl;
+		cerr << "DBusXapianIndex::reload: couldn't get bus proxy" << endl;
 		return false;
 	}
 
 	GError *pError = NULL;
-	if (dbus_g_proxy_call(pBusProxy, "GetStatistics", &pError,
+	if (dbus_g_proxy_call(pBusProxy, "Reload", &pError,
 		G_TYPE_INVALID,
-		G_TYPE_UINT, &crawledCount,
-		G_TYPE_UINT, &docsCount,
-		G_TYPE_INVALID) == TRUE)
+		G_TYPE_BOOLEAN, &reloading,
+		G_TYPE_INVALID) == FALSE)
 	{
-		gotStats = true;
-	}
-	else
-	{
 		if (pError != NULL)
 		{
-			cerr << "DBusXapianIndex::getStatistics: " << pError->message << endl;
+			cerr << "DBusXapianIndex::reload: " << pError->message << endl;
 			g_error_free(pError);
 		}
 	}
@@ -338,7 +333,7 @@
 	g_object_unref(pBusProxy);
 	// FIXME: don't we have to call dbus_g_connection_unref(pBus); ?
 
-	return gotStats;
+	return reloading;
 }
 
 

Modified: trunk/Index/DBusXapianIndex.h
===================================================================
--- trunk/Index/DBusXapianIndex.h	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/Index/DBusXapianIndex.h	2007-08-01 13:51:01 UTC (rev 896)
@@ -49,8 +49,8 @@
 		static bool documentInfoToDBus(DBusMessageIter *iter, unsigned int docId,
 			const DocumentInfo &docInfo);
 
-		/// Asks the D-Bus service for statistics.
-		static bool getStatistics(unsigned int &crawledCount, unsigned int &docsCount);
+		/// Asks the D-Bus service to reload its configuration.
+		static bool reload(void);
 
 		/// Sets the version number.
 		virtual bool setVersion(double version) const;

Modified: trunk/UI/GTK2/src/DaemonState.cpp
===================================================================
--- trunk/UI/GTK2/src/DaemonState.cpp	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/DaemonState.cpp	2007-08-01 13:51:01 UTC (rev 896)
@@ -27,6 +27,7 @@
 #include <glibmm/thread.h>
 #include <glibmm/random.h>
 
+#include "config.h"
 #include "Url.h"
 #include "MonitorFactory.h"
 #include "XapianIndex.h"
@@ -42,6 +43,7 @@
 DaemonState::DaemonState() :
 	ThreadsManager(PinotSettings::getInstance().m_daemonIndexLocation, 20),
 	m_fullScan(false),
+	m_reload(false),
 	m_pDiskMonitor(MonitorFactory::getMonitor()),
 	m_pDiskHandler(NULL)
 {
@@ -118,7 +120,10 @@
 	}
 
 	// Fire up the disk monitor thread
-	m_pDiskHandler = new OnDiskHandler();
+	if (m_pDiskHandler == NULL)
+	{
+		m_pDiskHandler = new OnDiskHandler();
+	}
 	MonitorThread *pDiskMonitorThread = new MonitorThread(m_pDiskMonitor, m_pDiskHandler);
 	pDiskMonitorThread->getDirectoryFoundSignal().connect(SigC::slot(*this, &DaemonState::on_message_filefound));
 	start_thread(pDiskMonitorThread, true);
@@ -131,6 +136,12 @@
 	}
 }
 
+void DaemonState::reload(void)
+{
+	// Reload whenever possible
+	m_reload = true;
+}
+
 void DaemonState::on_thread_end(WorkerThread *pThread)
 {
 	string indexedUrl;
@@ -225,6 +236,34 @@
 	// Delete the thread
 	delete pThread;
 
+	// Are we supposed to reload the configuration ?
+	// Wait until there are no threads running (except background ones)
+	if ((m_reload == true) &&
+		(get_threads_count() == 0))
+	{
+#ifdef DEBUG
+		cout << "DaemonState::on_thread_end: stopping all threads" << endl;
+#endif
+		// Stop background threads
+		stop_threads();
+		// ...clear the queues
+		clear_queues();
+
+		// Reload
+		PinotSettings &settings = PinotSettings::getInstance();
+		settings.clear();
+		settings.loadGlobal(string(SYSCONFDIR) + "/pinot/globalconfig.xml");
+		settings.load();
+
+		// ...and restart everything 
+		start(false);
+#ifdef DEBUG
+		cout << "DaemonState::on_thread_end: reloaded" << endl;
+#endif
+
+		m_reload = false;
+	}
+
 	// We might be able to run a queued action
 	pop_queue(indexedUrl);
 }

Modified: trunk/UI/GTK2/src/DaemonState.h
===================================================================
--- trunk/UI/GTK2/src/DaemonState.h	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/DaemonState.h	2007-08-01 13:51:01 UTC (rev 896)
@@ -35,7 +35,7 @@
 
 		void start(bool forceFullScan);
 
-		void signal_scanner(void);
+		void reload(void);
 
 		void on_thread_end(WorkerThread *pThread);
 
@@ -46,6 +46,7 @@
 
 	protected:
 		bool m_fullScan;
+		bool m_reload;
 		MonitorInterface *m_pDiskMonitor;
 		MonitorHandler *m_pDiskHandler;
 		std::string m_locationBeingCrawled;

Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2007-08-01 13:51:01 UTC (rev 896)
@@ -246,16 +246,38 @@
 
 void PinotSettings::clear(void)
 {
-	// Clear lists
+	m_version.clear();
+	m_googleAPIKey.clear();
+	m_xPos = 0;
+	m_yPos = 0;
+	m_width = 0;
+	m_height = 0;
+	m_panePos = -1;
+	m_showEngines = false;
+	m_expandQueries = false;
+	m_ignoreRobotsDirectives = false;
+	m_suggestQueryTerms = true;
+	m_newResultsColourRed = 65535;
+	m_newResultsColourGreen = 0;
+	m_newResultsColourBlue = 0;
+	m_proxyAddress.clear();
+	m_proxyPort = 8080;
+	m_proxyType.clear();
+	m_proxyEnabled = false;
+	m_indexableLocations.clear();
+	m_filePatternsList.clear();
+	m_isBlackList = false;
+	m_cacheProviders.clear();
+	m_cacheProtocols.clear();
+
+	m_firstRun = false;
 	m_indexNames.clear();
 	m_indexIds.clear();
 	m_engines.clear();
 	m_engineIds.clear();
+	m_engineChannels.clear();
 	m_queries.clear();
 	m_labels.clear();
-	m_indexableLocations.clear();
-	m_filePatternsList.clear();
-	m_cacheProviders.clear();
 }
 
 bool PinotSettings::loadGlobal(const string &fileName)

Modified: trunk/UI/GTK2/src/ServerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/ServerThreads.cpp	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/ServerThreads.cpp	2007-08-01 13:51:01 UTC (rev 896)
@@ -1212,6 +1212,28 @@
 			}
 		}
 	}
+	else if (dbus_message_is_method_call(m_pRequest, "de.berlios.Pinot", "Reload") == TRUE)
+	{
+		if (dbus_message_get_args(m_pRequest, &error,
+			DBUS_TYPE_INVALID) == TRUE)
+		{
+			gboolean reloaded = TRUE;
+
+#ifdef DEBUG
+			cout << "DBusServletThread::doWork: received Reload" << endl;
+#endif
+			m_pServer->reload();
+
+			// Prepare the reply
+			m_pReply = newDBusReply(m_pRequest);
+			if (m_pReply != NULL)
+			{
+				dbus_message_append_args(m_pReply,
+					DBUS_TYPE_INT32, &reloaded,
+					DBUS_TYPE_INVALID);
+			}
+		}
+	}
 	else if (dbus_message_is_method_call(m_pRequest, "de.berlios.Pinot", "Stop") == TRUE)
 	{
 		if (dbus_message_get_args(m_pRequest, &error,

Modified: trunk/UI/GTK2/src/WorkerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.cpp	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-01 13:51:01 UTC (rev 896)
@@ -280,6 +280,10 @@
 
 	if (pWorkerThread->isBackground() == true)
 	{
+#ifdef DEBUG
+		cout << "ThreadsManager::get_thread: thread " << pWorkerThread->getId()
+			<< " was running in the background" << endl;
+#endif
 		--m_backgroundThreadsCount;
 	}
 
@@ -340,6 +344,22 @@
 	return "";
 }
 
+void ThreadsManager::clear_queues(void)
+{
+	if (write_lock_lists() == true)
+	{
+		m_beingIndexed.clear();
+
+		unlock_lists();
+
+		ActionQueue actionQueue(PinotSettings::getInstance().getHistoryDatabaseName(), get_application_name());
+
+		actionQueue.expireItems(time(NULL));
+
+		m_backgroundThreadsCount = 0;
+	}
+}
+
 bool ThreadsManager::start_thread(WorkerThread *pWorkerThread, bool inBackground)
 {
 	if (pWorkerThread == NULL)
@@ -350,6 +370,10 @@
 	pWorkerThread->setId(m_nextThreadId);
 	if (inBackground == true)
 	{
+#ifdef DEBUG
+		cout << "ThreadsManager::start_thread: thread " << pWorkerThread->getId()
+			<< " will run in the background" << endl;
+#endif
 		pWorkerThread->inBackground();
 		++m_backgroundThreadsCount;
 	}
@@ -492,9 +516,9 @@
 
 	if (addToQueue == true)
 	{
-		ActionQueue queue(PinotSettings::getInstance().getHistoryDatabaseName(), get_application_name());
+		ActionQueue actionQueue(PinotSettings::getInstance().getHistoryDatabaseName(), get_application_name());
 
-		queue.pushItem(ActionQueue::INDEX, docInfo);
+		actionQueue.pushItem(ActionQueue::INDEX, docInfo);
 
 		return "";
 	}
@@ -535,12 +559,12 @@
 		// Get an item ?
 		if (getItem == true)
 		{
-			ActionQueue queue(PinotSettings::getInstance().getHistoryDatabaseName(), get_application_name());
+			ActionQueue actionQueue(PinotSettings::getInstance().getHistoryDatabaseName(), get_application_name());
 			ActionQueue::ActionType type;
 			DocumentInfo docInfo;
 			string previousLocation;
 
-			while (queue.popItem(type, docInfo) == true)
+			while (actionQueue.popItem(type, docInfo) == true)
 			{
 				ustring status;
 
@@ -1748,18 +1772,11 @@
 
 void StartDaemonThread::doWork(void)
 {
-	unsigned int crawledCount = 0, docsCount = 0;
-
 	if (m_done == false)
         {
-		// ... and let D-Bus activate the service if necessary
-		// If it was already running, changes will take effect when it's restarted
-		DBusXapianIndex::getStatistics(crawledCount, docsCount);
-
-#ifdef DEBUG
-		cout << "StartDaemonThread::doWork: crawled " << crawledCount
-			<< ", indexed " << docsCount << endl;
-#endif
+		// Ask the daemon to reload its configuration
+		// Let D-Bus activate the service if necessary
+		DBusXapianIndex::reload();
 	}
 }
 

Modified: trunk/UI/GTK2/src/WorkerThreads.h
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.h	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/WorkerThreads.h	2007-08-01 13:51:01 UTC (rev 896)
@@ -136,11 +136,17 @@
 		std::set<std::string> m_beingIndexed;
 
 		bool read_lock_threads(void);
+
 		bool write_lock_threads(void);
+
 		void unlock_threads(void);
+
 		WorkerThread *get_thread(void);
+
 		Glib::ustring index_document(const DocumentInfo &docInfo);
 
+		void clear_queues(void);
+
 	private:
 		ThreadsManager(const ThreadsManager &other);
 		ThreadsManager &operator=(const ThreadsManager &other);

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-01 13:51:01 UTC (rev 896)
@@ -190,7 +190,7 @@
 				cout << "pinot-dbus-daemon - D-Bus search and index daemon\n\n"
 					<< "Usage: pinot-dbus-daemon [OPTIONS]\n\n"
 					<< "Options:\n"
-					<< "  -f, --fullscan		force a full scan\n"
+					<< "  -f, --fullscan	force a full scan\n"
 					<< "  -h, --help		display this help and exit\n"
 					<< "  -p, --priority	set the daemon's priority (default 15)\n"
 					<< "  -v, --version		output version information and exit\n"

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.xml
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.xml	2007-07-28 03:30:36 UTC (rev 895)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.xml	2007-08-01 13:51:01 UTC (rev 896)
@@ -45,6 +45,14 @@
       <arg type="as" name="labels" direction="out"/>
     </method>
     <!--
+	Instructs the daemon program to reload the configuration file.
+	 loadStatus: TRUE if the configuration is being reloaded
+	-->
+    <method name="Reload">
+      <annotation name="de.berlios.Pinot.Reload" value="pinotDBus"/>
+      <arg type="b" name="reloaded" direction="out" />
+    </method>
+    <!--
 	Sets a document's labels.
 	 docId: the document's ID
 	 labels: array of labels to apply to the document



From fabricecolin at mail.berlios.de  Wed Aug  1 15:55:07 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 1 Aug 2007 15:55:07 +0200
Subject: [Pinot-svn] r897 - trunk/Index
Message-ID: <200708011355.l71Dt7av019493@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-01 15:55:07 +0200 (Wed, 01 Aug 2007)
New Revision: 897

Modified:
   trunk/Index/XapianIndex.cpp
Log:
Prefix wasn't applied correctly in listDocumentsInDirectory().


Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-01 13:51:01 UTC (rev 896)
+++ trunk/Index/XapianIndex.cpp	2007-08-01 13:55:07 UTC (rev 897)
@@ -1120,7 +1120,7 @@
 {
 	string term(Url::escapeUrl(dirName));
 
-	return listDocumentsWithTerm(string("XDIR") + XapianDatabase::limitTermLength(term, true),
+	return listDocumentsWithTerm(string("XDIR:") + XapianDatabase::limitTermLength(term, true),
 		docIds, maxDocsCount, startDoc);
 }
 



From fabricecolin at mail.berlios.de  Fri Aug  3 16:51:10 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 3 Aug 2007 16:51:10 +0200
Subject: [Pinot-svn] r898 - in trunk/UI/GTK2: . src
Message-ID: <200708031451.l73EpAl5000236@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-03 16:51:09 +0200 (Fri, 03 Aug 2007)
New Revision: 898

Modified:
   trunk/UI/GTK2/metase-gtk2.glade
   trunk/UI/GTK2/src/prefsDialog_glade.cc
   trunk/UI/GTK2/src/queryDialog_glade.cc
Log:
Combos shouldn't expand when the window they are in is enlarged.


Modified: trunk/UI/GTK2/metase-gtk2.glade
===================================================================
--- trunk/UI/GTK2/metase-gtk2.glade	2007-08-01 13:55:07 UTC (rev 897)
+++ trunk/UI/GTK2/metase-gtk2.glade	2007-08-03 14:51:09 UTC (rev 898)
@@ -2072,7 +2072,7 @@
 			</widget>
 			<packing>
 			  <property name="padding">4</property>
-			  <property name="expand">True</property>
+			  <property name="expand">False</property>
 			  <property name="fill">True</property>
 			</packing>
 		      </child>
@@ -2433,14 +2433,14 @@
 		</widget>
 		<packing>
 		  <property name="padding">4</property>
-		  <property name="expand">False</property>
+		  <property name="expand">True</property>
 		  <property name="fill">True</property>
 		</packing>
 	      </child>
 	    </widget>
 	    <packing>
 	      <property name="padding">0</property>
-	      <property name="expand">True</property>
+	      <property name="expand">False</property>
 	      <property name="fill">True</property>
 	    </packing>
 	  </child>

Modified: trunk/UI/GTK2/src/prefsDialog_glade.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog_glade.cc	2007-08-01 13:55:07 UTC (rev 897)
+++ trunk/UI/GTK2/src/prefsDialog_glade.cc	2007-08-03 14:51:09 UTC (rev 898)
@@ -1,9 +1,9 @@
-// generated 2007/7/10 19:55:24 SGT by fabrice at amra.dyndns.org.(none)
+// generated 2007/8/3 22:14:45 SGT by fabrice at amra.dyndns.org.(none)
 // using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
 // glade-- /home/fabrice/Projects/MetaSE/pinot/UI/GTK2/metase-gtk2.glade
-// for gtk 2.10.13 and gtkmm 2.10.9
+// for gtk 2.10.14 and gtkmm 2.10.9
 //
 // Please modify the corresponding derived classes in ./src/prefsDialog.cc
 
@@ -445,7 +445,7 @@
    patternsScrolledwindow->property_window_placement().set_value(Gtk::CORNER_TOP_LEFT);
    patternsScrolledwindow->add(*patternsTreeview);
    patternsVbox->pack_start(*patternsScrolledwindow);
-   patternsVbox->pack_start(*patternsCombobox, Gtk::PACK_EXPAND_WIDGET, 4);
+   patternsVbox->pack_start(*patternsCombobox, Gtk::PACK_SHRINK, 4);
    image624->set_alignment(0.5,0.5);
    image624->set_padding(0,0);
    label60->set_alignment(0.5,0.5);

Modified: trunk/UI/GTK2/src/queryDialog_glade.cc
===================================================================
--- trunk/UI/GTK2/src/queryDialog_glade.cc	2007-08-01 13:55:07 UTC (rev 897)
+++ trunk/UI/GTK2/src/queryDialog_glade.cc	2007-08-03 14:51:09 UTC (rev 898)
@@ -1,9 +1,9 @@
-// generated 2007/1/11 21:02:42 SGT by fabrice at amra.dyndns.org.(none)
+// generated 2007/8/3 22:14:46 SGT by fabrice at amra.dyndns.org.(none)
 // using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
 // glade-- /home/fabrice/Projects/MetaSE/pinot/UI/GTK2/metase-gtk2.glade
-// for gtk 2.10.4 and gtkmm 2.10.5
+// for gtk 2.10.14 and gtkmm 2.10.9
 //
 // Please modify the corresponding derived classes in ./src/queryDialog.cc
 
@@ -126,7 +126,7 @@
    addFilterButton->set_relief(Gtk::RELIEF_NORMAL);
    queryHbox->pack_start(*filterLabel, Gtk::PACK_SHRINK, 0);
    queryHbox->pack_start(*filterCombobox, Gtk::PACK_EXPAND_WIDGET, 4);
-   queryHbox->pack_start(*addFilterButton, Gtk::PACK_SHRINK, 4);
+   queryHbox->pack_start(*addFilterButton, Gtk::PACK_EXPAND_WIDGET, 4);
    queryTextview->set_flags(Gtk::CAN_FOCUS);
    queryTextview->set_editable(true);
    queryTextview->set_cursor_visible(true);
@@ -192,7 +192,7 @@
    actionsTable->attach(*fromButton, 1, 2, 1, 2, Gtk::FILL, Gtk::FILL, 4, 4);
    actionsTable->attach(*toButton, 1, 2, 2, 3, Gtk::FILL, Gtk::FILL, 4, 4);
    queryVbox->pack_start(*nameTable, Gtk::PACK_SHRINK, 0);
-   queryVbox->pack_start(*queryHbox);
+   queryVbox->pack_start(*queryHbox, Gtk::PACK_SHRINK, 0);
    queryVbox->pack_start(*queryFrame, Gtk::PACK_EXPAND_WIDGET, 4);
    queryVbox->pack_start(*actionsTable);
    queryDialog->get_vbox()->set_homogeneous(false);



From fabricecolin at mail.berlios.de  Fri Aug  3 16:52:01 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 3 Aug 2007 16:52:01 +0200
Subject: [Pinot-svn] r899 - trunk/Search
Message-ID: <200708031452.l73Eq1VV000425@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-03 16:52:01 +0200 (Fri, 03 Aug 2007)
New Revision: 899

Modified:
   trunk/Search/XapianEngine.cpp
Log:
Fixed bug that prevented from running queries that only define a min and/or
max date, and no query string.


Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-08-03 14:51:09 UTC (rev 898)
+++ trunk/Search/XapianEngine.cpp	2007-08-03 14:52:01 UTC (rev 899)
@@ -380,12 +380,18 @@
 	double diffTime = difftime(endTime, startTime);
 	if (diffTime > 0)
 	{
+		Xapian::Query dateQuery = dateFilter(minDay, minMonth, minYear, maxDay, maxMonth, maxYear);
+
 #ifdef DEBUG
 		cout << "XapianEngine::parseQuery: applied date range ("
 			<< yyyymmddMax << " <= " << yyyymmddMin << ")" << endl;
 #endif
-		return Xapian::Query(Xapian::Query::OP_FILTER, parsedQuery,
-			dateFilter(minDay, minMonth, minYear, maxDay, maxMonth, maxYear));
+		if (parsedQuery.empty() == false)
+		{
+			return Xapian::Query(Xapian::Query::OP_FILTER, parsedQuery, dateQuery);
+		}
+
+		return dateQuery;
 	}
 #ifdef DEBUG
 	else cout << "XapianEngine::parseQuery: date range is zero or bogus ("



From fabricecolin at mail.berlios.de  Fri Aug  3 19:53:16 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 3 Aug 2007 19:53:16 +0200
Subject: [Pinot-svn] r901 - trunk/Collect
Message-ID: <200708031753.l73HrGN1030012@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-03 19:53:16 +0200 (Fri, 03 Aug 2007)
New Revision: 901

Modified:
   trunk/Collect/NeonDownloader.cpp
Log:
Neon downloader had not been updated after the move to Dijon filters.


Modified: trunk/Collect/NeonDownloader.cpp
===================================================================
--- trunk/Collect/NeonDownloader.cpp	2007-08-03 17:34:12 UTC (rev 900)
+++ trunk/Collect/NeonDownloader.cpp	2007-08-03 17:53:16 UTC (rev 901)
@@ -26,8 +26,9 @@
 #include <neon/ne_session.h>
 #include <neon/ne_request.h>
 
-#include "HtmlTokenizer.h"
 #include "Url.h"
+#include "HtmlFilter.h"
+#include "FilterUtils.h"
 #include "NeonDownloader.h"
 
 using namespace std;
@@ -69,26 +70,32 @@
 	}
 
 	Document doc;
+	Dijon::HtmlFilter htmlFilter("text/html");
+	set<Dijon::Link> linksSet;
+
 	doc.setData(pBody, length);
-	HtmlTokenizer tokens(&doc, false);
 
 	// Extract the link from the 3xx message
-	set<Link> linksSet = tokens.getLinks();
-	// There should be one and only one
-	if (linksSet.size() != 1)
+	if ((FilterUtils::feedFilter(doc, &htmlFilter) == true) &&
+		(htmlFilter.get_links(linksSet) == true))
 	{
+		// There should be one and only one
+		if (linksSet.size() > 1)
+		{
 #ifdef DEBUG
-		cout << "NeonDownloader::handleRedirection: " << linksSet.size() << " links found in " << length << " bytes" << endl;
-		cout << "NeonDownloader::handleRedirection: redirection message was " << pBody << endl;
+			cout << "NeonDownloader::handleRedirection: " << linksSet.size() << " links found in " << length << " bytes" << endl;
+			cout << "NeonDownloader::handleRedirection: redirection message was " << pBody << endl;
 #endif
-		return "";
+			return "";
+		}
+
+		set<Dijon::Link>::const_iterator iter = linksSet.begin();
+		if (iter != linksSet.end())
+		{
+			// Update the URL
+			return iter->m_url;
+		}
 	}
-	set<Link>::const_iterator iter = linksSet.begin();
-	if (iter != linksSet.end())
-	{
-		// Update the URL
-		return iter->m_url;
-	}
 
 	return "";
 }



From fabricecolin at mail.berlios.de  Fri Aug  3 19:34:20 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 3 Aug 2007 19:34:20 +0200
Subject: [Pinot-svn] r900 - in trunk/Search: . Google
Message-ID: <200708031734.l73HYKDK028231@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-03 19:34:12 +0200 (Fri, 03 Aug 2007)
New Revision: 900

Modified:
   trunk/Search/Google/GAPIC.cpp
   trunk/Search/Google/GAPIClient.cpp
   trunk/Search/Google/GAPIClientLib.cpp
   trunk/Search/Google/GAPIGoogleSearchBindingProxy.h
   trunk/Search/Google/GAPIH.h
   trunk/Search/Google/GAPIStub.h
   trunk/Search/Google/GoogleSearch.h
   trunk/Search/SOAPEnvH.h
   trunk/Search/SOAPEnvStub.h
   trunk/Search/pinot-search.cpp
Log:
Regenerated these files with gSOAP 2.7.9e and fixed GAPIC.cpp manually as in
revision 189.


Modified: trunk/Search/Google/GAPIC.cpp
===================================================================
--- trunk/Search/Google/GAPIC.cpp	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GAPIC.cpp	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,13 +1,13 @@
 /* GAPIC.cpp
-   Generated by gSOAP 2.7.8c from GoogleSearch.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from GoogleSearch.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
 
 #include "GAPIH.h"
 
-SOAP_SOURCE_STAMP("@(#) GAPIC.cpp ver 2.7.8c 2006-11-22 12:30:01 GMT")
+SOAP_SOURCE_STAMP("@(#) GAPIC.cpp ver 2.7.9e 2007-07-29 10:34:02 GMT")
 
 
 #ifndef WITH_NOGLOBAL
@@ -39,21 +39,22 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_fault(struct soap *soap)
 {
 	if (!soap->fault)
-	{	soap->fault = (struct SOAP_ENV__Fault*)soap_malloc(soap, sizeof(struct SOAP_ENV__Fault));
+	{	soap->fault = soap_new_SOAP_ENV__Fault(soap, -1);
 		soap_default_SOAP_ENV__Fault(soap, soap->fault);
 	}
 	if (soap->version == 2 && !soap->fault->SOAP_ENV__Code)
-	{	soap->fault->SOAP_ENV__Code = (struct SOAP_ENV__Code*)soap_malloc(soap, sizeof(struct SOAP_ENV__Code));
+	{	soap->fault->SOAP_ENV__Code = soap_new_SOAP_ENV__Code(soap, -1);
 		soap_default_SOAP_ENV__Code(soap, soap->fault->SOAP_ENV__Code);
 	}
 	if (soap->version == 2 && !soap->fault->SOAP_ENV__Reason)
-	{	soap->fault->SOAP_ENV__Reason = (struct SOAP_ENV__Reason*)soap_malloc(soap, sizeof(struct SOAP_ENV__Reason));
+	{	soap->fault->SOAP_ENV__Reason = soap_new_SOAP_ENV__Reason(soap, -1);
 		soap_default_SOAP_ENV__Reason(soap, soap->fault->SOAP_ENV__Reason);
 	}
 }
 
 SOAP_FMAC3 void SOAP_FMAC4 soap_serializefault(struct soap *soap)
 {
+	soap_fault(soap);
 	if (soap->fault)
 		soap_serialize_SOAP_ENV__Fault(soap, soap->fault);
 }
@@ -83,7 +84,7 @@
 	soap_fault(soap);
 	if (soap->version == 2)
 	{	if (!soap->fault->SOAP_ENV__Code->SOAP_ENV__Subcode)
-		{	soap->fault->SOAP_ENV__Code->SOAP_ENV__Subcode = (struct SOAP_ENV__Code*)soap_malloc(soap, sizeof(struct SOAP_ENV__Code));
+		{	soap->fault->SOAP_ENV__Code->SOAP_ENV__Subcode = soap_new_SOAP_ENV__Code(soap, -1);
 			soap_default_SOAP_ENV__Code(soap, soap->fault->SOAP_ENV__Code->SOAP_ENV__Subcode);
 		}
 		return (const char**)&soap->fault->SOAP_ENV__Code->SOAP_ENV__Subcode->SOAP_ENV__Value;
@@ -110,7 +111,7 @@
 		return (const char**)&soap->fault->detail->__any;
 	}
 	if (!soap->fault->SOAP_ENV__Detail)
-	{	soap->fault->SOAP_ENV__Detail = (struct SOAP_ENV__Detail*)soap_malloc(soap, sizeof(struct SOAP_ENV__Detail));
+	{	soap->fault->SOAP_ENV__Detail = soap_new_SOAP_ENV__Detail(soap, -1);
 		soap_default_SOAP_ENV__Detail(soap, soap->fault->SOAP_ENV__Detail);
 	}
 	return (const char**)&soap->fault->SOAP_ENV__Detail->__any;
@@ -133,6 +134,10 @@
 #endif
 
 #ifndef WITH_NOIDREF
+
+#ifdef __cplusplus
+extern "C" {
+#endif
 SOAP_FMAC3 void * SOAP_FMAC4 soap_getelement(struct soap *soap, int *type)
 {
 	if (soap_peek_element(soap))
@@ -153,6 +158,8 @@
 		return soap_in_unsignedInt(soap, NULL, NULL, "xsd:unsignedInt");
 	case SOAP_TYPE_bool:
 		return soap_in_bool(soap, NULL, NULL, "xsd:boolean");
+	case SOAP_TYPE_std__string:
+		return soap_in_std__string(soap, NULL, NULL, "xsd:string");
 	case SOAP_TYPE_gapi1__DirectoryCategory:
 		return soap_in_gapi1__DirectoryCategory(soap, NULL, NULL, "gapi1:DirectoryCategory");
 	case SOAP_TYPE_gapi1DirectoryCategoryArray:
@@ -163,8 +170,6 @@
 		return soap_in_gapi1__ResultElement(soap, NULL, NULL, "gapi1:ResultElement");
 	case SOAP_TYPE_gapi1__GoogleSearchResult:
 		return soap_in_gapi1__GoogleSearchResult(soap, NULL, NULL, "gapi1:GoogleSearchResult");
-	case SOAP_TYPE_std__string:
-		return soap_in_std__string(soap, NULL, NULL, "xsd:string");
 	case SOAP_TYPE_xsd__base64Binary:
 		return soap_in_xsd__base64Binary(soap, NULL, NULL, "xsd:base64Binary");
 	case SOAP_TYPE_gapi1__doGoogleSearch:
@@ -228,6 +233,10 @@
 		{	*type = SOAP_TYPE_bool;
 			return soap_in_bool(soap, NULL, NULL, NULL);
 		}
+		if (!soap_match_tag(soap, t, "xsd:string"))
+		{	*type = SOAP_TYPE_std__string;
+			return soap_in_std__string(soap, NULL, NULL, NULL);
+		}
 		if (!soap_match_tag(soap, t, "gapi1:DirectoryCategory"))
 		{	*type = SOAP_TYPE_gapi1__DirectoryCategory;
 			return soap_in_gapi1__DirectoryCategory(soap, NULL, NULL, NULL);
@@ -248,10 +257,6 @@
 		{	*type = SOAP_TYPE_gapi1__GoogleSearchResult;
 			return soap_in_gapi1__GoogleSearchResult(soap, NULL, NULL, NULL);
 		}
-		if (!soap_match_tag(soap, t, "xsd:string"))
-		{	*type = SOAP_TYPE_std__string;
-			return soap_in_std__string(soap, NULL, NULL, NULL);
-		}
 		if (!soap_match_tag(soap, t, "xsd:base64Binary"))
 		{	*type = SOAP_TYPE_xsd__base64Binary;
 			return soap_in_xsd__base64Binary(soap, NULL, NULL, NULL);
@@ -287,11 +292,7 @@
 			return s ? *s : NULL;
 		}
 		t = soap->tag;
-		if (!soap_match_tag(soap, t, "SOAP-ENC:arrayType"))
-		{	*type = SOAP_TYPE__SOAP_ENC__arrayType;
-			return soap_in__SOAP_ENC__arrayType(soap, NULL, NULL, NULL);
-		}
-		if (!soap_match_tag(soap, t, "QName"))
+		if (!soap_match_tag(soap, t, "xsd:QName"))
 		{	char **s;
 			*type = SOAP_TYPE__QName;
 			s = soap_in__QName(soap, NULL, NULL, NULL);
@@ -302,7 +303,11 @@
 	soap->error = SOAP_TAG_MISMATCH;
 	return NULL;
 }
+
+#ifdef __cplusplus
+}
 #endif
+#endif
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_ignore_element(struct soap *soap)
 {
@@ -311,15 +316,17 @@
 		if (soap->mustUnderstand && !soap->other)
 			return soap->error = SOAP_MUSTUNDERSTAND;
 		if (((soap->mode & SOAP_XML_STRICT) && soap->part != SOAP_IN_HEADER) || !soap_match_tag(soap, soap->tag, "SOAP-ENV:"))
-		{
+		{	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "REJECTING element '%s'\n", soap->tag));
 			return soap->error = SOAP_TAG_MISMATCH;
 		}
 		if (!*soap->id || !soap_getelement(soap, &t))
 		{	soap->peeked = 0;
+			DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Unknown element '%s' (level=%u, %d)\n", soap->tag, soap->level, soap->body));
 			if (soap->fignore)
 				soap->error = soap->fignore(soap, soap->tag);
 			else
 				soap->error = SOAP_OK;
+			DBGLOG(TEST, if (!soap->error) SOAP_MESSAGE(fdebug, "IGNORING element '%s'\n", soap->tag));
 			if (!soap->error && soap->body)
 			{	soap->level++;
 				while (!soap_ignore_element(soap))
@@ -348,6 +355,10 @@
 #endif
 
 #ifndef WITH_NOIDREF
+
+#ifdef __cplusplus
+extern "C" {
+#endif
 SOAP_FMAC3 int SOAP_FMAC4 soap_putelement(struct soap *soap, const void *ptr, const char *tag, int id, int type)
 {
 	switch (type)
@@ -364,6 +375,8 @@
 		return soap_out_unsignedInt(soap, tag, id, (const unsigned int *)ptr, "xsd:unsignedInt");
 	case SOAP_TYPE_bool:
 		return soap_out_bool(soap, tag, id, (const bool *)ptr, "xsd:boolean");
+	case SOAP_TYPE_std__string:
+		return soap_out_std__string(soap, tag, id, (const std::string *)ptr, "xsd:string");
 	case SOAP_TYPE_gapi1__DirectoryCategory:
 		return ((gapi1__DirectoryCategory *)ptr)->soap_out(soap, tag, id, "gapi1:DirectoryCategory");
 	case SOAP_TYPE_gapi1DirectoryCategoryArray:
@@ -374,10 +387,6 @@
 		return ((gapi1__ResultElement *)ptr)->soap_out(soap, tag, id, "gapi1:ResultElement");
 	case SOAP_TYPE_gapi1__GoogleSearchResult:
 		return ((gapi1__GoogleSearchResult *)ptr)->soap_out(soap, tag, id, "gapi1:GoogleSearchResult");
-	case SOAP_TYPE__SOAP_ENC__arrayType:
-		return soap_out__SOAP_ENC__arrayType(soap, "SOAP-ENC:arrayType", id, (const std::string *)ptr, NULL);
-	case SOAP_TYPE_std__string:
-		return soap_out_std__string(soap, tag, id, (const std::string *)ptr, "xsd:string");
 	case SOAP_TYPE_xsd__base64Binary:
 		return ((xsd__base64Binary *)ptr)->soap_out(soap, tag, id, "xsd:base64Binary");
 	case SOAP_TYPE_gapi1__doGoogleSearch:
@@ -409,20 +418,31 @@
 	case SOAP_TYPE_PointerTounsignedByte:
 		return soap_out_PointerTounsignedByte(soap, tag, id, (unsigned char *const*)ptr, "xsd:unsignedByte");
 	case SOAP_TYPE__QName:
-		return soap_out_string(soap, "QName", id, (char**)&ptr, NULL);
+		return soap_out_string(soap, "xsd:QName", id, (char**)&ptr, NULL);
 	case SOAP_TYPE_string:
 		return soap_out_string(soap, tag, id, (char**)&ptr, "xsd:string");
 	}
 	return SOAP_OK;
 }
+
+#ifdef __cplusplus
+}
 #endif
+#endif
 
 #ifndef WITH_NOIDREF
+
+#ifdef __cplusplus
+extern "C" {
+#endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_markelement(struct soap *soap, const void *ptr, int type)
 {
 	(void)soap; (void)ptr; (void)type; /* appease -Wall -Werror */
 	switch (type)
 	{
+	case SOAP_TYPE_std__string:
+		soap_serialize_std__string(soap, (const std::string *)ptr);
+		break;
 	case SOAP_TYPE_gapi1__DirectoryCategory:
 		((gapi1__DirectoryCategory *)ptr)->soap_serialize(soap);
 		break;
@@ -438,12 +458,6 @@
 	case SOAP_TYPE_gapi1__GoogleSearchResult:
 		((gapi1__GoogleSearchResult *)ptr)->soap_serialize(soap);
 		break;
-	case SOAP_TYPE__SOAP_ENC__arrayType:
-		soap_serialize__SOAP_ENC__arrayType(soap, (const std::string *)ptr);
-		break;
-	case SOAP_TYPE_std__string:
-		soap_serialize_std__string(soap, (const std::string *)ptr);
-		break;
 	case SOAP_TYPE_xsd__base64Binary:
 		((xsd__base64Binary *)ptr)->soap_serialize(soap);
 		break;
@@ -497,7 +511,11 @@
 		break;
 	}
 }
+
+#ifdef __cplusplus
+}
 #endif
+#endif
 
 SOAP_FMAC3 void * SOAP_FMAC4 soap_instantiate(struct soap *soap, int t, const char *type, const char *arrayType, size_t *n)
 {
@@ -529,13 +547,31 @@
 		return (void*)soap_instantiate_gapi1__doGoogleSearchResponse(soap, -1, type, arrayType, n);
 	case SOAP_TYPE_gapi1__doGoogleSearch:
 		return (void*)soap_instantiate_gapi1__doGoogleSearch(soap, -1, type, arrayType, n);
-	case SOAP_TYPE__SOAP_ENC__arrayType:
-		return (void*)soap_instantiate__SOAP_ENC__arrayType(soap, -1, type, arrayType, n);
+#ifndef WITH_NOGLOBAL
+	case SOAP_TYPE_SOAP_ENV__Header:
+		return (void*)soap_instantiate_SOAP_ENV__Header(soap, -1, type, arrayType, n);
+#endif
+#ifndef WITH_NOGLOBAL
+	case SOAP_TYPE_SOAP_ENV__Code:
+		return (void*)soap_instantiate_SOAP_ENV__Code(soap, -1, type, arrayType, n);
+#endif
+#ifndef WITH_NOGLOBAL
+	case SOAP_TYPE_SOAP_ENV__Detail:
+		return (void*)soap_instantiate_SOAP_ENV__Detail(soap, -1, type, arrayType, n);
+#endif
+#ifndef WITH_NOGLOBAL
+	case SOAP_TYPE_SOAP_ENV__Reason:
+		return (void*)soap_instantiate_SOAP_ENV__Reason(soap, -1, type, arrayType, n);
+#endif
+#ifndef WITH_NOGLOBAL
+	case SOAP_TYPE_SOAP_ENV__Fault:
+		return (void*)soap_instantiate_SOAP_ENV__Fault(soap, -1, type, arrayType, n);
+#endif
 	}
 	return NULL;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_fdelete(struct soap_clist *p)
+SOAP_FMAC3 int SOAP_FMAC4 soap_fdelete(struct soap_clist *p)
 {	switch (p->type)
 	{
 	case SOAP_TYPE_xsd__base64Binary:
@@ -646,13 +682,9 @@
 		else
 			delete[] (struct SOAP_ENV__Fault*)p->ptr;
 		break;
-	case SOAP_TYPE__SOAP_ENC__arrayType:
-		if (p->size < 0)
-			delete (std::string*)p->ptr;
-		else
-			delete[] (std::string*)p->ptr;
-		break;
+	default:	return SOAP_ERR;
 	}
+	return SOAP_OK;
 }
 
 SOAP_FMAC3 void* SOAP_FMAC4 soap_class_id_enter(struct soap *soap, const char *id, void *p, int t, size_t n, const char *type, const char *arrayType)
@@ -865,10 +897,7 @@
 };
 
 SOAP_FMAC3S const char* SOAP_FMAC4S soap_bool2s(struct soap *soap, bool n)
-{	const char *s = soap_code_str(soap_codes_bool, (long)n);
-	if (s)
-		return s;
-	return soap_long2s(soap, (long)n);
+{	return soap_code_str(soap_codes_bool, n!=0);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_bool(struct soap *soap, const char *tag, int id, const bool *a, const char *type)
@@ -917,29 +946,123 @@
 			return NULL;
 	}
 	else
-	{	a = (bool *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_bool, 0, sizeof(bool), 0, NULL);
+	{	a = (bool *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_bool, 0, sizeof(bool), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	return a;
 }
 
-void gapi1__DirectoryCategory::soap_serialize(struct soap *soap) const
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_std__string(struct soap *soap, std::string *p)
+{	(void)soap; /* appease -Wall -Werror */
+	p->erase();
+}
+
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_std__string(struct soap *soap, const std::string *p)
+{	(void)soap; (void)p; /* appease -Wall -Werror */
+}
+
+SOAP_FMAC3 int SOAP_FMAC4 soap_put_std__string(struct soap *soap, const std::string *a, const char *tag, const char *type)
 {
-	(void)soap; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &((gapi1__DirectoryCategory*)this)->fullViewableName);
-	soap_serialize_std__string(soap, &((gapi1__DirectoryCategory*)this)->specialEncoding);
-	/* transient soap skipped */
+	register int id = soap_embed(soap, (void*)a, NULL, 0, tag, SOAP_TYPE_std__string);
+	if (soap_out_std__string(soap, tag, id, a, type))
+		return soap->error;
+	return soap_putindependent(soap);
 }
+SOAP_FMAC3 int SOAP_FMAC4 soap_out_std__string(struct soap *soap, const char *tag, int id, const std::string *s, const char *type)
+{
+	if ((soap->mode & SOAP_C_NILSTRING) && s->empty())
+		return soap_element_null(soap, tag, id, type);
+	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, s, SOAP_TYPE_std__string), type) || soap_string_out(soap, s->c_str(), 0) || soap_element_end_out(soap, tag))
+		return soap->error;
+	return SOAP_OK;
+}
 
+SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get_std__string(struct soap *soap, std::string *p, const char *tag, const char *type)
+{
+	if ((p = soap_in_std__string(soap, tag, p, type)))
+		soap_getindependent(soap);
+	return p;
+}
+
+SOAP_FMAC1 std::string * SOAP_FMAC2 soap_in_std__string(struct soap *soap, const char *tag, std::string *s, const char *type)
+{
+	if (soap_element_begin_in(soap, tag, 1, type))
+		return NULL;
+	if (!s)
+		s = soap_new_std__string(soap, -1);
+	if (soap->null)
+		if (s)
+			s->erase();
+	if (soap->body && !*soap->href)
+	{	char *t;
+		s = (std::string*)soap_class_id_enter(soap, soap->id, s, SOAP_TYPE_std__string, sizeof(std::string), soap->type, soap->arrayType);
+		if (s)
+			if ((t = soap_string_in(soap, 1, -1, -1)))
+				s->assign(t);
+			else
+				return NULL;
+	}
+	else
+		s = (std::string*)soap_id_forward(soap, soap->href, soap_class_id_enter(soap, soap->id, s, SOAP_TYPE_std__string, sizeof(std::string), soap->type, soap->arrayType), 0, SOAP_TYPE_std__string, 0, sizeof(std::string), 0, soap_copy_std__string);
+	if (soap->body && soap_element_end_in(soap, tag))
+		return NULL;
+	return s;
+}
+
+SOAP_FMAC5 std::string * SOAP_FMAC6 soap_new_std__string(struct soap *soap, int n)
+{	return soap_instantiate_std__string(soap, n, NULL, NULL, NULL);
+}
+
+SOAP_FMAC5 void SOAP_FMAC6 soap_delete_std__string(struct soap *soap, std::string *p)
+{	soap_delete(soap, p);
+}
+
+SOAP_FMAC3 std::string * SOAP_FMAC4 soap_instantiate_std__string(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
+{
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_std__string(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
+	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_std__string, n, soap_fdelete);
+	if (!cp)
+		return NULL;
+	if (n < 0)
+	{	cp->ptr = (void*)new std::string;
+		if (size)
+			*size = sizeof(std::string);
+	}
+	else
+	{	cp->ptr = (void*)new std::string[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
+		if (size)
+			*size = n * sizeof(std::string);
+	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
+	return (std::string*)cp->ptr;
+}
+SOAP_FMAC3 void SOAP_FMAC4 soap_copy_std__string(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
+{
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying std::string %p -> %p\n", q, p));
+	*(std::string*)p = *(std::string*)q;
+}
+
 void gapi1__DirectoryCategory::soap_default(struct soap *soap)
 {
 	this->soap = soap;
-	soap_default_std__string(soap, &((gapi1__DirectoryCategory*)this)->fullViewableName);
-	soap_default_std__string(soap, &((gapi1__DirectoryCategory*)this)->specialEncoding);
+	soap_default_std__string(soap, &this->gapi1__DirectoryCategory::fullViewableName);
+	soap_default_std__string(soap, &this->gapi1__DirectoryCategory::specialEncoding);
 	/* transient soap skipped */
 }
 
+void gapi1__DirectoryCategory::soap_serialize(struct soap *soap) const
+{
+	(void)soap; /* appease -Wall -Werror */
+	soap_serialize_std__string(soap, &this->gapi1__DirectoryCategory::fullViewableName);
+	soap_serialize_std__string(soap, &this->gapi1__DirectoryCategory::specialEncoding);
+	/* transient soap skipped */
+}
+
 int gapi1__DirectoryCategory::soap_put(struct soap *soap, const char *tag, const  char *type) const
 {
 	register int id = soap_embed(soap, (void*)this, NULL, 0, tag, SOAP_TYPE_gapi1__DirectoryCategory);
@@ -956,8 +1079,8 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__DirectoryCategory(struct soap *soap, const char *tag, int id, const gapi1__DirectoryCategory *a, const char *type)
 {
 	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__DirectoryCategory), type);
-	soap_out_std__string(soap, "fullViewableName", -1, &(((gapi1__DirectoryCategory*)a)->fullViewableName), "");
-	soap_out_std__string(soap, "specialEncoding", -1, &(((gapi1__DirectoryCategory*)a)->specialEncoding), "");
+	soap_out_std__string(soap, "fullViewableName", -1, &(a->gapi1__DirectoryCategory::fullViewableName), "");
+	soap_out_std__string(soap, "specialEncoding", -1, &(a->gapi1__DirectoryCategory::specialEncoding), "");
 	/* transient soap skipped */
 	soap_element_end_out(soap, tag);
 	return SOAP_OK;
@@ -1000,12 +1123,12 @@
 		for (;;)
 		{	soap->error = SOAP_TAG_MISMATCH;
 			if (soap_flag_fullViewableName1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "fullViewableName", &(((gapi1__DirectoryCategory*)a)->fullViewableName), "xsd:string"))
+				if (soap_in_std__string(soap, "fullViewableName", &(a->gapi1__DirectoryCategory::fullViewableName), "xsd:string"))
 				{	soap_flag_fullViewableName1--;
 					continue;
 				}
 			if (soap_flag_specialEncoding1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "specialEncoding", &(((gapi1__DirectoryCategory*)a)->specialEncoding), "xsd:string"))
+				if (soap_in_std__string(soap, "specialEncoding", &(a->gapi1__DirectoryCategory::specialEncoding), "xsd:string"))
 				{	soap_flag_specialEncoding1--;
 					continue;
 				}
@@ -1017,18 +1140,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_fullViewableName1 > 0 || soap_flag_specialEncoding1 > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (gapi1__DirectoryCategory *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__DirectoryCategory, 0, sizeof(gapi1__DirectoryCategory), 0, soap_copy_gapi1__DirectoryCategory);
+	{	a = (gapi1__DirectoryCategory *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__DirectoryCategory, 0, sizeof(gapi1__DirectoryCategory), 0, soap_copy_gapi1__DirectoryCategory);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_fullViewableName1 > 0 || soap_flag_specialEncoding1 > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -1042,6 +1165,7 @@
 
 SOAP_FMAC3 gapi1__DirectoryCategory * SOAP_FMAC4 soap_instantiate_gapi1__DirectoryCategory(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__DirectoryCategory(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__DirectoryCategory, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -1053,19 +1177,31 @@
 	}
 	else
 	{	cp->ptr = (void*)new gapi1__DirectoryCategory[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(gapi1__DirectoryCategory);
 		for (int i = 0; i < n; i++)
 			((gapi1__DirectoryCategory*)cp->ptr)[i].soap = soap;
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (gapi1__DirectoryCategory*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__DirectoryCategory(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying gapi1__DirectoryCategory %p -> %p\n", q, p));
 	*(gapi1__DirectoryCategory*)p = *(gapi1__DirectoryCategory*)q;
 }
 
+void gapi1DirectoryCategoryArray::soap_default(struct soap *soap)
+{
+	this->soap = soap;
+	this->__size = 0;
+	this->__ptr = NULL;
+}
+
 void gapi1DirectoryCategoryArray::soap_serialize(struct soap *soap) const
 {
 	if (this->__ptr && !soap_array_reference(soap, this, (struct soap_array*)&this->__ptr, 1, SOAP_TYPE_gapi1DirectoryCategoryArray))
@@ -1075,13 +1211,6 @@
 		}
 }
 
-void gapi1DirectoryCategoryArray::soap_default(struct soap *soap)
-{
-	this->soap = soap;
-	this->__size = 0;
-	this->__ptr = NULL;
-}
-
 int gapi1DirectoryCategoryArray::soap_put(struct soap *soap, const char *tag, const  char *type) const
 {
 	register int id = soap_embed(soap, (void*)this, (struct soap_array*)&this->__ptr, 1, tag, SOAP_TYPE_gapi1DirectoryCategoryArray);
@@ -1189,7 +1318,7 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1DirectoryCategoryArray *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1DirectoryCategoryArray, 0, sizeof(gapi1DirectoryCategoryArray), 0, soap_copy_gapi1DirectoryCategoryArray);
+	{	a = (gapi1DirectoryCategoryArray *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1DirectoryCategoryArray, 0, sizeof(gapi1DirectoryCategoryArray), 0, soap_copy_gapi1DirectoryCategoryArray);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -1206,6 +1335,7 @@
 
 SOAP_FMAC3 gapi1DirectoryCategoryArray * SOAP_FMAC4 soap_instantiate_gapi1DirectoryCategoryArray(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1DirectoryCategoryArray(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1DirectoryCategoryArray, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -1217,19 +1347,31 @@
 	}
 	else
 	{	cp->ptr = (void*)new gapi1DirectoryCategoryArray[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(gapi1DirectoryCategoryArray);
 		for (int i = 0; i < n; i++)
 			((gapi1DirectoryCategoryArray*)cp->ptr)[i].soap = soap;
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (gapi1DirectoryCategoryArray*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1DirectoryCategoryArray(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying gapi1DirectoryCategoryArray %p -> %p\n", q, p));
 	*(gapi1DirectoryCategoryArray*)p = *(gapi1DirectoryCategoryArray*)q;
 }
 
+void gapi1ResultElementArray::soap_default(struct soap *soap)
+{
+	this->soap = soap;
+	this->__size = 0;
+	this->__ptr = NULL;
+}
+
 void gapi1ResultElementArray::soap_serialize(struct soap *soap) const
 {
 	if (this->__ptr && !soap_array_reference(soap, this, (struct soap_array*)&this->__ptr, 1, SOAP_TYPE_gapi1ResultElementArray))
@@ -1239,13 +1381,6 @@
 		}
 }
 
-void gapi1ResultElementArray::soap_default(struct soap *soap)
-{
-	this->soap = soap;
-	this->__size = 0;
-	this->__ptr = NULL;
-}
-
 int gapi1ResultElementArray::soap_put(struct soap *soap, const char *tag, const  char *type) const
 {
 	register int id = soap_embed(soap, (void*)this, (struct soap_array*)&this->__ptr, 1, tag, SOAP_TYPE_gapi1ResultElementArray);
@@ -1353,7 +1488,7 @@
 			return NULL;
 	}
 	else
-	{	a = (gapi1ResultElementArray *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1ResultElementArray, 0, sizeof(gapi1ResultElementArray), 0, soap_copy_gapi1ResultElementArray);
+	{	a = (gapi1ResultElementArray *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1ResultElementArray, 0, sizeof(gapi1ResultElementArray), 0, soap_copy_gapi1ResultElementArray);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -1370,6 +1505,7 @@
 
 SOAP_FMAC3 gapi1ResultElementArray * SOAP_FMAC4 soap_instantiate_gapi1ResultElementArray(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1ResultElementArray(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1ResultElementArray, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -1381,45 +1517,50 @@
 	}
 	else
 	{	cp->ptr = (void*)new gapi1ResultElementArray[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(gapi1ResultElementArray);
 		for (int i = 0; i < n; i++)
 			((gapi1ResultElementArray*)cp->ptr)[i].soap = soap;
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (gapi1ResultElementArray*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1ResultElementArray(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying gapi1ResultElementArray %p -> %p\n", q, p));
 	*(gapi1ResultElementArray*)p = *(gapi1ResultElementArray*)q;
 }
 
-void gapi1__ResultElement::soap_serialize(struct soap *soap) const
+void gapi1__ResultElement::soap_default(struct soap *soap)
 {
-	(void)soap; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->summary);
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->URL);
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->snippet);
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->title);
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->cachedSize);
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->hostName);
-	soap_serialize_PointerTogapi1__DirectoryCategory(soap, &((gapi1__ResultElement*)this)->directoryCategory);
-	soap_serialize_std__string(soap, &((gapi1__ResultElement*)this)->directoryTitle);
+	this->soap = soap;
+	soap_default_std__string(soap, &this->gapi1__ResultElement::summary);
+	soap_default_std__string(soap, &this->gapi1__ResultElement::URL);
+	soap_default_std__string(soap, &this->gapi1__ResultElement::snippet);
+	soap_default_std__string(soap, &this->gapi1__ResultElement::title);
+	soap_default_std__string(soap, &this->gapi1__ResultElement::cachedSize);
+	soap_default_bool(soap, &this->gapi1__ResultElement::relatedInformationPresent);
+	soap_default_std__string(soap, &this->gapi1__ResultElement::hostName);
+	this->gapi1__ResultElement::directoryCategory = NULL;
+	soap_default_std__string(soap, &this->gapi1__ResultElement::directoryTitle);
 	/* transient soap skipped */
 }
 
-void gapi1__ResultElement::soap_default(struct soap *soap)
+void gapi1__ResultElement::soap_serialize(struct soap *soap) const
 {
-	this->soap = soap;
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->summary);
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->URL);
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->snippet);
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->title);
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->cachedSize);
-	soap_default_bool(soap, &((gapi1__ResultElement*)this)->relatedInformationPresent);
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->hostName);
-	((gapi1__ResultElement*)this)->directoryCategory = NULL;
-	soap_default_std__string(soap, &((gapi1__ResultElement*)this)->directoryTitle);
+	(void)soap; /* appease -Wall -Werror */
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::summary);
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::URL);
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::snippet);
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::title);
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::cachedSize);
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::hostName);
+	soap_serialize_PointerTogapi1__DirectoryCategory(soap, &this->gapi1__ResultElement::directoryCategory);
+	soap_serialize_std__string(soap, &this->gapi1__ResultElement::directoryTitle);
 	/* transient soap skipped */
 }
 
@@ -1439,15 +1580,15 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__ResultElement(struct soap *soap, const char *tag, int id, const gapi1__ResultElement *a, const char *type)
 {
 	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__ResultElement), type);
-	soap_out_std__string(soap, "summary", -1, &(((gapi1__ResultElement*)a)->summary), "");
-	soap_out_std__string(soap, "URL", -1, &(((gapi1__ResultElement*)a)->URL), "");
-	soap_out_std__string(soap, "snippet", -1, &(((gapi1__ResultElement*)a)->snippet), "");
-	soap_out_std__string(soap, "title", -1, &(((gapi1__ResultElement*)a)->title), "");
-	soap_out_std__string(soap, "cachedSize", -1, &(((gapi1__ResultElement*)a)->cachedSize), "");
-	soap_out_bool(soap, "relatedInformationPresent", -1, &(((gapi1__ResultElement*)a)->relatedInformationPresent), "");
-	soap_out_std__string(soap, "hostName", -1, &(((gapi1__ResultElement*)a)->hostName), "");
-	soap_out_PointerTogapi1__DirectoryCategory(soap, "directoryCategory", -1, &(((gapi1__ResultElement*)a)->directoryCategory), "");
-	soap_out_std__string(soap, "directoryTitle", -1, &(((gapi1__ResultElement*)a)->directoryTitle), "");
+	soap_out_std__string(soap, "summary", -1, &(a->gapi1__ResultElement::summary), "");
+	soap_out_std__string(soap, "URL", -1, &(a->gapi1__ResultElement::URL), "");
+	soap_out_std__string(soap, "snippet", -1, &(a->gapi1__ResultElement::snippet), "");
+	soap_out_std__string(soap, "title", -1, &(a->gapi1__ResultElement::title), "");
+	soap_out_std__string(soap, "cachedSize", -1, &(a->gapi1__ResultElement::cachedSize), "");
+	soap_out_bool(soap, "relatedInformationPresent", -1, &(a->gapi1__ResultElement::relatedInformationPresent), "");
+	soap_out_std__string(soap, "hostName", -1, &(a->gapi1__ResultElement::hostName), "");
+	soap_out_PointerTogapi1__DirectoryCategory(soap, "directoryCategory", -1, &(a->gapi1__ResultElement::directoryCategory), "");
+	soap_out_std__string(soap, "directoryTitle", -1, &(a->gapi1__ResultElement::directoryTitle), "");
 	/* transient soap skipped */
 	soap_element_end_out(soap, tag);
 	return SOAP_OK;
@@ -1490,47 +1631,47 @@
 		for (;;)
 		{	soap->error = SOAP_TAG_MISMATCH;
 			if (soap_flag_summary1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "summary", &(((gapi1__ResultElement*)a)->summary), "xsd:string"))
+				if (soap_in_std__string(soap, "summary", &(a->gapi1__ResultElement::summary), "xsd:string"))
 				{	soap_flag_summary1--;
 					continue;
 				}
 			if (soap_flag_URL1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "URL", &(((gapi1__ResultElement*)a)->URL), "xsd:string"))
+				if (soap_in_std__string(soap, "URL", &(a->gapi1__ResultElement::URL), "xsd:string"))
 				{	soap_flag_URL1--;
 					continue;
 				}
 			if (soap_flag_snippet1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "snippet", &(((gapi1__ResultElement*)a)->snippet), "xsd:string"))
+				if (soap_in_std__string(soap, "snippet", &(a->gapi1__ResultElement::snippet), "xsd:string"))
 				{	soap_flag_snippet1--;
 					continue;
 				}
 			if (soap_flag_title1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "title", &(((gapi1__ResultElement*)a)->title), "xsd:string"))
+				if (soap_in_std__string(soap, "title", &(a->gapi1__ResultElement::title), "xsd:string"))
 				{	soap_flag_title1--;
 					continue;
 				}
 			if (soap_flag_cachedSize1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "cachedSize", &(((gapi1__ResultElement*)a)->cachedSize), "xsd:string"))
+				if (soap_in_std__string(soap, "cachedSize", &(a->gapi1__ResultElement::cachedSize), "xsd:string"))
 				{	soap_flag_cachedSize1--;
 					continue;
 				}
 			if (soap_flag_relatedInformationPresent1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_bool(soap, "relatedInformationPresent", &(((gapi1__ResultElement*)a)->relatedInformationPresent), "xsd:boolean"))
+				if (soap_in_bool(soap, "relatedInformationPresent", &(a->gapi1__ResultElement::relatedInformationPresent), "xsd:boolean"))
 				{	soap_flag_relatedInformationPresent1--;
 					continue;
 				}
 			if (soap_flag_hostName1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "hostName", &(((gapi1__ResultElement*)a)->hostName), "xsd:string"))
+				if (soap_in_std__string(soap, "hostName", &(a->gapi1__ResultElement::hostName), "xsd:string"))
 				{	soap_flag_hostName1--;
 					continue;
 				}
 			if (soap_flag_directoryCategory1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_PointerTogapi1__DirectoryCategory(soap, "directoryCategory", &(((gapi1__ResultElement*)a)->directoryCategory), "gapi1:DirectoryCategory"))
+				if (soap_in_PointerTogapi1__DirectoryCategory(soap, "directoryCategory", &(a->gapi1__ResultElement::directoryCategory), "gapi1:DirectoryCategory"))
 				{	soap_flag_directoryCategory1--;
 					continue;
 				}
 			if (soap_flag_directoryTitle1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "directoryTitle", &(((gapi1__ResultElement*)a)->directoryTitle), "xsd:string"))
+				if (soap_in_std__string(soap, "directoryTitle", &(a->gapi1__ResultElement::directoryTitle), "xsd:string"))
 				{	soap_flag_directoryTitle1--;
 					continue;
 				}
@@ -1542,18 +1683,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_summary1 > 0 || soap_flag_URL1 > 0 || soap_flag_snippet1 > 0 || soap_flag_title1 > 0 || soap_flag_cachedSize1 > 0 || soap_flag_relatedInformationPresent1 > 0 || soap_flag_hostName1 > 0 || soap_flag_directoryCategory1 > 0 || soap_flag_directoryTitle1 > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (gapi1__ResultElement *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__ResultElement, 0, sizeof(gapi1__ResultElement), 0, soap_copy_gapi1__ResultElement);
+	{	a = (gapi1__ResultElement *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__ResultElement, 0, sizeof(gapi1__ResultElement), 0, soap_copy_gapi1__ResultElement);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_summary1 > 0 || soap_flag_URL1 > 0 || soap_flag_snippet1 > 0 || soap_flag_title1 > 0 || soap_flag_cachedSize1 > 0 || soap_flag_relatedInformationPresent1 > 0 || soap_flag_hostName1 > 0 || soap_flag_directoryCategory1 > 0 || soap_flag_directoryTitle1 > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -1567,6 +1708,7 @@
 
 SOAP_FMAC3 gapi1__ResultElement * SOAP_FMAC4 soap_instantiate_gapi1__ResultElement(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__ResultElement(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__ResultElement, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -1578,44 +1720,49 @@
 	}
 	else
 	{	cp->ptr = (void*)new gapi1__ResultElement[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(gapi1__ResultElement);
 		for (int i = 0; i < n; i++)
 			((gapi1__ResultElement*)cp->ptr)[i].soap = soap;
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (gapi1__ResultElement*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__ResultElement(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying gapi1__ResultElement %p -> %p\n", q, p));
 	*(gapi1__ResultElement*)p = *(gapi1__ResultElement*)q;
 }
 
-void gapi1__GoogleSearchResult::soap_serialize(struct soap *soap) const
+void gapi1__GoogleSearchResult::soap_default(struct soap *soap)
 {
-	(void)soap; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &((gapi1__GoogleSearchResult*)this)->searchComments);
-	soap_serialize_PointerTogapi1ResultElementArray(soap, &((gapi1__GoogleSearchResult*)this)->resultElements);
-	soap_serialize_std__string(soap, &((gapi1__GoogleSearchResult*)this)->searchQuery);
-	soap_serialize_std__string(soap, &((gapi1__GoogleSearchResult*)this)->searchTips);
-	soap_serialize_PointerTogapi1DirectoryCategoryArray(soap, &((gapi1__GoogleSearchResult*)this)->directoryCategories);
+	this->soap = soap;
+	soap_default_bool(soap, &this->gapi1__GoogleSearchResult::documentFiltering);
+	soap_default_std__string(soap, &this->gapi1__GoogleSearchResult::searchComments);
+	soap_default_int(soap, &this->gapi1__GoogleSearchResult::estimatedTotalResultsCount);
+	soap_default_bool(soap, &this->gapi1__GoogleSearchResult::estimateIsExact);
+	this->gapi1__GoogleSearchResult::resultElements = NULL;
+	soap_default_std__string(soap, &this->gapi1__GoogleSearchResult::searchQuery);
+	soap_default_int(soap, &this->gapi1__GoogleSearchResult::startIndex);
+	soap_default_int(soap, &this->gapi1__GoogleSearchResult::endIndex);
+	soap_default_std__string(soap, &this->gapi1__GoogleSearchResult::searchTips);
+	this->gapi1__GoogleSearchResult::directoryCategories = NULL;
+	soap_default_double(soap, &this->gapi1__GoogleSearchResult::searchTime);
 	/* transient soap skipped */
 }
 
-void gapi1__GoogleSearchResult::soap_default(struct soap *soap)
+void gapi1__GoogleSearchResult::soap_serialize(struct soap *soap) const
 {
-	this->soap = soap;
-	soap_default_bool(soap, &((gapi1__GoogleSearchResult*)this)->documentFiltering);
-	soap_default_std__string(soap, &((gapi1__GoogleSearchResult*)this)->searchComments);
-	soap_default_int(soap, &((gapi1__GoogleSearchResult*)this)->estimatedTotalResultsCount);
-	soap_default_bool(soap, &((gapi1__GoogleSearchResult*)this)->estimateIsExact);
-	((gapi1__GoogleSearchResult*)this)->resultElements = NULL;
-	soap_default_std__string(soap, &((gapi1__GoogleSearchResult*)this)->searchQuery);
-	soap_default_int(soap, &((gapi1__GoogleSearchResult*)this)->startIndex);
-	soap_default_int(soap, &((gapi1__GoogleSearchResult*)this)->endIndex);
-	soap_default_std__string(soap, &((gapi1__GoogleSearchResult*)this)->searchTips);
-	((gapi1__GoogleSearchResult*)this)->directoryCategories = NULL;
-	soap_default_double(soap, &((gapi1__GoogleSearchResult*)this)->searchTime);
+	(void)soap; /* appease -Wall -Werror */
+	soap_serialize_std__string(soap, &this->gapi1__GoogleSearchResult::searchComments);
+	soap_serialize_PointerTogapi1ResultElementArray(soap, &this->gapi1__GoogleSearchResult::resultElements);
+	soap_serialize_std__string(soap, &this->gapi1__GoogleSearchResult::searchQuery);
+	soap_serialize_std__string(soap, &this->gapi1__GoogleSearchResult::searchTips);
+	soap_serialize_PointerTogapi1DirectoryCategoryArray(soap, &this->gapi1__GoogleSearchResult::directoryCategories);
 	/* transient soap skipped */
 }
 
@@ -1635,17 +1782,17 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__GoogleSearchResult(struct soap *soap, const char *tag, int id, const gapi1__GoogleSearchResult *a, const char *type)
 {
 	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__GoogleSearchResult), type);
-	soap_out_bool(soap, "documentFiltering", -1, &(((gapi1__GoogleSearchResult*)a)->documentFiltering), "");
-	soap_out_std__string(soap, "searchComments", -1, &(((gapi1__GoogleSearchResult*)a)->searchComments), "");
-	soap_out_int(soap, "estimatedTotalResultsCount", -1, &(((gapi1__GoogleSearchResult*)a)->estimatedTotalResultsCount), "");
-	soap_out_bool(soap, "estimateIsExact", -1, &(((gapi1__GoogleSearchResult*)a)->estimateIsExact), "");
-	soap_out_PointerTogapi1ResultElementArray(soap, "resultElements", -1, &(((gapi1__GoogleSearchResult*)a)->resultElements), "");
-	soap_out_std__string(soap, "searchQuery", -1, &(((gapi1__GoogleSearchResult*)a)->searchQuery), "");
-	soap_out_int(soap, "startIndex", -1, &(((gapi1__GoogleSearchResult*)a)->startIndex), "");
-	soap_out_int(soap, "endIndex", -1, &(((gapi1__GoogleSearchResult*)a)->endIndex), "");
-	soap_out_std__string(soap, "searchTips", -1, &(((gapi1__GoogleSearchResult*)a)->searchTips), "");
-	soap_out_PointerTogapi1DirectoryCategoryArray(soap, "directoryCategories", -1, &(((gapi1__GoogleSearchResult*)a)->directoryCategories), "");
-	soap_out_double(soap, "searchTime", -1, &(((gapi1__GoogleSearchResult*)a)->searchTime), "");
+	soap_out_bool(soap, "documentFiltering", -1, &(a->gapi1__GoogleSearchResult::documentFiltering), "");
+	soap_out_std__string(soap, "searchComments", -1, &(a->gapi1__GoogleSearchResult::searchComments), "");
+	soap_out_int(soap, "estimatedTotalResultsCount", -1, &(a->gapi1__GoogleSearchResult::estimatedTotalResultsCount), "");
+	soap_out_bool(soap, "estimateIsExact", -1, &(a->gapi1__GoogleSearchResult::estimateIsExact), "");
+	soap_out_PointerTogapi1ResultElementArray(soap, "resultElements", -1, &(a->gapi1__GoogleSearchResult::resultElements), "");
+	soap_out_std__string(soap, "searchQuery", -1, &(a->gapi1__GoogleSearchResult::searchQuery), "");
+	soap_out_int(soap, "startIndex", -1, &(a->gapi1__GoogleSearchResult::startIndex), "");
+	soap_out_int(soap, "endIndex", -1, &(a->gapi1__GoogleSearchResult::endIndex), "");
+	soap_out_std__string(soap, "searchTips", -1, &(a->gapi1__GoogleSearchResult::searchTips), "");
+	soap_out_PointerTogapi1DirectoryCategoryArray(soap, "directoryCategories", -1, &(a->gapi1__GoogleSearchResult::directoryCategories), "");
+	soap_out_double(soap, "searchTime", -1, &(a->gapi1__GoogleSearchResult::searchTime), "");
 	/* transient soap skipped */
 	soap_element_end_out(soap, tag);
 	return SOAP_OK;
@@ -1688,57 +1835,57 @@
 		for (;;)
 		{	soap->error = SOAP_TAG_MISMATCH;
 			if (soap_flag_documentFiltering1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_bool(soap, "documentFiltering", &(((gapi1__GoogleSearchResult*)a)->documentFiltering), "xsd:boolean"))
+				if (soap_in_bool(soap, "documentFiltering", &(a->gapi1__GoogleSearchResult::documentFiltering), "xsd:boolean"))
 				{	soap_flag_documentFiltering1--;
 					continue;
 				}
 			if (soap_flag_searchComments1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "searchComments", &(((gapi1__GoogleSearchResult*)a)->searchComments), "xsd:string"))
+				if (soap_in_std__string(soap, "searchComments", &(a->gapi1__GoogleSearchResult::searchComments), "xsd:string"))
 				{	soap_flag_searchComments1--;
 					continue;
 				}
 			if (soap_flag_estimatedTotalResultsCount1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_int(soap, "estimatedTotalResultsCount", &(((gapi1__GoogleSearchResult*)a)->estimatedTotalResultsCount), "xsd:int"))
+				if (soap_in_int(soap, "estimatedTotalResultsCount", &(a->gapi1__GoogleSearchResult::estimatedTotalResultsCount), "xsd:int"))
 				{	soap_flag_estimatedTotalResultsCount1--;
 					continue;
 				}
 			if (soap_flag_estimateIsExact1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_bool(soap, "estimateIsExact", &(((gapi1__GoogleSearchResult*)a)->estimateIsExact), "xsd:boolean"))
+				if (soap_in_bool(soap, "estimateIsExact", &(a->gapi1__GoogleSearchResult::estimateIsExact), "xsd:boolean"))
 				{	soap_flag_estimateIsExact1--;
 					continue;
 				}
 			if (soap_flag_resultElements1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_PointerTogapi1ResultElementArray(soap, "resultElements", &(((gapi1__GoogleSearchResult*)a)->resultElements), "gapi1:ResultElement"))
+				if (soap_in_PointerTogapi1ResultElementArray(soap, "resultElements", &(a->gapi1__GoogleSearchResult::resultElements), "gapi1:ResultElement"))
 				{	soap_flag_resultElements1--;
 					continue;
 				}
 			if (soap_flag_searchQuery1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "searchQuery", &(((gapi1__GoogleSearchResult*)a)->searchQuery), "xsd:string"))
+				if (soap_in_std__string(soap, "searchQuery", &(a->gapi1__GoogleSearchResult::searchQuery), "xsd:string"))
 				{	soap_flag_searchQuery1--;
 					continue;
 				}
 			if (soap_flag_startIndex1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_int(soap, "startIndex", &(((gapi1__GoogleSearchResult*)a)->startIndex), "xsd:int"))
+				if (soap_in_int(soap, "startIndex", &(a->gapi1__GoogleSearchResult::startIndex), "xsd:int"))
 				{	soap_flag_startIndex1--;
 					continue;
 				}
 			if (soap_flag_endIndex1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_int(soap, "endIndex", &(((gapi1__GoogleSearchResult*)a)->endIndex), "xsd:int"))
+				if (soap_in_int(soap, "endIndex", &(a->gapi1__GoogleSearchResult::endIndex), "xsd:int"))
 				{	soap_flag_endIndex1--;
 					continue;
 				}
 			if (soap_flag_searchTips1 && (soap->error == SOAP_TAG_MISMATCH || soap->error == SOAP_NO_TAG))
-				if (soap_in_std__string(soap, "searchTips", &(((gapi1__GoogleSearchResult*)a)->searchTips), "xsd:string"))
+				if (soap_in_std__string(soap, "searchTips", &(a->gapi1__GoogleSearchResult::searchTips), "xsd:string"))
 				{	soap_flag_searchTips1--;
 					continue;
 				}
 			if (soap_flag_directoryCategories1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_PointerTogapi1DirectoryCategoryArray(soap, "directoryCategories", &(((gapi1__GoogleSearchResult*)a)->directoryCategories), "gapi1:DirectoryCategory"))
+				if (soap_in_PointerTogapi1DirectoryCategoryArray(soap, "directoryCategories", &(a->gapi1__GoogleSearchResult::directoryCategories), "gapi1:DirectoryCategory"))
 				{	soap_flag_directoryCategories1--;
 					continue;
 				}
 			if (soap_flag_searchTime1 && soap->error == SOAP_TAG_MISMATCH)
-				if (soap_in_double(soap, "searchTime", &(((gapi1__GoogleSearchResult*)a)->searchTime), "xsd:double"))
+				if (soap_in_double(soap, "searchTime", &(a->gapi1__GoogleSearchResult::searchTime), "xsd:double"))
 				{	soap_flag_searchTime1--;
 					continue;
 				}
@@ -1750,18 +1897,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_documentFiltering1 > 0 || soap_flag_searchComments1 > 0 || soap_flag_estimatedTotalResultsCount1 > 0 || soap_flag_estimateIsExact1 > 0 || soap_flag_resultElements1 > 0 || soap_flag_searchQuery1 > 0 || soap_flag_startIndex1 > 0 || soap_flag_endIndex1 > 0 || soap_flag_searchTips1 > 0 || soap_flag_directoryCategories1 > 0 || soap_flag_searchTime1 > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (gapi1__GoogleSearchResult *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__GoogleSearchResult, 0, sizeof(gapi1__GoogleSearchResult), 0, soap_copy_gapi1__GoogleSearchResult);
+	{	a = (gapi1__GoogleSearchResult *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__GoogleSearchResult, 0, sizeof(gapi1__GoogleSearchResult), 0, soap_copy_gapi1__GoogleSearchResult);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_documentFiltering1 > 0 || soap_flag_searchComments1 > 0 || soap_flag_estimatedTotalResultsCount1 > 0 || soap_flag_estimateIsExact1 > 0 || soap_flag_resultElements1 > 0 || soap_flag_searchQuery1 > 0 || soap_flag_startIndex1 > 0 || soap_flag_endIndex1 > 0 || soap_flag_searchTips1 > 0 || soap_flag_directoryCategories1 > 0 || soap_flag_searchTime1 > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -1775,6 +1922,7 @@
 
 SOAP_FMAC3 gapi1__GoogleSearchResult * SOAP_FMAC4 soap_instantiate_gapi1__GoogleSearchResult(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__GoogleSearchResult(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__GoogleSearchResult, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -1786,194 +1934,34 @@
 	}
 	else
 	{	cp->ptr = (void*)new gapi1__GoogleSearchResult[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(gapi1__GoogleSearchResult);
 		for (int i = 0; i < n; i++)
 			((gapi1__GoogleSearchResult*)cp->ptr)[i].soap = soap;
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (gapi1__GoogleSearchResult*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__GoogleSearchResult(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying gapi1__GoogleSearchResult %p -> %p\n", q, p));
 	*(gapi1__GoogleSearchResult*)p = *(gapi1__GoogleSearchResult*)q;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize__SOAP_ENC__arrayType(struct soap *soap, std::string const*a)
-{	soap_serialize_std__string(soap, a);
-}
-
-SOAP_FMAC3 void SOAP_FMAC4 soap_default__SOAP_ENC__arrayType(struct soap *soap, std::string *a)
-{	soap_default_std__string(soap, a);
-}
-
-SOAP_FMAC3 int SOAP_FMAC4 soap_put__SOAP_ENC__arrayType(struct soap *soap, const std::string *a, const char *tag, const char *type)
+void xsd__base64Binary::soap_default(struct soap *soap)
 {
-	register int id = soap_embed(soap, (void*)a, NULL, 0, tag, SOAP_TYPE__SOAP_ENC__arrayType);
-	if (soap_out__SOAP_ENC__arrayType(soap, tag, id, a, type))
-		return soap->error;
-	return soap_putindependent(soap);
+	this->soap = soap;
+	this->__size = 0;
+	this->__ptr = NULL;
+	this->id = NULL;
+	this->type = NULL;
+	this->options = NULL;
 }
-SOAP_FMAC3 int SOAP_FMAC4 soap_out__SOAP_ENC__arrayType(struct soap *soap, const char *tag, int id, const std::string *s, const char *type)
-{
-	if ((soap->mode & SOAP_C_NILSTRING) && s->empty())
-		return soap_element_null(soap, tag, id, type);
-	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, s, SOAP_TYPE__SOAP_ENC__arrayType), type) || soap_string_out(soap, s->c_str(), 0) || soap_element_end_out(soap, tag))
-		return soap->error;
-	return SOAP_OK;
-}
 
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get__SOAP_ENC__arrayType(struct soap *soap, std::string *p, const char *tag, const char *type)
-{
-	if ((p = soap_in__SOAP_ENC__arrayType(soap, tag, p, type)))
-		soap_getindependent(soap);
-	return p;
-}
-
-SOAP_FMAC1 std::string * SOAP_FMAC2 soap_in__SOAP_ENC__arrayType(struct soap *soap, const char *tag, std::string *s, const char *type)
-{
-	if (soap_element_begin_in(soap, tag, 1, type))
-		return NULL;
-	if (!s)
-		s = soap_new_std__string(soap, -1);
-	if (soap->null)
-		if (s)
-			s->erase();
-	if (soap->body && !*soap->href)
-	{	char *t;
-		s = (std::string*)soap_class_id_enter(soap, soap->id, s, SOAP_TYPE__SOAP_ENC__arrayType, sizeof(std::string), soap->type, soap->arrayType);
-		if (s)
-			if ((t = soap_string_in(soap, 1, -1, -1)))
-				s->assign(t);
-			else
-				return NULL;
-	}
-	else
-		s = (std::string*)soap_id_forward(soap, soap->href, soap_class_id_enter(soap, soap->id, s, SOAP_TYPE__SOAP_ENC__arrayType, sizeof(std::string), soap->type, soap->arrayType), 0, SOAP_TYPE__SOAP_ENC__arrayType, 0, sizeof(std::string), 0, soap_copy__SOAP_ENC__arrayType);
-	if (soap->body && soap_element_end_in(soap, tag))
-		return NULL;
-	return s;
-}
-
-SOAP_FMAC5 std::string * SOAP_FMAC6 soap_new__SOAP_ENC__arrayType(struct soap *soap, int n)
-{	return soap_instantiate__SOAP_ENC__arrayType(soap, n, NULL, NULL, NULL);
-}
-
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete__SOAP_ENC__arrayType(struct soap *soap, std::string *p)
-{	soap_delete(soap, p);
-}
-
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_instantiate__SOAP_ENC__arrayType(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
-{
-	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE__SOAP_ENC__arrayType, n, soap_fdelete);
-	if (!cp)
-		return NULL;
-	if (n < 0)
-	{	cp->ptr = (void*)new std::string;
-		if (size)
-			*size = sizeof(std::string);
-	}
-	else
-	{	cp->ptr = (void*)new std::string[n];
-		if (size)
-			*size = n * sizeof(std::string);
-	}
-	return (std::string*)cp->ptr;
-}
-
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy__SOAP_ENC__arrayType(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
-{
-	*(std::string*)p = *(std::string*)q;
-}
-
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_std__string(struct soap *soap, const std::string *p)
-{	(void)soap; (void)p; /* appease -Wall -Werror */
-}
-
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_std__string(struct soap *soap, std::string *p)
-{	(void)soap; /* appease -Wall -Werror */
-	p->erase();
-}
-
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_std__string(struct soap *soap, const std::string *a, const char *tag, const char *type)
-{
-	register int id = soap_embed(soap, (void*)a, NULL, 0, tag, SOAP_TYPE_std__string);
-	if (soap_out_std__string(soap, tag, id, a, type))
-		return soap->error;
-	return soap_putindependent(soap);
-}
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_std__string(struct soap *soap, const char *tag, int id, const std::string *s, const char *type)
-{
-	if ((soap->mode & SOAP_C_NILSTRING) && s->empty())
-		return soap_element_null(soap, tag, id, type);
-	if (soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, s, SOAP_TYPE_std__string), type) || soap_string_out(soap, s->c_str(), 0) || soap_element_end_out(soap, tag))
-		return soap->error;
-	return SOAP_OK;
-}
-
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get_std__string(struct soap *soap, std::string *p, const char *tag, const char *type)
-{
-	if ((p = soap_in_std__string(soap, tag, p, type)))
-		soap_getindependent(soap);
-	return p;
-}
-
-SOAP_FMAC1 std::string * SOAP_FMAC2 soap_in_std__string(struct soap *soap, const char *tag, std::string *s, const char *type)
-{
-	if (soap_element_begin_in(soap, tag, 1, type))
-		return NULL;
-	if (!s)
-		s = soap_new_std__string(soap, -1);
-	if (soap->null)
-		if (s)
-			s->erase();
-	if (soap->body && !*soap->href)
-	{	char *t;
-		s = (std::string*)soap_class_id_enter(soap, soap->id, s, SOAP_TYPE_std__string, sizeof(std::string), soap->type, soap->arrayType);
-		if (s)
-			if ((t = soap_string_in(soap, 1, -1, -1)))
-				s->assign(t);
-			else
-				return NULL;
-	}
-	else
-		s = (std::string*)soap_id_forward(soap, soap->href, soap_class_id_enter(soap, soap->id, s, SOAP_TYPE_std__string, sizeof(std::string), soap->type, soap->arrayType), 0, SOAP_TYPE_std__string, 0, sizeof(std::string), 0, soap_copy_std__string);
-	if (soap->body && soap_element_end_in(soap, tag))
-		return NULL;
-	return s;
-}
-
-SOAP_FMAC5 std::string * SOAP_FMAC6 soap_new_std__string(struct soap *soap, int n)
-{	return soap_instantiate_std__string(soap, n, NULL, NULL, NULL);
-}
-
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_std__string(struct soap *soap, std::string *p)
-{	soap_delete(soap, p);
-}
-
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_instantiate_std__string(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
-{
-	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_std__string, n, soap_fdelete);
-	if (!cp)
-		return NULL;
-	if (n < 0)
-	{	cp->ptr = (void*)new std::string;
-		if (size)
-			*size = sizeof(std::string);
-	}
-	else
-	{	cp->ptr = (void*)new std::string[n];
-		if (size)
-			*size = n * sizeof(std::string);
-	}
-	return (std::string*)cp->ptr;
-}
-
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_std__string(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
-{
-	*(std::string*)p = *(std::string*)q;
-}
-
 void xsd__base64Binary::soap_serialize(struct soap *soap) const
 {
 	if (this->__ptr && !soap_array_reference(soap, this, (struct soap_array*)&this->__ptr, 1, SOAP_TYPE_xsd__base64Binary))
@@ -1981,16 +1969,6 @@
 			soap->mode |= SOAP_ENC_DIME;
 }
 
-void xsd__base64Binary::soap_default(struct soap *soap)
-{
-	this->soap = soap;
-	this->__size = 0;
-	this->__ptr = NULL;
-	this->id = NULL;
-	this->type = NULL;
-	this->options = NULL;
-}
-
 int xsd__base64Binary::soap_put(struct soap *soap, const char *tag, const  char *type) const
 {
 	register int id = soap_embed(soap, (void*)this, (struct soap_array*)&this->__ptr, 1, tag, SOAP_TYPE_xsd__base64Binary);
@@ -2005,7 +1983,11 @@
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_xsd__base64Binary(struct soap *soap, const char *tag, int id, const xsd__base64Binary *a, const char *type)
 {
+#ifndef WITH_LEANER
 	id = soap_attachment(soap, tag, id, a, (struct soap_array*)&a->__ptr, a->id, a->type, a->options, 1, type, SOAP_TYPE_xsd__base64Binary);
+#else
+	id = soap_element_id(soap, tag, id, a, (struct soap_array*)&a->__ptr, 1, type, SOAP_TYPE_xsd__base64Binary);
+#endif
 	if (id < 0)
 		return soap->error;
 	soap_element_begin_out(soap, tag, id, type);
@@ -2046,18 +2028,23 @@
 	if (soap->body && !*soap->href)
 	{
 		a->__ptr = soap_getbase64(soap, &a->__size, 0);
+#ifndef WITH_LEANER
 		if (soap_xop_forward(soap, &a->__ptr, &a->__size, &a->id, &a->type, &a->options))
 			return NULL;
+#endif
 		if ((!a->__ptr && soap->error) || soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	if (*soap->href != '#')
+	{	
+#ifndef WITH_LEANER
+		if (*soap->href != '#')
 		{	if (soap_dime_forward(soap, &a->__ptr, &a->__size, &a->id, &a->type, &a->options))
 				return NULL;
 		}
 		else
-			a = (xsd__base64Binary *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_xsd__base64Binary, 0, sizeof(xsd__base64Binary), 0, soap_copy_xsd__base64Binary);
+#endif
+			a = (xsd__base64Binary *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_xsd__base64Binary, 0, sizeof(xsd__base64Binary), 0, soap_copy_xsd__base64Binary);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2074,6 +2061,7 @@
 
 SOAP_FMAC3 xsd__base64Binary * SOAP_FMAC4 soap_instantiate_xsd__base64Binary(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_xsd__base64Binary(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_xsd__base64Binary, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2085,21 +2073,40 @@
 	}
 	else
 	{	cp->ptr = (void*)new xsd__base64Binary[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(xsd__base64Binary);
 		for (int i = 0; i < n; i++)
 			((xsd__base64Binary*)cp->ptr)[i].soap = soap;
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (xsd__base64Binary*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_xsd__base64Binary(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying xsd__base64Binary %p -> %p\n", q, p));
 	*(xsd__base64Binary*)p = *(xsd__base64Binary*)q;
 }
 
 #ifndef WITH_NOGLOBAL
 
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Fault(struct soap *soap, struct SOAP_ENV__Fault *a)
+{
+	(void)soap; (void)a; /* appease -Wall -Werror */
+	soap_default__QName(soap, &a->faultcode);
+	soap_default_string(soap, &a->faultstring);
+	soap_default_string(soap, &a->faultactor);
+	a->detail = NULL;
+	a->SOAP_ENV__Code = NULL;
+	a->SOAP_ENV__Reason = NULL;
+	soap_default_string(soap, &a->SOAP_ENV__Node);
+	soap_default_string(soap, &a->SOAP_ENV__Role);
+	a->SOAP_ENV__Detail = NULL;
+}
+
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Fault(struct soap *soap, const struct SOAP_ENV__Fault *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
@@ -2114,20 +2121,6 @@
 	soap_serialize_PointerToSOAP_ENV__Detail(soap, &a->SOAP_ENV__Detail);
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Fault(struct soap *soap, struct SOAP_ENV__Fault *a)
-{
-	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_default__QName(soap, &a->faultcode);
-	soap_default_string(soap, &a->faultstring);
-	soap_default_string(soap, &a->faultactor);
-	a->detail = NULL;
-	a->SOAP_ENV__Code = NULL;
-	a->SOAP_ENV__Reason = NULL;
-	soap_default_string(soap, &a->SOAP_ENV__Node);
-	soap_default_string(soap, &a->SOAP_ENV__Role);
-	a->SOAP_ENV__Detail = NULL;
-}
-
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Fault(struct soap *soap, const struct SOAP_ENV__Fault *a, const char *tag, const char *type)
 {
 	register int id = soap_embed(soap, (void*)a, NULL, 0, tag, SOAP_TYPE_SOAP_ENV__Fault);
@@ -2229,7 +2222,7 @@
 			return NULL;
 	}
 	else
-	{	a = (struct SOAP_ENV__Fault *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_SOAP_ENV__Fault, 0, sizeof(struct SOAP_ENV__Fault), 0, NULL);
+	{	a = (struct SOAP_ENV__Fault *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_SOAP_ENV__Fault, 0, sizeof(struct SOAP_ENV__Fault), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2246,6 +2239,7 @@
 
 SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Fault(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_SOAP_ENV__Fault(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_SOAP_ENV__Fault, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2256,14 +2250,19 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct SOAP_ENV__Fault[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct SOAP_ENV__Fault);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct SOAP_ENV__Fault*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Fault(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct SOAP_ENV__Fault %p -> %p\n", q, p));
 	*(struct SOAP_ENV__Fault*)p = *(struct SOAP_ENV__Fault*)q;
 }
 
@@ -2271,16 +2270,16 @@
 
 #ifndef WITH_NOGLOBAL
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Reason(struct soap *soap, const struct SOAP_ENV__Reason *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Reason(struct soap *soap, struct SOAP_ENV__Reason *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize_string(soap, &a->SOAP_ENV__Text);
+	soap_default_string(soap, &a->SOAP_ENV__Text);
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Reason(struct soap *soap, struct SOAP_ENV__Reason *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Reason(struct soap *soap, const struct SOAP_ENV__Reason *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_default_string(soap, &a->SOAP_ENV__Text);
+	soap_serialize_string(soap, &a->SOAP_ENV__Text);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Reason(struct soap *soap, const struct SOAP_ENV__Reason *a, const char *tag, const char *type)
@@ -2335,7 +2334,7 @@
 			return NULL;
 	}
 	else
-	{	a = (struct SOAP_ENV__Reason *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_SOAP_ENV__Reason, 0, sizeof(struct SOAP_ENV__Reason), 0, NULL);
+	{	a = (struct SOAP_ENV__Reason *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_SOAP_ENV__Reason, 0, sizeof(struct SOAP_ENV__Reason), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2352,6 +2351,7 @@
 
 SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Reason(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_SOAP_ENV__Reason(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_SOAP_ENV__Reason, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2362,14 +2362,19 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct SOAP_ENV__Reason[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct SOAP_ENV__Reason);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct SOAP_ENV__Reason*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Reason(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct SOAP_ENV__Reason %p -> %p\n", q, p));
 	*(struct SOAP_ENV__Reason*)p = *(struct SOAP_ENV__Reason*)q;
 }
 
@@ -2377,12 +2382,6 @@
 
 #ifndef WITH_NOGLOBAL
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap *soap, const struct SOAP_ENV__Detail *a)
-{
-	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_markelement(soap, a->fault, a->__type);
-}
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Detail(struct soap *soap, struct SOAP_ENV__Detail *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
@@ -2391,6 +2390,12 @@
 	a->__any = NULL;
 }
 
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap *soap, const struct SOAP_ENV__Detail *a)
+{
+	(void)soap; (void)a; /* appease -Wall -Werror */
+	soap_markelement(soap, a->fault, a->__type);
+}
+
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Detail(struct soap *soap, const struct SOAP_ENV__Detail *a, const char *tag, const char *type)
 {
 	register int id = soap_embed(soap, (void*)a, NULL, 0, tag, SOAP_TYPE_SOAP_ENV__Detail);
@@ -2449,7 +2454,7 @@
 			return NULL;
 	}
 	else
-	{	a = (struct SOAP_ENV__Detail *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_SOAP_ENV__Detail, 0, sizeof(struct SOAP_ENV__Detail), 0, NULL);
+	{	a = (struct SOAP_ENV__Detail *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_SOAP_ENV__Detail, 0, sizeof(struct SOAP_ENV__Detail), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2466,6 +2471,7 @@
 
 SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Detail(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_SOAP_ENV__Detail(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_SOAP_ENV__Detail, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2476,14 +2482,19 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct SOAP_ENV__Detail[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct SOAP_ENV__Detail);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct SOAP_ENV__Detail*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Detail(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct SOAP_ENV__Detail %p -> %p\n", q, p));
 	*(struct SOAP_ENV__Detail*)p = *(struct SOAP_ENV__Detail*)q;
 }
 
@@ -2491,18 +2502,18 @@
 
 #ifndef WITH_NOGLOBAL
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap *soap, const struct SOAP_ENV__Code *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap *soap, struct SOAP_ENV__Code *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize__QName(soap, &a->SOAP_ENV__Value);
-	soap_serialize_PointerToSOAP_ENV__Code(soap, &a->SOAP_ENV__Subcode);
+	soap_default__QName(soap, &a->SOAP_ENV__Value);
+	a->SOAP_ENV__Subcode = NULL;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap *soap, struct SOAP_ENV__Code *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap *soap, const struct SOAP_ENV__Code *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_default__QName(soap, &a->SOAP_ENV__Value);
-	a->SOAP_ENV__Subcode = NULL;
+	soap_serialize__QName(soap, &a->SOAP_ENV__Value);
+	soap_serialize_PointerToSOAP_ENV__Code(soap, &a->SOAP_ENV__Subcode);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Code(struct soap *soap, const struct SOAP_ENV__Code *a, const char *tag, const char *type)
@@ -2564,7 +2575,7 @@
 			return NULL;
 	}
 	else
-	{	a = (struct SOAP_ENV__Code *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_SOAP_ENV__Code, 0, sizeof(struct SOAP_ENV__Code), 0, NULL);
+	{	a = (struct SOAP_ENV__Code *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_SOAP_ENV__Code, 0, sizeof(struct SOAP_ENV__Code), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2581,6 +2592,7 @@
 
 SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Code(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_SOAP_ENV__Code(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_SOAP_ENV__Code, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2591,14 +2603,19 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct SOAP_ENV__Code[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct SOAP_ENV__Code);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct SOAP_ENV__Code*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Code(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct SOAP_ENV__Code %p -> %p\n", q, p));
 	*(struct SOAP_ENV__Code*)p = *(struct SOAP_ENV__Code*)q;
 }
 
@@ -2606,13 +2623,13 @@
 
 #ifndef WITH_NOGLOBAL
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap *soap, const struct SOAP_ENV__Header *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap *soap, struct SOAP_ENV__Header *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
 	/* transient dummy skipped */
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap *soap, struct SOAP_ENV__Header *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap *soap, const struct SOAP_ENV__Header *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
 	/* transient dummy skipped */
@@ -2665,7 +2682,7 @@
 			return NULL;
 	}
 	else
-	{	a = (struct SOAP_ENV__Header *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_SOAP_ENV__Header, 0, sizeof(struct SOAP_ENV__Header), 0, NULL);
+	{	a = (struct SOAP_ENV__Header *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_SOAP_ENV__Header, 0, sizeof(struct SOAP_ENV__Header), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2682,6 +2699,7 @@
 
 SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_instantiate_SOAP_ENV__Header(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_SOAP_ENV__Header(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_SOAP_ENV__Header, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2692,30 +2710,24 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct SOAP_ENV__Header[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct SOAP_ENV__Header);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct SOAP_ENV__Header*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_SOAP_ENV__Header(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct SOAP_ENV__Header %p -> %p\n", q, p));
 	*(struct SOAP_ENV__Header*)p = *(struct SOAP_ENV__Header*)q;
 }
 
 #endif
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearch(struct soap *soap, const struct gapi1__doGoogleSearch *a)
-{
-	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &a->key);
-	soap_serialize_std__string(soap, &a->q);
-	soap_serialize_std__string(soap, &a->restrict_);
-	soap_serialize_std__string(soap, &a->lr);
-	soap_serialize_std__string(soap, &a->ie);
-	soap_serialize_std__string(soap, &a->oe);
-}
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGoogleSearch(struct soap *soap, struct gapi1__doGoogleSearch *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
@@ -2731,6 +2743,17 @@
 	soap_default_std__string(soap, &a->oe);
 }
 
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearch(struct soap *soap, const struct gapi1__doGoogleSearch *a)
+{
+	(void)soap; (void)a; /* appease -Wall -Werror */
+	soap_serialize_std__string(soap, &a->key);
+	soap_serialize_std__string(soap, &a->q);
+	soap_serialize_std__string(soap, &a->restrict_);
+	soap_serialize_std__string(soap, &a->lr);
+	soap_serialize_std__string(soap, &a->ie);
+	soap_serialize_std__string(soap, &a->oe);
+}
+
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGoogleSearch(struct soap *soap, const struct gapi1__doGoogleSearch *a, const char *tag, const char *type)
 {
 	register int id = soap_embed(soap, (void*)a, NULL, 0, tag, SOAP_TYPE_gapi1__doGoogleSearch);
@@ -2833,18 +2856,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_key > 0 || soap_flag_q > 0 || soap_flag_start > 0 || soap_flag_maxResults > 0 || soap_flag_filter > 0 || soap_flag_restrict_ > 0 || soap_flag_safeSearch > 0 || soap_flag_lr > 0 || soap_flag_ie > 0 || soap_flag_oe > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (struct gapi1__doGoogleSearch *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__doGoogleSearch, 0, sizeof(struct gapi1__doGoogleSearch), 0, soap_copy_gapi1__doGoogleSearch);
+	{	a = (struct gapi1__doGoogleSearch *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__doGoogleSearch, 0, sizeof(struct gapi1__doGoogleSearch), 0, soap_copy_gapi1__doGoogleSearch);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_key > 0 || soap_flag_q > 0 || soap_flag_start > 0 || soap_flag_maxResults > 0 || soap_flag_filter > 0 || soap_flag_restrict_ > 0 || soap_flag_safeSearch > 0 || soap_flag_lr > 0 || soap_flag_ie > 0 || soap_flag_oe > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -2858,6 +2881,7 @@
 
 SOAP_FMAC3 struct gapi1__doGoogleSearch * SOAP_FMAC4 soap_instantiate_gapi1__doGoogleSearch(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__doGoogleSearch(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__doGoogleSearch, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2868,27 +2892,32 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct gapi1__doGoogleSearch[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct gapi1__doGoogleSearch);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct gapi1__doGoogleSearch*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGoogleSearch(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct gapi1__doGoogleSearch %p -> %p\n", q, p));
 	*(struct gapi1__doGoogleSearch*)p = *(struct gapi1__doGoogleSearch*)q;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearchResponse(struct soap *soap, const struct gapi1__doGoogleSearchResponse *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGoogleSearchResponse(struct soap *soap, struct gapi1__doGoogleSearchResponse *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize_PointerTogapi1__GoogleSearchResult(soap, &a->return_);
+	a->return_ = NULL;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGoogleSearchResponse(struct soap *soap, struct gapi1__doGoogleSearchResponse *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearchResponse(struct soap *soap, const struct gapi1__doGoogleSearchResponse *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	a->return_ = NULL;
+	soap_serialize_PointerTogapi1__GoogleSearchResult(soap, &a->return_);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGoogleSearchResponse(struct soap *soap, const struct gapi1__doGoogleSearchResponse *a, const char *tag, const char *type)
@@ -2946,7 +2975,7 @@
 			return NULL;
 	}
 	else
-	{	a = (struct gapi1__doGoogleSearchResponse *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__doGoogleSearchResponse, 0, sizeof(struct gapi1__doGoogleSearchResponse), 0, NULL);
+	{	a = (struct gapi1__doGoogleSearchResponse *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__doGoogleSearchResponse, 0, sizeof(struct gapi1__doGoogleSearchResponse), 0, NULL);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
@@ -2963,6 +2992,7 @@
 
 SOAP_FMAC3 struct gapi1__doGoogleSearchResponse * SOAP_FMAC4 soap_instantiate_gapi1__doGoogleSearchResponse(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__doGoogleSearchResponse(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__doGoogleSearchResponse, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -2973,29 +3003,34 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct gapi1__doGoogleSearchResponse[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct gapi1__doGoogleSearchResponse);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct gapi1__doGoogleSearchResponse*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGoogleSearchResponse(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct gapi1__doGoogleSearchResponse %p -> %p\n", q, p));
 	*(struct gapi1__doGoogleSearchResponse*)p = *(struct gapi1__doGoogleSearchResponse*)q;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestion(struct soap *soap, const struct gapi1__doSpellingSuggestion *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doSpellingSuggestion(struct soap *soap, struct gapi1__doSpellingSuggestion *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &a->key);
-	soap_serialize_std__string(soap, &a->phrase);
+	soap_default_std__string(soap, &a->key);
+	soap_default_std__string(soap, &a->phrase);
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doSpellingSuggestion(struct soap *soap, struct gapi1__doSpellingSuggestion *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestion(struct soap *soap, const struct gapi1__doSpellingSuggestion *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_default_std__string(soap, &a->key);
-	soap_default_std__string(soap, &a->phrase);
+	soap_serialize_std__string(soap, &a->key);
+	soap_serialize_std__string(soap, &a->phrase);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doSpellingSuggestion(struct soap *soap, const struct gapi1__doSpellingSuggestion *a, const char *tag, const char *type)
@@ -3009,8 +3044,8 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doSpellingSuggestion(struct soap *soap, const char *tag, int id, const struct gapi1__doSpellingSuggestion *a, const char *type)
 {
 	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doSpellingSuggestion), type);
-	soap_out_std__string(soap, "key", -1, &a->key, "");
-	soap_out_std__string(soap, "phrase", -1, &a->phrase, "");
+	soap_out_std__string(soap, "key", -1, &a->key, "xsd:string");
+	soap_out_std__string(soap, "phrase", -1, &a->phrase, "xsd:string");
 	soap_element_end_out(soap, tag);
 	return SOAP_OK;
 }
@@ -3052,18 +3087,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_key > 0 || soap_flag_phrase > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (struct gapi1__doSpellingSuggestion *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__doSpellingSuggestion, 0, sizeof(struct gapi1__doSpellingSuggestion), 0, soap_copy_gapi1__doSpellingSuggestion);
+	{	a = (struct gapi1__doSpellingSuggestion *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__doSpellingSuggestion, 0, sizeof(struct gapi1__doSpellingSuggestion), 0, soap_copy_gapi1__doSpellingSuggestion);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_key > 0 || soap_flag_phrase > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -3077,6 +3112,7 @@
 
 SOAP_FMAC3 struct gapi1__doSpellingSuggestion * SOAP_FMAC4 soap_instantiate_gapi1__doSpellingSuggestion(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__doSpellingSuggestion(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__doSpellingSuggestion, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -3087,27 +3123,32 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct gapi1__doSpellingSuggestion[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct gapi1__doSpellingSuggestion);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct gapi1__doSpellingSuggestion*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doSpellingSuggestion(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct gapi1__doSpellingSuggestion %p -> %p\n", q, p));
 	*(struct gapi1__doSpellingSuggestion*)p = *(struct gapi1__doSpellingSuggestion*)q;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestionResponse(struct soap *soap, const struct gapi1__doSpellingSuggestionResponse *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doSpellingSuggestionResponse(struct soap *soap, struct gapi1__doSpellingSuggestionResponse *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &a->return_);
+	soap_default_std__string(soap, &a->return_);
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doSpellingSuggestionResponse(struct soap *soap, struct gapi1__doSpellingSuggestionResponse *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestionResponse(struct soap *soap, const struct gapi1__doSpellingSuggestionResponse *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_default_std__string(soap, &a->return_);
+	soap_serialize_std__string(soap, &a->return_);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doSpellingSuggestionResponse(struct soap *soap, const struct gapi1__doSpellingSuggestionResponse *a, const char *tag, const char *type)
@@ -3160,18 +3201,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_return_ > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (struct gapi1__doSpellingSuggestionResponse *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__doSpellingSuggestionResponse, 0, sizeof(struct gapi1__doSpellingSuggestionResponse), 0, soap_copy_gapi1__doSpellingSuggestionResponse);
+	{	a = (struct gapi1__doSpellingSuggestionResponse *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__doSpellingSuggestionResponse, 0, sizeof(struct gapi1__doSpellingSuggestionResponse), 0, soap_copy_gapi1__doSpellingSuggestionResponse);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_return_ > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -3185,6 +3226,7 @@
 
 SOAP_FMAC3 struct gapi1__doSpellingSuggestionResponse * SOAP_FMAC4 soap_instantiate_gapi1__doSpellingSuggestionResponse(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__doSpellingSuggestionResponse(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__doSpellingSuggestionResponse, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -3195,29 +3237,34 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct gapi1__doSpellingSuggestionResponse[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct gapi1__doSpellingSuggestionResponse);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct gapi1__doSpellingSuggestionResponse*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doSpellingSuggestionResponse(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct gapi1__doSpellingSuggestionResponse %p -> %p\n", q, p));
 	*(struct gapi1__doSpellingSuggestionResponse*)p = *(struct gapi1__doSpellingSuggestionResponse*)q;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPage(struct soap *soap, const struct gapi1__doGetCachedPage *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGetCachedPage(struct soap *soap, struct gapi1__doGetCachedPage *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_serialize_std__string(soap, &a->key);
-	soap_serialize_std__string(soap, &a->url);
+	soap_default_std__string(soap, &a->key);
+	soap_default_std__string(soap, &a->url);
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGetCachedPage(struct soap *soap, struct gapi1__doGetCachedPage *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPage(struct soap *soap, const struct gapi1__doGetCachedPage *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	soap_default_std__string(soap, &a->key);
-	soap_default_std__string(soap, &a->url);
+	soap_serialize_std__string(soap, &a->key);
+	soap_serialize_std__string(soap, &a->url);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGetCachedPage(struct soap *soap, const struct gapi1__doGetCachedPage *a, const char *tag, const char *type)
@@ -3231,8 +3278,8 @@
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGetCachedPage(struct soap *soap, const char *tag, int id, const struct gapi1__doGetCachedPage *a, const char *type)
 {
 	soap_element_begin_out(soap, tag, soap_embedded_id(soap, id, a, SOAP_TYPE_gapi1__doGetCachedPage), type);
-	soap_out_std__string(soap, "key", -1, &a->key, "");
-	soap_out_std__string(soap, "url", -1, &a->url, "");
+	soap_out_std__string(soap, "key", -1, &a->key, "xsd:string");
+	soap_out_std__string(soap, "url", -1, &a->url, "xsd:string");
 	soap_element_end_out(soap, tag);
 	return SOAP_OK;
 }
@@ -3274,18 +3321,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_key > 0 || soap_flag_url > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (struct gapi1__doGetCachedPage *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__doGetCachedPage, 0, sizeof(struct gapi1__doGetCachedPage), 0, soap_copy_gapi1__doGetCachedPage);
+	{	a = (struct gapi1__doGetCachedPage *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__doGetCachedPage, 0, sizeof(struct gapi1__doGetCachedPage), 0, soap_copy_gapi1__doGetCachedPage);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_key > 0 || soap_flag_url > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -3299,6 +3346,7 @@
 
 SOAP_FMAC3 struct gapi1__doGetCachedPage * SOAP_FMAC4 soap_instantiate_gapi1__doGetCachedPage(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__doGetCachedPage(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__doGetCachedPage, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -3309,27 +3357,32 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct gapi1__doGetCachedPage[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct gapi1__doGetCachedPage);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct gapi1__doGetCachedPage*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGetCachedPage(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct gapi1__doGetCachedPage %p -> %p\n", q, p));
 	*(struct gapi1__doGetCachedPage*)p = *(struct gapi1__doGetCachedPage*)q;
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPageResponse(struct soap *soap, const struct gapi1__doGetCachedPageResponse *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGetCachedPageResponse(struct soap *soap, struct gapi1__doGetCachedPageResponse *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	a->return_.soap_serialize(soap);
+	a->return_.xsd__base64Binary::soap_default(soap);
 }
 
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGetCachedPageResponse(struct soap *soap, struct gapi1__doGetCachedPageResponse *a)
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPageResponse(struct soap *soap, const struct gapi1__doGetCachedPageResponse *a)
 {
 	(void)soap; (void)a; /* appease -Wall -Werror */
-	a->return_.xsd__base64Binary::soap_default(soap);
+	a->return_.soap_serialize(soap);
 }
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGetCachedPageResponse(struct soap *soap, const struct gapi1__doGetCachedPageResponse *a, const char *tag, const char *type)
@@ -3382,18 +3435,18 @@
 			if (soap->error)
 				return NULL;
 		}
-		if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_return_ > 0))
-		{	soap->error = SOAP_OCCURS;
-			return NULL;
-		}
 		if (soap_element_end_in(soap, tag))
 			return NULL;
 	}
 	else
-	{	a = (struct gapi1__doGetCachedPageResponse *)soap_id_forward(soap, soap->href, (void**)a, 0, SOAP_TYPE_gapi1__doGetCachedPageResponse, 0, sizeof(struct gapi1__doGetCachedPageResponse), 0, soap_copy_gapi1__doGetCachedPageResponse);
+	{	a = (struct gapi1__doGetCachedPageResponse *)soap_id_forward(soap, soap->href, (void*)a, 0, SOAP_TYPE_gapi1__doGetCachedPageResponse, 0, sizeof(struct gapi1__doGetCachedPageResponse), 0, soap_copy_gapi1__doGetCachedPageResponse);
 		if (soap->body && soap_element_end_in(soap, tag))
 			return NULL;
 	}
+	if ((soap->mode & SOAP_XML_STRICT) && (soap_flag_return_ > 0))
+	{	soap->error = SOAP_OCCURS;
+		return NULL;
+	}
 	return a;
 }
 
@@ -3407,6 +3460,7 @@
 
 SOAP_FMAC3 struct gapi1__doGetCachedPageResponse * SOAP_FMAC4 soap_instantiate_gapi1__doGetCachedPageResponse(struct soap *soap, int n, const char *type, const char *arrayType, size_t *size)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "soap_instantiate_gapi1__doGetCachedPageResponse(%d, %s, %s)\n", n, type?type:"", arrayType?arrayType:""));
 	struct soap_clist *cp = soap_link(soap, NULL, SOAP_TYPE_gapi1__doGetCachedPageResponse, n, soap_fdelete);
 	if (!cp)
 		return NULL;
@@ -3417,14 +3471,19 @@
 	}
 	else
 	{	cp->ptr = (void*)new struct gapi1__doGetCachedPageResponse[n];
+		if (!cp->ptr)
+		{	soap->error = SOAP_EOM;
+			return NULL;
+		}
 		if (size)
 			*size = n * sizeof(struct gapi1__doGetCachedPageResponse);
 	}
+		DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Instantiated location=%p\n", cp->ptr));
 	return (struct gapi1__doGetCachedPageResponse*)cp->ptr;
 }
-
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGetCachedPageResponse(struct soap *soap, int st, int tt, void *p, size_t len, const void *q, size_t n)
 {
+	DBGLOG(TEST, SOAP_MESSAGE(fdebug, "Copying struct gapi1__doGetCachedPageResponse %p -> %p\n", q, p));
 	*(struct gapi1__doGetCachedPageResponse*)p = *(struct gapi1__doGetCachedPageResponse*)q;
 }
 

Modified: trunk/Search/Google/GAPIClient.cpp
===================================================================
--- trunk/Search/Google/GAPIClient.cpp	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GAPIClient.cpp	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,12 +1,12 @@
 /* GAPIClient.cpp
-   Generated by gSOAP 2.7.8c from GoogleSearch.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from GoogleSearch.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
 #include "GAPIH.h"
 
-SOAP_SOURCE_STAMP("@(#) GAPIClient.cpp ver 2.7.8c 2006-11-22 12:30:01 GMT")
+SOAP_SOURCE_STAMP("@(#) GAPIClient.cpp ver 2.7.9e 2007-07-29 10:34:02 GMT")
 
 
 SOAP_FMAC5 int SOAP_FMAC6 soap_call_gapi1__doGetCachedPage(struct soap *soap, const char *soap_endpoint, const char *soap_action, std::string key, std::string url, xsd__base64Binary &return_)

Modified: trunk/Search/Google/GAPIClientLib.cpp
===================================================================
--- trunk/Search/Google/GAPIClientLib.cpp	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GAPIClientLib.cpp	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* GAPIClientLib.cpp
-   Generated by gSOAP 2.7.8c from GoogleSearch.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from GoogleSearch.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */

Modified: trunk/Search/Google/GAPIGoogleSearchBindingProxy.h
===================================================================
--- trunk/Search/Google/GAPIGoogleSearchBindingProxy.h	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GAPIGoogleSearchBindingProxy.h	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* GAPIGoogleSearchBindingProxy.h
-   Generated by gSOAP 2.7.8c from GoogleSearch.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from GoogleSearch.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -14,7 +14,7 @@
 	struct soap *soap;
 	const char *endpoint;
 	GoogleSearchBinding() { soap = soap_new(); if (soap) soap->namespaces = GAPI_namespaces; endpoint = "http://api.google.com/search/beta2"; };
-	virtual ~GoogleSearchBinding() { if (soap) { soap_destroy(soap); soap_end(soap); soap_done(soap); soap_del(soap); } };
+	virtual ~GoogleSearchBinding() { if (soap) { soap_destroy(soap); soap_end(soap); soap_free(soap); } };
 	virtual int gapi1__doGetCachedPage(std::string key, std::string url, xsd__base64Binary &return_) { return soap ? soap_call_gapi1__doGetCachedPage(soap, endpoint, NULL, key, url, return_) : SOAP_EOM; };
 	virtual int gapi1__doSpellingSuggestion(std::string key, std::string phrase, std::string &return_) { return soap ? soap_call_gapi1__doSpellingSuggestion(soap, endpoint, NULL, key, phrase, return_) : SOAP_EOM; };
 	virtual int gapi1__doGoogleSearch(std::string key, std::string q, int start, int maxResults, bool filter, std::string restrict_, bool safeSearch, std::string lr, std::string ie, std::string oe, struct gapi1__doGoogleSearchResponse &_param_1) { return soap ? soap_call_gapi1__doGoogleSearch(soap, endpoint, NULL, key, q, start, maxResults, filter, restrict_, safeSearch, lr, ie, oe, _param_1) : SOAP_EOM; };

Modified: trunk/Search/Google/GAPIH.h
===================================================================
--- trunk/Search/Google/GAPIH.h	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GAPIH.h	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* GAPIH.h
-   Generated by gSOAP 2.7.8c from GoogleSearch.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from GoogleSearch.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -8,17 +8,25 @@
 #ifndef GAPIH_H
 #define GAPIH_H
 #include "GAPIStub.h"
-SOAP_FMAC3 int SOAP_FMAC4 soap_ignore_element(struct soap*);
 #ifndef WITH_NOIDREF
-SOAP_FMAC3 int SOAP_FMAC4 soap_putindependent(struct soap*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_getindependent(struct soap*);
+
+#ifdef __cplusplus
+extern "C" {
+#endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_markelement(struct soap*, const void*, int);
 SOAP_FMAC3 int SOAP_FMAC4 soap_putelement(struct soap*, const void*, const char*, int, int);
-SOAP_FMAC3 void * SOAP_FMAC4 soap_getelement(struct soap*, int*);
+SOAP_FMAC3 void *SOAP_FMAC4 soap_getelement(struct soap*, int*);
+
+#ifdef __cplusplus
+}
 #endif
+SOAP_FMAC3 int SOAP_FMAC4 soap_putindependent(struct soap*);
+SOAP_FMAC3 int SOAP_FMAC4 soap_getindependent(struct soap*);
+#endif
+SOAP_FMAC3 int SOAP_FMAC4 soap_ignore_element(struct soap*);
 
 SOAP_FMAC3 void * SOAP_FMAC4 soap_instantiate(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_fdelete(struct soap_clist*);
+SOAP_FMAC3 int SOAP_FMAC4 soap_fdelete(struct soap_clist*);
 SOAP_FMAC3 void* SOAP_FMAC4 soap_class_id_enter(struct soap*, const char*, void*, int, size_t, const char*, const char*);
 
 SOAP_FMAC3 void* SOAP_FMAC4 soap_container_id_forward(struct soap*, const char*, void*, size_t, int, int, size_t, unsigned int);
@@ -44,7 +52,7 @@
 SOAP_FMAC3 int * SOAP_FMAC4 soap_in_int(struct soap*, const char*, int *, const char*);
 
 #ifndef SOAP_TYPE_double
-#define SOAP_TYPE_double (23)
+#define SOAP_TYPE_double (22)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_double(struct soap*, double *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_double(struct soap*, const double *, const char*, const char*);
@@ -71,7 +79,7 @@
 SOAP_FMAC3 unsigned int * SOAP_FMAC4 soap_in_unsignedInt(struct soap*, const char*, unsigned int *, const char*);
 
 #ifndef SOAP_TYPE_bool
-#define SOAP_TYPE_bool (20)
+#define SOAP_TYPE_bool (18)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_bool(struct soap*, bool *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_bool(struct soap*, const bool *, const char*, const char*);
@@ -83,8 +91,22 @@
 
 SOAP_FMAC3S int SOAP_FMAC4S soap_s2bool(struct soap*, const char*, bool *);
 
+#ifndef SOAP_TYPE_std__string
+#define SOAP_TYPE_std__string (19)
+#endif
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_std__string(struct soap*, std::string *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_std__string(struct soap*, const std::string *);
+SOAP_FMAC3 int SOAP_FMAC4 soap_put_std__string(struct soap*, const std::string *, const char*, const char*);
+SOAP_FMAC3 int SOAP_FMAC4 soap_out_std__string(struct soap*, const char*, int, const std::string*, const char*);
+SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get_std__string(struct soap*, std::string *, const char*, const char*);
+SOAP_FMAC3 std::string * SOAP_FMAC4 soap_in_std__string(struct soap*, const char*, std::string*, const char*);
+SOAP_FMAC5 std::string * SOAP_FMAC6 soap_new_std__string(struct soap*, int);
+SOAP_FMAC5 void SOAP_FMAC6 soap_delete_std__string(struct soap*, std::string*);
+SOAP_FMAC3 std::string * SOAP_FMAC4 soap_instantiate_std__string(struct soap*, int, const char*, const char*, size_t*);
+SOAP_FMAC3 void SOAP_FMAC4 soap_copy_std__string(struct soap*, int, int, void*, size_t, const void*, size_t);
+
 #ifndef SOAP_TYPE_gapi1__DirectoryCategory
-#define SOAP_TYPE_gapi1__DirectoryCategory (19)
+#define SOAP_TYPE_gapi1__DirectoryCategory (17)
 #endif
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__DirectoryCategory(struct soap*, const char*, int, const gapi1__DirectoryCategory *, const char*);
@@ -96,7 +118,7 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__DirectoryCategory(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1DirectoryCategoryArray
-#define SOAP_TYPE_gapi1DirectoryCategoryArray (18)
+#define SOAP_TYPE_gapi1DirectoryCategoryArray (16)
 #endif
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1DirectoryCategoryArray(struct soap*, const char*, int, const gapi1DirectoryCategoryArray *, const char*);
 SOAP_FMAC3 gapi1DirectoryCategoryArray * SOAP_FMAC4 soap_get_gapi1DirectoryCategoryArray(struct soap*, gapi1DirectoryCategoryArray *, const char*, const char*);
@@ -107,7 +129,7 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1DirectoryCategoryArray(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1ResultElementArray
-#define SOAP_TYPE_gapi1ResultElementArray (17)
+#define SOAP_TYPE_gapi1ResultElementArray (15)
 #endif
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1ResultElementArray(struct soap*, const char*, int, const gapi1ResultElementArray *, const char*);
 SOAP_FMAC3 gapi1ResultElementArray * SOAP_FMAC4 soap_get_gapi1ResultElementArray(struct soap*, gapi1ResultElementArray *, const char*, const char*);
@@ -118,7 +140,7 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1ResultElementArray(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__ResultElement
-#define SOAP_TYPE_gapi1__ResultElement (16)
+#define SOAP_TYPE_gapi1__ResultElement (14)
 #endif
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__ResultElement(struct soap*, const char*, int, const gapi1__ResultElement *, const char*);
@@ -130,7 +152,7 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__ResultElement(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__GoogleSearchResult
-#define SOAP_TYPE_gapi1__GoogleSearchResult (15)
+#define SOAP_TYPE_gapi1__GoogleSearchResult (13)
 #endif
 
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__GoogleSearchResult(struct soap*, const char*, int, const gapi1__GoogleSearchResult *, const char*);
@@ -141,34 +163,6 @@
 SOAP_FMAC3 gapi1__GoogleSearchResult * SOAP_FMAC4 soap_instantiate_gapi1__GoogleSearchResult(struct soap*, int, const char*, const char*, size_t*);
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__GoogleSearchResult(struct soap*, int, int, void*, size_t, const void*, size_t);
 
-#ifndef SOAP_TYPE__SOAP_ENC__arrayType
-#define SOAP_TYPE__SOAP_ENC__arrayType (14)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize__SOAP_ENC__arrayType(struct soap*, std::string const*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default__SOAP_ENC__arrayType(struct soap*, std::string *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put__SOAP_ENC__arrayType(struct soap*, const std::string *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out__SOAP_ENC__arrayType(struct soap*, const char*, int, const std::string*, const char*);
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get__SOAP_ENC__arrayType(struct soap*, std::string *, const char*, const char*);
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_in__SOAP_ENC__arrayType(struct soap*, const char*, std::string*, const char*);
-SOAP_FMAC5 std::string * SOAP_FMAC6 soap_new__SOAP_ENC__arrayType(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete__SOAP_ENC__arrayType(struct soap*, std::string*);
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_instantiate__SOAP_ENC__arrayType(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy__SOAP_ENC__arrayType(struct soap*, int, int, void*, size_t, const void*, size_t);
-
-#ifndef SOAP_TYPE_std__string
-#define SOAP_TYPE_std__string (13)
-#endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_std__string(struct soap*, const std::string *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_std__string(struct soap*, std::string *);
-SOAP_FMAC3 int SOAP_FMAC4 soap_put_std__string(struct soap*, const std::string *, const char*, const char*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_out_std__string(struct soap*, const char*, int, const std::string*, const char*);
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_get_std__string(struct soap*, std::string *, const char*, const char*);
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_in_std__string(struct soap*, const char*, std::string*, const char*);
-SOAP_FMAC5 std::string * SOAP_FMAC6 soap_new_std__string(struct soap*, int);
-SOAP_FMAC5 void SOAP_FMAC6 soap_delete_std__string(struct soap*, std::string*);
-SOAP_FMAC3 std::string * SOAP_FMAC4 soap_instantiate_std__string(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_copy_std__string(struct soap*, int, int, void*, size_t, const void*, size_t);
-
 #ifndef SOAP_TYPE_xsd__base64Binary
 #define SOAP_TYPE_xsd__base64Binary (7)
 #endif
@@ -183,10 +177,10 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Fault
-#define SOAP_TYPE_SOAP_ENV__Fault (48)
+#define SOAP_TYPE_SOAP_ENV__Fault (47)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Fault(struct soap*, const char*, int, const struct SOAP_ENV__Fault *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_get_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *, const char*, const char*);
@@ -201,10 +195,10 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Reason
-#define SOAP_TYPE_SOAP_ENV__Reason (47)
+#define SOAP_TYPE_SOAP_ENV__Reason (46)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Reason(struct soap*, const char*, int, const struct SOAP_ENV__Reason *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_get_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *, const char*, const char*);
@@ -219,10 +213,10 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Detail
-#define SOAP_TYPE_SOAP_ENV__Detail (46)
+#define SOAP_TYPE_SOAP_ENV__Detail (45)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Detail(struct soap*, const char*, int, const struct SOAP_ENV__Detail *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_get_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *, const char*, const char*);
@@ -237,10 +231,10 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Code
-#define SOAP_TYPE_SOAP_ENV__Code (44)
+#define SOAP_TYPE_SOAP_ENV__Code (43)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Code(struct soap*, const char*, int, const struct SOAP_ENV__Code *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_get_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *, const char*, const char*);
@@ -255,10 +249,10 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_SOAP_ENV__Header
-#define SOAP_TYPE_SOAP_ENV__Header (43)
+#define SOAP_TYPE_SOAP_ENV__Header (42)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Header(struct soap*, const char*, int, const struct SOAP_ENV__Header *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_get_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *, const char*, const char*);
@@ -271,10 +265,10 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doGoogleSearch
-#define SOAP_TYPE_gapi1__doGoogleSearch (40)
+#define SOAP_TYPE_gapi1__doGoogleSearch (39)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearch(struct soap*, const struct gapi1__doGoogleSearch *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGoogleSearch(struct soap*, struct gapi1__doGoogleSearch *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearch(struct soap*, const struct gapi1__doGoogleSearch *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGoogleSearch(struct soap*, const struct gapi1__doGoogleSearch *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGoogleSearch(struct soap*, const char*, int, const struct gapi1__doGoogleSearch *, const char*);
 SOAP_FMAC3 struct gapi1__doGoogleSearch * SOAP_FMAC4 soap_get_gapi1__doGoogleSearch(struct soap*, struct gapi1__doGoogleSearch *, const char*, const char*);
@@ -285,10 +279,10 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGoogleSearch(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__doGoogleSearchResponse
-#define SOAP_TYPE_gapi1__doGoogleSearchResponse (36)
+#define SOAP_TYPE_gapi1__doGoogleSearchResponse (35)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearchResponse(struct soap*, const struct gapi1__doGoogleSearchResponse *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGoogleSearchResponse(struct soap*, struct gapi1__doGoogleSearchResponse *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGoogleSearchResponse(struct soap*, const struct gapi1__doGoogleSearchResponse *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGoogleSearchResponse(struct soap*, const struct gapi1__doGoogleSearchResponse *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGoogleSearchResponse(struct soap*, const char*, int, const struct gapi1__doGoogleSearchResponse *, const char*);
 SOAP_FMAC3 struct gapi1__doGoogleSearchResponse * SOAP_FMAC4 soap_get_gapi1__doGoogleSearchResponse(struct soap*, struct gapi1__doGoogleSearchResponse *, const char*, const char*);
@@ -299,10 +293,10 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGoogleSearchResponse(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__doSpellingSuggestion
-#define SOAP_TYPE_gapi1__doSpellingSuggestion (35)
+#define SOAP_TYPE_gapi1__doSpellingSuggestion (34)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestion(struct soap*, const struct gapi1__doSpellingSuggestion *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doSpellingSuggestion(struct soap*, struct gapi1__doSpellingSuggestion *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestion(struct soap*, const struct gapi1__doSpellingSuggestion *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doSpellingSuggestion(struct soap*, const struct gapi1__doSpellingSuggestion *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doSpellingSuggestion(struct soap*, const char*, int, const struct gapi1__doSpellingSuggestion *, const char*);
 SOAP_FMAC3 struct gapi1__doSpellingSuggestion * SOAP_FMAC4 soap_get_gapi1__doSpellingSuggestion(struct soap*, struct gapi1__doSpellingSuggestion *, const char*, const char*);
@@ -313,10 +307,10 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doSpellingSuggestion(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__doSpellingSuggestionResponse
-#define SOAP_TYPE_gapi1__doSpellingSuggestionResponse (34)
+#define SOAP_TYPE_gapi1__doSpellingSuggestionResponse (33)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestionResponse(struct soap*, const struct gapi1__doSpellingSuggestionResponse *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doSpellingSuggestionResponse(struct soap*, struct gapi1__doSpellingSuggestionResponse *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doSpellingSuggestionResponse(struct soap*, const struct gapi1__doSpellingSuggestionResponse *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doSpellingSuggestionResponse(struct soap*, const struct gapi1__doSpellingSuggestionResponse *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doSpellingSuggestionResponse(struct soap*, const char*, int, const struct gapi1__doSpellingSuggestionResponse *, const char*);
 SOAP_FMAC3 struct gapi1__doSpellingSuggestionResponse * SOAP_FMAC4 soap_get_gapi1__doSpellingSuggestionResponse(struct soap*, struct gapi1__doSpellingSuggestionResponse *, const char*, const char*);
@@ -327,10 +321,10 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doSpellingSuggestionResponse(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__doGetCachedPage
-#define SOAP_TYPE_gapi1__doGetCachedPage (31)
+#define SOAP_TYPE_gapi1__doGetCachedPage (30)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPage(struct soap*, const struct gapi1__doGetCachedPage *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGetCachedPage(struct soap*, struct gapi1__doGetCachedPage *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPage(struct soap*, const struct gapi1__doGetCachedPage *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGetCachedPage(struct soap*, const struct gapi1__doGetCachedPage *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGetCachedPage(struct soap*, const char*, int, const struct gapi1__doGetCachedPage *, const char*);
 SOAP_FMAC3 struct gapi1__doGetCachedPage * SOAP_FMAC4 soap_get_gapi1__doGetCachedPage(struct soap*, struct gapi1__doGetCachedPage *, const char*, const char*);
@@ -341,10 +335,10 @@
 SOAP_FMAC3 void SOAP_FMAC4 soap_copy_gapi1__doGetCachedPage(struct soap*, int, int, void*, size_t, const void*, size_t);
 
 #ifndef SOAP_TYPE_gapi1__doGetCachedPageResponse
-#define SOAP_TYPE_gapi1__doGetCachedPageResponse (30)
+#define SOAP_TYPE_gapi1__doGetCachedPageResponse (29)
 #endif
-SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPageResponse(struct soap*, const struct gapi1__doGetCachedPageResponse *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_default_gapi1__doGetCachedPageResponse(struct soap*, struct gapi1__doGetCachedPageResponse *);
+SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_gapi1__doGetCachedPageResponse(struct soap*, const struct gapi1__doGetCachedPageResponse *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_gapi1__doGetCachedPageResponse(struct soap*, const struct gapi1__doGetCachedPageResponse *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_gapi1__doGetCachedPageResponse(struct soap*, const char*, int, const struct gapi1__doGetCachedPageResponse *, const char*);
 SOAP_FMAC3 struct gapi1__doGetCachedPageResponse * SOAP_FMAC4 soap_get_gapi1__doGetCachedPageResponse(struct soap*, struct gapi1__doGetCachedPageResponse *, const char*, const char*);
@@ -357,7 +351,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_PointerToSOAP_ENV__Reason
-#define SOAP_TYPE_PointerToSOAP_ENV__Reason (50)
+#define SOAP_TYPE_PointerToSOAP_ENV__Reason (49)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *const*, const char*, const char*);
@@ -370,7 +364,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_PointerToSOAP_ENV__Detail
-#define SOAP_TYPE_PointerToSOAP_ENV__Detail (49)
+#define SOAP_TYPE_PointerToSOAP_ENV__Detail (48)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *const*, const char*, const char*);
@@ -383,7 +377,7 @@
 #ifndef WITH_NOGLOBAL
 
 #ifndef SOAP_TYPE_PointerToSOAP_ENV__Code
-#define SOAP_TYPE_PointerToSOAP_ENV__Code (45)
+#define SOAP_TYPE_PointerToSOAP_ENV__Code (44)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToSOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *const*, const char*, const char*);
@@ -394,7 +388,7 @@
 #endif
 
 #ifndef SOAP_TYPE_PointerTogapi1__GoogleSearchResult
-#define SOAP_TYPE_PointerTogapi1__GoogleSearchResult (37)
+#define SOAP_TYPE_PointerTogapi1__GoogleSearchResult (36)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerTogapi1__GoogleSearchResult(struct soap*, gapi1__GoogleSearchResult *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerTogapi1__GoogleSearchResult(struct soap*, gapi1__GoogleSearchResult *const*, const char*, const char*);
@@ -403,7 +397,7 @@
 SOAP_FMAC3 gapi1__GoogleSearchResult ** SOAP_FMAC4 soap_in_PointerTogapi1__GoogleSearchResult(struct soap*, const char*, gapi1__GoogleSearchResult **, const char*);
 
 #ifndef SOAP_TYPE_PointerToPointerTogapi1__DirectoryCategory
-#define SOAP_TYPE_PointerToPointerTogapi1__DirectoryCategory (27)
+#define SOAP_TYPE_PointerToPointerTogapi1__DirectoryCategory (26)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToPointerTogapi1__DirectoryCategory(struct soap*, gapi1__DirectoryCategory **const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToPointerTogapi1__DirectoryCategory(struct soap*, gapi1__DirectoryCategory **const*, const char*, const char*);
@@ -412,7 +406,7 @@
 SOAP_FMAC3 gapi1__DirectoryCategory *** SOAP_FMAC4 soap_in_PointerToPointerTogapi1__DirectoryCategory(struct soap*, const char*, gapi1__DirectoryCategory ***, const char*);
 
 #ifndef SOAP_TYPE_PointerToPointerTogapi1__ResultElement
-#define SOAP_TYPE_PointerToPointerTogapi1__ResultElement (26)
+#define SOAP_TYPE_PointerToPointerTogapi1__ResultElement (25)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerToPointerTogapi1__ResultElement(struct soap*, gapi1__ResultElement **const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerToPointerTogapi1__ResultElement(struct soap*, gapi1__ResultElement **const*, const char*, const char*);
@@ -421,7 +415,7 @@
 SOAP_FMAC3 gapi1__ResultElement *** SOAP_FMAC4 soap_in_PointerToPointerTogapi1__ResultElement(struct soap*, const char*, gapi1__ResultElement ***, const char*);
 
 #ifndef SOAP_TYPE_PointerTogapi1__ResultElement
-#define SOAP_TYPE_PointerTogapi1__ResultElement (25)
+#define SOAP_TYPE_PointerTogapi1__ResultElement (24)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerTogapi1__ResultElement(struct soap*, gapi1__ResultElement *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerTogapi1__ResultElement(struct soap*, gapi1__ResultElement *const*, const char*, const char*);
@@ -430,7 +424,7 @@
 SOAP_FMAC3 gapi1__ResultElement ** SOAP_FMAC4 soap_in_PointerTogapi1__ResultElement(struct soap*, const char*, gapi1__ResultElement **, const char*);
 
 #ifndef SOAP_TYPE_PointerTogapi1__DirectoryCategory
-#define SOAP_TYPE_PointerTogapi1__DirectoryCategory (24)
+#define SOAP_TYPE_PointerTogapi1__DirectoryCategory (23)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerTogapi1__DirectoryCategory(struct soap*, gapi1__DirectoryCategory *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerTogapi1__DirectoryCategory(struct soap*, gapi1__DirectoryCategory *const*, const char*, const char*);
@@ -439,7 +433,7 @@
 SOAP_FMAC3 gapi1__DirectoryCategory ** SOAP_FMAC4 soap_in_PointerTogapi1__DirectoryCategory(struct soap*, const char*, gapi1__DirectoryCategory **, const char*);
 
 #ifndef SOAP_TYPE_PointerTogapi1DirectoryCategoryArray
-#define SOAP_TYPE_PointerTogapi1DirectoryCategoryArray (22)
+#define SOAP_TYPE_PointerTogapi1DirectoryCategoryArray (21)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerTogapi1DirectoryCategoryArray(struct soap*, gapi1DirectoryCategoryArray *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerTogapi1DirectoryCategoryArray(struct soap*, gapi1DirectoryCategoryArray *const*, const char*, const char*);
@@ -448,7 +442,7 @@
 SOAP_FMAC3 gapi1DirectoryCategoryArray ** SOAP_FMAC4 soap_in_PointerTogapi1DirectoryCategoryArray(struct soap*, const char*, gapi1DirectoryCategoryArray **, const char*);
 
 #ifndef SOAP_TYPE_PointerTogapi1ResultElementArray
-#define SOAP_TYPE_PointerTogapi1ResultElementArray (21)
+#define SOAP_TYPE_PointerTogapi1ResultElementArray (20)
 #endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_PointerTogapi1ResultElementArray(struct soap*, gapi1ResultElementArray *const*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_PointerTogapi1ResultElementArray(struct soap*, gapi1ResultElementArray *const*, const char*, const char*);

Modified: trunk/Search/Google/GAPIStub.h
===================================================================
--- trunk/Search/Google/GAPIStub.h	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GAPIStub.h	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* GAPIStub.h
-   Generated by gSOAP 2.7.8c from GoogleSearch.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from GoogleSearch.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -52,12 +52,12 @@
 };
 #endif
 
-#if 0 /* volatile type: do no redeclare */
+#if 0 /* volatile type: do not redeclare */
 
 #endif
 
 #ifndef SOAP_TYPE_gapi1__GoogleSearchResult
-#define SOAP_TYPE_gapi1__GoogleSearchResult (15)
+#define SOAP_TYPE_gapi1__GoogleSearchResult (13)
 /* gapi1:GoogleSearchResult */
 class SOAP_CMAC gapi1__GoogleSearchResult
 {
@@ -75,7 +75,7 @@
 	double searchTime;	/* required element of type xsd:double */
 	struct soap *soap;	/* transient */
 public:
-	virtual int soap_type() const { return 15; } /* = unique id SOAP_TYPE_gapi1__GoogleSearchResult */
+	virtual int soap_type() const { return 13; } /* = unique id SOAP_TYPE_gapi1__GoogleSearchResult */
 	virtual void soap_default(struct soap*);
 	virtual void soap_serialize(struct soap*) const;
 	virtual int soap_put(struct soap*, const char*, const char*) const;
@@ -88,7 +88,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__ResultElement
-#define SOAP_TYPE_gapi1__ResultElement (16)
+#define SOAP_TYPE_gapi1__ResultElement (14)
 /* gapi1:ResultElement */
 class SOAP_CMAC gapi1__ResultElement
 {
@@ -104,7 +104,7 @@
 	std::string directoryTitle;	/* required element of type xsd:string */
 	struct soap *soap;	/* transient */
 public:
-	virtual int soap_type() const { return 16; } /* = unique id SOAP_TYPE_gapi1__ResultElement */
+	virtual int soap_type() const { return 14; } /* = unique id SOAP_TYPE_gapi1__ResultElement */
 	virtual void soap_default(struct soap*);
 	virtual void soap_serialize(struct soap*) const;
 	virtual int soap_put(struct soap*, const char*, const char*) const;
@@ -117,7 +117,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__DirectoryCategory
-#define SOAP_TYPE_gapi1__DirectoryCategory (19)
+#define SOAP_TYPE_gapi1__DirectoryCategory (17)
 /* gapi1:DirectoryCategory */
 class SOAP_CMAC gapi1__DirectoryCategory
 {
@@ -126,7 +126,7 @@
 	std::string specialEncoding;	/* required element of type xsd:string */
 	struct soap *soap;	/* transient */
 public:
-	virtual int soap_type() const { return 19; } /* = unique id SOAP_TYPE_gapi1__DirectoryCategory */
+	virtual int soap_type() const { return 17; } /* = unique id SOAP_TYPE_gapi1__DirectoryCategory */
 	virtual void soap_default(struct soap*);
 	virtual void soap_serialize(struct soap*) const;
 	virtual int soap_put(struct soap*, const char*, const char*) const;
@@ -139,7 +139,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1ResultElementArray
-#define SOAP_TYPE_gapi1ResultElementArray (17)
+#define SOAP_TYPE_gapi1ResultElementArray (15)
 /* SOAP encoded array of gapi1:ResultElement schema type: */
 class SOAP_CMAC gapi1ResultElementArray
 {
@@ -148,7 +148,7 @@
 	int __size;
 	struct soap *soap;	/* transient */
 public:
-	virtual int soap_type() const { return 17; } /* = unique id SOAP_TYPE_gapi1ResultElementArray */
+	virtual int soap_type() const { return 15; } /* = unique id SOAP_TYPE_gapi1ResultElementArray */
 	virtual void soap_default(struct soap*);
 	virtual void soap_serialize(struct soap*) const;
 	virtual int soap_put(struct soap*, const char*, const char*) const;
@@ -161,7 +161,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1DirectoryCategoryArray
-#define SOAP_TYPE_gapi1DirectoryCategoryArray (18)
+#define SOAP_TYPE_gapi1DirectoryCategoryArray (16)
 /* SOAP encoded array of gapi1:DirectoryCategory schema type: */
 class SOAP_CMAC gapi1DirectoryCategoryArray
 {
@@ -170,7 +170,7 @@
 	int __size;
 	struct soap *soap;	/* transient */
 public:
-	virtual int soap_type() const { return 18; } /* = unique id SOAP_TYPE_gapi1DirectoryCategoryArray */
+	virtual int soap_type() const { return 16; } /* = unique id SOAP_TYPE_gapi1DirectoryCategoryArray */
 	virtual void soap_default(struct soap*);
 	virtual void soap_serialize(struct soap*) const;
 	virtual int soap_put(struct soap*, const char*, const char*) const;
@@ -183,7 +183,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doGetCachedPageResponse
-#define SOAP_TYPE_gapi1__doGetCachedPageResponse (30)
+#define SOAP_TYPE_gapi1__doGetCachedPageResponse (29)
 /* gapi1:doGetCachedPageResponse */
 struct gapi1__doGetCachedPageResponse
 {
@@ -193,7 +193,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doGetCachedPage
-#define SOAP_TYPE_gapi1__doGetCachedPage (31)
+#define SOAP_TYPE_gapi1__doGetCachedPage (30)
 /* gapi1:doGetCachedPage */
 struct gapi1__doGetCachedPage
 {
@@ -204,7 +204,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doSpellingSuggestionResponse
-#define SOAP_TYPE_gapi1__doSpellingSuggestionResponse (34)
+#define SOAP_TYPE_gapi1__doSpellingSuggestionResponse (33)
 /* gapi1:doSpellingSuggestionResponse */
 struct gapi1__doSpellingSuggestionResponse
 {
@@ -214,7 +214,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doSpellingSuggestion
-#define SOAP_TYPE_gapi1__doSpellingSuggestion (35)
+#define SOAP_TYPE_gapi1__doSpellingSuggestion (34)
 /* gapi1:doSpellingSuggestion */
 struct gapi1__doSpellingSuggestion
 {
@@ -225,7 +225,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doGoogleSearchResponse
-#define SOAP_TYPE_gapi1__doGoogleSearchResponse (36)
+#define SOAP_TYPE_gapi1__doGoogleSearchResponse (35)
 /* gapi1:doGoogleSearchResponse */
 struct gapi1__doGoogleSearchResponse
 {
@@ -235,7 +235,7 @@
 #endif
 
 #ifndef SOAP_TYPE_gapi1__doGoogleSearch
-#define SOAP_TYPE_gapi1__doGoogleSearch (40)
+#define SOAP_TYPE_gapi1__doGoogleSearch (39)
 /* gapi1:doGoogleSearch */
 struct gapi1__doGoogleSearch
 {
@@ -254,7 +254,7 @@
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Header
-#define SOAP_TYPE_SOAP_ENV__Header (43)
+#define SOAP_TYPE_SOAP_ENV__Header (42)
 /* SOAP Header: */
 struct SOAP_ENV__Header
 {
@@ -264,18 +264,18 @@
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Code
-#define SOAP_TYPE_SOAP_ENV__Code (44)
+#define SOAP_TYPE_SOAP_ENV__Code (43)
 /* SOAP Fault Code: */
 struct SOAP_ENV__Code
 {
 public:
-	char *SOAP_ENV__Value;	/* optional element of type QName */
+	char *SOAP_ENV__Value;	/* optional element of type xsd:QName */
 	struct SOAP_ENV__Code *SOAP_ENV__Subcode;	/* optional element of type SOAP-ENV:Code */
 };
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Detail
-#define SOAP_TYPE_SOAP_ENV__Detail (46)
+#define SOAP_TYPE_SOAP_ENV__Detail (45)
 /* SOAP-ENV:Detail */
 struct SOAP_ENV__Detail
 {
@@ -287,7 +287,7 @@
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Reason
-#define SOAP_TYPE_SOAP_ENV__Reason (47)
+#define SOAP_TYPE_SOAP_ENV__Reason (46)
 /* SOAP-ENV:Reason */
 struct SOAP_ENV__Reason
 {
@@ -297,12 +297,12 @@
 #endif
 
 #ifndef SOAP_TYPE_SOAP_ENV__Fault
-#define SOAP_TYPE_SOAP_ENV__Fault (48)
+#define SOAP_TYPE_SOAP_ENV__Fault (47)
 /* SOAP Fault: */
 struct SOAP_ENV__Fault
 {
 public:
-	char *faultcode;	/* optional element of type QName */
+	char *faultcode;	/* optional element of type xsd:QName */
 	char *faultstring;	/* optional element of type xsd:string */
 	char *faultactor;	/* optional element of type xsd:string */
 	struct SOAP_ENV__Detail *detail;	/* optional element of type SOAP-ENV:Detail */
@@ -337,12 +337,7 @@
 typedef char *_QName;
 #endif
 
-#ifndef SOAP_TYPE__SOAP_ENC__arrayType
-#define SOAP_TYPE__SOAP_ENC__arrayType (14)
-typedef std::string _SOAP_ENC__arrayType;
-#endif
 
-
 /******************************************************************************\
  *                                                                            *
  * Typedef Synonyms                                                           *

Modified: trunk/Search/Google/GoogleSearch.h
===================================================================
--- trunk/Search/Google/GoogleSearch.h	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/Google/GoogleSearch.h	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* GoogleSearch.h
-   Generated by wsdl2h 1.2.8c from googleapi/GoogleSearch.wsdl and typemap.dat
-   2006-11-22 12:29:42 GMT
+   Generated by wsdl2h 1.2.9e from googleapi/GoogleSearch.wsdl and typemap.dat
+   2007-07-29 10:33:46 GMT
    Copyright (C) 2001-2006 Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL or Genivia's license for commercial use.
@@ -38,6 +38,8 @@
  *                                                                            *
 \******************************************************************************/
 
+
+// STL vector containers (use option -s to disable)
 #import "stlvector.h"
 
 /******************************************************************************\
@@ -75,10 +77,7 @@
 	struct soap *soap;
 };
 
-/// Built-in attribute "SOAP-ENC:arrayType".
-typedef std::string _SOAP_ENC__arrayType;
 
-
 //  Forward declaration of class gapi1__GoogleSearchResult.
 class gapi1__GoogleSearchResult;
 
@@ -219,6 +218,8 @@
 @section GoogleSearchBinding_ports Endpoints of Binding  "GoogleSearchBinding"
   - http://api.google.com/search/beta2
 
+Note: use wsdl2h option -N to change the service binding prefix name
+
 */
 
 /******************************************************************************\
@@ -244,9 +245,10 @@
   - SOAP RPC encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
   - SOAP action="urn:GoogleSearchAction"
 
-C stub function (defined in soapClient.c[pp] after running soapcpp2):
+C stub function (defined in soapClient.c[pp] generated by soapcpp2):
 @code
-  int soap_call_gapi1__doGetCachedPage(struct soap *soap,
+  int soap_call_gapi1__doGetCachedPage(
+    struct soap *soap,
     NULL, // char *endpoint = NULL selects default endpoint for this operation
     NULL, // char *action = NULL selects default action for this operation
     // request parameters:
@@ -257,6 +259,18 @@
   );
 @endcode
 
+C server function (called from the service dispatcher defined in soapServer.c[pp]):
+ at code
+  int gapi1__doGetCachedPage(
+    struct soap *soap,
+    // request parameters:
+    std::string                         key,
+    std::string                         url,
+    // response parameters:
+    xsd__base64Binary                  &return_
+  );
+ at endcode
+
 C++ proxy class (defined in soapGoogleSearchBindingProxy.h):
   class GoogleSearchBinding;
 
@@ -287,9 +301,10 @@
   - SOAP RPC encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
   - SOAP action="urn:GoogleSearchAction"
 
-C stub function (defined in soapClient.c[pp] after running soapcpp2):
+C stub function (defined in soapClient.c[pp] generated by soapcpp2):
 @code
-  int soap_call_gapi1__doSpellingSuggestion(struct soap *soap,
+  int soap_call_gapi1__doSpellingSuggestion(
+    struct soap *soap,
     NULL, // char *endpoint = NULL selects default endpoint for this operation
     NULL, // char *action = NULL selects default action for this operation
     // request parameters:
@@ -300,6 +315,18 @@
   );
 @endcode
 
+C server function (called from the service dispatcher defined in soapServer.c[pp]):
+ at code
+  int gapi1__doSpellingSuggestion(
+    struct soap *soap,
+    // request parameters:
+    std::string                         key,
+    std::string                         phrase,
+    // response parameters:
+    std::string                        &return_
+  );
+ at endcode
+
 C++ proxy class (defined in soapGoogleSearchBindingProxy.h):
   class GoogleSearchBinding;
 
@@ -335,9 +362,10 @@
   - SOAP RPC encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
   - SOAP action="urn:GoogleSearchAction"
 
-C stub function (defined in soapClient.c[pp] after running soapcpp2):
+C stub function (defined in soapClient.c[pp] generated by soapcpp2):
 @code
-  int soap_call_gapi1__doGoogleSearch(struct soap *soap,
+  int soap_call_gapi1__doGoogleSearch(
+    struct soap *soap,
     NULL, // char *endpoint = NULL selects default endpoint for this operation
     NULL, // char *action = NULL selects default action for this operation
     // request parameters:
@@ -356,6 +384,26 @@
   );
 @endcode
 
+C server function (called from the service dispatcher defined in soapServer.c[pp]):
+ at code
+  int gapi1__doGoogleSearch(
+    struct soap *soap,
+    // request parameters:
+    std::string                         key,
+    std::string                         q,
+    int                                 start,
+    int                                 maxResults,
+    bool                                filter,
+    std::string                         restrict_,
+    bool                                safeSearch,
+    std::string                         lr,
+    std::string                         ie,
+    std::string                         oe,
+    // response parameters:
+    struct gapi1__doGoogleSearchResponse&
+  );
+ at endcode
+
 C++ proxy class (defined in soapGoogleSearchBindingProxy.h):
   class GoogleSearchBinding;
 

Modified: trunk/Search/SOAPEnvH.h
===================================================================
--- trunk/Search/SOAPEnvH.h	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/SOAPEnvH.h	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* SOAPEnvH.h
-   Generated by gSOAP 2.7.8c from SOAPEnv.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from SOAPEnv.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -8,17 +8,25 @@
 #ifndef SOAPEnvH_H
 #define SOAPEnvH_H
 #include "SOAPEnvStub.h"
-SOAP_FMAC3 int SOAP_FMAC4 soap_ignore_element(struct soap*);
 #ifndef WITH_NOIDREF
-SOAP_FMAC3 int SOAP_FMAC4 soap_putindependent(struct soap*);
-SOAP_FMAC3 int SOAP_FMAC4 soap_getindependent(struct soap*);
+
+#ifdef __cplusplus
+extern "C" {
+#endif
 SOAP_FMAC3 void SOAP_FMAC4 soap_markelement(struct soap*, const void*, int);
 SOAP_FMAC3 int SOAP_FMAC4 soap_putelement(struct soap*, const void*, const char*, int, int);
-SOAP_FMAC3 void * SOAP_FMAC4 soap_getelement(struct soap*, int*);
+SOAP_FMAC3 void *SOAP_FMAC4 soap_getelement(struct soap*, int*);
+
+#ifdef __cplusplus
+}
 #endif
+SOAP_FMAC3 int SOAP_FMAC4 soap_putindependent(struct soap*);
+SOAP_FMAC3 int SOAP_FMAC4 soap_getindependent(struct soap*);
+#endif
+SOAP_FMAC3 int SOAP_FMAC4 soap_ignore_element(struct soap*);
 
 SOAP_FMAC3 void * SOAP_FMAC4 soap_instantiate(struct soap*, int, const char*, const char*, size_t*);
-SOAP_FMAC3 void SOAP_FMAC4 soap_fdelete(struct soap_clist*);
+SOAP_FMAC3 int SOAP_FMAC4 soap_fdelete(struct soap_clist*);
 SOAP_FMAC3 void* SOAP_FMAC4 soap_class_id_enter(struct soap*, const char*, void*, int, size_t, const char*, const char*);
 
 #ifndef SOAP_TYPE_byte
@@ -44,8 +52,8 @@
 #ifndef SOAP_TYPE_SOAP_ENV__Fault
 #define SOAP_TYPE_SOAP_ENV__Fault (13)
 #endif
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Fault(struct soap*, const struct SOAP_ENV__Fault *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Fault(struct soap*, const char*, int, const struct SOAP_ENV__Fault *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Fault * SOAP_FMAC4 soap_get_SOAP_ENV__Fault(struct soap*, struct SOAP_ENV__Fault *, const char*, const char*);
@@ -62,8 +70,8 @@
 #ifndef SOAP_TYPE_SOAP_ENV__Reason
 #define SOAP_TYPE_SOAP_ENV__Reason (12)
 #endif
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Reason(struct soap*, const struct SOAP_ENV__Reason *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Reason(struct soap*, const char*, int, const struct SOAP_ENV__Reason *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Reason * SOAP_FMAC4 soap_get_SOAP_ENV__Reason(struct soap*, struct SOAP_ENV__Reason *, const char*, const char*);
@@ -80,8 +88,8 @@
 #ifndef SOAP_TYPE_SOAP_ENV__Detail
 #define SOAP_TYPE_SOAP_ENV__Detail (11)
 #endif
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Detail(struct soap*, const struct SOAP_ENV__Detail *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Detail(struct soap*, const char*, int, const struct SOAP_ENV__Detail *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Detail * SOAP_FMAC4 soap_get_SOAP_ENV__Detail(struct soap*, struct SOAP_ENV__Detail *, const char*, const char*);
@@ -98,8 +106,8 @@
 #ifndef SOAP_TYPE_SOAP_ENV__Code
 #define SOAP_TYPE_SOAP_ENV__Code (9)
 #endif
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Code(struct soap*, const struct SOAP_ENV__Code *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Code(struct soap*, const char*, int, const struct SOAP_ENV__Code *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Code * SOAP_FMAC4 soap_get_SOAP_ENV__Code(struct soap*, struct SOAP_ENV__Code *, const char*, const char*);
@@ -116,8 +124,8 @@
 #ifndef SOAP_TYPE_SOAP_ENV__Header
 #define SOAP_TYPE_SOAP_ENV__Header (8)
 #endif
+SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *);
 SOAP_FMAC3 void SOAP_FMAC4 soap_serialize_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *);
-SOAP_FMAC3 void SOAP_FMAC4 soap_default_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *);
 SOAP_FMAC3 int SOAP_FMAC4 soap_put_SOAP_ENV__Header(struct soap*, const struct SOAP_ENV__Header *, const char*, const char*);
 SOAP_FMAC3 int SOAP_FMAC4 soap_out_SOAP_ENV__Header(struct soap*, const char*, int, const struct SOAP_ENV__Header *, const char*);
 SOAP_FMAC3 struct SOAP_ENV__Header * SOAP_FMAC4 soap_get_SOAP_ENV__Header(struct soap*, struct SOAP_ENV__Header *, const char*, const char*);

Modified: trunk/Search/SOAPEnvStub.h
===================================================================
--- trunk/Search/SOAPEnvStub.h	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/SOAPEnvStub.h	2007-08-03 17:34:12 UTC (rev 900)
@@ -1,6 +1,6 @@
 /* SOAPEnvStub.h
-   Generated by gSOAP 2.7.8c from SOAPEnv.h
-   Copyright (C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
+   Generated by gSOAP 2.7.9e from SOAPEnv.h
+   Copyright(C) 2000-2006, Robert van Engelen, Genivia Inc. All Rights Reserved.
    This part of the software is released under one of the following licenses:
    GPL, the gSOAP public license, or Genivia's license for commercial use.
 */
@@ -39,7 +39,7 @@
 struct SOAP_ENV__Code
 {
 public:
-	char *SOAP_ENV__Value;	/* optional element of type QName */
+	char *SOAP_ENV__Value;	/* optional element of type xsd:QName */
 	struct SOAP_ENV__Code *SOAP_ENV__Subcode;	/* optional element of type SOAP-ENV:Code */
 };
 #endif
@@ -72,7 +72,7 @@
 struct SOAP_ENV__Fault
 {
 public:
-	char *faultcode;	/* optional element of type QName */
+	char *faultcode;	/* optional element of type xsd:QName */
 	char *faultstring;	/* optional element of type xsd:string */
 	char *faultactor;	/* optional element of type xsd:string */
 	struct SOAP_ENV__Detail *detail;	/* optional element of type SOAP-ENV:Detail */

Modified: trunk/Search/pinot-search.cpp
===================================================================
--- trunk/Search/pinot-search.cpp	2007-08-03 14:52:01 UTC (rev 899)
+++ trunk/Search/pinot-search.cpp	2007-08-03 17:34:12 UTC (rev 900)
@@ -101,7 +101,7 @@
 	}
 	cout << "\n\nExamples:\n"
 #ifdef HAVE_GOOGLEAPI
-		<< "pinot-search googleapi mygoogleapikey \"clowns\" 10\n\n"
+		<< "pinot-search googleapi mygoogleapikey \"clowns\"\n\n"
 #endif
 		<< "pinot-search opensearch " << PREFIX << "/share/pinot/engines/KrustyDescription.xml \"clowns\"\n\n"
 		<< "pinot-search --max 20 sherlock " << PREFIX << "/share/pinot/engines/Bozo.src \"clowns\"\n\n"



From fabricecolin at mail.berlios.de  Sat Aug  4 06:43:45 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 4 Aug 2007 06:43:45 +0200
Subject: [Pinot-svn] r902 - trunk/UI/GTK2/src
Message-ID: <200708040443.l744hjqQ004926@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-04 06:43:43 +0200 (Sat, 04 Aug 2007)
New Revision: 902

Modified:
   trunk/UI/GTK2/src/importDialog.cc
Log:
Clear the progress bar's text when importing.


Modified: trunk/UI/GTK2/src/importDialog.cc
===================================================================
--- trunk/UI/GTK2/src/importDialog.cc	2007-08-03 17:53:16 UTC (rev 901)
+++ trunk/UI/GTK2/src/importDialog.cc	2007-08-04 04:43:43 UTC (rev 902)
@@ -219,6 +219,7 @@
 	}
 	m_state.m_importing = true;
 
+	importProgressbar->set_text("");
 	importProgressbar->set_fraction(0.0);
 	// Disable the import button
 	importButton->set_sensitive(false);



From fabricecolin at mail.berlios.de  Sat Aug  4 07:24:12 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 4 Aug 2007 07:24:12 +0200
Subject: [Pinot-svn] r903 - in trunk: Index UI/GTK2/src
Message-ID: <200708040524.l745OC4P031297@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-04 07:24:05 +0200 (Sat, 04 Aug 2007)
New Revision: 903

Modified:
   trunk/Index/DBusXapianIndex.cpp
   trunk/Index/DBusXapianIndex.h
   trunk/Index/FilterWrapper.cpp
   trunk/Index/IndexInterface.h
   trunk/Index/XapianIndex.cpp
   trunk/Index/XapianIndex.h
   trunk/Index/pinot-index.cpp
   trunk/UI/GTK2/src/OnDiskHandler.cpp
   trunk/UI/GTK2/src/WorkerThreads.cpp
Log:
Replaced our naive Tokenizer class with Xapian 1.0 TermGenerator.
When removing common terms, make sure we remove as much as necessary and not
just the very first posting.
Dropped method setStemmingMode().


Modified: trunk/Index/DBusXapianIndex.cpp
===================================================================
--- trunk/Index/DBusXapianIndex.cpp	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/DBusXapianIndex.cpp	2007-08-04 05:24:05 UTC (rev 903)
@@ -432,7 +432,7 @@
 }
 
 /// Indexes the given data.
-bool DBusXapianIndex::indexDocument(Tokenizer &tokens, const set<string> &labels,
+bool DBusXapianIndex::indexDocument(const Document &doc, const set<string> &labels,
 	unsigned int &docId)
 {
 	cerr << "DBusXapianIndex::indexDocument: not allowed" << endl;
@@ -440,7 +440,7 @@
 }
 
 /// Updates the given document; true if success.
-bool DBusXapianIndex::updateDocument(unsigned int docId, Tokenizer &tokens)
+bool DBusXapianIndex::updateDocument(unsigned int docId, const Document &doc)
 {
 	bool updated = false;
 

Modified: trunk/Index/DBusXapianIndex.h
===================================================================
--- trunk/Index/DBusXapianIndex.h	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/DBusXapianIndex.h	2007-08-04 05:24:05 UTC (rev 903)
@@ -89,11 +89,11 @@
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
 		/// Indexes the given data.
-		virtual bool indexDocument(Tokenizer &tokens, const std::set<std::string> &labels,
+		virtual bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId);
 
 		/// Updates the given document.
-		virtual bool updateDocument(unsigned int docId, Tokenizer &tokens);
+		virtual bool updateDocument(unsigned int docId, const Document &doc);
 
 		/// Updates a document's properties.
 		virtual bool updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo);

Modified: trunk/Index/FilterWrapper.cpp
===================================================================
--- trunk/Index/FilterWrapper.cpp	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/FilterWrapper.cpp	2007-08-04 05:24:05 UTC (rev 903)
@@ -156,20 +156,18 @@
 			// No, it's been reduced to plain text
 			filteredDoc.setType(actualType);
 
-			Tokenizer tokens(&filteredDoc);
-
 			// Nested documents can't be updated because they are unindexed
 			// and the ID is that of the base document anyway
 			if ((doUpdate == true) &&
 				(isNested == false))
 			{
-				docSuccess = m_pIndex->updateDocument(docId, tokens);
+				docSuccess = m_pIndex->updateDocument(docId, filteredDoc);
 			}
 			else
 			{
 				unsigned int newDocId = docId;
 
-				docSuccess = m_pIndex->indexDocument(tokens, labels, newDocId);
+				docSuccess = m_pIndex->indexDocument(filteredDoc, labels, newDocId);
 				// Make sure we return the base document's ID, not the last nested document's ID
 				if (isNested == false)
 				{

Modified: trunk/Index/IndexInterface.h
===================================================================
--- trunk/Index/IndexInterface.h	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/IndexInterface.h	2007-08-04 05:24:05 UTC (rev 903)
@@ -22,25 +22,15 @@
 #include <string>
 #include <set>
 
-#include "Tokenizer.h"
-#include "DocumentInfo.h"
+#include "Document.h"
 
 /// Interface implemented by indexes.
 class IndexInterface
 {
 	public:
-		IndexInterface(const IndexInterface &other) :
-			m_stemMode(other.m_stemMode) {};
+		IndexInterface(const IndexInterface &other) {};
 		virtual ~IndexInterface() {};
 
-		IndexInterface &operator=(const IndexInterface &other)
-		{
-			m_stemMode = other.m_stemMode;
-			return *this;
-		};
-
-		typedef enum { STORE_UNSTEM = 0, STORE_STEM, STORE_BOTH } StemmingMode;
-
 		/// Returns false if the index couldn't be opened.
 		virtual bool isGood(void) const = 0;
 
@@ -89,15 +79,12 @@
 		virtual bool listDocumentsInDirectory(const std::string &dirName, std::set<unsigned int> &docIds,
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const = 0;
 
-		/// Sets the stemming mode.
-		virtual void setStemmingMode(StemmingMode mode) { m_stemMode = mode; }
-
 		/// Indexes the given data.
-		virtual bool indexDocument(Tokenizer &tokens, const std::set<std::string> &labels,
+		virtual bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId) = 0;
 
 		/// Updates the given document.
-		virtual bool updateDocument(unsigned int docId, Tokenizer &tokens) = 0;
+		virtual bool updateDocument(unsigned int docId, const Document &doc) = 0;
 
 		/// Updates a document's properties.
 		virtual bool updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo) = 0;
@@ -134,8 +121,6 @@
 		virtual bool flush(void) = 0;
 
 	protected:
-		StemmingMode m_stemMode;
-
 		IndexInterface() { };
 
 };

Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/XapianIndex.cpp	2007-08-04 05:24:05 UTC (rev 903)
@@ -52,28 +52,6 @@
 
 const string XapianIndex::MAGIC_TERM = "X-MetaSE-Doc";
 
-static void removeFirstPosting(Xapian::Document &doc,
-	Xapian::TermIterator &termListIter, const string &term)
-{
-	termListIter.skip_to(term);
-
-	Xapian::PositionIterator firstPosIter = termListIter.positionlist_begin();
-	if (firstPosIter != termListIter.positionlist_end())
-	{
-		try
-		{
-			doc.remove_posting(term, *firstPosIter);
-		}
-		catch (const Xapian::Error &error)
-		{
-			// This posting may have been removed already
-#ifdef DEBUG
-			cout << "XapianIndex::removeFirstPosting: " << error.get_msg() << endl;
-#endif
-		}
-	}
-}
-
 XapianIndex::XapianIndex(const string &indexName) :
 	IndexInterface(),
 	m_databaseName(indexName),
@@ -164,15 +142,15 @@
 	return docIds.size();
 }
 
-void XapianIndex::addPostingsToDocument(Tokenizer &tokens, Xapian::Document &doc,
-	const string &prefix, Xapian::termcount &termPos, StemmingMode mode) const
+void XapianIndex::addPostingsToDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
+	const string &prefix, Xapian::termcount &termPos, bool noStemming) const
 {
 	Xapian::Stem *pStemmer = NULL;
-	string stemPrefix("Z");
-	string term;
+	Xapian::TermGenerator generator;
 
 	// Do we know what language to use for stemming ?
-	if (m_stemLanguage.empty() == false)
+	if ((noStemming == false) &&
+		(m_stemLanguage.empty() == false))
 	{
 		try
 		{
@@ -182,78 +160,35 @@
 		{
 			cerr << "Couldn't create stemmer: " << error.get_type() << ": " << error.get_msg() << endl;
 		}
-	}
 
-	// Stems are Z-prefixed, unless a prefix is already defined
-	if (prefix.empty() == false)
-	{
-		stemPrefix = prefix;
-	}
-
-	// Get the terms
-	while (tokens.nextToken(term) == true)
-	{
-		bool addStem = false;
-
-		if (term.empty() == true)
+		if (pStemmer != NULL)
 		{
-			continue;
+			generator.set_stemmer(*pStemmer);
 		}
-		// Lower case the term
-		term = StringManip::toLowerCase(term);
-
-		// Stem the term ?
-		if ((mode == STORE_UNSTEM) ||
-			(pStemmer == NULL))
-		{
-			doc.add_posting(prefix + XapianDatabase::limitTermLength(term), termPos);
-		}
-		else if (mode == STORE_STEM)
-		{
-			addStem = true;
-		}
-		else if (mode == STORE_BOTH)
-		{
-			// Add both
-			doc.add_posting(prefix + XapianDatabase::limitTermLength(term), termPos);
-			addStem = true;
-		}
-
-		// Don't stem if the term starts with a digit
-		if ((addStem == true) &&
-			(isdigit((int)term[0]) == 0))
-		{
-#if XAPIAN_MAJOR_VERSION==0
-			string stemmedTerm(pStemmer->stem_word(term));
-#else
-			string stemmedTerm((*pStemmer)(term));
-#endif
-
-			doc.add_term(stemPrefix + XapianDatabase::limitTermLength(stemmedTerm));
-		}
-
-		++termPos;
 	}
-#ifdef DEBUG
-	cout << "XapianIndex::addPostingsToDocument: added " << termPos << " terms" << endl;
-#endif
 
+	generator.set_document(doc);
+	generator.index_text(itor, 1, prefix);
+	termPos = generator.get_termpos();
+
 	if (pStemmer != NULL)
 	{
 		delete pStemmer;
 	}
 }
 
-void XapianIndex::removeFirstPostingsFromDocument(Tokenizer &tokens, Xapian::Document &doc,
-	const string &prefix, const string &language, StemmingMode mode) const
+void XapianIndex::removePostingsFromDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
+	const string &prefix, const string &language, bool noStemming) const
 {
-	Xapian::TermIterator termListIter = doc.termlist_begin();
+	Xapian::Document termsDoc;
+	Xapian::TermGenerator generator;
 	Xapian::Stem *pStemmer = NULL;
 	string stemPrefix("Z");
 	string term;
 
 	// Do we know what language to use for stemming ?
-	if (language.empty() == false)
+	if ((noStemming == false) &&
+		(language.empty() == false))
 	{
 		try
 		{
@@ -263,58 +198,102 @@
 		{
 			cerr << "Couldn't create stemmer: " << error.get_type() << ": " << error.get_msg() << endl;
 		}
-	}
 
-	// Stems are Z-prefixed, unless a prefix is already defined
-	if (prefix.empty() == false)
-	{
-		stemPrefix = prefix;
+		if (pStemmer != NULL)
+		{
+			generator.set_stemmer(*pStemmer);
+		}
 	}
 
+	generator.set_document(termsDoc);
+	generator.index_text(itor, 1, prefix);
+
 	// Get the terms and remove the first posting for each
-	while (tokens.nextToken(term) == true)
+	for (Xapian::TermIterator termListIter = termsDoc.termlist_begin();
+		termListIter != termsDoc.termlist_end(); ++termListIter)
 	{
-		bool removeStem = false;
+		Xapian::termcount postingsCount = termListIter.positionlist_count();
+		Xapian::termcount postingNum = 0;
+		bool removeTerm = false;
 
-		if (term.empty() == true)
+#ifdef DEBUG
+		cout << "XapianIndex::removePostingsFromDocument: term " << *termListIter
+			<< " has " << postingsCount << " postings" << endl;
+#endif
+		// If a prefix is defined, or there are no postings, we can afford removing the term
+		if ((prefix.empty() == false) ||
+			(postingsCount == 0))
 		{
-			continue;
+			removeTerm = true;
 		}
-		// Lower case the term
-		term = StringManip::toLowerCase(term);
-
-		// Stem the term ?
-		if ((mode == STORE_UNSTEM) ||
-			(pStemmer == NULL))
+		else
 		{
-			removeFirstPosting(doc, termListIter, prefix + XapianDatabase::limitTermLength(term));
+			// Check whether this term is in the original document and how many postings it has
+			Xapian::TermIterator termIter = doc.termlist_begin();
+			if (termIter != doc.termlist_end())
+			{
+				termIter.skip_to(*termListIter);
+				if (termIter != doc.termlist_end())
+				{
+					if (*termIter != *termListIter)
+					{
+						// This term doesn't exist in the document !
+#ifdef DEBUG
+						cout << "XapianIndex::removePostingsFromDocument: no such term" << endl;
+#endif
+						continue;
+					}
+
+					if (termIter.positionlist_count() <= postingsCount)
+					{
+						// All postings are to be removed, so we can remove the term
+#ifdef DEBUG
+						cout << "XapianIndex::removePostingsFromDocument: no extra posting" << endl;
+#endif
+						removeTerm = true;
+					}
+				}
+			}
 		}
-		else if (mode == STORE_STEM)
+
+		if (removeTerm == true)
 		{
-			removeStem = true;
+			try
+			{
+				doc.remove_term(*termListIter);
+			}
+			catch (const Xapian::Error &error)
+			{
+#ifdef DEBUG
+				cout << "XapianIndex::removePostingsFromDocument: " << error.get_msg() << endl;
+#endif
+			}
+			continue;
 		}
-		else if (mode == STORE_BOTH)
-		{
-			// Remove both
-			removeFirstPosting(doc, termListIter, prefix + XapianDatabase::limitTermLength(term));
-			removeStem = true;
-		}
 
-		// Since stems don't have positional information, we can't simply remove them 
-		// since any may appear more than once in the original document
-		// We can only remove those that have some prefix set
-		// Don't stem if the term starts with a digit
-		if ((removeStem == true) &&
-			(prefix.empty() == false) &&
-			(isdigit((int)term[0]) == 0))
+		// Otherwise, remove the first N postings
+		// FIXME: if all the postings are in the range associated with the metadata
+		// as opposed to the actual data, the term can be removed altogether
+		for (Xapian::PositionIterator firstPosIter = termListIter.positionlist_begin();
+			firstPosIter != termListIter.positionlist_end(); ++firstPosIter)
 		{
-#if XAPIAN_MAJOR_VERSION==0
-			string stemmedTerm(pStemmer->stem_word(term));
-#else
-			string stemmedTerm((*pStemmer)(term));
-#endif
+			if (postingNum >= postingsCount)
+			{
+				break;
+			}
+			++postingNum;
 
-			doc.remove_term(stemPrefix + XapianDatabase::limitTermLength(stemmedTerm));
+			try
+			{
+				doc.remove_posting(*termListIter, *firstPosIter);
+			}
+			catch (const Xapian::Error &error)
+			{
+				// This posting may have been removed already
+#ifdef DEBUG
+				cout << "XapianIndex::removePostingsFromDocument: " << error.get_msg() << endl;
+#endif
+			}
 		}
 	}
 
@@ -337,12 +316,11 @@
 	// Index the title with and without prefix S
 	if (title.empty() == false)
 	{
-		Document titleDoc;
-		titleDoc.setData(title.c_str(), title.length());
-		Tokenizer titleTokens(&titleDoc);
-		addPostingsToDocument(titleTokens, doc, "S", termPos, STORE_UNSTEM);
-		titleTokens.rewind();
-		addPostingsToDocument(titleTokens, doc, "", termPos, m_stemMode);
+#ifdef DEBUG
+		cout << "XapianIndex::addCommonTerms: adding " << title << endl;
+#endif
+		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, "S", termPos, true);
+		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, "", termPos, false);
 	}
 
 	// Index the full URL with prefix U
@@ -463,12 +441,11 @@
 	string title(docInfo.getTitle());
 	if (title.empty() == false)
 	{
-		Document titleDoc;
-		titleDoc.setData(title.c_str(), title.length());
-		Tokenizer titleTokens(&titleDoc);
-		removeFirstPostingsFromDocument(titleTokens, doc, "S", language, STORE_UNSTEM);
-		titleTokens.rewind();
-		removeFirstPostingsFromDocument(titleTokens, doc, "", language, m_stemMode);
+#ifdef DEBUG
+		cout << "XapianIndex::removeCommonTerms: removing " << title << endl;
+#endif
+		removePostingsFromDocument(Xapian::Utf8Iterator(title), doc, "S", language, true);
+		removePostingsFromDocument(Xapian::Utf8Iterator(title), doc, "", language, false);
 	}
 
 	// Location 
@@ -996,6 +973,9 @@
 					if (suggestedTerm.find(baseTerm) != 0)
 					{
 						// This term doesn't have the same root
+#ifdef DEBUG
+						cout << "XapianIndex::getCloseTerms: not the same root" << endl;
+#endif
 						break;
 					}
 
@@ -1125,10 +1105,9 @@
 }
 
 /// Indexes the given data.
-bool XapianIndex::indexDocument(Tokenizer &tokens, const std::set<std::string> &labels,
+bool XapianIndex::indexDocument(const Document &document, const std::set<std::string> &labels,
 	unsigned int &docId)
 {
-	unsigned int dataLength = 0;
 	bool indexed = false;
 
 	XapianDatabase *pDatabase = XapianDatabaseFactory::getDatabase(m_databaseName, false);
@@ -1138,44 +1117,46 @@
 		return false;
 	}
 
+	// Cache the document's properties
+	DocumentInfo docInfo(document.getTitle(), document.getLocation(),
+		document.getType(), document.getLanguage());
+	docInfo.setTimestamp(document.getTimestamp());
+	docInfo.setSize(document.getSize());
+	docInfo.setLocation(Url::canonicalizeUrl(docInfo.getLocation()));
+
+	unsigned int dataLength = 0;
+	const char *pData = document.getData(dataLength);
+
+	if ((pData != NULL) &&
+		(dataLength > 0))
+	{
+		m_stemLanguage = scanDocument(pData, dataLength, docInfo);
+	}
+
 	try
 	{
-		// Get the document
-		const Document *pDocument = tokens.getDocument();
-		if (pDocument == NULL)
-		{
-#ifdef DEBUG
-			cout << "XapianIndex::indexDocument: no document" << endl;
-#endif
-			return false;
-		}
+		Xapian::Document doc;
+		Xapian::termcount termPos = 0;
 
-		// Cache the document's properties
-		DocumentInfo docInfo(pDocument->getTitle(), pDocument->getLocation(),
-			pDocument->getType(), pDocument->getLanguage());
-		docInfo.setTimestamp(pDocument->getTimestamp());
-		docInfo.setSize(pDocument->getSize());
-		docInfo.setLocation(Url::canonicalizeUrl(docInfo.getLocation()));
-
-		const char *pData = pDocument->getData(dataLength);
+		// Populate the Xapian document
+		addCommonTerms(docInfo, doc, termPos);
+		termPos += 100;
 		if ((pData != NULL) &&
 			(dataLength > 0))
 		{
-			m_stemLanguage = scanDocument(pData, dataLength, docInfo);
+			Xapian::Utf8Iterator itor(pData, dataLength);
+			addPostingsToDocument(itor, doc, "", termPos, false);
+			termPos += 100;
 		}
 
-		Xapian::Document doc;
-		Xapian::termcount termPos = 0;
-
-		// Add the tokenizer's terms to the Xapian document
-		addPostingsToDocument(tokens, doc, "", termPos, m_stemMode);
 		// Add labels
 		for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
 			++labelIter)
 		{
 			doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
 		}
-		addCommonTerms(docInfo, doc, termPos);
+
+		// Set data
 		setDocumentData(docInfo, doc, m_stemLanguage);
 
 		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
@@ -1200,16 +1181,10 @@
 }
 
 /// Updates the given document; true if success.
-bool XapianIndex::updateDocument(unsigned int docId, Tokenizer &tokens)
+bool XapianIndex::updateDocument(unsigned int docId, const Document &document)
 {
 	bool updated = false;
 
-	const Document *pDocument = tokens.getDocument();
-	if (pDocument == NULL)
-	{
-		return false;
-	}
-
 	XapianDatabase *pDatabase = XapianDatabaseFactory::getDatabase(m_databaseName, false);
 	if (pDatabase == NULL)
 	{
@@ -1218,19 +1193,19 @@
 	}
 
 	// Cache the document's properties
-	DocumentInfo docInfo(pDocument->getTitle(), pDocument->getLocation(),
-		pDocument->getType(), pDocument->getLanguage());
-	docInfo.setTimestamp(pDocument->getTimestamp());
-	docInfo.setSize(pDocument->getSize());
+	DocumentInfo docInfo(document.getTitle(), document.getLocation(),
+		document.getType(), document.getLanguage());
+	docInfo.setTimestamp(document.getTimestamp());
+	docInfo.setSize(document.getSize());
 	docInfo.setLocation(Url::canonicalizeUrl(docInfo.getLocation()));
 
+	unsigned int dataLength = 0;
+	const char *pData = document.getData(dataLength);
+
 	// Don't scan the document if a language is specified
-	m_stemLanguage = Languages::toEnglish(pDocument->getLanguage());
+	m_stemLanguage = Languages::toEnglish(docInfo.getLanguage());
 	if (m_stemLanguage.empty() == true)
 	{
-		unsigned int dataLength = 0;
-		const char *pData = pDocument->getData(dataLength);
-
 		if ((pData != NULL) &&
 			(dataLength > 0))
 		{
@@ -1244,19 +1219,27 @@
 		Xapian::Document doc;
 		Xapian::termcount termPos = 0;
 
-		// Add the tokenizer's terms to the document
-		addPostingsToDocument(tokens, doc, "", termPos, m_stemMode);
-		// Get the document's labels
+		// Populate the Xapian document
+		addCommonTerms(docInfo, doc, termPos);
+		termPos += 100;
+		if ((pData != NULL) &&
+			(dataLength > 0))
+		{
+			Xapian::Utf8Iterator itor(pData, dataLength);
+			addPostingsToDocument(itor, doc, "", termPos, false);
+		}
+
+		// Add labels
 		if (getDocumentLabels(docId, labels) == true)
 		{
-			// Add labels
 			for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
 				++labelIter)
 			{
 				doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
 			}
 		}
-		addCommonTerms(docInfo, doc, termPos);
+
+		// Set data
 		setDocumentData(docInfo, doc, m_stemLanguage);
 
 		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
@@ -1306,8 +1289,8 @@
 			Xapian::termcount termPos = 0;
 
 			// Update the document data with the current language
-			removeCommonTerms(doc);
 			m_stemLanguage = Languages::toEnglish(docInfo.getLanguage());
+			removeCommonTerms(doc);
 			addCommonTerms(docInfo, doc, termPos);
 			setDocumentData(docInfo, doc, m_stemLanguage);
 

Modified: trunk/Index/XapianIndex.h
===================================================================
--- trunk/Index/XapianIndex.h	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/XapianIndex.h	2007-08-04 05:24:05 UTC (rev 903)
@@ -84,11 +84,11 @@
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
 		/// Indexes the given data.
-		virtual bool indexDocument(Tokenizer &tokens, const std::set<std::string> &labels,
+		virtual bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId);
 
 		/// Updates the given document.
-		virtual bool updateDocument(unsigned int docId, Tokenizer &tokens);
+		virtual bool updateDocument(unsigned int docId, const Document &doc);
 
 		/// Updates a document's properties.
 		virtual bool updateDocumentInfo(unsigned int docId, const DocumentInfo &docInfo);
@@ -131,11 +131,11 @@
 		bool listDocumentsWithTerm(const std::string &term, std::set<unsigned int> &docIds,
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
-		void addPostingsToDocument(Tokenizer &tokens, Xapian::Document &doc,
-			const std::string &prefix, Xapian::termcount &termPos, StemmingMode mode) const;
+		void addPostingsToDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
+			const std::string &prefix, Xapian::termcount &termPos, bool noStemming) const;
 
-		void removeFirstPostingsFromDocument(Tokenizer &tokens, Xapian::Document &doc,
-			const std::string &prefix, const std::string &language, StemmingMode mode) const;
+		void removePostingsFromDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
+			const std::string &prefix, const std::string &language, bool noStemming) const;
 
 		void addCommonTerms(const DocumentInfo &info, Xapian::Document &doc,
 			Xapian::termcount &termPos) const;

Modified: trunk/Index/pinot-index.cpp
===================================================================
--- trunk/Index/pinot-index.cpp	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/Index/pinot-index.cpp	2007-08-04 05:24:05 UTC (rev 903)
@@ -244,8 +244,6 @@
 			FilterWrapper wrapFilter(pIndex);
 			set<string> labels;
 
-			pIndex->setStemmingMode(IndexInterface::STORE_BOTH);
-
 			// Update an existing document or add to the index ?
 			docId = pIndex->hasDocument(urlParam);
 			if (docId > 0)

Modified: trunk/UI/GTK2/src/OnDiskHandler.cpp
===================================================================
--- trunk/UI/GTK2/src/OnDiskHandler.cpp	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/UI/GTK2/src/OnDiskHandler.cpp	2007-08-04 05:24:05 UTC (rev 903)
@@ -43,7 +43,6 @@
 	m_index(PinotSettings::getInstance().m_daemonIndexLocation)
 {
 	pthread_mutex_init(&m_mutex, NULL);
-	m_index.setStemmingMode(IndexInterface::STORE_BOTH);
 }
 
 OnDiskHandler::~OnDiskHandler()

Modified: trunk/UI/GTK2/src/WorkerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-04 04:43:43 UTC (rev 902)
+++ trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-04 05:24:05 UTC (rev 903)
@@ -1477,8 +1477,6 @@
 			FilterWrapper wrapFilter(pIndex);
 			const set<string> &labels = m_docInfo.getLabels();
 
-			pIndex->setStemmingMode(IndexInterface::STORE_BOTH);
-
 			// Update an existing document or add to the index ?
 			if (m_update == true)
 			{



From fabricecolin at mail.berlios.de  Sat Aug  4 07:29:54 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 4 Aug 2007 07:29:54 +0200
Subject: [Pinot-svn] r904 - trunk
Message-ID: <200708040529.l745Ts6a031516@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-04 07:29:54 +0200 (Sat, 04 Aug 2007)
New Revision: 904

Modified:
   trunk/README
   trunk/pinot.spec.in
Log:
gSOAP 2.7.9e is required.
Updated the spec's Summary for the main and audio-docs packages. 


Modified: trunk/README
===================================================================
--- trunk/README	2007-08-04 05:24:05 UTC (rev 903)
+++ trunk/README	2007-08-04 05:29:54 UTC (rev 904)
@@ -391,7 +391,7 @@
 
 Google SOAP API (2)	Search/Google/googleapi		beta2
 
- gSOAP (2)						2.7.8c
+ gSOAP (2)						2.7.9e
  http://www.cs.fsu.edu/~engelen/soap.html
 
 gtkmm							2.6.2

Modified: trunk/pinot.spec.in
===================================================================
--- trunk/pinot.spec.in	2007-08-04 05:24:05 UTC (rev 903)
+++ trunk/pinot.spec.in	2007-08-04 05:29:54 UTC (rev 904)
@@ -15,7 +15,7 @@
 %define dbus_dev_pkg dbus-devel
 %endif
 
-Summary: Metasearch tool
+Summary: Personal search and metasearch tool
 Name: @PACKAGE@
 Version: @VERSION@
 Release: 1%{?dist}
@@ -32,7 +32,7 @@
 BuildRequires: taglib-devel >= 1.4
 BuildRequires: gcc-c++
 %if 0%{?_with_soap:1}
-BuildRequires: gsoap >= 2.7.8c
+BuildRequires: gsoap >= 2.7.9e
 %endif
 
 %description
@@ -42,7 +42,7 @@
 analyze the results.
 
 %package audio-docs 
-Summary: Tokenizers for Pinot that handle various audio document formats
+Summary: Help Pinot handle various audio document formats
 Group: Applications/Internet
 Requires: %{name} = %{version}
 Requires: taglib >= 1.4



From fabricecolin at mail.berlios.de  Sat Aug  4 07:41:25 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 4 Aug 2007 07:41:25 +0200
Subject: [Pinot-svn] r905 - in trunk: SQL Search Tokenize
Message-ID: <200708040541.l745fPWN031917@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-04 07:41:25 +0200 (Sat, 04 Aug 2007)
New Revision: 905

Modified:
   trunk/SQL/CrawlHistory.cpp
   trunk/Search/XapianEngine.cpp
   trunk/Tokenize/FilterUtils.cpp
   trunk/Tokenize/Tokenizer.h
Log:
Minor fixes and mods.


Modified: trunk/SQL/CrawlHistory.cpp
===================================================================
--- trunk/SQL/CrawlHistory.cpp	2007-08-04 05:29:54 UTC (rev 904)
+++ trunk/SQL/CrawlHistory.cpp	2007-08-04 05:41:25 UTC (rev 905)
@@ -276,6 +276,7 @@
 bool CrawlHistory::updateItems(const map<string, time_t> urls, CrawlStatus status)
 {
 	string statusText(statusToText(status));
+	bool success = false;
 
 	for (map<string, time_t>::const_iterator updateIter = urls.begin();
 		updateIter != urls.end(); ++updateIter)
@@ -286,9 +287,12 @@
 			Url::escapeUrl(updateIter->first).c_str());
 		if (results != NULL)
 		{
+			success = true;
 			delete results;
 		}
 	}
+
+	return success;
 }
 
 /// Updates the status of items en masse.

Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-08-04 05:29:54 UTC (rev 904)
+++ trunk/Search/XapianEngine.cpp	2007-08-04 05:41:25 UTC (rev 905)
@@ -338,12 +338,7 @@
 	Xapian::Query parsedQuery = parser.parse_query(freeQuery,
 		Xapian::QueryParser::FLAG_BOOLEAN|Xapian::QueryParser::FLAG_PHRASE|
 		Xapian::QueryParser::FLAG_LOVEHATE|Xapian::QueryParser::FLAG_BOOLEAN_ANY_CASE|
-#if XAPIAN_MAJOR_VERSION==0
-		Xapian::QueryParser::FLAG_WILDCARD
-#else
-		Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_PURE_NOT
-#endif
-		);
+		Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_PURE_NOT);
 	// Apply a date range ?
 	bool enableMin = queryProps.getMinimumDate(minDay, minMonth, minYear);
 	bool enableMax = queryProps.getMaximumDate(maxDay, maxMonth, maxYear);

Modified: trunk/Tokenize/FilterUtils.cpp
===================================================================
--- trunk/Tokenize/FilterUtils.cpp	2007-08-04 05:29:54 UTC (rev 904)
+++ trunk/Tokenize/FilterUtils.cpp	2007-08-04 05:41:25 UTC (rev 905)
@@ -49,7 +49,7 @@
 	string fileName;
 	unsigned int dataLength = 0;
 	const char *pData = doc.getData(dataLength);
-	bool fedInput = false, success = false;
+	bool fedInput = false;
 
 	if (pFilter == NULL)
 	{

Modified: trunk/Tokenize/Tokenizer.h
===================================================================
--- trunk/Tokenize/Tokenizer.h	2007-08-04 05:29:54 UTC (rev 904)
+++ trunk/Tokenize/Tokenizer.h	2007-08-04 05:41:25 UTC (rev 905)
@@ -32,8 +32,6 @@
 		Tokenizer(const Document *pDocument);
 		virtual ~Tokenizer();
 
-		typedef enum { ALL_DOCUMENTS = 0, ALL_BUT_FILES, NO_DOCUMENTS } DataNeeds;
-
 		/// Returns a pointer to the document being tokenized.
 		virtual const Document *getDocument(void);
 



From fabricecolin at mail.berlios.de  Sat Aug  4 17:41:24 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sat, 4 Aug 2007 17:41:24 +0200
Subject: [Pinot-svn] r906 - in trunk: Index Search
Message-ID: <200708041541.l74FfOQ1016603@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-04 17:41:23 +0200 (Sat, 04 Aug 2007)
New Revision: 906

Modified:
   trunk/Index/XapianIndex.cpp
   trunk/Index/XapianIndex.h
   trunk/Search/XapianEngine.cpp
Log:
Support for spelling suggestions. No feedback is given yet.


Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-04 05:41:25 UTC (rev 905)
+++ trunk/Index/XapianIndex.cpp	2007-08-04 15:41:23 UTC (rev 906)
@@ -143,7 +143,7 @@
 }
 
 void XapianIndex::addPostingsToDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
-	const string &prefix, Xapian::termcount &termPos, bool noStemming) const
+	const Xapian::WritableDatabase &db, const string &prefix, bool noStemming) const
 {
 	Xapian::Stem *pStemmer = NULL;
 	Xapian::TermGenerator generator;
@@ -167,9 +167,11 @@
 		}
 	}
 
+	// The database is required for the spelling dictionary
+	generator.set_flags(Xapian::TermGenerator::FLAG_SPELLING);
+	generator.set_database(db);
 	generator.set_document(doc);
 	generator.index_text(itor, 1, prefix);
-	termPos = generator.get_termpos();
 
 	if (pStemmer != NULL)
 	{
@@ -205,6 +207,8 @@
 		}
 	}
 
+	// This temporary document enables to get to the same terms
+	// that were added at indexing time
 	generator.set_document(termsDoc);
 	generator.index_text(itor, 1, prefix);
 
@@ -304,7 +308,7 @@
 }
 
 void XapianIndex::addCommonTerms(const DocumentInfo &info, Xapian::Document &doc,
-	Xapian::termcount &termPos) const
+	const Xapian::WritableDatabase &db) const
 {
 	string title(info.getTitle());
 	string location(info.getLocation());
@@ -319,8 +323,8 @@
 #ifdef DEBUG
 		cout << "XapianIndex::addCommonTerms: adding " << title << endl;
 #endif
-		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, "S", termPos, true);
-		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, "", termPos, false);
+		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, db, "S", true);
+		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, db, "", false);
 	}
 
 	// Index the full URL with prefix U
@@ -1136,32 +1140,29 @@
 	try
 	{
 		Xapian::Document doc;
-		Xapian::termcount termPos = 0;
 
-		// Populate the Xapian document
-		addCommonTerms(docInfo, doc, termPos);
-		termPos += 100;
-		if ((pData != NULL) &&
-			(dataLength > 0))
+		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
+		if (pIndex != NULL)
 		{
-			Xapian::Utf8Iterator itor(pData, dataLength);
-			addPostingsToDocument(itor, doc, "", termPos, false);
-			termPos += 100;
-		}
+			// Populate the Xapian document
+			addCommonTerms(docInfo, doc, *pIndex);
+			if ((pData != NULL) &&
+				(dataLength > 0))
+			{
+				Xapian::Utf8Iterator itor(pData, dataLength);
+				addPostingsToDocument(itor, doc, *pIndex, "", false);
+			}
 
-		// Add labels
-		for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
-			++labelIter)
-		{
-			doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
-		}
+			// Add labels
+			for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
+				++labelIter)
+			{
+				doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
+			}
 
-		// Set data
-		setDocumentData(docInfo, doc, m_stemLanguage);
+			// Set data
+			setDocumentData(docInfo, doc, m_stemLanguage);
 
-		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
-		if (pIndex != NULL)
-		{
 			// Add this document to the Xapian index
 			docId = pIndex->add_document(doc);
 			indexed = true;
@@ -1217,34 +1218,32 @@
 	{
 		set<string> labels;
 		Xapian::Document doc;
-		Xapian::termcount termPos = 0;
 
-		// Populate the Xapian document
-		addCommonTerms(docInfo, doc, termPos);
-		termPos += 100;
-		if ((pData != NULL) &&
-			(dataLength > 0))
+		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
+		if (pIndex != NULL)
 		{
-			Xapian::Utf8Iterator itor(pData, dataLength);
-			addPostingsToDocument(itor, doc, "", termPos, false);
-		}
+			// Populate the Xapian document
+			addCommonTerms(docInfo, doc, *pIndex);
+			if ((pData != NULL) &&
+				(dataLength > 0))
+			{
+				Xapian::Utf8Iterator itor(pData, dataLength);
+				addPostingsToDocument(itor, doc, *pIndex, "", false);
+			}
 
-		// Add labels
-		if (getDocumentLabels(docId, labels) == true)
-		{
-			for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
-				++labelIter)
+			// Add labels
+			if (getDocumentLabels(docId, labels) == true)
 			{
-				doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
+				for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
+					++labelIter)
+				{
+					doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
+				}
 			}
-		}
 
-		// Set data
-		setDocumentData(docInfo, doc, m_stemLanguage);
+			// Set data
+			setDocumentData(docInfo, doc, m_stemLanguage);
 
-		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
-		if (pIndex != NULL)
-		{
 			// Update the document in the database
 			pIndex->replace_document(docId, doc);
 			updated = true;
@@ -1286,12 +1285,11 @@
 		if (pIndex != NULL)
 		{
 			Xapian::Document doc = pIndex->get_document(docId);
-			Xapian::termcount termPos = 0;
 
 			// Update the document data with the current language
 			m_stemLanguage = Languages::toEnglish(docInfo.getLanguage());
 			removeCommonTerms(doc);
-			addCommonTerms(docInfo, doc, termPos);
+			addCommonTerms(docInfo, doc, *pIndex);
 			setDocumentData(docInfo, doc, m_stemLanguage);
 
 			pIndex->replace_document(docId, doc);

Modified: trunk/Index/XapianIndex.h
===================================================================
--- trunk/Index/XapianIndex.h	2007-08-04 05:41:25 UTC (rev 905)
+++ trunk/Index/XapianIndex.h	2007-08-04 15:41:23 UTC (rev 906)
@@ -132,13 +132,13 @@
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
 		void addPostingsToDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
-			const std::string &prefix, Xapian::termcount &termPos, bool noStemming) const;
+			const Xapian::WritableDatabase &db, const std::string &prefix, bool noStemming) const;
 
 		void removePostingsFromDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
 			const std::string &prefix, const std::string &language, bool noStemming) const;
 
 		void addCommonTerms(const DocumentInfo &info, Xapian::Document &doc,
-			Xapian::termcount &termPos) const;
+			const Xapian::WritableDatabase &db) const;
 
 		void removeCommonTerms(Xapian::Document &doc);
 

Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-08-04 05:41:25 UTC (rev 905)
+++ trunk/Search/XapianEngine.cpp	2007-08-04 15:41:23 UTC (rev 906)
@@ -227,7 +227,7 @@
 	}
 	if (pIndex != NULL)
 	{
-		// The database is required for wildcards
+		// The database is required for wildcards and spelling
 		parser.set_database(*pIndex);
 	}
 	// ...including prefixes
@@ -334,11 +334,18 @@
 		escapedFilterStart = freeQuery.find(":\"", escapedFilterEnd);
 	}
 
-	// Activate all options and parse
-	Xapian::Query parsedQuery = parser.parse_query(freeQuery,
-		Xapian::QueryParser::FLAG_BOOLEAN|Xapian::QueryParser::FLAG_PHRASE|
+	// Activate all necessary options
+	unsigned int flags = Xapian::QueryParser::FLAG_BOOLEAN|Xapian::QueryParser::FLAG_PHRASE|
 		Xapian::QueryParser::FLAG_LOVEHATE|Xapian::QueryParser::FLAG_BOOLEAN_ANY_CASE|
-		Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_PURE_NOT);
+		Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_PURE_NOT|
+		Xapian::QueryParser::FLAG_SPELLING_CORRECTION;
+
+	// Parse the query string
+	Xapian::Query parsedQuery = parser.parse_query(freeQuery, flags);
+#ifdef DEBUG
+	cout << "XapianEngine::parseQuery: corrected spelling to: " << parser.get_corrected_query_string() << endl;
+#endif
+
 	// Apply a date range ?
 	bool enableMin = queryProps.getMinimumDate(minDay, minMonth, minYear);
 	bool enableMax = queryProps.getMaximumDate(maxDay, maxMonth, maxYear);



From fabricecolin at mail.berlios.de  Sun Aug  5 13:06:54 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 5 Aug 2007 13:06:54 +0200
Subject: [Pinot-svn] r907 - in trunk: Search UI/GTK2/src
Message-ID: <200708051106.l75B6spK032701@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-05 13:06:51 +0200 (Sun, 05 Aug 2007)
New Revision: 907

Modified:
   trunk/Search/SearchEngineInterface.cpp
   trunk/Search/SearchEngineInterface.h
   trunk/Search/XapianEngine.cpp
   trunk/Search/XapianEngine.h
   trunk/UI/GTK2/src/ServerThreads.cpp
Log:
Altered XapianEngine multi-step search code. Steps 3 and 4 are gone, the
original behaviour can be reproduced by changing the default operator and
calling runQuery() again. That's what the DBusServlet thread does for
queries received through SimpleQuery.
Spelling corrections are available.


Modified: trunk/Search/SearchEngineInterface.cpp
===================================================================
--- trunk/Search/SearchEngineInterface.cpp	2007-08-04 15:41:23 UTC (rev 906)
+++ trunk/Search/SearchEngineInterface.cpp	2007-08-05 11:06:51 UTC (rev 907)
@@ -27,8 +27,7 @@
 using std::endl;
 
 SearchEngineInterface::SearchEngineInterface() :
-	m_callsCount(0),
-	m_startTime(time(NULL)),
+	m_defaultOperator(DEFAULT_OP_AND),
 	m_resultsCountEstimate(0)
 {
 }
@@ -43,13 +42,6 @@
 	m_key = key;
 }
 
-/// Sets the number of calls issued since start time.
-void SearchEngineInterface::setCallsCount(unsigned int count, time_t startTime)
-{
-	m_callsCount = count;
-	m_startTime = startTime;
-}
-
 /// Sets whether the query should be expanded.
 bool SearchEngineInterface::setQueryExpansion(set<unsigned int> &relevantDocuments)
 {
@@ -57,6 +49,12 @@
 	return false;
 }
 
+/// Sets whether AND is the default operator.
+void SearchEngineInterface::setDefaultOperator(DefaultOperator op)
+{
+	m_defaultOperator = op;
+}
+
 /// Returns the downloader used if any.
 DownloaderInterface *SearchEngineInterface::getDownloader(void)
 {
@@ -81,6 +79,12 @@
 	return m_charset;
 }
 
+/// Suggests a spelling correction.
+string SearchEngineInterface::getSpellingCorrection(void) const
+{
+	return m_correctedFreeQuery;
+}
+
 /// Returns expand terms from the previous query.
 const set<string> &SearchEngineInterface::getExpandTerms(void) const
 {

Modified: trunk/Search/SearchEngineInterface.h
===================================================================
--- trunk/Search/SearchEngineInterface.h	2007-08-04 15:41:23 UTC (rev 906)
+++ trunk/Search/SearchEngineInterface.h	2007-08-05 11:06:51 UTC (rev 907)
@@ -39,12 +39,14 @@
 		/// Sets the search engine's key, if applicable.
 		virtual void setKey(const string &key);
 
-		/// Sets the number of calls issued since start time.
-		virtual void setCallsCount(unsigned int count, time_t startTime);
-
 		/// Sets whether the query should be expanded.
 		virtual bool setQueryExpansion(set<unsigned int> &relevantDocuments);
 
+		typedef enum { DEFAULT_OP_AND = 0, DEFAULT_OP_OR } DefaultOperator;
+
+		/// Sets whether AND is the default operator.
+		virtual void setDefaultOperator(DefaultOperator op);
+
 		/// Returns the downloader used if any.
 		virtual DownloaderInterface *getDownloader(void);
 
@@ -61,17 +63,19 @@
 		/// Returns the charset for the previous query's results.
 		virtual string getResultsCharset(void) const;
 
+		/// Suggests a spelling correction.
+		virtual string getSpellingCorrection(void) const;
+
 		/// Returns expand terms from the previous query.
 		virtual const set<string> &getExpandTerms(void) const;
 
 	protected:
 		string m_key;
-		unsigned int m_callsCount;
-		time_t m_startTime;
-		bool m_expandQueries;
+		DefaultOperator m_defaultOperator;
 		vector<DocumentInfo> m_resultsList;
 		unsigned int m_resultsCountEstimate;
 		string m_charset;
+		string m_correctedFreeQuery;
 		set<string> m_expandTerms;
 
 		SearchEngineInterface();

Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-08-04 15:41:23 UTC (rev 906)
+++ trunk/Search/XapianEngine.cpp	2007-08-05 11:06:51 UTC (rev 907)
@@ -192,7 +192,7 @@
 }
 
 Xapian::Query XapianEngine::parseQuery(Xapian::Database *pIndex, const QueryProperties &queryProps,
-	const string &stemLanguage, bool followOperators)
+	const string &stemLanguage, DefaultOperator defaultOperator, string &correctedFreeQuery)
 {
 	Xapian::QueryParser parser;
 	Xapian::Stem stemmer;
@@ -217,7 +217,8 @@
 	{
 		parser.set_stemming_strategy(Xapian::QueryParser::STEM_NONE);
 	}
-	if (followOperators == true)
+	// What's the default operator ?
+	if (defaultOperator == DEFAULT_OP_AND)
 	{
 		parser.set_default_op(Xapian::Query::OP_AND);
 	}
@@ -230,7 +231,6 @@
 		// The database is required for wildcards and spelling
 		parser.set_database(*pIndex);
 	}
-	// ...including prefixes
 	// X prefixes should always include a colon
 	parser.add_boolean_prefix("site", "H");
 	parser.add_boolean_prefix("file", "P");
@@ -342,8 +342,9 @@
 
 	// Parse the query string
 	Xapian::Query parsedQuery = parser.parse_query(freeQuery, flags);
+	correctedFreeQuery = parser.get_corrected_query_string();
 #ifdef DEBUG
-	cout << "XapianEngine::parseQuery: corrected spelling to: " << parser.get_corrected_query_string() << endl;
+	cout << "XapianEngine::parseQuery: corrected spelling to: " << correctedFreeQuery << endl;
 #endif
 
 	// Apply a date range ?
@@ -411,7 +412,10 @@
 
 	try
 	{
-		Xapian::Query fullQuery = parseQuery(NULL, queryProps, "", true);
+		string correctedSpelling;
+		Xapian::Query fullQuery = parseQuery(NULL, queryProps, "",
+			DEFAULT_OP_AND, correctedSpelling);
+
 		if (fullQuery.empty() == false)
 		{
 			for (Xapian::TermIterator termIter = fullQuery.get_terms_begin();
@@ -577,6 +581,7 @@
 	// Clear the results list
 	m_resultsList.clear();
 	m_resultsCountEstimate = 0;
+	m_correctedFreeQuery.clear();
 
 	if (queryProps.isEmpty() == true)
 	{
@@ -597,17 +602,14 @@
 	Xapian::Database *pIndex = pDatabase->readLock();
 	try
 	{
-		string stemLanguage;
+		string stemLanguage(queryProps.getLanguage());
 		unsigned int searchStep = 1;
-		bool followOperators = true;
 
 		// Searches are run in this order :
-		// 1. follow operators and don't stem terms
-		// 2. if no results, follow operators and stem terms
-		// 3. if no results, don't follow operators and don't stem terms
-		// 4. if no results, don't follow operators and stem terms
-		// Steps 2 and 4 depend on a language being defined for the query
-		Xapian::Query fullQuery = parseQuery(pIndex, queryProps, "", followOperators);
+		// 1. don't stem terms
+		// 2. if no results, stem terms if a language is defined for the query
+		Xapian::Query fullQuery = parseQuery(pIndex, queryProps, "",
+			m_defaultOperator, m_correctedFreeQuery);
 		while (fullQuery.empty() == false)
 		{
 #ifdef DEBUG
@@ -620,42 +622,17 @@
 				break;
 			}
 
-			if (m_resultsList.empty() == true)
+			// The search did succeed but didn't return anything
+			if ((m_resultsList.empty() == true) &&
+				(searchStep == 1) &&
+				(stemLanguage.empty() == false))
 			{
-				// The search did succeed but didn't return anything
-				// Try the next step
-				switch (++searchStep)
-				{
-					case 2:
-						followOperators = true;
-						stemLanguage = queryProps.getLanguage();
-						if (stemLanguage.empty() == false)
-						{
-							break;
-						}
-						++searchStep;
-					case 3:
-						followOperators = false;
-						stemLanguage.clear();
-						break;
-					case 4:
-						followOperators = false;
-						stemLanguage = queryProps.getLanguage();
-						if (stemLanguage.empty() == false)
-						{
-							break;
-						}
-						++searchStep;
-					default:
-						pDatabase->unlock();
-						return true;
-				}
-
 #ifdef DEBUG
-				cout << "XapianEngine::runQuery: trying step " << searchStep << endl;
+				cout << "XapianEngine::runQuery: trying again with stemming" << endl;
 #endif
-				fullQuery = parseQuery(pIndex, queryProps,
-					Languages::toEnglish(stemLanguage), followOperators);
+				fullQuery = parseQuery(pIndex, queryProps, Languages::toEnglish(stemLanguage),
+					m_defaultOperator, m_correctedFreeQuery);
+				++searchStep;
 				continue;
 			}
 

Modified: trunk/Search/XapianEngine.h
===================================================================
--- trunk/Search/XapianEngine.h	2007-08-04 15:41:23 UTC (rev 906)
+++ trunk/Search/XapianEngine.h	2007-08-05 11:06:51 UTC (rev 907)
@@ -57,7 +57,8 @@
 		        unsigned int maxDay, unsigned int maxMonth, unsigned int maxYear);
 
 		static Xapian::Query parseQuery(Xapian::Database *pIndex, const QueryProperties &queryProps,
-			const string &stemLanguage, bool followOperators);
+			const string &stemLanguage, DefaultOperator defaultOperator,
+			string &correctedFreeQuery);
 
 	private:
 		XapianEngine(const XapianEngine &other);

Modified: trunk/UI/GTK2/src/ServerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/ServerThreads.cpp	2007-08-04 15:41:23 UTC (rev 906)
+++ trunk/UI/GTK2/src/ServerThreads.cpp	2007-08-05 11:06:51 UTC (rev 907)
@@ -818,15 +818,29 @@
 {
 	XapianEngine engine(PinotSettings::getInstance().m_daemonIndexLocation);
 
+	docIds.clear();
+
 	// Run the query
+	engine.setDefaultOperator(SearchEngineInterface::DEFAULT_OP_AND);
 	if (engine.runQuery(queryProps) == false)
 	{
 		return false;
 	}
 
-	docIds.clear();
+	const vector<DocumentInfo> &resultsList = engine.getResults();
+	if (resultsList.empty() == true)
+	{
+#ifdef DEBUG
+		cout << "DBusServletThread::runQuery: trying again" << endl;
+#endif
+		// Try again, this time with OR as default operator
+		engine.setDefaultOperator(SearchEngineInterface::DEFAULT_OP_OR);
+		if (engine.runQuery(queryProps) == false)
+		{
+			return false;
+		}
+	}
 
-	const vector<DocumentInfo> &resultsList = engine.getResults();
 	for (vector<DocumentInfo>::const_iterator resultIter = resultsList.begin();
 		resultIter != resultsList.end(); ++resultIter)
 	{



From fabricecolin at mail.berlios.de  Mon Aug  6 16:23:48 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 6 Aug 2007 16:23:48 +0200
Subject: [Pinot-svn] r908 - trunk/UI/GTK2/src
Message-ID: <200708061423.l76ENm5W020796@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-06 16:23:47 +0200 (Mon, 06 Aug 2007)
New Revision: 908

Modified:
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
Log:
Fixed D-Bus error handling.


Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-05 11:06:51 UTC (rev 907)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-06 14:23:47 UTC (rev 908)
@@ -404,6 +404,10 @@
 		if (pError != NULL)
 		{
 			cerr << "Couldn't open bus connection: " << pError->message << endl;
+			if (pError->message != NULL)
+			{
+				cerr << "Error is " << pError->message << endl;
+			}
 			g_error_free(pError);
 		}
 
@@ -424,16 +428,26 @@
 	dbus_connection_set_exit_on_disconnect(pConnection, FALSE);
 	dbus_connection_setup_with_g_main(pConnection, NULL);
 
-	if ((dbus_error_is_set(&error) == FALSE) &&
-		(dbus_connection_register_object_path(pConnection, g_pinotDBusObjectPath,
-			&g_callVTable, &server) == TRUE))
+	if (dbus_connection_register_object_path(pConnection, g_pinotDBusObjectPath,
+			&g_callVTable, &server) == TRUE)
 	{
 		// Request to be identified by this name
 		// FIXME: flags are currently broken ?
 		dbus_bus_request_name(pConnection, g_pinotDBusService, 0, &error);
+		if (dbus_error_is_set(&error) == FALSE)
+		{
+			dbus_connection_add_filter(pConnection,
+				(DBusHandleMessageFunction)filterHandler, &server, NULL);
+		}
+		else
+		{
+			cerr << "Couldn't obtain name " << g_pinotDBusService << endl;
+			if (error.message != NULL)
+			{
+				cerr << "Error is " << error.message << endl;
+			}
+		}
 
-		dbus_connection_add_filter(pConnection, (DBusHandleMessageFunction)filterHandler, &server, NULL);
-
 		try
 		{
 			server.getQuitSignal().connect(SigC::slot(&quitAll));
@@ -487,7 +501,7 @@
 	}
 	else
 	{
-		cerr << "Couldn't register object path: " << pError->message << endl;
+		cerr << "Couldn't register object path" << endl;
 	}
 	dbus_error_free(&error);
 



From fabricecolin at mail.berlios.de  Mon Aug  6 16:26:38 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 6 Aug 2007 16:26:38 +0200
Subject: [Pinot-svn] r909 - trunk/Index
Message-ID: <200708061426.l76EQcjH021083@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-06 16:26:37 +0200 (Mon, 06 Aug 2007)
New Revision: 909

Modified:
   trunk/Index/XapianDatabase.cpp
   trunk/Index/XapianDatabase.h
   trunk/Index/XapianIndex.cpp
Log:
Fixed deadlock introduced by previous check-in, added some extra DEBUG code.


Modified: trunk/Index/XapianDatabase.cpp
===================================================================
--- trunk/Index/XapianDatabase.cpp	2007-08-06 14:23:47 UTC (rev 908)
+++ trunk/Index/XapianDatabase.cpp	2007-08-06 14:26:37 UTC (rev 909)
@@ -50,7 +50,7 @@
 	m_pFirst(NULL),
 	m_pSecond(NULL)
 {
-	pthread_mutex_init(&m_rwLock, NULL);
+	initializeLock();
 	openDatabase();
 }
 
@@ -66,7 +66,7 @@
 	m_pFirst(pFirst),
 	m_pSecond(pSecond)
 {
-	pthread_mutex_init(&m_rwLock, NULL);
+	initializeLock();
 }
 
 XapianDatabase::XapianDatabase(const XapianDatabase &other) :
@@ -80,7 +80,7 @@
 	m_pFirst(other.m_pFirst),
 	m_pSecond(other.m_pSecond)
 {
-	pthread_mutex_init(&m_rwLock, NULL);
+	initializeLock();
 	if (other.m_pDatabase != NULL)
 	{
 		m_pDatabase = new Xapian::Database(*other.m_pDatabase);
@@ -94,6 +94,9 @@
 		delete m_pDatabase;
 	}
 	pthread_mutex_destroy(&m_rwLock);
+#ifdef DEBUG
+	pthread_mutexattr_destroy(&m_rwLockAttr);
+#endif
 }
 
 XapianDatabase &XapianDatabase::operator=(const XapianDatabase &other)
@@ -122,6 +125,17 @@
 	return *this;
 }
 
+void XapianDatabase::initializeLock(void)
+{
+#ifdef DEBUG
+	pthread_mutexattr_init(&m_rwLockAttr);
+	pthread_mutexattr_settype(&m_rwLockAttr, PTHREAD_MUTEX_ERRORCHECK);
+	pthread_mutex_init(&m_rwLock, &m_rwLockAttr);
+#else
+	pthread_mutex_init(&m_rwLock, NULL);
+#endif
+}
+
 void XapianDatabase::openDatabase(void)
 {
 	struct stat dbStat;
@@ -351,6 +365,9 @@
 			}
 			return m_pDatabase;
 		}
+#ifdef DEBUG
+		else cout << "XapianDatabase::readLock: failed" << endl;
+#endif
 	}
 	else
 	{
@@ -381,6 +398,9 @@
 
 			return m_pDatabase;
 		}
+#ifdef DEBUG
+		else cout << "XapianDatabase::readLock: failed" << endl;
+#endif
 	}
 
 	return NULL;
@@ -407,6 +427,9 @@
 
 		return dynamic_cast<Xapian::WritableDatabase *>(m_pDatabase);
 	}
+#ifdef DEBUG
+	else cout << "XapianDatabase::writeLock: failed" << endl;
+#endif
 
 	return NULL;
 }
@@ -414,7 +437,12 @@
 /// Unlocks the database.
 void XapianDatabase::unlock(void)
 {
-	pthread_mutex_unlock(&m_rwLock);
+	if (pthread_mutex_unlock(&m_rwLock) != 0)
+	{
+#ifdef DEBUG
+		cout << "XapianDatabase::unlock: failed" << endl;
+#endif
+	}
 
 	if (m_merge == true)
 	{

Modified: trunk/Index/XapianDatabase.h
===================================================================
--- trunk/Index/XapianDatabase.h	2007-08-06 14:23:47 UTC (rev 908)
+++ trunk/Index/XapianDatabase.h	2007-08-06 14:26:37 UTC (rev 909)
@@ -76,12 +76,17 @@
 		bool m_overwrite;
 		bool m_obsoleteFormat;
 		pthread_mutex_t m_rwLock;
+#ifdef DEBUG
+		pthread_mutexattr_t m_rwLockAttr;
+#endif
 		Xapian::Database *m_pDatabase;
 		bool m_isOpen;
 		bool m_merge;
 		XapianDatabase *m_pFirst;
 		XapianDatabase *m_pSecond;
 
+		void initializeLock(void);
+
 		void openDatabase(void);
 
 		static bool badRecordField(const std::string &field);

Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-06 14:23:47 UTC (rev 908)
+++ trunk/Index/XapianIndex.cpp	2007-08-06 14:26:37 UTC (rev 909)
@@ -1139,11 +1139,11 @@
 
 	try
 	{
-		Xapian::Document doc;
-
 		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
 		if (pIndex != NULL)
 		{
+			Xapian::Document doc;
+
 			// Populate the Xapian document
 			addCommonTerms(docInfo, doc, *pIndex);
 			if ((pData != NULL) &&
@@ -1214,14 +1214,20 @@
 		}
 	}
 
+	Xapian::WritableDatabase *pIndex = NULL;
+
 	try
 	{
 		set<string> labels;
-		Xapian::Document doc;
 
-		Xapian::WritableDatabase *pIndex = pDatabase->writeLock();
+		// Get the document's labels
+		getDocumentLabels(docId, labels);
+
+		pIndex = pDatabase->writeLock();
 		if (pIndex != NULL)
 		{
+			Xapian::Document doc;
+
 			// Populate the Xapian document
 			addCommonTerms(docInfo, doc, *pIndex);
 			if ((pData != NULL) &&
@@ -1232,13 +1238,10 @@
 			}
 
 			// Add labels
-			if (getDocumentLabels(docId, labels) == true)
+			for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
+				++labelIter)
 			{
-				for (set<string>::const_iterator labelIter = labels.begin(); labelIter != labels.end();
-					++labelIter)
-				{
-					doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
-				}
+				doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
 			}
 
 			// Set data
@@ -1257,7 +1260,10 @@
 	{
 		cerr << "Couldn't update document, unknown exception occured" << endl;
 	}
-	pDatabase->unlock();
+	if (pIndex != NULL)
+	{
+		pDatabase->unlock();
+	}
 
 	return updated;
 }



From fabricecolin at mail.berlios.de  Mon Aug  6 16:29:14 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 6 Aug 2007 16:29:14 +0200
Subject: [Pinot-svn] r910 - trunk/Search
Message-ID: <200708061429.l76ETEoR021286@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-06 16:29:14 +0200 (Mon, 06 Aug 2007)
New Revision: 910

Modified:
   trunk/Search/XapianEngine.cpp
   trunk/Search/XapianEngine.h
Log:
There's no need to activate all parsing options when validating a query.


Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-08-06 14:26:37 UTC (rev 909)
+++ trunk/Search/XapianEngine.cpp	2007-08-06 14:29:14 UTC (rev 910)
@@ -192,7 +192,8 @@
 }
 
 Xapian::Query XapianEngine::parseQuery(Xapian::Database *pIndex, const QueryProperties &queryProps,
-	const string &stemLanguage, DefaultOperator defaultOperator, string &correctedFreeQuery)
+	const string &stemLanguage, DefaultOperator defaultOperator,
+	string &correctedFreeQuery, bool minimal)
 {
 	Xapian::QueryParser parser;
 	Xapian::Stem stemmer;
@@ -200,7 +201,8 @@
 	unsigned int maxDay, maxMonth, maxYear = 0;
 
 	// Set things up
-	if (stemLanguage.empty() == false)
+	if ((minimal == false) &&
+		(stemLanguage.empty() == false))
 	{
 		try
 		{
@@ -337,11 +339,20 @@
 	// Activate all necessary options
 	unsigned int flags = Xapian::QueryParser::FLAG_BOOLEAN|Xapian::QueryParser::FLAG_PHRASE|
 		Xapian::QueryParser::FLAG_LOVEHATE|Xapian::QueryParser::FLAG_BOOLEAN_ANY_CASE|
-		Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_PURE_NOT|
-		Xapian::QueryParser::FLAG_SPELLING_CORRECTION;
+		Xapian::QueryParser::FLAG_PURE_NOT;
+	if (minimal == false)
+	{
+		flags |= Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_SPELLING_CORRECTION;
+	}
 
 	// Parse the query string
 	Xapian::Query parsedQuery = parser.parse_query(freeQuery, flags);
+	if (minimal == true)
+	{
+		return parsedQuery;
+	}
+
+	// Any correction ?
 	correctedFreeQuery = parser.get_corrected_query_string();
 #ifdef DEBUG
 	cout << "XapianEngine::parseQuery: corrected spelling to: " << correctedFreeQuery << endl;
@@ -413,8 +424,9 @@
 	try
 	{
 		string correctedSpelling;
+		// Do minimal parsing
 		Xapian::Query fullQuery = parseQuery(NULL, queryProps, "",
-			DEFAULT_OP_AND, correctedSpelling);
+			DEFAULT_OP_AND, correctedSpelling, true);
 
 		if (fullQuery.empty() == false)
 		{

Modified: trunk/Search/XapianEngine.h
===================================================================
--- trunk/Search/XapianEngine.h	2007-08-06 14:26:37 UTC (rev 909)
+++ trunk/Search/XapianEngine.h	2007-08-06 14:29:14 UTC (rev 910)
@@ -58,7 +58,7 @@
 
 		static Xapian::Query parseQuery(Xapian::Database *pIndex, const QueryProperties &queryProps,
 			const string &stemLanguage, DefaultOperator defaultOperator,
-			string &correctedFreeQuery);
+			string &correctedFreeQuery, bool minimal = false);
 
 	private:
 		XapianEngine(const XapianEngine &other);



From fabricecolin at mail.berlios.de  Mon Aug  6 16:30:46 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 6 Aug 2007 16:30:46 +0200
Subject: [Pinot-svn] r911 - trunk/UI/GTK2/src
Message-ID: <200708061430.l76EUktm021455@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-06 16:30:46 +0200 (Mon, 06 Aug 2007)
New Revision: 911

Modified:
   trunk/UI/GTK2/src/DaemonState.cpp
   trunk/UI/GTK2/src/DaemonState.h
Log:
Don't keep track of what's being crawled, get that information from the thread.


Modified: trunk/UI/GTK2/src/DaemonState.cpp
===================================================================
--- trunk/UI/GTK2/src/DaemonState.cpp	2007-08-06 14:29:14 UTC (rev 910)
+++ trunk/UI/GTK2/src/DaemonState.cpp	2007-08-06 14:30:46 UTC (rev 911)
@@ -83,14 +83,7 @@
 	}
 	pScannerThread->getFileFoundSignal().connect(SigC::slot(*this, &DaemonState::on_message_filefound));
 
-	if (start_thread(pScannerThread) == true)
-	{
-		m_locationBeingCrawled = locationToCrawl;
-
-		return true;
-	}
-
-	return false;
+	return start_thread(pScannerThread);
 }
 
 void DaemonState::start(bool forceFullScan)
@@ -150,12 +143,12 @@
 	{
 		return;
 	}
-#ifdef DEBUG
-	cout << "DaemonState::on_thread_end: end of thread " << pThread->getId() << endl;
-#endif
 
 	// What type of thread was it ?
 	string type(pThread->getType());
+#ifdef DEBUG
+	cout << "DaemonState::on_thread_end: end of thread " << type << " " << pThread->getId() << endl;
+#endif
 	if (type == "DirectoryScannerThread")
 	{
 		DirectoryScannerThread *pScannerThread = dynamic_cast<DirectoryScannerThread *>(pThread);
@@ -165,19 +158,21 @@
 			return;
 		}
 
+		string crawledLocation(pScannerThread->getDirectory());
+
 		// Explicitely flush the index once a directory has been crawled
 		XapianIndex index(PinotSettings::getInstance().m_daemonIndexLocation);
 		index.flush();
 
+#ifdef DEBUG
+		cout << "DaemonState::on_thread_end: done crawling " << crawledLocation << endl;
+#endif
 		// Another location to crawl ?
-		if ((m_locationBeingCrawled.empty() == false) &&
-			(write_lock_lists() == true))
+		if (write_lock_lists() == true)
 		{
 			PinotSettings::IndexableLocation currentLocation;
+			currentLocation.m_name = crawledLocation;
 
-			currentLocation.m_name = m_locationBeingCrawled;
-			m_locationBeingCrawled.clear();
-
 			set<PinotSettings::IndexableLocation>::const_iterator locationIter = PinotSettings::getInstance().m_indexableLocations.find(currentLocation);
 			if (locationIter != PinotSettings::getInstance().m_indexableLocations.end())
 			{
@@ -195,7 +190,7 @@
 			unlock_lists();
 		}
 #ifdef DEBUG
-		else cout << "DaemonState::on_thread_end: done crawling" << endl;
+		else cout << "DaemonState::on_thread_end: nothing else to crawl" << endl;
 #endif
 	}
 	else if (type == "IndexingThread")
@@ -263,6 +258,9 @@
 
 		m_reload = false;
 	}
+#ifdef DEBUG
+	cout << "DaemonState::on_thread_end: reload status " << m_reload << endl;
+#endif
 
 	// We might be able to run a queued action
 	pop_queue(indexedUrl);

Modified: trunk/UI/GTK2/src/DaemonState.h
===================================================================
--- trunk/UI/GTK2/src/DaemonState.h	2007-08-06 14:29:14 UTC (rev 910)
+++ trunk/UI/GTK2/src/DaemonState.h	2007-08-06 14:30:46 UTC (rev 911)
@@ -49,7 +49,6 @@
 		bool m_reload;
 		MonitorInterface *m_pDiskMonitor;
 		MonitorHandler *m_pDiskHandler;
-		std::string m_locationBeingCrawled;
 		SigC::Signal1<void, int> m_signalQuit;
 
 		bool crawlLocation(const std::string &locationToCrawl, bool isSource, bool doMonitoring);



From fabricecolin at mail.berlios.de  Mon Aug  6 16:32:57 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 6 Aug 2007 16:32:57 +0200
Subject: [Pinot-svn] r912 - trunk/UI/GTK2/src
Message-ID: <200708061432.l76EWv0a021684@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-06 16:32:57 +0200 (Mon, 06 Aug 2007)
New Revision: 912

Modified:
   trunk/UI/GTK2/src/ServerThreads.cpp
   trunk/UI/GTK2/src/pinot-dbus-daemon.xml
Log:
Reload returns a boolean to indicate if the configuration is being reloaded.


Modified: trunk/UI/GTK2/src/ServerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/ServerThreads.cpp	2007-08-06 14:30:46 UTC (rev 911)
+++ trunk/UI/GTK2/src/ServerThreads.cpp	2007-08-06 14:32:57 UTC (rev 912)
@@ -1231,7 +1231,7 @@
 		if (dbus_message_get_args(m_pRequest, &error,
 			DBUS_TYPE_INVALID) == TRUE)
 		{
-			gboolean reloaded = TRUE;
+			gboolean reloading = TRUE;
 
 #ifdef DEBUG
 			cout << "DBusServletThread::doWork: received Reload" << endl;
@@ -1243,7 +1243,7 @@
 			if (m_pReply != NULL)
 			{
 				dbus_message_append_args(m_pReply,
-					DBUS_TYPE_INT32, &reloaded,
+					DBUS_TYPE_BOOLEAN, &reloading,
 					DBUS_TYPE_INVALID);
 			}
 		}

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.xml
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.xml	2007-08-06 14:30:46 UTC (rev 911)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.xml	2007-08-06 14:32:57 UTC (rev 912)
@@ -50,7 +50,7 @@
 	-->
     <method name="Reload">
       <annotation name="de.berlios.Pinot.Reload" value="pinotDBus"/>
-      <arg type="b" name="reloaded" direction="out" />
+      <arg type="b" name="reloading" direction="out" />
     </method>
     <!--
 	Sets a document's labels.



From fabricecolin at mail.berlios.de  Wed Aug  8 15:58:13 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 8 Aug 2007 15:58:13 +0200
Subject: [Pinot-svn] r913 - trunk/Monitor
Message-ID: <200708081358.l78DwDoK009246@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-08 15:58:12 +0200 (Wed, 08 Aug 2007)
New Revision: 913

Modified:
   trunk/Monitor/INotifyMonitor.cpp
   trunk/Monitor/INotifyMonitor.h
Log:
A DELETE event would cause the monitor to deadlock and therefore stop picking up
new events.


Modified: trunk/Monitor/INotifyMonitor.cpp
===================================================================
--- trunk/Monitor/INotifyMonitor.cpp	2007-08-06 14:32:57 UTC (rev 912)
+++ trunk/Monitor/INotifyMonitor.cpp	2007-08-08 13:58:12 UTC (rev 913)
@@ -30,11 +30,13 @@
 #include <string.h>
 #include <errno.h>
 #include <iostream>
+#include <set>
 
 #include "INotifyMonitor.h"
 
 using std::string;
 using std::map;
+using std::set;
 using std::queue;
 using std::pair;
 using std::cout;
@@ -51,7 +53,7 @@
 		char errBuffer[1024];
 
 		strerror_r(errno, errBuffer, 1024);
-		cerr << "INotifyMonitor: initialization failed: " << errBuffer << endl;
+		cerr << "Couldn't initialize inotify: " << errBuffer << endl;
 	}
 }
 
@@ -64,6 +66,29 @@
 	pthread_mutex_destroy(&m_mutex);
 }
 
+bool INotifyMonitor::removeWatch(const string &location)
+{
+	map<string, int>::iterator locationIter = m_locations.find(location);
+	if (locationIter != m_locations.end())
+	{
+		inotify_rm_watch(m_monitorFd, locationIter->second);
+		map<int, string>::iterator watchIter = m_watches.find(locationIter->second);
+		if (watchIter != m_watches.end())
+		{
+			m_watches.erase(watchIter);
+		}
+		m_locations.erase(locationIter);
+
+		return true;
+	}
+	else
+	{
+		cerr << location << " is not being monitored" << endl;
+	}
+
+	return false;
+}
+
 /// Starts monitoring a location.
 bool INotifyMonitor::addLocation(const string &location, bool isDirectory)
 {
@@ -77,7 +102,11 @@
 		return false;
 	}
 
-	pthread_mutex_lock(&m_mutex);
+	if (pthread_mutex_lock(&m_mutex) != 0)
+	{
+		return false;
+	}
+
 	map<string, int>::iterator locationIter = m_locations.find(location);
 	if (locationIter != m_locations.end())
 	{
@@ -111,7 +140,7 @@
 		}
 		else
 		{
-			cerr << "INotifyMonitor::addLocation: couldn't monitor " << location << endl;
+			cerr << "Couldn't monitor " << location << endl;
 		}
 	}
 	pthread_mutex_unlock(&m_mutex);
@@ -130,24 +159,12 @@
 		return false;
 	}
 
-	pthread_mutex_lock(&m_mutex);
-	map<string, int>::iterator locationIter = m_locations.find(location);
-	if (locationIter != m_locations.end())
+	if (pthread_mutex_lock(&m_mutex) != 0)
 	{
-		inotify_rm_watch(m_monitorFd, locationIter->second);
-		map<int, string>::iterator watchIter = m_watches.find(locationIter->second);
-		if (watchIter != m_watches.end())
-		{
-			m_watches.erase(watchIter);
-		}
-		m_locations.erase(locationIter);
+		return false;
+	}
 
-		removedLocation = true;
-	}
-	else
-	{
-		cerr << "INotifyMonitor::removeLocation: " << location << " is not being monitored" << endl;
-	}
+	removedLocation = removeWatch(location);
 	pthread_mutex_unlock(&m_mutex);
 
 	return removedLocation;
@@ -156,6 +173,7 @@
 /// Retrieves pending events.
 bool INotifyMonitor::retrievePendingEvents(queue<MonitorEvent> &events)
 {
+	set<string> removedLocations;
 	char buffer[1024];
 	unsigned int queueLen = 0;
 	size_t offset = 0;
@@ -165,7 +183,11 @@
 		return false;
 	}
 
-	pthread_mutex_lock(&m_mutex);
+	if (pthread_mutex_lock(&m_mutex) != 0)
+	{
+		return false;
+	}
+
 	// Copy internal events
 	while (m_internalEvents.empty() == false)
 	{
@@ -350,7 +372,7 @@
 #endif
 			if (monEvent.m_isWatch == true)
 			{
-				removeLocation(monEvent.m_location);
+				removedLocations.insert(monEvent.m_location);
 			}
 		}
 		else if (pEvent->mask & IN_UNMOUNT)
@@ -362,7 +384,7 @@
 			if (monEvent.m_isWatch == true)
 			{
 				// Watches are removed silently if the backing filesystem is unmounted
-				removeLocation(monEvent.m_location);
+				removedLocations.insert(monEvent.m_location);
 			}
 		}
 		else
@@ -408,6 +430,12 @@
 
 		offset += eventSize;
 	}
+	// Any location to remove ?
+	for (set<string>::const_iterator removalIter = removedLocations.begin();
+		removalIter != removedLocations.end(); ++removalIter)
+	{
+		removeWatch(*removalIter);
+	}
 	pthread_mutex_unlock(&m_mutex);
 
 	return true;

Modified: trunk/Monitor/INotifyMonitor.h
===================================================================
--- trunk/Monitor/INotifyMonitor.h	2007-08-06 14:32:57 UTC (rev 912)
+++ trunk/Monitor/INotifyMonitor.h	2007-08-08 13:58:12 UTC (rev 913)
@@ -48,6 +48,8 @@
 		std::map<std::string, int> m_locations;
 		std::map<uint32_t, MonitorEvent> m_movedFrom;
 
+		bool removeWatch(const std::string &location);
+
 	private:
 		INotifyMonitor(const INotifyMonitor &other);
 		INotifyMonitor &operator=(const INotifyMonitor &other);



From fabricecolin at mail.berlios.de  Wed Aug  8 16:00:31 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 8 Aug 2007 16:00:31 +0200
Subject: [Pinot-svn] r914 - trunk/Index
Message-ID: <200708081400.l78E0VqD009439@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-08 16:00:31 +0200 (Wed, 08 Aug 2007)
New Revision: 914

Modified:
   trunk/Index/FilterWrapper.cpp
   trunk/Index/XapianIndex.cpp
Log:
FilterWrapper should preserve/use the provided title for the top-level document.
Less DEBUG output in XapianIndex.


Modified: trunk/Index/FilterWrapper.cpp
===================================================================
--- trunk/Index/FilterWrapper.cpp	2007-08-08 13:58:12 UTC (rev 913)
+++ trunk/Index/FilterWrapper.cpp	2007-08-08 14:00:31 UTC (rev 914)
@@ -128,7 +128,8 @@
 			break;
 		}
 
-		Document filteredDoc(doc.getTitle(), doc.getLocation(), "text/plain", doc.getLanguage());
+		string originalTitle(doc.getTitle());
+		Document filteredDoc(originalTitle, doc.getLocation(), "text/plain", doc.getLanguage());
 
 		filteredDoc.setTimestamp(doc.getTimestamp());
 		filteredDoc.setSize(doc.getSize());
@@ -148,6 +149,11 @@
 #endif
 			isNested = true;
 		}
+		else if (originalTitle.empty() == false)
+		{
+			// Preserve the top-level document's title
+			filteredDoc.setTitle(originalTitle);
+		}
 
 		// Pass it down to another filter ?
 		if ((filteredDoc.getType().length() >= 10) &&

Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-08 13:58:12 UTC (rev 913)
+++ trunk/Index/XapianIndex.cpp	2007-08-08 14:00:31 UTC (rev 914)
@@ -320,9 +320,6 @@
 	// Index the title with and without prefix S
 	if (title.empty() == false)
 	{
-#ifdef DEBUG
-		cout << "XapianIndex::addCommonTerms: adding " << title << endl;
-#endif
 		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, db, "S", true);
 		addPostingsToDocument(Xapian::Utf8Iterator(title), doc, db, "", false);
 	}
@@ -445,9 +442,6 @@
 	string title(docInfo.getTitle());
 	if (title.empty() == false)
 	{
-#ifdef DEBUG
-		cout << "XapianIndex::removeCommonTerms: removing " << title << endl;
-#endif
 		removePostingsFromDocument(Xapian::Utf8Iterator(title), doc, "S", language, true);
 		removePostingsFromDocument(Xapian::Utf8Iterator(title), doc, "", language, false);
 	}



From fabricecolin at mail.berlios.de  Wed Aug  8 17:24:54 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 8 Aug 2007 17:24:54 +0200
Subject: [Pinot-svn] r915 - trunk/UI/GTK2/src
Message-ID: <200708081524.l78FOsLx014977@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-08 17:24:54 +0200 (Wed, 08 Aug 2007)
New Revision: 915

Modified:
   trunk/UI/GTK2/src/OnDiskHandler.cpp
Log:
Directories were not unindexed when deleted, only their contents were.
Similarly, they were not updated when moved. They are now, and the title is set
to the new location too, unless it was edited by the user.


Modified: trunk/UI/GTK2/src/OnDiskHandler.cpp
===================================================================
--- trunk/UI/GTK2/src/OnDiskHandler.cpp	2007-08-08 14:00:31 UTC (rev 914)
+++ trunk/UI/GTK2/src/OnDiskHandler.cpp	2007-08-08 15:24:54 UTC (rev 915)
@@ -293,8 +293,17 @@
 	cout << "OnDiskHandler::directoryMoved: " << dirName << endl;
 #endif
 	pthread_mutex_lock(&m_mutex);
-	if (m_index.listDocumentsInDirectory(previousDirName, docIdList) == true)
+	// Get a list of documents in that directory
+	m_index.listDocumentsInDirectory(previousDirName, docIdList);
+	// ...and the directory itself
+	unsigned int dirDocId = m_index.hasDocument(string("file://") + previousDirName);
+	if (dirDocId > 0)
 	{
+		docIdList.insert(dirDocId);
+	}
+	if (docIdList.empty() == false)
+	{
+		// FIXME: check the actual directory is updated too !
 		for (set<unsigned int>::const_iterator iter = docIdList.begin();
 			iter != docIdList.end(); ++iter)
 		{
@@ -304,6 +313,17 @@
 			{
 				string newLocation(docInfo.getLocation());
 
+				if (dirDocId == *iter)
+				{
+					Url previousUrlObj(previousDirName), urlObj(dirName);
+
+					// Update the title to the new directory
+					if (docInfo.getTitle() == previousUrlObj.getFile())
+					{
+						docInfo.setTitle(urlObj.getFile());
+					}
+				}
+
 				string::size_type pos = newLocation.find(previousDirName);
 				if (pos != string::npos)
 				{
@@ -314,6 +334,9 @@
 
 					replaceFile(*iter, docInfo);
 				}
+#ifdef DEBUG
+				else cout << "OnDiskHandler::directoryMoved: skipping " << newLocation << endl;
+#endif
 			}
 		}
 
@@ -330,13 +353,12 @@
 bool OnDiskHandler::fileDeleted(const string &fileName)
 {
 	FilterWrapper wrapFilter(&m_index);
-	string location("file://");
+	string location(string("file://") + fileName);
 	bool handledEvent = true;
 
 #ifdef DEBUG
 	cout << "OnDiskHandler::fileDeleted: " << fileName << endl;
 #endif
-	location += fileName;
 	pthread_mutex_lock(&m_mutex);
 	unsigned int docId = m_index.hasDocument(location);
 	if (docId > 0)
@@ -362,8 +384,12 @@
 	cout << "OnDiskHandler::directoryDeleted: " << dirName << endl;
 #endif
 	pthread_mutex_lock(&m_mutex);
+	// Unindex all of the directory's documents
 	if (m_index.unindexDocuments(dirName, IndexInterface::BY_DIRECTORY) == true)
 	{
+		// ...as well as the actual directory
+		m_index.unindexDocument(dirName);
+
 		m_history.deleteItems(string("file://") + dirName);
 		handledEvent = true;
 	}



From fabricecolin at mail.berlios.de  Mon Aug 13 16:25:09 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 13 Aug 2007 16:25:09 +0200
Subject: [Pinot-svn] r916 - trunk
Message-ID: <200708131425.l7DEP9Br019598@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-13 16:25:09 +0200 (Mon, 13 Aug 2007)
New Revision: 916

Modified:
   trunk/README
Log:
Talk about the new Reload method, the search strategy.
An explanation of the "ext" filter was missing.


Modified: trunk/README
===================================================================
--- trunk/README	2007-08-08 15:24:54 UTC (rev 915)
+++ trunk/README	2007-08-13 14:25:09 UTC (rev 916)
@@ -165,20 +165,10 @@
 6. Search strategy
 
 
-  When querying an index, Pinot adopts a multi-stepped search strategy that
-  first attempts to find the documents that best match the query. If a given
-  step doesn't return results, the next step alters the query slightly before
-  it is run again. These steps are :
-    * step 1
-      obey the query's operators, don't stem terms
-    * step 2
-      obey operators, stem terms
-    * step 3
-      don't follow operators (all terms are OR'ed) and don't stem terms
-    * step 4
-      don't follow operators and stem terms
-  Stemming is available only to Stored Queries for which a language is defined
-  (Query parameters box, Indexes only tab).
+  When querying an index, Pinot attempts to find the documents that best match
+  the query. The query is run first as is. If no results are found, the terms
+  are stemmed and the query is run again.
+  Stemming is available only to Stored Queries for which a language is defined.
 
   Queries can be expressed in a very natural way, using a combination of operators
   and filters. For instance "type:text/html and lang:en and (tcp near ip)" looks
@@ -189,6 +179,7 @@
       "site" for host name, eg "site:pinot.berlios.de"
       "file" for file name, eg "file:index.html"
     * filters that only apply to Current User engines
+      "ext" for file extension, eg "ext:html"
       "title" for title, eg "title:Session"
       "url" for URL, eg "url:http://pinot.berlios.de/"
       "dir" for directory, eg "dir:/home/fabrice/test.txt"
@@ -296,8 +287,9 @@
 
    D-Bus activation makes sure the service is running whenever one of its
    methods is invoked by any consumer application. For instance, clicking
-   OK on the Preferences box will call the service's GetStatistics method,
-   thus ensuring the service is running.
+   OK on the Preferences box will call the service's Reload method, thus
+   ensuring the service is running. This also causes the service to reload
+   the configuration file.
 
    Starting with 0.63, the service is auto-started. The file that enables
    this is located at /etc/xdg/autostart/pinot-dbus-daemon.desktop.
@@ -306,9 +298,9 @@
    programs list.
 
    A few things to keep in mind :
-     * the service doesn't reload its configuration while running, so any
-       change (for instance, adding or removing an indexable directory) will
-       take effect when the service is restarted.
+     * in version 0.75 and older, the service didn't reload its configuration
+       while running, so any change (for instance, adding or removing an
+       indexable directory) only took effect when the service was restarted.
      * when starting, the service will first crawl all configured locations
        and (re)index new and modified files. Starting with 0.64, the daemon's
        scheduling priority is set very low (15, can be adjusted with --priority)



From fabricecolin at mail.berlios.de  Tue Aug 14 14:00:19 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 14:00:19 +0200
Subject: [Pinot-svn] r917 - trunk/Search
Message-ID: <200708141200.l7EC0Jfw019009@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 14:00:19 +0200 (Tue, 14 Aug 2007)
New Revision: 917

Modified:
   trunk/Search/SherlockParser.cpp
Log:
Tentative fix for boost 1.34. Plugins may not be parsed in full. This doesn't
prevent the parser from extracting the required information.


Modified: trunk/Search/SherlockParser.cpp
===================================================================
--- trunk/Search/SherlockParser.cpp	2007-08-13 14:25:09 UTC (rev 916)
+++ trunk/Search/SherlockParser.cpp	2007-08-14 12:00:19 UTC (rev 917)
@@ -522,7 +522,7 @@
 
 	map<string, string> searchParams, interpretParams, inputItems;
 	string userInput, nextInput, nextFactor, nextValue;
-	bool fullParsing = false;
+	bool parsedPlugin = false;
 
 	if (pthread_mutex_lock(&m_mutex) == 0)
 	{
@@ -535,7 +535,7 @@
 					userInput, nextInput, nextFactor, nextValue);
 
 				parse_info<> parseInfo = boost::spirit::parse(pData, plugin, skip);
-				fullParsing = parseInfo.full;
+				parsedPlugin = parseInfo.hit;
 			}
 			else
 			{
@@ -543,7 +543,7 @@
 				plugin_min_grammar plugin(searchParams);
 
 				parse_info<> parseInfo = boost::spirit::parse(pData, plugin, skip);
-				fullParsing = parseInfo.full;
+				parsedPlugin = parseInfo.hit;
 			}
 		}
 		catch (const exception &e)
@@ -551,14 +551,14 @@
 #ifdef DEBUG
 			cout << "SherlockParser::parse: caught exception ! " << e.what() << endl;
 #endif
-			fullParsing = false;
+			parsedPlugin = false;
 		}
 		catch (...)
 		{
 #ifdef DEBUG
 			cout << "SherlockParser::parse: caught unknown exception !" << endl;
 #endif
-			fullParsing = false;
+			parsedPlugin = false;
 		}
 
 		pthread_mutex_unlock(&m_mutex);
@@ -569,7 +569,7 @@
 
 	SherlockResponseParser *pResponseParser = NULL;
 
-	if (fullParsing == true)
+	if (parsedPlugin == true)
 	{
 		map<string, string> lowSearchParams, lowInterpretParams, lowInputItems;
 



From fabricecolin at mail.berlios.de  Tue Aug 14 14:02:24 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 14:02:24 +0200
Subject: [Pinot-svn] r918 - trunk/scripts/python
Message-ID: <200708141202.l7EC2OvN019297@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 14:02:19 +0200 (Tue, 14 Aug 2007)
New Revision: 918

Modified:
   trunk/scripts/python/pinot-live.py
Log:
Removed shebang.


Modified: trunk/scripts/python/pinot-live.py
===================================================================
--- trunk/scripts/python/pinot-live.py	2007-08-14 12:00:19 UTC (rev 917)
+++ trunk/scripts/python/pinot-live.py	2007-08-14 12:02:19 UTC (rev 918)
@@ -1,4 +1,3 @@
-#!/usr/bin/env python
 #
 # Copyright 2005-2007 Fabrice Colin
 #



From fabricecolin at mail.berlios.de  Tue Aug 14 16:38:53 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 16:38:53 +0200
Subject: [Pinot-svn] r919 - trunk/UI/GTK2/src
Message-ID: <200708141438.l7EEcrRT032444@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 16:38:52 +0200 (Tue, 14 Aug 2007)
New Revision: 919

Modified:
   trunk/UI/GTK2/src/queryDialog.cc
   trunk/UI/GTK2/src/queryDialog.hh
Log:
Add a separator in the filters list between those that apply to all engines
and those that don't.


Modified: trunk/UI/GTK2/src/queryDialog.cc
===================================================================
--- trunk/UI/GTK2/src/queryDialog.cc	2007-08-14 12:02:19 UTC (rev 918)
+++ trunk/UI/GTK2/src/queryDialog.cc	2007-08-14 14:38:52 UTC (rev 919)
@@ -94,6 +94,25 @@
 {
 }
 
+bool queryDialog::is_separator(const RefPtr<TreeModel>& model, const TreeModel::iterator& iter)
+{
+	if (iter)
+	{
+		const TreeModel::Path path = model->get_path(iter);
+		string rowPath(from_utf8(path.to_string()));
+		unsigned int rowPos = 0;
+
+		// FIXME: this is extremely hacky !
+		if ((sscanf(rowPath.c_str(), "%u", &rowPos) == 1) &&
+			(rowPos == 2))
+		{
+			return true;
+		}
+	}
+
+	return false;
+}
+
 void queryDialog::populate_comboboxes()
 {
 	unsigned int labelNum = 1;
@@ -116,8 +135,11 @@
 	}
 
 	// All supported filters
+	filterCombobox->set_row_separator_func(SigC::slot(*this, &queryDialog::is_separator));
 	filterCombobox->append_text(_("Host name"));
 	filterCombobox->append_text(_("File name"));
+	// Separate filters that apply to all engines from the rest
+	filterCombobox->append_text("===");
 	filterCombobox->append_text(_("File extension"));
 	filterCombobox->append_text(_("Title"));
 	filterCombobox->append_text(_("URL"));
@@ -206,24 +228,27 @@
 			filter = "file";
 			break;
 		case 2:
+			// Separator
+			break;
+		case 3:
 			filter = "ext";
 			break;
-		case 3:
+		case 4:
 			filter = "title";
 			break;
-		case 4:
+		case 5:
 			filter = "url";
 			break;
-		case 5:
+		case 6:
 			filter = "dir";
 			break;
-		case 6:
+		case 7:
 			filter = "lang";
 			break;
-		case 7:
+		case 8:
 			filter = "type";
 			break;
-		case 8:
+		case 9:
 			filter = "label";
 			break;
 		default:

Modified: trunk/UI/GTK2/src/queryDialog.hh
===================================================================
--- trunk/UI/GTK2/src/queryDialog.hh	2007-08-14 12:02:19 UTC (rev 918)
+++ trunk/UI/GTK2/src/queryDialog.hh	2007-08-14 14:38:52 UTC (rev 919)
@@ -43,6 +43,9 @@
 	Glib::Date m_toDate;
 	bool m_badName;
 
+	bool is_separator(const Glib::RefPtr<Gtk::TreeModel>& model,
+		const Gtk::TreeModel::iterator& iter);
+
 	void populate_comboboxes();
 
 	virtual void on_queryOkbutton_clicked();



From fabricecolin at mail.berlios.de  Tue Aug 14 16:39:33 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 16:39:33 +0200
Subject: [Pinot-svn] r920 - trunk/Search
Message-ID: <200708141439.l7EEdXYS032568@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 16:39:33 +0200 (Tue, 14 Aug 2007)
New Revision: 920

Modified:
   trunk/Search/pinot-search.cpp
Log:
Call setDefaultOperator().


Modified: trunk/Search/pinot-search.cpp
===================================================================
--- trunk/Search/pinot-search.cpp	2007-08-14 14:38:52 UTC (rev 919)
+++ trunk/Search/pinot-search.cpp	2007-08-14 14:39:33 UTC (rev 920)
@@ -253,6 +253,7 @@
 	}
 
 	queryProps.setMaximumResultsCount(maxResultsCount);
+	pEngine->setDefaultOperator(SearchEngineInterface::DEFAULT_OP_AND);
 	if (pEngine->runQuery(queryProps) == true)
 	{
 		string resultsPage;



From fabricecolin at mail.berlios.de  Tue Aug 14 16:40:52 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 16:40:52 +0200
Subject: [Pinot-svn] r921 - trunk/Utils
Message-ID: <200708141440.l7EEeqbo032756@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 16:40:52 +0200 (Tue, 14 Aug 2007)
New Revision: 921

Modified:
   trunk/Utils/Document.cpp
Log:
Try to open files with O_NOATIME.


Modified: trunk/Utils/Document.cpp
===================================================================
--- trunk/Utils/Document.cpp	2007-08-14 14:39:33 UTC (rev 920)
+++ trunk/Utils/Document.cpp	2007-08-14 14:40:52 UTC (rev 921)
@@ -24,6 +24,7 @@
 #include <sys/mman.h>
 #include <unistd.h>
 #include <fcntl.h>
+#include <errno.h>
 #include <iostream>
 
 #include "Document.h"
@@ -131,6 +132,11 @@
 bool Document::setDataFromFile(const string &fileName)
 {
 	struct stat fileStat;
+#ifndef O_NOATIME
+	int openFlags = O_RDONLY;
+#else
+	int openFlags = O_RDONLY|O_NOATIME;
+#endif
 
 	if (fileName.empty() == true)
 	{
@@ -158,9 +164,17 @@
 	}
 
 	// Open the file in read-only mode
-	int fd = open(fileName.c_str(), O_RDONLY);
-	if (fd == -1)
+	int fd = open(fileName.c_str(), openFlags);
+#ifdef O_NOATIME
+	if ((fd < 0) &&
+		(errno == EPERM))
 	{
+		// Try again
+		fd = open(fileName.c_str(), O_RDONLY);
+	}
+#endif
+	if (fd < 0)
+	{
 		cerr << "Document::setDataFromFile: " << fileName << " couldn't be opened" << endl;
 		return false;
 	}



From fabricecolin at mail.berlios.de  Tue Aug 14 16:42:58 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 16:42:58 +0200
Subject: [Pinot-svn] r922 - trunk
Message-ID: <200708141442.l7EEgwKE000237@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 16:42:58 +0200 (Tue, 14 Aug 2007)
New Revision: 922

Modified:
   trunk/TODO
Log:
Current status.


Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-08-14 14:40:52 UTC (rev 921)
+++ trunk/TODO	2007-08-14 14:42:58 UTC (rev 922)
@@ -16,6 +16,8 @@
 - Document which query parameters apply to Web engines
 - Extend metadata beyond title,location,language,type,timestamp,size
 - Sync with gtk+'s xdgmime
+- Look for user-specific mimeinfo.cache in .local as suggested by Lee on the mailing list
+- Build against Fedora's patched libtextcat
 
 Tokenize
 - Allow to cache documents that had to be converted ? eg PDF, MS Word
@@ -27,7 +29,7 @@
 - HtmlFilter to look for META tags Author, Creator, Publisher and CreationDate
 - Filters should have a version number so that new versions force reindexing documents of the
  given type
-- XmLFilter is slow, rewrite file parsing with the TextReader interface
+- XmLFilter is slow-ish, rewrite file parsing with the TextReader interface
 
 Monitor
 - Implement support for Solaris FEM
@@ -38,21 +40,23 @@
 - Make User-Agent string configurable
 - Make download timeout configurable
 - Support for HTML frames
+- Test NeonDownloader
 
 Search
 - With engines that provide a redirection URL for results (eg Acoona), it looks like
   the query hitory is not saved/checked correctly
-- Add http://www.patentcommons.org/commons/patentsearch.php
 - Make sure Description files' SyndicationRight is not private or closed
 - Get hold of stopwords lists for the languages supported by Xapian's stemmers
  and remove stopwords from queries as first step of search
-- Make multi-step index search optional
+- If a Web query fails, get spelling suggestions from the MERGED database
+- Unify spelling suggestions, terms expansion and default-to-OR search as user feedback
+- Enable to search in results, either by combining queries or via a results set
+- The ext filter should apply to all engines
+- Google and maybe others support the site filter so don't remove it from queries
 
 Index
 - Play around with the XAPIAN_FLUSH_THRESHOLD env var
-- Hash document data to determine on updates whether documents have changed
-- Xapian Query objects will become serializable at some point, this will be useful
-  for stored queries
+- MD5 hash to determine on updates whether documents have changed, as done by omindex
 - Reopen connection to remote indexes when necessary; does Xapian throw a RemoteError ?
 - Allow to access remote Xapian indexes tunneled through ssh with xapian-progsrv,
   and make sure ssh will ask passwords with /usr/libexec/openssh/ssh-askpass
@@ -62,15 +66,13 @@
 - XapianIndex could do with some common code refactoring
 - With Xapian >= 1.0, all indexes can be browsed with the new global posting list, ie
   Xapian::Database::postlist_begin("")
-- Use Xapian >= 1.0 TermGenerator class
-- Xapian >= 1.0's QueryParser makes different assumptions about terms (http://www.xapian.org/docs/termgenerator.html)
 - Xapian > 1.0 has a version of Xapian::Database::allterms_begin() that takes a prefix
 - With Xapian > 1.0.2, for date ranges, use QueryParser::add_valuerangeprocessor()
  NumberValueRangeProcessor and sortable_serialise()
 - Automatically categorize documents based on MIME type and source into picture, video, etc...
-- Does updateDocumentInfo sometimes fail to remove terms from the old title ?
 - DBusXapianIndex to use D-Bus method Index
 - pinot-index to instantiate a DBusXapianIndex if dealing with the daemon index
+- After indexing or updating a document, a call to getDocumentInfo() shouldn't be necessary
 
 Mail
 - Find out what kind of locking scheme Mozilla uses (POSIX lock ?) and use that
@@ -93,10 +95,10 @@
 - DBus SetDocument[s]Labels should create labels if necessary
 - Reintroduce Index method in D-Bus interface
 - There's currently no way to get a document's ID without running a search
-- Allow notifications when configuration should be reloaded
-- Implement Xesam draft(s)
-- SimpleQuery to switch multi-step search on
+- Follow updates to Xesam specs
 - Enable to deactivate D-Bus interface
+- Force full scans on Reload ?
+- When a file or directory is moved, should the history be updated too ?
 
 UI
 - When sorting results by host name, give better score to results that appear
@@ -122,13 +124,10 @@
 - Unknown exceptions in IndexingThread or elsewhere should be logged as errors
 - Show whether Pinot was built with boost Spirit and how many plugins of each
  type there are
-- Multi-step search should be off to start with. If no exact match is found,
- show a button in the results group to allow the user to try step 2 and beyond
-- Profile the UI and find out why it takes so much CPU at startup, especially
- when the daemon is busy indexing : is it because we are trying to get hold of
- a revision of the index ?
 - Delete all temporary files when exiting
 - Add less than, equal to, greater than filters on size for stored queries
-- Show with icons which stored queries are fully, partially or not at all Web friendly
+- Show which stored queries are fully, partially or not at all Web friendly
 - List viewed URLs
+- Unify ExpandQuery and Querying threads !
+- Are labels preserved on updates and set on imports correctly ?
 



From fabricecolin at mail.berlios.de  Tue Aug 14 17:33:55 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 14 Aug 2007 17:33:55 +0200
Subject: [Pinot-svn] r923 - in trunk: . po
Message-ID: <200708141533.l7EFXtOb004436@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-14 17:33:43 +0200 (Tue, 14 Aug 2007)
New Revision: 923

Added:
   trunk/po/zh_TW.po
Modified:
   trunk/AUTHORS
   trunk/configure.in
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/it.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
Log:
Synced with Rosetta's current po's, including new zh_TW translation by
Yung-Chung Lin.


Modified: trunk/AUTHORS
===================================================================
--- trunk/AUTHORS	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/AUTHORS	2007-08-14 15:33:43 UTC (rev 923)
@@ -42,4 +42,5 @@
 	Spanish - Jes?s Tramullas <jesus at tramullas dot com>
 		& Garbage <garbage at openfutura.com>
 	Swedish - Daniel Nylander <po at danielnylander dot se>
+	Traditional Chinese - ??? Yung-Chung Lin <henearkrxern at gmail dot com>
 

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/configure.in	2007-08-14 15:33:43 UTC (rev 923)
@@ -26,7 +26,7 @@
 		[the gettext domain])
 
 dnl Add the languages which your application supports here.
-ALL_LINGUAS="de es fr it nl pt pt_BR ru sv"
+ALL_LINGUAS="de es fr it nl pt pt_BR ru sv zh_TW"
 #AM_GNU_GETTEXT([external]) 
 AM_GLIB_GNU_GETTEXT
 

Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/de.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
 "PO-Revision-Date: 2007-06-21 19:51+0800\n"
 "Last-Translator: Christian Dywan <christian at twotoasts.de>\n"
 "Language-Team: German <de at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-04-25 00:28:10+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:21+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -27,24 +27,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Meine Webseiten"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Meine Dokumente"
 
@@ -94,7 +94,7 @@
 msgid "External index"
 msgstr "Externer Index"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr ""
 
@@ -183,180 +183,180 @@
 msgstr "Unbestimmt"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr ""
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 #, fuzzy
 msgid "Showing"
 msgstr "Zeige"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr ""
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Dokument aktualisiert"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indiziert"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Nicht indizierte(s) Dokument(e)"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 #, fuzzy
 msgid "is already in use"
 msgstr "wird bereits benutzt"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "Index konnte nicht umbenannt werden"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
 msgstr "Ergebnisse"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Dieses Dokument aus dem Index entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Diese Dokumente aus dem Index entfernen?"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "Durchsuchen Sie das Internet und Ihre Dokumente !"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "Konnte Index nicht hinzuf?gen"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "Konnte Index nicht entfernen"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Keine Suchmaschine ausgew?hlt"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Bitte geben Sie zuerst den Google API-Schl?ssel ein"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Keine Standardanwendung f?r Typ angegeben"
 
@@ -537,19 +537,19 @@
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Wichtig"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Neu"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Pers?nlich"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr ""
 
@@ -660,7 +660,7 @@
 msgid "Preferences"
 msgstr "Einstellungen"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr ""
 
@@ -684,46 +684,45 @@
 msgid "Terms:"
 msgstr ""
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Rechnername"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Dateiname"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Dateiendung"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr ""
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Verzeichnis"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr ""
 
@@ -817,67 +816,67 @@
 msgid "Errors"
 msgstr "Fehler"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Kein Titel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Kann Dokumenttyp nicht indizieren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr ""
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META-Tag verbietet das Indizieren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr ""
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "Dokument konnte nicht aktualisiert werden"

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/es.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -8,14 +8,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Gar Bage <garbage at openfutura.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-05-22 11:38:06+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:11+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -28,24 +28,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mis Paginas Web"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mis documentos"
 
@@ -96,7 +96,7 @@
 msgid "External index"
 msgstr "?ndice externo"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Ninguno"
 
@@ -182,178 +182,178 @@
 msgstr "Indefinido"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "La localizaci?n del resultado es"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "La localizaci?n del documento es"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Mostrando"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "documentos"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documentos comenzando en"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "B?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "en"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "finalizado"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "M?s como"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "Etiqueta(s) actualizada(s)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Documento actualizado"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indizado"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Documento(s) no indizado(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Propiedades del documento actualizadas"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "No se pudo renombrar ?ndice, nombre"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "ya est? en uso"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "No se pudo renombrar el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
 msgstr "resultados"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "B?squeda activa"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "No se pudo a?adir la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "no existe"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "?Borrar este documento del ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "?Borrar este documento del ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Una herramienta metabuscador para el escritorio libre"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "Busca en el web y en sus documentos"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Nombre del ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "No se pudo a?adir el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "A?adido un nuevo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "No se pudo borrar el ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Al menos una tarea no ha finalizado. ?Parar ahora?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nombre la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "No se pudo actualizar la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "B?squeda editada"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "No se pudo a?adir la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "A?adida una nueva b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "B?squeda no definida"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Motor de b?squeda no seleccionado"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Por favor, primero configure el API de Google"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "Ejecutando la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "No hay aplicaci?n predefinida para el tipo"
 
@@ -534,19 +534,19 @@
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Nuevo"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Personal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "No clasificado"
 
@@ -656,7 +656,7 @@
 msgid "Preferences"
 msgstr "Preferencias"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "Etiqueta"
 
@@ -680,46 +680,45 @@
 msgid "Terms:"
 msgstr "T?rminos:"
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Nombre de servidor"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Nombre de archivo"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Extensi?n del archivo"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "T?tulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Carpeta"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "Codigo de idioma"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr "Fecha inicial"
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr "Fecha final"
 
@@ -812,67 +811,67 @@
 msgid "Errors"
 msgstr "Errores"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "No se pudo indizar el buzon de correo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "ya est? indizado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "ya excluido"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Error en el ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Sin t?tulo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "No se pudo crear el motor de b?squeda"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "No se pudo ejecutar la b?squeda contra el motor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "No se pudo usar un recuperador para el protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "No se pudo descargar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "No se pudo indizar el tipo de documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "a"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "La etiqueta META Robots proh?be la indizaci?n"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "No se pudo indizar"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "No se pudo des-indizar lo(s) documento(s)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "No se pudo actualizar el documento"

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/fr.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -8,14 +8,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
-"PO-Revision-Date: 2007-06-21 19:51+0800\n"
-"Last-Translator: Fabrice Colin <fabricecolin at users.berlios.de>\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"PO-Revision-Date: 2007-04-03 04:46+0000\n"
+"Last-Translator: FabriceColin <fabrice.colin at gmail.com>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-05-22 11:38:08+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:14+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -28,24 +28,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mes Pages Web"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mes Documents"
 
@@ -95,7 +95,7 @@
 msgid "External index"
 msgstr "Index externe"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Aucune"
 
@@ -126,7 +126,7 @@
 
 #: UI/GTK2/src/IndexPage.cpp:189
 msgid "All"
-msgstr "Tout"
+msgstr ""
 
 #: UI/GTK2/src/launcherDialog_glade.cc:64
 msgid ""
@@ -183,177 +183,178 @@
 msgstr "Indefini"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "Le chemin du resultat est"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "Le chemin du document is"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "documents,"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "au total, a partir de"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "La recherche"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "sur"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "est terminee"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "Similaire a"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "Mis a jour l(es) etiquette(s)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Mis a jour le document"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indexe"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Desindexe le(s) document(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Mis a jour les proprietes du document"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "N'a pas pu renommer l'index, le nom"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "est deja utilise"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "N'a pas pu renommer l'index"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "Edite l'index"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
+#, fuzzy
 msgid "Export Results"
-msgstr "Exporter Les Resultats"
+msgstr "resultats"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "Recherche"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "N'a pas pu trouver"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "L'index"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "n'existe pas"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Enlever ce document de l'index ?"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Enlever ces documents de l'index ?"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Un outil de recherche pour le Bureau Libre"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "Cherche le Web et vos documents"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Nom de l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "N'a pas pu ajouter l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "Ajoute un nouvel index"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "N'a pas pu enlever l'index"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Au moins une tache n'est pas terminee. Quitter maintenant ?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nom de la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "N'a pas pu mettre a jour la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Edite la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "N'a pas pu ajouter la recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Ajoute une nouvelle recherche"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "Recherche indefinie"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Pas de moteur selectionne"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Configurez la clef de l'API Google"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "Recherche en cours"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Pas d'application definie pour le type"
 
@@ -487,7 +488,7 @@
 
 #: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
 msgid "Hungarian"
-msgstr "Hongrois"
+msgstr ""
 
 #: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
 msgid "Italian"
@@ -503,7 +504,7 @@
 
 #: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
 msgid "Romanian"
-msgstr "Roumain"
+msgstr ""
 
 #: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
 msgid "Russian"
@@ -519,7 +520,7 @@
 
 #: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Turkish"
-msgstr "Turc"
+msgstr ""
 
 #: UI/GTK2/src/pinot.cc:267
 msgid "Couldn't open index"
@@ -534,19 +535,19 @@
 msgstr "Il est recommende de mettre a jour tous les documents de Mes Pages Web"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Important"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Nouveau"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Personnel"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "Sans classification"
 
@@ -568,11 +569,11 @@
 
 #: UI/GTK2/src/prefsDialog.cc:315
 msgid "Exclude these patterns from indexing"
-msgstr "Ne pas indexer ces motifs"
+msgstr ""
 
 #: UI/GTK2/src/prefsDialog.cc:316
 msgid "Only index these patterns"
-msgstr "Indexer uniquement ces motifs"
+msgstr ""
 
 #: UI/GTK2/src/prefsDialog.cc:406
 msgid "New Label"
@@ -644,8 +645,9 @@
 msgstr "Ces repertoires seront indexes automatiquement:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:127
+#, fuzzy
 msgid "File patterns:"
-msgstr "Motifs de fichier:"
+msgstr "Extension de fichier"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
@@ -655,7 +657,7 @@
 msgid "Preferences"
 msgstr "Preferences"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "Etiquette"
 
@@ -679,46 +681,45 @@
 msgid "Terms:"
 msgstr "Termes:"
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Nom de machine"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Nom de fichier"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Extension de fichier"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titre"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Repertoire"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "Code langue"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "Type MIME"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr "Debut"
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr "Fin"
 
@@ -808,67 +809,67 @@
 msgid "Errors"
 msgstr "Erreurs"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "Ne peut pas indexer le courrier ici"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "est deja indexe"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "est exclus"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Erreur sur l'index"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Pas de titre"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "N'a pas pu creer le moteur"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "N'a pas pu lancer la recherche sur le moteur"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "N'a pas pu obtenir un brouteur pour"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "N'a pas pu telecharger"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Impossible d'indexer ce type de documents"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "a"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "Le META tag Robots interdit d'indexer"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "N'a pas pu indexer"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "N'a pas pu desindexer le(s) document(s)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "N'a pas pu mettre a jour le document"

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/it.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
 "PO-Revision-Date: 2007-06-21 19:51+0800\n"
 "Last-Translator: Marco Bazzani <visitors at libero.it>\n"
 "Language-Team: Italian <it at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-05-10 14:58:08+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:23+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -27,24 +27,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Pagine web personali"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Documenti personali"
 
@@ -94,7 +94,7 @@
 msgid "External index"
 msgstr "Indice esterno"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Nessuno"
 
@@ -182,178 +182,178 @@
 msgstr "Non Definito"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "la posizione del risultato ?"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "La posizione Documento ?"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Mostrando"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "dei"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documenti, inizio a"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "Richiesta"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "sulla"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "conclusione"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "Molti gradiscono"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "Descrizione(i) aggiornata"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Documento aggiornato"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indicizzato"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Documento/i non Indicizzato/i"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Propriet? documento aggiornata"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "Impossibile rinominare l'indice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "? gi? in uso"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "Impossibile rinominare l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "Indice modificato"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
 msgstr "risultati"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "Live Query"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "Impossibile trovare la query"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "Indice"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "non esiste"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Rimuovere questo documento dall'indice?"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Rimuovere questi documenti dall'indice?"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Un tool di ricerca per il Desktop Libero"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "Cerca nel Web e nei documenti !"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Nome indice"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "Impossibile aggiungere l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "Nuovo indice aggiunto"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "Impossibile rimuovere l'indice"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Nessuna operazione completata. Uscire comunque ?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nome Query"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "Impossibile aggiornare la query"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Query modificata"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "Impossibile aggiungere la query"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Nuova query aggiunto"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "Query non configurata"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Nessun motore di ricerca selezionato"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Prima inserisci la tua Google API key"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "Query in esecuzione"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Nessuna applicazione di default ? stata definita per tipo"
 
@@ -534,19 +534,19 @@
 msgstr "E' consigliato aggiornare tutti le pagine web personali"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Nuovo"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Personale"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "Non classificato"
 
@@ -658,7 +658,7 @@
 msgid "Preferences"
 msgstr "Preferenze"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "Descrizione"
 
@@ -682,46 +682,45 @@
 msgid "Terms:"
 msgstr "Termini:"
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Nome host"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Nome file"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Estensione file"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titolo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Directory"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "Codice di linguaggio"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr "Data iniziale"
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr "Data finale"
 
@@ -811,67 +810,67 @@
 msgid "Errors"
 msgstr "Errori"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "Impossibile indicizzare la mail qui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "? gia' stato indicizzato"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "e' blacklistato"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Errori indice su"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Nessun titolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "Impossibile creare un motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "Impossibile avviare un query sul motore di ricerca"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "Impossibile ottenere un downloader per il protocollo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "Impossibile recuperare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Impossibile indicizzare tipo di documento"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "a"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "il Robots META tag vieta l'indicizzazione"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "Impossibile indicizzare"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "Impossiible rimuovere i(l) documento/i dall'indice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "Impossibile aggiornare il documento"

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/nl.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
-"PO-Revision-Date: 2007-07-18 16:03+0000\n"
-"Last-Translator: Balaam's Miracle <balaam at balaamsmiracle.com>\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"PO-Revision-Date: 2007-08-03 19:02+0000\n"
+"Last-Translator: JW <jw00000 at gmail.com>\n"
 "Language-Team: Dutch <nl at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-07-21 04:18:16+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:19+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -27,42 +27,40 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mijn webpagina's"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mijn documenten"
 
 #. The last column is for the timestamp
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
 #: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
-#, fuzzy
 msgid "Date"
 msgstr "Datum"
 
 #: UI/GTK2/src/indexDialog.cc:122
 msgid "Served by"
-msgstr ""
+msgstr "Geserveerd door"
 
 #: UI/GTK2/src/indexDialog.cc:124
-#, fuzzy
 msgid "Local"
-msgstr "Locatie"
+msgstr "Lokaal"
 
 #: UI/GTK2/src/indexDialog.cc:286
 msgid "Index location"
@@ -96,7 +94,7 @@
 msgid "External index"
 msgstr "Externe index"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Geen"
 
@@ -134,6 +132,8 @@
 "There is no helper application defined for this document's type.\n"
 "Please enter the command to open this document."
 msgstr ""
+"Er is geen hulptoepassing gedefinieerd voor dit documenttype.\n"
+"Geef het commando op om dit document te openen."
 
 #: UI/GTK2/src/launcherDialog_glade.cc:67
 msgid "Use this command for other documents of the same type."
@@ -141,12 +141,11 @@
 
 #: UI/GTK2/src/launcherDialog_glade.cc:99
 msgid "Helper application"
-msgstr ""
+msgstr "Hulptoepassing"
 
 #: UI/GTK2/src/mainWindow.cc:140
-#, fuzzy
 msgid "Query Name"
-msgstr "Query naam"
+msgstr "Querynaam"
 
 #: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
@@ -179,184 +178,182 @@
 msgstr "NVT"
 
 #: UI/GTK2/src/mainWindow.cc:257
-#, fuzzy
 msgid "Undefined"
-msgstr "<niet gedefinieerd>"
+msgstr "Niet gedefinieerd"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "Uitvoerlocatie is"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "Documentlocatie is"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Aan het tonen"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "van"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documenten, beginnend bij"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "Query"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "op"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "Beeindigd"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "Meer zoals"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "Vernieuwde na(a)m(en)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Vernieuwd document"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Geindexeerd"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Niet geindexeerd(e) document(en)"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Vernieuwde documenteigenschappen"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "Kon index niet hernoemen, naam"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "is reeds in gebruik"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "Kon index niet hernoemen"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "Bewerkte index"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
-msgstr "_Resultaten"
+msgstr "resultaten"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "Rechtstreekse query"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "Kon query niet vinden"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "Inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "bestaat niet"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Verwijder dit document uit de inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Verwijder deze documenten uit de inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Een metazoek tool voor de Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "Zoek het web en uw documenten!"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Naam inhoudsopgave"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "Kon inhoudsopgave niet toevoegen"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "Nieuwe inhoudsopgave toegevoegd"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "Kon inhoudsopgave niet verwijderen"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Tenminste een taak is nog niet gereed. Nu stoppen?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Naam query"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "Kon query niet actualiseren"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Bewerkte query"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "Kon query niet toevoegen"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Nieuwe query toegevoegd"
 
-#: UI/GTK2/src/mainWindow.cc:2913
-#, fuzzy
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "Query niet vastgelegd"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Geen zoekmachine geselecteerd"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Geef eerst de Google API sleutel in"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "Lopende query"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Geen standaard toepassing gedefinieerd voor het type"
 
@@ -538,19 +535,19 @@
 "Het is aangeraden alle documenten in \"Mijn webpagina's\" te vernieuwen"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Belangrijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Nieuw"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Persoonlijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "Niet geclassificeerd"
 
@@ -559,9 +556,8 @@
 msgstr "Naam"
 
 #: UI/GTK2/src/prefsDialog.cc:89
-#, fuzzy
 msgid "Monitor"
-msgstr "Abonneren"
+msgstr "Observeren"
 
 #: UI/GTK2/src/prefsDialog.cc:90
 msgid "Location"
@@ -654,7 +650,7 @@
 #: UI/GTK2/src/prefsDialog_glade.cc:127
 #, fuzzy
 msgid "File patterns:"
-msgstr "Bestandssuffix"
+msgstr "Bestandsextensie"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
@@ -664,7 +660,7 @@
 msgid "Preferences"
 msgstr "Voorkeuren"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "Bijschrift"
 
@@ -688,47 +684,45 @@
 msgid "Terms:"
 msgstr "Termen:"
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Hostnaam"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Bestandsnaam"
 
-#: UI/GTK2/src/queryDialog.cc:121
-#, fuzzy
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
-msgstr "Bestandssuffix"
+msgstr "Bestandsextensie"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Map"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "Taal code"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "MIME type"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr "Begindatum"
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr "Einddatum"
 
@@ -741,7 +735,6 @@
 msgstr "Query tekst"
 
 #: UI/GTK2/src/queryDialog_glade.cc:83
-#, fuzzy
 msgid "Index results with label"
 msgstr "Indexeer alle resultaten met label"
 
@@ -771,43 +764,37 @@
 msgstr "Uitpakken"
 
 #: UI/GTK2/src/statisticsDialog.cc:72
-#, fuzzy
 msgid "Indexes"
-msgstr "Geindexeerd"
+msgstr "Indexen"
 
 #: UI/GTK2/src/statisticsDialog.cc:87
-#, fuzzy
 msgid "History"
-msgstr "Map"
+msgstr "Geschiedenis"
 
 #: UI/GTK2/src/statisticsDialog.cc:92
 msgid "Daemon"
 msgstr "Daemon"
 
 #: UI/GTK2/src/statisticsDialog.cc:128 UI/GTK2/src/statisticsDialog.cc:143
-#, fuzzy
 msgid "documents"
-msgstr "Mijn documenten"
+msgstr "documenten"
 
 #: UI/GTK2/src/statisticsDialog.cc:132 UI/GTK2/src/statisticsDialog.cc:147
 msgid "Unknown error"
 msgstr "Onbekende fout."
 
 #: UI/GTK2/src/statisticsDialog.cc:154
-#, fuzzy
 msgid "Viewed"
-msgstr "Toon"
+msgstr "Weergegeven"
 
 #: UI/GTK2/src/statisticsDialog.cc:154
-#, fuzzy
 msgid "results"
-msgstr "_Resultaten"
+msgstr "resultaten"
 
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:171
-#, fuzzy
 msgid "Running under PID"
-msgstr "Lopende query"
+msgstr "Wordt uitgevoerd on het PID"
 
 #: UI/GTK2/src/statisticsDialog.cc:175
 msgid "Currently not running"
@@ -815,7 +802,7 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:182
 msgid "Crawled"
-msgstr ""
+msgstr "Gecrawld"
 
 #: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
@@ -825,67 +812,67 @@
 msgid "Errors"
 msgstr "Fouten"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "Kan mail hier niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "wordt al geindexeerd"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "staat op blacklist"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Indexeringsfout op"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Geen titel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "Kon zoekmachine niet maken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "Kon query niet uitvoeren op zoekmachine"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "Kon geen downloader verkrijgen voor protocol"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "Kon niet opzoeken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Kan documenttype niet indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "bij"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META taf verbiedt indexeren"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "Kon niet indexeren"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "Kan indexering van bestand(en) niet ongedaan maken"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "Kan document niet actualiseren"

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/pt.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
-"PO-Revision-Date: 2007-07-21 22:12+0000\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"PO-Revision-Date: 2007-08-13 21:13+0000\n"
 "Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-07-23 14:28:09+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:28+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -28,24 +28,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "As minhas p?ginas Web"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Os Meus Documentos"
 
@@ -57,7 +57,7 @@
 
 #: UI/GTK2/src/indexDialog.cc:122
 msgid "Served by"
-msgstr ""
+msgstr "Servido por"
 
 #: UI/GTK2/src/indexDialog.cc:124
 msgid "Local"
@@ -95,7 +95,7 @@
 msgid "External index"
 msgstr "Index externo"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Nenhum"
 
@@ -133,6 +133,8 @@
 "There is no helper application defined for this document's type.\n"
 "Please enter the command to open this document."
 msgstr ""
+"N?o existe nenhuma aplica??o definido para este tipo de documento.\n"
+"Por favor digite o comando para abrir este documento."
 
 #: UI/GTK2/src/launcherDialog_glade.cc:67
 msgid "Use this command for other documents of the same type."
@@ -140,7 +142,7 @@
 
 #: UI/GTK2/src/launcherDialog_glade.cc:99
 msgid "Helper application"
-msgstr ""
+msgstr "Aplica??o"
 
 #: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
@@ -181,178 +183,178 @@
 msgstr "Indefinido"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "A localiza??o do resultado ?"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "A localiza??o do documento ?"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Visualizando"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "de"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documentos, come?ando em"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "Pesquisa"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "activar"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "terminado"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "Mais identico"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "T?tulo(s) atualizado(s)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Documento actualizado"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indexado"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Documento(s) n?o indexado(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Propriedades do documento actualizado"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "N?o foi poss?vel renomear o ?ndice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "j? est? em uso"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "N?o foi poss?vel renomear o ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
 msgstr "resultados"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "Consulta activa"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "N?o foi poss?vel encontrar a consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Remover este documento do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Remover estes documentos do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Um mecanismo de metabusca para o Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "Pesquise a Web e os seus documentos"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Nome do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "N?o foi poss?vel adicionar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "Adicionar novo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "N?o foi possivel remover o ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Pelo menos uma tarefa ainda n?o foi concluida. Sair agora?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nome da consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "N?o foi poss?vel actualizar a consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Consulta editada"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "N?o foi poss?vel adicionar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Adicionar nova consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "Consulta n?o foi actualizada"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Nenhum mecanismo de pesquisa seleccionado"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Primeiro escolha a tecla para a API Google"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "A executar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Nenhuma aplica??o associada ao tipo"
 
@@ -533,19 +535,19 @@
 msgstr "A actualizar todos os documentos nas Minhas P?ginas Web ? recomendado"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Novo"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -657,7 +659,7 @@
 msgid "Preferences"
 msgstr "Prefer?ncias"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "Etiqueta"
 
@@ -681,46 +683,45 @@
 msgid "Terms:"
 msgstr "Termos:"
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Nome da m?quina"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Nome do ficheiro"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Extens?o do ficheiro"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Direct?rio"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "C?digo do idioma"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr "Data de in?cio"
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr "Data de fim"
 
@@ -810,67 +811,67 @@
 msgid "Errors"
 msgstr "Erros"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "N?o foi poss?vel indexar o mail aqui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "j? est? a ser indexado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "est? na lista negra"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Erro na indexa??o em"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Sem t?tulo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "N?o foi poss?vel efectuar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "N?o foi poss?vel obter fonte de transfer?ncia para o protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "N?o foi poss?vel carregar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Imposs?vel indexar tipo de ficheiro"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "no"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META tag n?o s?o permitidos no ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "N?o foi poss?vel indexar"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "N?o foi poss?vel actualizar o documento"

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/pt_BR.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Leonardo Melo <leonardovazmelo at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-05-22 11:38:07+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:25+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -27,24 +27,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Minhas P?ginas Web"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Meus Documentos"
 
@@ -96,7 +96,7 @@
 msgid "External index"
 msgstr "?ndice externo"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Nenhum"
 
@@ -183,178 +183,178 @@
 msgstr "<indefinido>"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "Local resultante ?"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "Localiza??o do documento ?"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Exibindo"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "de"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "documentos, come?am no"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "Consulta"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "no"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "finalizada"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "Mais pr?xima"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "T?tulo(s) atualizado(s)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Documento atualizado"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indexado"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Documento(s) n?o indexidado(s)"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Propriedade de documentos atualizados"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "N?o foi poss?vel renomear ?ndice, nome"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "j? est? em uso"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "N?o foi poss?vel renomear ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "?ndice editado"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
 msgstr "_Resultados"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "Query ativa"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "N?o foi poss?vel encontrar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "n?o existe"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Remover documento do ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Remover documentos do ?ndice?"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Um mecanismo de metabusca gr?tis para Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Nome do ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "N?o foi poss?vel adicionar ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "Adicionar novo ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "N?o foi poss?vel remover ?ndice"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "Pelo menos uma tarefa n?o terminou ainda. Sair assim mesmo?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Nome da consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "N?o foi poss?vel atualizar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Consulta editada"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "N?o foi poss?vel adicionar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Adicionar nova consulta"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "Consulta n?o foi atualizada"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Nenhum mecanismo de pesquisa selecionado"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "Primeiro informe a tecla para Google API"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "Executando consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Aplica??o associada ao tipo n?o definida"
 
@@ -535,19 +535,19 @@
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Novo"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -662,7 +662,7 @@
 msgid "Preferences"
 msgstr "Prefer?ncias"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "T?tulo"
 
@@ -686,46 +686,45 @@
 msgid "Terms:"
 msgstr ""
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "Nome do host"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Nome do arquivo"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Extens?o do arquivo"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "T?tulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Diret?rio"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "C?digo da l?ngua"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr ""
 
@@ -822,67 +821,67 @@
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "N?o foi poss?vel indexar mail aqui"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "j? est? sendo indexado"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "est? na lista negra"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Erro no ?ndice no"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Sem t?tulo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "N?o foi poss?vel criar mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "N?o foi poss?vel executar consulta no mecanismo de pesquisa"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "N?o foi poss?vel obter fonte de download para o protocolo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "N?o foi poss?vel carregar"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Imposs?vel indexar tipo de arquivo"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "no"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META tag n?o s?o permitidos no ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "N?o foi poss?vel indexar"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "N?o foi poss?vel remover documento(s) do ?ndice"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "N?o foi poss?vel atualizar documento"

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/ru.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-05-22 11:38:08+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:26+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -27,24 +27,24 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "??? web-????????"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "??? ?????????"
 
@@ -96,7 +96,7 @@
 msgid "External index"
 msgstr "??????? ??????"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "???"
 
@@ -183,178 +183,178 @@
 msgstr "<??????????????>"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "??????? ?"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "???????????? ?????????"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "????????"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "??????????, ??????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "??"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "?????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "????????? ????? (??)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "??????????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "?????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "?? ????????????? ??????????"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "?????????? ??????? ?????????"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "?????????? ????????????? ??????, ????????"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "??? ????????????"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "?????????? ????????????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "?????????????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
 msgstr "_?????????"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "?????????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "??????"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "???"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "??????? ???????? ?? ??????? ?"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "??????? ??? ????????? ?? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "?????????? ?????????? ??? ?????????? ????????"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "???????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "???????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "?????????? ??????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "?? ??????? ???? ???? ?????? ??? ?? ?????????. ????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "???????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "?????????? ???????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "???????? ????? ??????"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "?????? ?? ??????????"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "?? ???? ????????? ??????? ?? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "??????????, ??????? ????????????? ???? Google API"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "?? ???? ?????????? ?? ????????? ?? ?????????? ??? ???? ??????????"
 
@@ -535,19 +535,19 @@
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "?????"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "???????"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "??????"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "??????????????"
 
@@ -658,7 +658,7 @@
 msgid "Preferences"
 msgstr "?????????"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "?????"
 
@@ -682,46 +682,45 @@
 msgid "Terms:"
 msgstr ""
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "??? ????"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "????"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "?????????? ?????"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "????????"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "???????? ??????????"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "??? ?????"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "??? MIME"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
 msgstr ""
 
@@ -818,67 +817,67 @@
 msgid "Errors"
 msgstr ""
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "?????? ????????????? ????? ?????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "??? ??????????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "??????????? ? ?????? ??????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "?????? ??????? ??"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "??? ????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "?? ??????? ??????? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "?? ??????? ????????? ?????? ? ????????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "?? ??????? ???????? ????????? ??? ?????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "?? ??????? ???????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "?????????? ????????????? ?????? ??? ??????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "?"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "META-???? ??????? ????????? ??????????????"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "?????????? ????????? ??????"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "?????????? ??????????????? ????????(?)"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "?????????? ???????? ????????"

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/sv.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -1,20 +1,20 @@
 # Swedish translation for pinot
-# Copyright (c) 2006 Rosetta Contributors and Canonical Ltd 2006
+# Copyright (c) 2007 Free Software Foundation, Inc.
 # This file is distributed under the same license as the pinot package.
+# Daniel Nylander <po at danielnylander.se>, 2007.
 #
-#, fuzzy
 msgid ""
 msgstr ""
-"Project-Id-Version: pinot 0.75\n"
+"Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-07-27 23:00+0800\n"
-"PO-Revision-Date: 2007-06-21 19:51+0800\n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"PO-Revision-Date: 2007-07-29 16:48+0000\n"
 "Last-Translator: Daniel Nylander <yeager at ubuntu.com>\n"
-"Language-Team: Swedish <sv at li.org>\n"
+"Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-05-22 11:38:09+0000\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:16+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -27,33 +27,32 @@
 #. Bind the callback's parameter to the index name
 #. Enable these menu items unless it is not the documents index
 #. Internal indices
-#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:324
-#: UI/GTK2/src/mainWindow.cc:327 UI/GTK2/src/mainWindow.cc:540
-#: UI/GTK2/src/mainWindow.cc:1026 UI/GTK2/src/mainWindow.cc:1197
-#: UI/GTK2/src/mainWindow.cc:1239 UI/GTK2/src/mainWindow.cc:1261
-#: UI/GTK2/src/mainWindow.cc:1292 UI/GTK2/src/mainWindow.cc:1903
-#: UI/GTK2/src/PinotSettings.cpp:282 UI/GTK2/src/PinotSettings.cpp:1339
-#: UI/GTK2/src/PinotSettings.cpp:1395 UI/GTK2/src/statisticsDialog.cc:77
-#: UI/GTK2/src/WorkerThreads.cpp:796 UI/GTK2/src/WorkerThreads.cpp:855
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mina webbsidor"
 
 #. Populate the submenu
 #. Bind the callback's parameter to the index name
-#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:318
-#: UI/GTK2/src/mainWindow.cc:321 UI/GTK2/src/mainWindow.cc:1033
-#: UI/GTK2/src/PinotSettings.cpp:283 UI/GTK2/src/PinotSettings.cpp:1340
-#: UI/GTK2/src/PinotSettings.cpp:1396 UI/GTK2/src/statisticsDialog.cc:82
-#: UI/GTK2/src/WorkerThreads.cpp:801 UI/GTK2/src/WorkerThreads.cpp:865
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mina dokument"
 
 #. The last column is for the timestamp
 #: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
 #: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
-#, fuzzy
 msgid "Date"
-msgstr "p?"
+msgstr "Datum"
 
 #: UI/GTK2/src/indexDialog.cc:122
 msgid "Served by"
@@ -89,13 +88,13 @@
 
 #: UI/GTK2/src/indexDialog_glade.cc:79 UI/GTK2/src/prefsDialog_glade.cc:82
 msgid "Address:"
-msgstr ""
+msgstr "Adress:"
 
 #: UI/GTK2/src/indexDialog_glade.cc:183
 msgid "External index"
 msgstr "Externt index"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:101
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
 msgid "None"
 msgstr "Ingen"
 
@@ -133,14 +132,16 @@
 "There is no helper application defined for this document's type.\n"
 "Please enter the command to open this document."
 msgstr ""
+"Det finns inget hj?lpprogram definierat f?r den h?r dokumenttypen.\n"
+"Ange kommandot f?r att ?ppna det h?r dokumentet."
 
 #: UI/GTK2/src/launcherDialog_glade.cc:67
 msgid "Use this command for other documents of the same type."
-msgstr ""
+msgstr "Anv?nd det h?r kommandot f?r andra dokument av samma typ."
 
 #: UI/GTK2/src/launcherDialog_glade.cc:99
 msgid "Helper application"
-msgstr ""
+msgstr "Hj?lpprogram"
 
 #: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
@@ -177,183 +178,182 @@
 msgstr "-"
 
 #: UI/GTK2/src/mainWindow.cc:257
-#, fuzzy
 msgid "Undefined"
-msgstr "<odefinierad>"
+msgstr "Odefinierad"
 
 #. Show the URL of the first result in the status bar
-#: UI/GTK2/src/mainWindow.cc:475
+#: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
 msgstr "Resultatplatsen ?r"
 
 #. Show the URL in the status bar
-#: UI/GTK2/src/mainWindow.cc:550
+#: UI/GTK2/src/mainWindow.cc:551
 msgid "Document location is"
 msgstr "Dokumentplatsen ?r"
 
-#: UI/GTK2/src/mainWindow.cc:883
+#: UI/GTK2/src/mainWindow.cc:884
 msgid "Showing"
 msgstr "Visar"
 
-#: UI/GTK2/src/mainWindow.cc:888
+#: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
 msgstr "av"
 
-#: UI/GTK2/src/mainWindow.cc:893
+#: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
 msgstr "dokument, b?rjar med"
 
-#: UI/GTK2/src/mainWindow.cc:926
+#: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
 msgstr "Fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:930 UI/GTK2/src/mainWindow.cc:3024
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
 msgid "on"
 msgstr "p?"
 
-#: UI/GTK2/src/mainWindow.cc:934
+#: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
 msgstr "slutade"
 
-#: UI/GTK2/src/mainWindow.cc:1062
+#: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
 msgstr "Kanske mer som"
 
-#: UI/GTK2/src/mainWindow.cc:1123
+#: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
 msgstr "Uppdaterade etikett(er)"
 
 #. Yes, it did
-#: UI/GTK2/src/mainWindow.cc:1207
+#: UI/GTK2/src/mainWindow.cc:1211
 msgid "Updated document"
 msgstr "Uppdaterade dokument"
 
-#: UI/GTK2/src/mainWindow.cc:1220
+#: UI/GTK2/src/mainWindow.cc:1224
 msgid "Indexed"
 msgstr "Indexerade"
 
-#: UI/GTK2/src/mainWindow.cc:1262
+#: UI/GTK2/src/mainWindow.cc:1266
 msgid "Unindexed document(s)"
 msgstr "Ej indexerade dokument"
 
-#: UI/GTK2/src/mainWindow.cc:1302
+#: UI/GTK2/src/mainWindow.cc:1306
 msgid "Updated document properties"
 msgstr "Egenskaper f?r uppdaterade dokument"
 
-#: UI/GTK2/src/mainWindow.cc:1355
+#: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
 msgstr "Kunde inte byta namn p? index, namn"
 
-#: UI/GTK2/src/mainWindow.cc:1359 UI/GTK2/src/mainWindow.cc:2292
-#: UI/GTK2/src/mainWindow.cc:2829
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
 msgid "is already in use"
 msgstr "anv?nds redan"
 
-#: UI/GTK2/src/mainWindow.cc:1372
+#: UI/GTK2/src/mainWindow.cc:1376
 msgid "Couldn't rename index"
 msgstr "Kunde inte byta namn p? index"
 
-#: UI/GTK2/src/mainWindow.cc:1385
+#: UI/GTK2/src/mainWindow.cc:1389
 msgid "Edited index"
 msgstr "Redigerade index"
 
-#: UI/GTK2/src/mainWindow.cc:1711
+#: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
-msgstr "_Resultat"
+msgstr "resultat"
 
 #. Find this query
-#: UI/GTK2/src/mainWindow.cc:1800 UI/GTK2/src/mainWindow.cc:2462
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
 msgid "Live query"
 msgstr "Levande fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:1826
+#: UI/GTK2/src/mainWindow.cc:1830
 msgid "Couldn't find query"
 msgstr "Kunde inte hitta fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2018 UI/GTK2/src/WorkerThreads.cpp:654
-#: UI/GTK2/src/WorkerThreads.cpp:1686
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
 msgid "Index"
 msgstr "Index"
 
-#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:658
-#: UI/GTK2/src/WorkerThreads.cpp:1690
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
 msgid "doesn't exist"
 msgstr "finns inte"
 
-#: UI/GTK2/src/mainWindow.cc:2177
+#: UI/GTK2/src/mainWindow.cc:2181
 msgid "Remove this document from the index ?"
 msgstr "Ta bort detta dokument fr?n indexet?"
 
-#: UI/GTK2/src/mainWindow.cc:2196
+#: UI/GTK2/src/mainWindow.cc:2200
 msgid "Remove these documents from the index ?"
 msgstr "Ta bort dessa dokument fr?n indexet?"
 
-#: UI/GTK2/src/mainWindow.cc:2242
+#: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
 msgstr "Ett metas?kningsverktyg f?r Free Desktop"
 
-#: UI/GTK2/src/mainWindow.cc:2243
+#: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
 msgstr "S?k p? webben och i dina dokument!"
 
-#: UI/GTK2/src/mainWindow.cc:2288
+#: UI/GTK2/src/mainWindow.cc:2292
 msgid "Index name"
 msgstr "Indexnamn"
 
-#: UI/GTK2/src/mainWindow.cc:2303
+#: UI/GTK2/src/mainWindow.cc:2307
 msgid "Couldn't add index"
 msgstr "Kunde inte l?gga till index"
 
-#: UI/GTK2/src/mainWindow.cc:2317
+#: UI/GTK2/src/mainWindow.cc:2321
 msgid "Added new index"
 msgstr "Lade till nytt index"
 
-#: UI/GTK2/src/mainWindow.cc:2352
+#: UI/GTK2/src/mainWindow.cc:2356
 msgid "Couldn't remove index"
 msgstr "Kunde inte ta bort index"
 
-#: UI/GTK2/src/mainWindow.cc:2642
+#: UI/GTK2/src/mainWindow.cc:2646
 msgid "At least one task hasn't completed yet. Quit now ?"
 msgstr "?tminstone en uppgift har inte f?rdigst?llts ?n. Avsluta nu?"
 
-#: UI/GTK2/src/mainWindow.cc:2825
+#: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
 msgstr "Fr?genamn"
 
-#: UI/GTK2/src/mainWindow.cc:2852
+#: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
 msgstr "Kunde inte uppdatera fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2860
+#: UI/GTK2/src/mainWindow.cc:2864
 msgid "Edited query"
 msgstr "Redigerade fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2867
+#: UI/GTK2/src/mainWindow.cc:2871
 msgid "Couldn't add query"
 msgstr "Kunde inte l?gga till fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2875
+#: UI/GTK2/src/mainWindow.cc:2879
 msgid "Added new query"
 msgstr "Lade till ny fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:2913
+#: UI/GTK2/src/mainWindow.cc:2917
 msgid "Query is not set"
 msgstr "Fr?gan ?r inte inst?lld"
 
-#: UI/GTK2/src/mainWindow.cc:2924
+#: UI/GTK2/src/mainWindow.cc:2928
 msgid "No search engine selected"
 msgstr "Ingen s?kmotor vald"
 
-#: UI/GTK2/src/mainWindow.cc:3011
+#: UI/GTK2/src/mainWindow.cc:3015
 msgid "Please set the Google API key first"
 msgstr "St?ll in Google API-nyckeln f?rst"
 
-#: UI/GTK2/src/mainWindow.cc:3020
+#: UI/GTK2/src/mainWindow.cc:3024
 msgid "Running query"
 msgstr "K?r fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3233
+#: UI/GTK2/src/mainWindow.cc:3237
 msgid "No default application defined for type"
 msgstr "Inget standardprogram definierat f?r typen"
 
@@ -371,9 +371,8 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
 #: UI/GTK2/src/statisticsDialog_glade.cc:87
-#, fuzzy
 msgid "Status"
-msgstr "Statistik"
+msgstr "Status"
 
 #: UI/GTK2/src/mainWindow_glade.cc:185
 msgid "Search Engine"
@@ -532,22 +531,22 @@
 
 #: UI/GTK2/src/pinot.cc:329
 msgid "Updating all documents in My Web Pages is recommended"
-msgstr ""
+msgstr "Uppdatering av alla dokument i Mina webbsidor rekommenderas"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:288
+#: UI/GTK2/src/PinotSettings.cpp:310
 msgid "Important"
 msgstr "Viktigt"
 
-#: UI/GTK2/src/PinotSettings.cpp:289
+#: UI/GTK2/src/PinotSettings.cpp:311
 msgid "New"
 msgstr "Ny"
 
-#: UI/GTK2/src/PinotSettings.cpp:290
+#: UI/GTK2/src/PinotSettings.cpp:312
 msgid "Personal"
 msgstr "Personlig"
 
-#: UI/GTK2/src/PinotSettings.cpp:1146
+#: UI/GTK2/src/PinotSettings.cpp:1168
 msgid "Unclassified"
 msgstr "Oklassificerad"
 
@@ -613,15 +612,15 @@
 
 #: UI/GTK2/src/prefsDialog_glade.cc:79
 msgid "Direct connection to the Internet"
-msgstr ""
+msgstr "Direkt anslutning till Internet"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:80
 msgid "Manual proxy configuration:"
-msgstr ""
+msgstr "Manuell proxykonfiguration:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:93
 msgid "Network"
-msgstr ""
+msgstr "N?tverk"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:94
 msgid "Labels are used to classify indexed documents:"
@@ -653,13 +652,13 @@
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
-msgstr "Indexerar"
+msgstr "Indexering"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:507
 msgid "Preferences"
 msgstr "Inst?llningar"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:127
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
 msgid "Label"
 msgstr "Etikett"
 
@@ -677,54 +676,53 @@
 
 #: UI/GTK2/src/propertiesDialog_glade.cc:70
 msgid "Size:"
-msgstr ""
+msgstr "Storlek:"
 
 #: UI/GTK2/src/propertiesDialog_glade.cc:73
 msgid "Terms:"
-msgstr ""
+msgstr "Villkor:"
 
-#. All supported filters
-#: UI/GTK2/src/queryDialog.cc:119
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "Host name"
 msgstr "V?rdnamn"
 
-#: UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/queryDialog.cc:140
 msgid "File name"
 msgstr "Filnamn"
 
-#: UI/GTK2/src/queryDialog.cc:121
+#: UI/GTK2/src/queryDialog.cc:143
 msgid "File extension"
 msgstr "Fil?ndelse"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:122 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:123 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "Url"
 
-#: UI/GTK2/src/queryDialog.cc:124
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Directory"
 msgstr "Katalog"
 
-#: UI/GTK2/src/queryDialog.cc:125
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "Language code"
 msgstr "Spr?kkod"
 
-#: UI/GTK2/src/queryDialog.cc:126
+#: UI/GTK2/src/queryDialog.cc:148
 msgid "MIME type"
 msgstr "MIME-typ"
 
-#: UI/GTK2/src/queryDialog.cc:246
+#: UI/GTK2/src/queryDialog.cc:271
 msgid "Start date"
-msgstr ""
+msgstr "Startdatum"
 
-#: UI/GTK2/src/queryDialog.cc:261
+#: UI/GTK2/src/queryDialog.cc:286
 msgid "End date"
-msgstr ""
+msgstr "Slutdatum"
 
 #: UI/GTK2/src/queryDialog_glade.cc:72
 msgid "New filter:"
@@ -735,9 +733,8 @@
 msgstr "Fr?getext"
 
 #: UI/GTK2/src/queryDialog_glade.cc:83
-#, fuzzy
 msgid "Index results with label"
-msgstr "Indexera alla resultat med etiketten"
+msgstr "Indexera resultat med etikett"
 
 #: UI/GTK2/src/queryDialog_glade.cc:86
 msgid "Number of results:"
@@ -745,11 +742,11 @@
 
 #: UI/GTK2/src/queryDialog_glade.cc:89
 msgid "Start date:"
-msgstr ""
+msgstr "Startdatum:"
 
 #: UI/GTK2/src/queryDialog_glade.cc:90
 msgid "End date:"
-msgstr ""
+msgstr "Slutdatum:"
 
 #: UI/GTK2/src/queryDialog_glade.cc:201
 msgid "Query parameters"
@@ -769,13 +766,12 @@
 msgstr "Index"
 
 #: UI/GTK2/src/statisticsDialog.cc:87
-#, fuzzy
 msgid "History"
-msgstr "Katalog"
+msgstr "Historik"
 
 #: UI/GTK2/src/statisticsDialog.cc:92
 msgid "Daemon"
-msgstr ""
+msgstr "Demon"
 
 #: UI/GTK2/src/statisticsDialog.cc:128 UI/GTK2/src/statisticsDialog.cc:143
 msgid "documents"
@@ -783,102 +779,98 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:132 UI/GTK2/src/statisticsDialog.cc:147
 msgid "Unknown error"
-msgstr ""
+msgstr "Ok?nt fel"
 
 #: UI/GTK2/src/statisticsDialog.cc:154
-#, fuzzy
 msgid "Viewed"
-msgstr "Visa"
+msgstr "Visad"
 
 #: UI/GTK2/src/statisticsDialog.cc:154
-#, fuzzy
 msgid "results"
-msgstr "_Resultat"
+msgstr "resultat"
 
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:171
-#, fuzzy
 msgid "Running under PID"
-msgstr "K?r fr?ga"
+msgstr "K?r under PID"
 
 #: UI/GTK2/src/statisticsDialog.cc:175
 msgid "Currently not running"
-msgstr ""
+msgstr "K?r f?r tillf?llet inte"
 
 #: UI/GTK2/src/statisticsDialog.cc:182
-#, fuzzy
 msgid "Crawled"
-msgstr "Insamlare"
+msgstr "Insamlad"
 
 #: UI/GTK2/src/statisticsDialog.cc:182
 msgid "files"
-msgstr ""
+msgstr "filer"
 
 #: UI/GTK2/src/statisticsDialog.cc:205
 msgid "Errors"
 msgstr "Fel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:303
+#: UI/GTK2/src/WorkerThreads.cpp:306
 msgid "Can't index mail here"
 msgstr "Kan inte indexera post h?r"
 
-#: UI/GTK2/src/WorkerThreads.cpp:324 UI/GTK2/src/WorkerThreads.cpp:557
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
 msgid "is already being indexed"
 msgstr "h?ller redan p? att bli indexerad"
 
-#: UI/GTK2/src/WorkerThreads.cpp:334
+#: UI/GTK2/src/WorkerThreads.cpp:337
 msgid "is blacklisted"
 msgstr "?r svartlistad"
 
-#: UI/GTK2/src/WorkerThreads.cpp:667 UI/GTK2/src/WorkerThreads.cpp:1016
-#: UI/GTK2/src/WorkerThreads.cpp:1099 UI/GTK2/src/WorkerThreads.cpp:1108
-#: UI/GTK2/src/WorkerThreads.cpp:1294 UI/GTK2/src/WorkerThreads.cpp:1566
-#: UI/GTK2/src/WorkerThreads.cpp:1699
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
 msgstr "Indexfel p?"
 
-#: UI/GTK2/src/WorkerThreads.cpp:818
+#: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
 msgstr "Ingen titel"
 
-#: UI/GTK2/src/WorkerThreads.cpp:920 UI/GTK2/src/WorkerThreads.cpp:1037
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
 msgid "Couldn't create search engine"
 msgstr "Kunde inte skapa s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:943 UI/GTK2/src/WorkerThreads.cpp:1049
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
 msgstr "Kunde inte k?ra fr?ga p? s?kmotor"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1202
+#: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
 msgstr "Kunde inte f? protokollh?mtare"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1227
+#: UI/GTK2/src/WorkerThreads.cpp:1262
 msgid "Couldn't retrieve"
 msgstr "Kunde inte h?mta"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1324 UI/GTK2/src/WorkerThreads.cpp:1403
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
 msgid "Cannot index document type"
 msgstr "Kan inte indexera dokumenttyp"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1328 UI/GTK2/src/WorkerThreads.cpp:1407
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
 msgid "at"
 msgstr "p?"
 
 #. No, it isn't
-#: UI/GTK2/src/WorkerThreads.cpp:1439
+#: UI/GTK2/src/WorkerThreads.cpp:1474
 msgid "Robots META tag forbids indexing"
 msgstr "Robots META-tagg f?rbjuder indexering"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1495
+#: UI/GTK2/src/WorkerThreads.cpp:1528
 msgid "Couldn't index"
 msgstr "Kunde inte indexera"
 
 #. Be pessimistic and assume something will go wrong ;-)
-#: UI/GTK2/src/WorkerThreads.cpp:1577
+#: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
 msgstr "Kunde inte avindexera dokument"
 
-#: UI/GTK2/src/WorkerThreads.cpp:1711
+#: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"
 msgstr "Kunde inte uppdatera dokument"

Added: trunk/po/zh_TW.po
===================================================================
--- trunk/po/zh_TW.po	2007-08-14 14:42:58 UTC (rev 922)
+++ trunk/po/zh_TW.po	2007-08-14 15:33:43 UTC (rev 923)
@@ -0,0 +1,873 @@
+# Traditional Chinese translation for pinot
+# Copyright (c) 2007 Rosetta Contributors and Canonical Ltd 2007
+# This file is distributed under the same license as the pinot package.
+# FIRST AUTHOR <EMAIL at ADDRESS>, 2007.
+#
+#, fuzzy
+msgid ""
+msgstr ""
+"Project-Id-Version: pinot\n"
+"Report-Msgid-Bugs-To: \n"
+"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"PO-Revision-Date: 2007-07-29 02:41+0000\n"
+"Last-Translator: Yung-chung Lin <henearkrxern at gmail.com>\n"
+"Language-Team: Traditional Chinese <zh_TW at li.org>\n"
+"MIME-Version: 1.0\n"
+"Content-Type: text/plain; charset=UTF-8\n"
+"Content-Transfer-Encoding: 8bit\n"
+"X-Rosetta-Export-Date: 2007-08-14 15:18:30+0000\n"
+
+#: UI/GTK2/src/EnginesTree.cpp:68
+msgid "Search Engines"
+msgstr "????"
+
+#: UI/GTK2/src/EnginesTree.cpp:326
+msgid "Current User"
+msgstr "??????"
+
+#. Bind the callback's parameter to the index name
+#. Enable these menu items unless it is not the documents index
+#. Internal indices
+#: UI/GTK2/src/EnginesTree.cpp:337 UI/GTK2/src/mainWindow.cc:325
+#: UI/GTK2/src/mainWindow.cc:328 UI/GTK2/src/mainWindow.cc:541
+#: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
+#: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
+#: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
+#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
+#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
+msgid "My Web Pages"
+msgstr "????"
+
+#. Populate the submenu
+#. Bind the callback's parameter to the index name
+#: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
+#: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
+#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
+#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
+msgid "My Documents"
+msgstr "????"
+
+#. The last column is for the timestamp
+#: UI/GTK2/src/dateDialog_glade.cc:76 UI/GTK2/src/queryDialog_glade.cc:91
+#: UI/GTK2/src/queryDialog_glade.cc:92 UI/GTK2/src/ResultsTree.cpp:151
+msgid "Date"
+msgstr "??"
+
+#: UI/GTK2/src/indexDialog.cc:122
+msgid "Served by"
+msgstr ""
+
+#: UI/GTK2/src/indexDialog.cc:124
+msgid "Local"
+msgstr "???"
+
+#: UI/GTK2/src/indexDialog.cc:286
+msgid "Index location"
+msgstr "????"
+
+#: UI/GTK2/src/indexDialog_glade.cc:65 UI/GTK2/src/queryDialog_glade.cc:68
+msgid "Name:"
+msgstr "??"
+
+#: UI/GTK2/src/indexDialog_glade.cc:67
+msgid "..."
+msgstr ""
+
+#: UI/GTK2/src/indexDialog_glade.cc:70 UI/GTK2/src/prefsDialog_glade.cc:85
+msgid "Type:"
+msgstr ""
+
+#: UI/GTK2/src/indexDialog_glade.cc:71 UI/GTK2/src/importDialog_glade.cc:67
+msgid "Location:"
+msgstr ""
+
+#: UI/GTK2/src/indexDialog_glade.cc:72 UI/GTK2/src/prefsDialog_glade.cc:86
+msgid "Port:"
+msgstr "????"
+
+#: UI/GTK2/src/indexDialog_glade.cc:79 UI/GTK2/src/prefsDialog_glade.cc:82
+msgid "Address:"
+msgstr "???"
+
+#: UI/GTK2/src/indexDialog_glade.cc:183
+msgid "External index"
+msgstr "????"
+
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+msgid "None"
+msgstr ""
+
+#: UI/GTK2/src/importDialog_glade.cc:68
+#: UI/GTK2/src/propertiesDialog_glade.cc:67
+msgid "Title:"
+msgstr "?? :"
+
+#: UI/GTK2/src/importDialog_glade.cc:71
+msgid "Apply label:"
+msgstr "????"
+
+#: UI/GTK2/src/importDialog_glade.cc:77
+msgid "Import"
+msgstr "??"
+
+#: UI/GTK2/src/importDialog_glade.cc:148 UI/GTK2/src/mainWindow_glade.cc:221
+msgid "Import URL"
+msgstr "??URL"
+
+#: UI/GTK2/src/IndexPage.cpp:51
+msgid "Show Previous"
+msgstr "???????"
+
+#: UI/GTK2/src/IndexPage.cpp:57
+msgid "Show Next"
+msgstr "???????"
+
+#: UI/GTK2/src/IndexPage.cpp:189
+msgid "All"
+msgstr ""
+
+#: UI/GTK2/src/launcherDialog_glade.cc:64
+msgid ""
+"There is no helper application defined for this document's type.\n"
+"Please enter the command to open this document."
+msgstr ""
+
+#: UI/GTK2/src/launcherDialog_glade.cc:67
+msgid "Use this command for other documents of the same type."
+msgstr "????????????????"
+
+#: UI/GTK2/src/launcherDialog_glade.cc:99
+msgid "Helper application"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:140
+msgid "Query Name"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow.cc:145
+msgid "Last Run"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:150
+msgid "Summary"
+msgstr "??"
+
+#. Set tooltips
+#: UI/GTK2/src/mainWindow.cc:183
+msgid "Show all search engines"
+msgstr "?????????"
+
+#: UI/GTK2/src/mainWindow.cc:184
+msgid "Add index"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow.cc:185
+msgid "Remove index"
+msgstr "????"
+
+#. Now we are ready
+#: UI/GTK2/src/mainWindow.cc:191
+msgid "Ready"
+msgstr "???"
+
+#: UI/GTK2/src/mainWindow.cc:242
+msgid "N/A"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:257
+msgid "Undefined"
+msgstr "???"
+
+#. Show the URL of the first result in the status bar
+#: UI/GTK2/src/mainWindow.cc:476
+msgid "Result location is"
+msgstr ""
+
+#. Show the URL in the status bar
+#: UI/GTK2/src/mainWindow.cc:551
+msgid "Document location is"
+msgstr "?????"
+
+#: UI/GTK2/src/mainWindow.cc:884
+msgid "Showing"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow.cc:889
+msgid "of"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:894
+msgid "documents, starting at"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:928
+msgid "Query"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow.cc:932 UI/GTK2/src/mainWindow.cc:3028
+msgid "on"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:936
+msgid "ended"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:1066
+msgid "More Like"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:1127
+msgid "Updated label(s)"
+msgstr "?????"
+
+#. Yes, it did
+#: UI/GTK2/src/mainWindow.cc:1211
+msgid "Updated document"
+msgstr "?????"
+
+#: UI/GTK2/src/mainWindow.cc:1224
+msgid "Indexed"
+msgstr "???"
+
+#: UI/GTK2/src/mainWindow.cc:1266
+msgid "Unindexed document(s)"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:1306
+msgid "Updated document properties"
+msgstr "???????"
+
+#: UI/GTK2/src/mainWindow.cc:1359
+msgid "Couldn't rename index, name"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
+#: UI/GTK2/src/mainWindow.cc:2833
+msgid "is already in use"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:1376
+msgid "Couldn't rename index"
+msgstr "?????????"
+
+#: UI/GTK2/src/mainWindow.cc:1389
+msgid "Edited index"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:1715
+#, fuzzy
+msgid "Export Results"
+msgstr "??"
+
+#. Find this query
+#: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
+msgid "Live query"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:1830
+msgid "Couldn't find query"
+msgstr "???????"
+
+#: UI/GTK2/src/mainWindow.cc:2022 UI/GTK2/src/WorkerThreads.cpp:677
+#: UI/GTK2/src/WorkerThreads.cpp:1719
+msgid "Index"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow.cc:2026 UI/GTK2/src/WorkerThreads.cpp:681
+#: UI/GTK2/src/WorkerThreads.cpp:1723
+msgid "doesn't exist"
+msgstr "???"
+
+#: UI/GTK2/src/mainWindow.cc:2181
+msgid "Remove this document from the index ?"
+msgstr "????????????"
+
+#: UI/GTK2/src/mainWindow.cc:2200
+msgid "Remove these documents from the index ?"
+msgstr "????????????"
+
+#: UI/GTK2/src/mainWindow.cc:2246
+msgid "A metasearch tool for the Free Desktop"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:2247
+msgid "Search the Web and your documents !"
+msgstr "????????????"
+
+#: UI/GTK2/src/mainWindow.cc:2292
+msgid "Index name"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow.cc:2307
+msgid "Couldn't add index"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:2321
+msgid "Added new index"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:2356
+msgid "Couldn't remove index"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:2646
+msgid "At least one task hasn't completed yet. Quit now ?"
+msgstr "??????????????????"
+
+#: UI/GTK2/src/mainWindow.cc:2829
+msgid "Query name"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow.cc:2856
+msgid "Couldn't update query"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:2864
+msgid "Edited query"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:2871
+msgid "Couldn't add query"
+msgstr "??????"
+
+#: UI/GTK2/src/mainWindow.cc:2879
+msgid "Added new query"
+msgstr "?????"
+
+#: UI/GTK2/src/mainWindow.cc:2917
+msgid "Query is not set"
+msgstr "???????"
+
+#: UI/GTK2/src/mainWindow.cc:2928
+msgid "No search engine selected"
+msgstr "????????"
+
+#: UI/GTK2/src/mainWindow.cc:3015
+msgid "Please set the Google API key first"
+msgstr "????Google API key"
+
+#: UI/GTK2/src/mainWindow.cc:3024
+msgid "Running query"
+msgstr "???????"
+
+#: UI/GTK2/src/mainWindow.cc:3237
+msgid "No default application defined for type"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:126
+msgid "Query:"
+msgstr "???"
+
+#: UI/GTK2/src/mainWindow_glade.cc:138
+msgid "Edit"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow_glade.cc:147
+msgid "Stored queries"
+msgstr "?????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:164 UI/GTK2/src/statisticsDialog.cc:50
+#: UI/GTK2/src/statisticsDialog_glade.cc:87
+msgid "Status"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow_glade.cc:185
+msgid "Search Engine"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:188
+msgid "Host Name"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:191
+msgid "Show Extract"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:194
+msgid "Group By"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:200
+msgid "Clear List"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:206
+msgid "Vie_w"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:209
+msgid "View Cache"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:212
+msgid "More Like This"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
+msgid "_Index"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:218
+msgid "List Contents Of"
+msgstr "????"
+
+#: UI/GTK2/src/mainWindow_glade.cc:227
+msgid "View"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow_glade.cc:230
+msgid "Update"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow_glade.cc:233
+msgid "Unindex"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:236
+#: UI/GTK2/src/propertiesDialog_glade.cc:177
+msgid "Properties"
+msgstr "??"
+
+#: UI/GTK2/src/mainWindow_glade.cc:239
+msgid "_About"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:242
+msgid "_Session"
+msgstr ""
+
+#: UI/GTK2/src/mainWindow_glade.cc:245
+msgid "_Edit"
+msgstr "??(_E)"
+
+#: UI/GTK2/src/mainWindow_glade.cc:248
+msgid "_Results"
+msgstr "??(_R)"
+
+#: UI/GTK2/src/mainWindow_glade.cc:254
+msgid "_Help"
+msgstr "??(_H)"
+
+#: UI/GTK2/src/mainWindow_glade.cc:403
+msgid "Pinot"
+msgstr ""
+
+#. Localize language names
+#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
+msgid "Unknown"
+msgstr ""
+
+#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+msgid "Danish"
+msgstr "???"
+
+#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+msgid "Dutch"
+msgstr "???"
+
+#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+msgid "English"
+msgstr "??"
+
+#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+msgid "Finnish"
+msgstr "???"
+
+#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+msgid "French"
+msgstr "??"
+
+#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+msgid "German"
+msgstr "??"
+
+#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+msgid "Hungarian"
+msgstr ""
+
+#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+msgid "Italian"
+msgstr "????"
+
+#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+msgid "Norwegian"
+msgstr "???"
+
+#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+msgid "Portuguese"
+msgstr "????"
+
+#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+msgid "Romanian"
+msgstr ""
+
+#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+msgid "Russian"
+msgstr "??"
+
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+msgid "Spanish"
+msgstr "????"
+
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+msgid "Swedish"
+msgstr "???"
+
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+msgid "Turkish"
+msgstr ""
+
+#: UI/GTK2/src/pinot.cc:267
+msgid "Couldn't open index"
+msgstr "??????"
+
+#: UI/GTK2/src/pinot.cc:288
+msgid "Couldn't create history database"
+msgstr "?????????"
+
+#: UI/GTK2/src/pinot.cc:329
+msgid "Updating all documents in My Web Pages is recommended"
+msgstr ""
+
+#. Add default labels
+#: UI/GTK2/src/PinotSettings.cpp:310
+msgid "Important"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:311
+msgid "New"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:312
+msgid "Personal"
+msgstr ""
+
+#: UI/GTK2/src/PinotSettings.cpp:1168
+msgid "Unclassified"
+msgstr "???"
+
+#: UI/GTK2/src/prefsDialog.cc:81
+msgid "Name"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog.cc:89
+msgid "Monitor"
+msgstr "???"
+
+#: UI/GTK2/src/prefsDialog.cc:90
+msgid "Location"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog.cc:98
+msgid "Pattern"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog.cc:315
+msgid "Exclude these patterns from indexing"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog.cc:316
+msgid "Only index these patterns"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog.cc:406
+msgid "New Label"
+msgstr "????"
+
+#: UI/GTK2/src/prefsDialog.cc:447
+msgid "Directory to index"
+msgstr "?????"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:66
+msgid "Google API key:"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog_glade.cc:69
+msgid "New results:"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog_glade.cc:70
+msgid "Queries:"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:71
+msgid "Enable search terms suggestion"
+msgstr "???????"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:73
+msgid "Ignore robots.txt and Robots META tag"
+msgstr "??robot.txt?meta??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:74
+msgid "HTTP crawling:"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog_glade.cc:77
+msgid "General"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog_glade.cc:79
+msgid "Direct connection to the Internet"
+msgstr "???????"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:80
+msgid "Manual proxy configuration:"
+msgstr "????proxy"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:93
+msgid "Network"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:94
+msgid "Labels are used to classify indexed documents:"
+msgstr "??????????"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:99 UI/GTK2/src/prefsDialog_glade.cc:119
+#: UI/GTK2/src/prefsDialog_glade.cc:135
+msgid "Add"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:105
+msgid "Remove"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:113
+msgid "Labels"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:114
+msgid "These directories will be indexed and optionally monitored for changes:"
+msgstr ""
+
+#: UI/GTK2/src/prefsDialog_glade.cc:127
+#, fuzzy
+msgid "File patterns:"
+msgstr "???"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:144
+msgid "Indexing"
+msgstr "??"
+
+#: UI/GTK2/src/prefsDialog_glade.cc:507
+msgid "Preferences"
+msgstr "?????"
+
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+msgid "Label"
+msgstr "??"
+
+#: UI/GTK2/src/propertiesDialog.cc:93
+msgid "Per document"
+msgstr "????"
+
+#: UI/GTK2/src/propertiesDialog_glade.cc:68
+msgid "Language:"
+msgstr "?? :"
+
+#: UI/GTK2/src/propertiesDialog_glade.cc:69
+msgid "MIME type:"
+msgstr "MIME ???"
+
+#: UI/GTK2/src/propertiesDialog_glade.cc:70
+msgid "Size:"
+msgstr ""
+
+#: UI/GTK2/src/propertiesDialog_glade.cc:73
+msgid "Terms:"
+msgstr ""
+
+#: UI/GTK2/src/queryDialog.cc:139
+msgid "Host name"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog.cc:140
+msgid "File name"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog.cc:143
+msgid "File extension"
+msgstr "???"
+
+#. This is the title column
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+msgid "Title"
+msgstr "??"
+
+#. URL
+#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+msgid "URL"
+msgstr ""
+
+#: UI/GTK2/src/queryDialog.cc:146
+msgid "Directory"
+msgstr "??"
+
+#: UI/GTK2/src/queryDialog.cc:147
+msgid "Language code"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog.cc:148
+msgid "MIME type"
+msgstr "MIME ??"
+
+#: UI/GTK2/src/queryDialog.cc:271
+msgid "Start date"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog.cc:286
+msgid "End date"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog_glade.cc:72
+msgid "New filter:"
+msgstr ""
+
+#: UI/GTK2/src/queryDialog_glade.cc:81
+msgid "Query Text"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog_glade.cc:83
+msgid "Index results with label"
+msgstr ""
+
+#: UI/GTK2/src/queryDialog_glade.cc:86
+msgid "Number of results:"
+msgstr "????"
+
+#: UI/GTK2/src/queryDialog_glade.cc:89
+msgid "Start date:"
+msgstr "????:"
+
+#: UI/GTK2/src/queryDialog_glade.cc:90
+msgid "End date:"
+msgstr "?????"
+
+#: UI/GTK2/src/queryDialog_glade.cc:201
+msgid "Query parameters"
+msgstr "?????"
+
+#. This is the score column
+#: UI/GTK2/src/ResultsTree.cpp:122
+msgid "Score"
+msgstr "??"
+
+#: UI/GTK2/src/ResultsTree.cpp:180
+msgid "Extract"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:72
+msgid "Indexes"
+msgstr "??"
+
+#: UI/GTK2/src/statisticsDialog.cc:87
+msgid "History"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:92
+msgid "Daemon"
+msgstr "????"
+
+#: UI/GTK2/src/statisticsDialog.cc:128 UI/GTK2/src/statisticsDialog.cc:143
+msgid "documents"
+msgstr "??"
+
+#: UI/GTK2/src/statisticsDialog.cc:132 UI/GTK2/src/statisticsDialog.cc:147
+msgid "Unknown error"
+msgstr "???????"
+
+#: UI/GTK2/src/statisticsDialog.cc:154
+msgid "Viewed"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:154
+msgid "results"
+msgstr "??"
+
+#. FIXME: check whether it's actually running !
+#: UI/GTK2/src/statisticsDialog.cc:171
+msgid "Running under PID"
+msgstr ""
+
+#: UI/GTK2/src/statisticsDialog.cc:175
+msgid "Currently not running"
+msgstr "???????"
+
+#: UI/GTK2/src/statisticsDialog.cc:182
+msgid "Crawled"
+msgstr "????"
+
+#: UI/GTK2/src/statisticsDialog.cc:182
+msgid "files"
+msgstr "??"
+
+#: UI/GTK2/src/statisticsDialog.cc:205
+msgid "Errors"
+msgstr "??"
+
+#: UI/GTK2/src/WorkerThreads.cpp:306
+msgid "Can't index mail here"
+msgstr "??????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:327 UI/GTK2/src/WorkerThreads.cpp:580
+msgid "is already being indexed"
+msgstr "??????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:337
+msgid "is blacklisted"
+msgstr "?????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:690 UI/GTK2/src/WorkerThreads.cpp:1050
+#: UI/GTK2/src/WorkerThreads.cpp:1134 UI/GTK2/src/WorkerThreads.cpp:1143
+#: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
+#: UI/GTK2/src/WorkerThreads.cpp:1732
+msgid "Index error on"
+msgstr ""
+
+#: UI/GTK2/src/WorkerThreads.cpp:843
+msgid "No title"
+msgstr "???"
+
+#: UI/GTK2/src/WorkerThreads.cpp:945 UI/GTK2/src/WorkerThreads.cpp:1071
+msgid "Couldn't create search engine"
+msgstr "????????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
+msgid "Couldn't run query on search engine"
+msgstr ""
+
+#: UI/GTK2/src/WorkerThreads.cpp:1237
+msgid "Couldn't obtain downloader for protocol"
+msgstr ""
+
+#: UI/GTK2/src/WorkerThreads.cpp:1262
+msgid "Couldn't retrieve"
+msgstr "????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:1359 UI/GTK2/src/WorkerThreads.cpp:1438
+msgid "Cannot index document type"
+msgstr "????????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:1363 UI/GTK2/src/WorkerThreads.cpp:1442
+msgid "at"
+msgstr ""
+
+#. No, it isn't
+#: UI/GTK2/src/WorkerThreads.cpp:1474
+msgid "Robots META tag forbids indexing"
+msgstr "Robots?meta???????"
+
+#: UI/GTK2/src/WorkerThreads.cpp:1528
+msgid "Couldn't index"
+msgstr "????"
+
+#. Be pessimistic and assume something will go wrong ;-)
+#: UI/GTK2/src/WorkerThreads.cpp:1610
+msgid "Couldn't unindex document(s)"
+msgstr ""
+
+#: UI/GTK2/src/WorkerThreads.cpp:1744
+msgid "Couldn't update document"
+msgstr "??????"



From fabricecolin at mail.berlios.de  Wed Aug 15 15:38:33 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 15 Aug 2007 15:38:33 +0200
Subject: [Pinot-svn] r924 - trunk/Index
Message-ID: <200708151338.l7FDcXXk021342@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-15 15:38:32 +0200 (Wed, 15 Aug 2007)
New Revision: 924

Modified:
   trunk/Index/XapianIndex.cpp
Log:
Create a CACHEDIR.TAG file when the index is versioned. This tells archivers
(for instance "tar --exclude-caches") to skip the index directory.


Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-14 15:33:43 UTC (rev 923)
+++ trunk/Index/XapianIndex.cpp	2007-08-15 13:38:32 UTC (rev 924)
@@ -647,10 +647,9 @@
 double XapianIndex::getVersion(void) const
 {
 	ifstream verFile;
-	string verFileName(m_databaseName);
+	string verFileName(m_databaseName + "/version");
 	double version = 0;
 
-	verFileName += "/version";
 	verFile.open(verFileName.c_str());
 	if (verFile.good() == true)
 	{
@@ -664,11 +663,11 @@
 /// Sets the version number.
 bool XapianIndex::setVersion(double version) const
 {
-	ofstream verFile;
-	string verFileName(m_databaseName);
+	ofstream verFile, cacheDirFile;
+	string verFileName(m_databaseName + "/version");
+	string cacheDirFileName(m_databaseName + "/CACHEDIR.TAG");
 	bool setVer = false;
 
-	verFileName += "/version";
 	verFile.open(verFileName.c_str(), ios::trunc);
 	if (verFile.good() == true)
 	{
@@ -677,6 +676,18 @@
 	}
 	verFile.close();
 
+	// While we are at it, create a CACHEDIR.TAG file
+	// See the spec at http://www.brynosaurus.com/cachedir/
+	cacheDirFile.open(cacheDirFileName.c_str(), ios::trunc);
+	if (cacheDirFile.good() == true)
+	{
+		cacheDirFile << "Signature: 8a477f597d28d172789f06886806bc55" << endl;
+		cacheDirFile << "# This file is a cache directory tag created by Pinot." << endl;
+		cacheDirFile << "# For information about cache directory tags, see:" << endl;
+		cacheDirFile << "# http://www.brynosaurus.com/cachedir/" << endl;
+	}
+	cacheDirFile.close();
+
 	return setVer;
 }
 



From fabricecolin at mail.berlios.de  Wed Aug 15 15:43:20 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 15 Aug 2007 15:43:20 +0200
Subject: [Pinot-svn] r925 - in trunk: Index Search UI/GTK2/src Utils
Message-ID: <200708151343.l7FDhKBS022015@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-15 15:43:18 +0200 (Wed, 15 Aug 2007)
New Revision: 925

Modified:
   trunk/Index/pinot-index.cpp
   trunk/Search/pinot-search.cpp
   trunk/UI/GTK2/src/PinotSettings.cpp
   trunk/UI/GTK2/src/PinotSettings.h
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   trunk/UI/GTK2/src/pinot.cc
   trunk/Utils/MIMEScanner.cpp
   trunk/Utils/MIMEScanner.h
Log:
Initialize MIMEScanner with system-wide and if available user-specific
(~/.local) mimeinfo.cache, the latter's settings having priority.
All the programs associated with a MIME type are loaded by initialize()
and returned by getDefaultActions(). 


Modified: trunk/Index/pinot-index.cpp
===================================================================
--- trunk/Index/pinot-index.cpp	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/Index/pinot-index.cpp	2007-08-15 13:43:18 UTC (rev 925)
@@ -157,7 +157,9 @@
 		return EXIT_FAILURE;
 	}
 
-	MIMEScanner::initialize();
+	string desktopFilesDirectory(SHARED_MIME_INFO_PREFIX);
+	desktopFilesDirectory += "/share/applications/";
+	MIMEScanner::initialize(desktopFilesDirectory, desktopFilesDirectory + "mimeinfo.cache");
 	DownloaderInterface::initialize();
 	Dijon::HtmlFilter::initialize();
 	Dijon::FilterFactory::loadFilters(string(LIBDIR) + string("/pinot/filters"));

Modified: trunk/Search/pinot-search.cpp
===================================================================
--- trunk/Search/pinot-search.cpp	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/Search/pinot-search.cpp	2007-08-15 13:43:18 UTC (rev 925)
@@ -198,7 +198,9 @@
 		return EXIT_FAILURE;
 	}
 
-	MIMEScanner::initialize();
+	string desktopFilesDirectory(SHARED_MIME_INFO_PREFIX);
+	desktopFilesDirectory += "/share/applications/";
+	MIMEScanner::initialize(desktopFilesDirectory, desktopFilesDirectory + "mimeinfo.cache");
 	DownloaderInterface::initialize();
 
 	engineType = argv[optind];

Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2007-08-15 13:43:18 UTC (rev 925)
@@ -150,28 +150,35 @@
 	return isEnabled;
 }
 
-string PinotSettings::getConfigurationDirectory(void)
+string PinotSettings::getHomeDirectory(void)
 {
 	struct passwd *pPasswd = getpwuid(geteuid());
-	string directoryName;
 
 	if ((pPasswd != NULL) &&
 		(pPasswd->pw_dir != NULL))
 	{
-		directoryName = pPasswd->pw_dir;
+		return pPasswd->pw_dir;
 	}
 	else
 	{
 		char *homeDir = getenv("HOME");
 		if (homeDir != NULL)
 		{
-			directoryName = homeDir;
+			return homeDir;
 		}
-		else
-		{
-			return "~/.pinot";
-		}
 	}
+
+	return "";
+}
+
+string PinotSettings::getConfigurationDirectory(void)
+{
+	string directoryName(getHomeDirectory());
+
+	if (directoryName.empty() == true)
+	{
+		return "~/.pinot";
+	}
 	directoryName += "/.pinot";
 
 	return directoryName;

Modified: trunk/UI/GTK2/src/PinotSettings.h
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.h	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/UI/GTK2/src/PinotSettings.h	2007-08-15 13:43:18 UTC (rev 925)
@@ -40,6 +40,8 @@
 
 		static bool enableClientMode(bool enable);
 
+		static std::string getHomeDirectory(void);
+
 		static std::string getConfigurationDirectory(void);
 
 		static std::string getConfigurationFileName(void);

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-15 13:43:18 UTC (rev 925)
@@ -239,8 +239,6 @@
 #endif
 	dbus_g_thread_init();
 
-	MIMEScanner::initialize();
-	DownloaderInterface::initialize();
 	g_refMainLoop = Glib::MainLoop::create();
 	Glib::set_application_name("Pinot DBus Daemon");
 
@@ -297,6 +295,21 @@
 		pidFile.close();
 	}
 
+	// Initialize utility classes
+	string desktopFilesDirectory(SHARED_MIME_INFO_PREFIX);
+	desktopFilesDirectory += "/share/applications/";
+	string homeDirectory(PinotSettings::getHomeDirectory());
+	if (homeDirectory.empty() == true)
+	{
+		homeDirectory = "~/";
+	}
+	MIMEScanner::initialize(desktopFilesDirectory, homeDirectory + "/.local/share/applications/mimeinfo.cache", 10);
+	if (MIMEScanner::initialize(desktopFilesDirectory, desktopFilesDirectory + "mimeinfo.cache") == false)
+	{
+		cerr << "Couldn't load MIME settings" << endl;
+	}
+	DownloaderInterface::initialize();
+
 	// Localize language names
 	Languages::setIntlName(0, _("Unknown"));
 	Languages::setIntlName(1, _("Danish"));

Modified: trunk/UI/GTK2/src/pinot.cc
===================================================================
--- trunk/UI/GTK2/src/pinot.cc	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/UI/GTK2/src/pinot.cc	2007-08-15 13:43:18 UTC (rev 925)
@@ -161,8 +161,6 @@
 #endif
 	dbus_g_thread_init();
 
-	MIMEScanner::initialize();
-	DownloaderInterface::initialize();
 	Gtk::Main m(&argc, &argv);
 	Glib::set_application_name("Pinot GTK2 UI");
 
@@ -223,6 +221,21 @@
 		cerr.rdbuf(g_outputFile.rdbuf());
 	}
 
+	// Initialize utility classes
+	string desktopFilesDirectory(SHARED_MIME_INFO_PREFIX);
+	desktopFilesDirectory += "/share/applications/";
+	string homeDirectory(PinotSettings::getHomeDirectory());
+	if (homeDirectory.empty() == true)
+	{
+		homeDirectory = "~/";
+	}
+	MIMEScanner::initialize(desktopFilesDirectory, homeDirectory + "/.local/share/applications/mimeinfo.cache", 10);
+	if (MIMEScanner::initialize(desktopFilesDirectory, desktopFilesDirectory + "mimeinfo.cache") == false)
+	{
+		cerr << "Couldn't load MIME settings" << endl;
+	}
+
+	DownloaderInterface::initialize();
 	// Localize language names
 	Languages::setIntlName(0, _("Unknown"));
 	Languages::setIntlName(1, _("Danish"));

Modified: trunk/Utils/MIMEScanner.cpp
===================================================================
--- trunk/Utils/MIMEScanner.cpp	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/Utils/MIMEScanner.cpp	2007-08-15 13:43:18 UTC (rev 925)
@@ -20,22 +20,20 @@
 #include <glib.h>
 #include <iostream>
 
-#include "config.h"
 #include "xdgmime/xdgmime.h"
 
 #include "MIMEScanner.h"
 #include "StringManip.h"
 #include "Url.h"
 
-// FIXME: or should it be defaults.list ?
-#define MIME_DEFAULTS_FILE "mimeinfo.cache"
 // FIXME: "Default Applications" here ?
 #define MIME_DEFAULTS_SECTION "MIME Cache"
 
 using std::cout;
 using std::endl;
 using std::string;
-using std::map;
+using std::multimap;
+using std::vector;
 using std::pair;
 
 static string getKeyValue(GKeyFile *pDesktopFile, const string &key)
@@ -71,7 +69,8 @@
 
 MIMEAction::MIMEAction() :
 	m_multipleArgs(false),
-	m_localOnly(true)
+	m_localOnly(true),
+	m_priority(0)
 {
 }
 
@@ -79,7 +78,8 @@
 	m_multipleArgs(false),
 	m_localOnly(true),
 	m_name(name),
-	m_exec(cmdLine)
+	m_exec(cmdLine),
+	m_priority(0)
 {
 	parseExec();
 }
@@ -87,7 +87,8 @@
 MIMEAction::MIMEAction(const string &desktopFile) :
 	m_multipleArgs(false),
 	m_localOnly(true),
-	m_location(desktopFile)
+	m_location(desktopFile),
+	m_priority(0)
 {
 	GKeyFile *pDesktopFile = g_key_file_new();
 	GError *pError = NULL;
@@ -123,7 +124,8 @@
 	m_location(other.m_location),
 	m_exec(other.m_exec),
 	m_icon(other.m_icon),
-	m_device(other.m_device)
+	m_device(other.m_device),
+	m_priority(other.m_priority)
 {
 }
 
@@ -131,6 +133,23 @@
 {
 }
 
+bool MIMEAction::operator<(const MIMEAction &other) const
+{
+	if (m_priority < other.m_priority)
+	{
+		return true;
+	}
+	else if (m_priority == other.m_priority)
+	{
+		if (m_name < other.m_name)
+		{
+			return true;
+		}
+	}
+
+	return false;
+}
+
 MIMEAction &MIMEAction::operator=(const MIMEAction &other)
 {
 	if (this != &other)
@@ -167,7 +186,7 @@
 	}
 }
 
-map<string, MIMEAction> MIMEScanner::m_defaultActions;
+multimap<string, MIMEAction> MIMEScanner::m_defaultActions;
 
 pthread_mutex_t MIMEScanner::m_mutex = PTHREAD_MUTEX_INITIALIZER;
 
@@ -179,23 +198,25 @@
 {
 }
 
-void MIMEScanner::initialize(void)
+bool MIMEScanner::initialize(const string &desktopFilesDirectory, const string &mimeInfoCache,
+	unsigned int priority)
 {
 	GError *pError = NULL;
+	bool foundActions = false;
 
+	if ((desktopFilesDirectory.empty() == true) ||
+		(mimeInfoCache.empty() == true))
+	{
+		return false;
+	}
+
 	GKeyFile *pDefaults = g_key_file_new();
 	if (pDefaults == NULL)
 	{
-		return;
+		return false;
 	}
 
-	string desktopFilesDirectory(SHARED_MIME_INFO_PREFIX);
-	desktopFilesDirectory += "/share/applications/";
-
-	string defaultsFile(desktopFilesDirectory);
-	defaultsFile += MIME_DEFAULTS_FILE;
-
-	g_key_file_load_from_file(pDefaults, (const gchar *)defaultsFile.c_str(),
+	g_key_file_load_from_file(pDefaults, (const gchar *)mimeInfoCache.c_str(),
 		G_KEY_FILE_NONE, &pError);
 	if (pError == NULL)
 	{
@@ -225,11 +246,12 @@
 					{
 						MIMEAction typeAction(desktopFilesDirectory + string(pDesktopFiles[j]));
 
-						// Register the first application
+						// Register all applications for that type
 						if (typeAction.m_exec.empty() == false)
 						{
+							typeAction.m_priority = priority;
 							m_defaultActions.insert(pair<string, MIMEAction>(pMimeTypes[i], typeAction));
-							break;
+							foundActions = true;
 						}
 					}
 
@@ -248,10 +270,9 @@
 	{
 		g_error_free(pError);
 	}
-
 	g_key_file_free(pDefaults);
 
-	// xdg_mime_init() is called automatically when needed
+	return foundActions;
 }
 
 void MIMEScanner::shutdown(void)
@@ -365,11 +386,14 @@
 	m_defaultActions.insert(pair<string, MIMEAction>(mimeType, typeAction));
 }
 
-/// Determines the default action for the given type.
-bool MIMEScanner::getDefaultAction(const string &mimeType, MIMEAction &typeAction)
+/// Determines the default action(s) for the given type.
+bool MIMEScanner::getDefaultActions(const string &mimeType, vector<MIMEAction> &typeActions)
 {
-	map<string, MIMEAction>::const_iterator actionIter = m_defaultActions.find(mimeType);
+	multimap<string, MIMEAction>::const_iterator actionIter = m_defaultActions.lower_bound(mimeType);
+	multimap<string, MIMEAction>::const_iterator endActionIter = m_defaultActions.upper_bound(mimeType);
+	bool foundAction = false;
 
+	typeActions.clear();
 	if (actionIter == m_defaultActions.end())
 	{
 		// Is there an action for any of this type's parents ?
@@ -379,12 +403,15 @@
 		{
 			for (unsigned int i = 0; pParentTypes[i] != NULL; ++i)
 			{
-				actionIter = m_defaultActions.find(pParentTypes[i]);
+				actionIter = m_defaultActions.lower_bound(pParentTypes[i]);
+				endActionIter = m_defaultActions.upper_bound(pParentTypes[i]);
 				if (actionIter != m_defaultActions.end())
 				{
 #ifdef DEBUG
 					cout << "MIMEScanner::getDefaultAction: " << mimeType << " has parent type " << pParentTypes[i] << endl;
 #endif
+					typeActions.reserve(m_defaultActions.count(pParentTypes[i]));
+					foundAction = true;
 					break;
 				}
 			}
@@ -395,14 +422,21 @@
 		else cout << "MIMEScanner::getDefaultAction: " << mimeType << " has no parent types" << endl;
 #endif
 	}
+	else
+	{
+		typeActions.reserve(m_defaultActions.count(mimeType));
+		foundAction = true;
+	}
 
 	// Found anything ?
-	if (actionIter != m_defaultActions.end())
+	for (; actionIter != endActionIter; ++actionIter)
 	{
-		typeAction = actionIter->second;
-
-		return true;
+#ifdef DEBUG
+		cout << "MIMEScanner::getDefaultAction: action " << actionIter->second.m_name
+			<< ", " << actionIter->second.m_priority << endl;
+#endif
+		typeActions.push_back(actionIter->second);
 	}
 
-	return false;
+	return foundAction;
 }

Modified: trunk/Utils/MIMEScanner.h
===================================================================
--- trunk/Utils/MIMEScanner.h	2007-08-15 13:38:32 UTC (rev 924)
+++ trunk/Utils/MIMEScanner.h	2007-08-15 13:43:18 UTC (rev 925)
@@ -22,6 +22,7 @@
 #include <pthread.h>
 #include <string>
 #include <map>
+#include <vector>
 
 #include "Url.h"
 
@@ -38,6 +39,8 @@
 		MIMEAction(const MIMEAction &other);
 		virtual ~MIMEAction();
 
+		bool operator<(const MIMEAction &other) const;
+
 		MIMEAction &operator=(const MIMEAction &other);
 
 		void parseExec(void);
@@ -49,6 +52,7 @@
 		std::string m_exec;
 		std::string m_icon;
 		std::string m_device;
+		unsigned int m_priority;
 
 };
 
@@ -61,7 +65,8 @@
 		~MIMEScanner();
 
 		/// Initializes the MIME system.
-		static void initialize(void);
+		static bool initialize(const std::string &desktopFilesDirectory,
+			const std::string &mimeInfoCache, unsigned int priority = 0);
 
 		/// Shutdowns the MIME system.
 		static void shutdown(void);
@@ -75,12 +80,12 @@
 		/// Adds a user-defined action for the given type.
 		static void addDefaultAction(const std::string &mimeType, const MIMEAction &typeAction);
 
-		/// Determines the default action for the given type.
-		static bool getDefaultAction(const std::string &mimeType, MIMEAction &typeAction);
+		/// Determines the default action(s) for the given type.
+		static bool getDefaultActions(const std::string &mimeType, std::vector<MIMEAction> &typeActions);
 
 	protected:
 		static pthread_mutex_t m_mutex;
-		static std::map<std::string, MIMEAction> m_defaultActions;
+		static std::multimap<std::string, MIMEAction> m_defaultActions;
 
 		MIMEScanner();
 



From fabricecolin at mail.berlios.de  Wed Aug 15 15:44:40 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 15 Aug 2007 15:44:40 +0200
Subject: [Pinot-svn] r926 - trunk/UI/GTK2/src
Message-ID: <200708151344.l7FDie04022287@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-15 15:44:40 +0200 (Wed, 15 Aug 2007)
New Revision: 926

Modified:
   trunk/UI/GTK2/src/WorkerThreads.cpp
   trunk/UI/GTK2/src/WorkerThreads.h
Log:
Support for spelling correction.


Modified: trunk/UI/GTK2/src/WorkerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-15 13:43:18 UTC (rev 925)
+++ trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-15 13:44:40 UTC (rev 926)
@@ -22,7 +22,6 @@
 #include <fcntl.h>
 #include <string.h>
 #include <signal.h>
-#include <errno.h>
 #include <exception>
 #include <iostream>
 #include <fstream>
@@ -760,7 +759,8 @@
 	m_engineDisplayableName(engineDisplayableName),
 	m_engineOption(engineOption),
 	m_queryProps(queryProps),
-	m_listingIndex(listingIndex)
+	m_listingIndex(listingIndex),
+	m_correctedSpelling(false)
 {
 #ifdef DEBUG
 	cout << "QueryingThread::QueryingThread: engine " << m_engineName << ", " << engineOption
@@ -787,8 +787,9 @@
 	return m_engineDisplayableName;
 }
 
-QueryProperties QueryingThread::getQuery(void) const
+QueryProperties QueryingThread::getQuery(bool &wasCorrected) const
 {
+	wasCorrected = m_correctedSpelling;
 	return m_queryProps;
 }
 
@@ -962,6 +963,7 @@
 	}
 
 	// Run the query
+	pEngine->setDefaultOperator(SearchEngineInterface::DEFAULT_OP_AND);
 	if (pEngine->runQuery(m_queryProps, m_startDoc) == false)
 	{
 		m_status = _("Couldn't run query on search engine");
@@ -990,6 +992,14 @@
 			processResults(resultsList,
 				PinotSettings::getInstance().getIndexId(m_engineDisplayableName));
 		}
+
+		// Any spelling correction ?
+		string correctedFreeQuery(pEngine->getSpellingCorrection());
+		if (correctedFreeQuery.empty() == false)
+		{
+			m_correctedSpelling = true;
+			m_queryProps.setFreeQuery(correctedFreeQuery);
+		}
 	}
 
 	delete pEngine;
@@ -1068,6 +1078,7 @@
 	pEngine->setQueryExpansion(relevantDocIds);
 
 	// Run the query
+	pEngine->setDefaultOperator(SearchEngineInterface::DEFAULT_OP_AND);
 	if (pEngine->runQuery(m_queryProps) == false)
 	{
 		m_status = _("Couldn't run query on search engine");

Modified: trunk/UI/GTK2/src/WorkerThreads.h
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.h	2007-08-15 13:43:18 UTC (rev 925)
+++ trunk/UI/GTK2/src/WorkerThreads.h	2007-08-15 13:44:40 UTC (rev 926)
@@ -215,10 +215,8 @@
 
 		std::string getEngineName(void) const;
 
-		bool isListingIndex(void) const;
+		QueryProperties getQuery(bool &wasCorrected) const;
 
-		QueryProperties getQuery(void) const;
-
 		std::string getCharset(void) const;
 
 		virtual bool stop(void);
@@ -230,6 +228,7 @@
 		QueryProperties m_queryProps;
 		std::string m_resultsCharset;
 		bool m_listingIndex;
+		bool m_correctedSpelling;
 
 		virtual void processResults(const std::vector<DocumentInfo> &resultsList);
 



From fabricecolin at mail.berlios.de  Wed Aug 15 15:49:17 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 15 Aug 2007 15:49:17 +0200
Subject: [Pinot-svn] r927 - trunk/UI/GTK2/src
Message-ID: <200708151349.l7FDnHia022885@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-15 15:49:17 +0200 (Wed, 15 Aug 2007)
New Revision: 927

Modified:
   trunk/UI/GTK2/src/mainWindow.cc
Log:
Preliminary support for queries' spelling correction. No user feedback yet.
When a stored query is selected, scroll to it in the list.
A query with no text is not necessarily empty (eg, if a start date is provided)
so check isEmpty() to decide if a query can be run.
Get all programs associated with a file type, but only use the first one, which
should have the highest priority. Eventually, we'll pop up a menu to let the
user select.


Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-08-15 13:44:40 UTC (rev 926)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-08-15 13:49:17 UTC (rev 927)
@@ -261,9 +261,10 @@
 		if ((selectedQueryName.empty() == false) &&
 			(queryName == selectedQueryName))
 		{
-			// Select this query
+			// Select and scroll to this query
 			TreeModel::Path path = m_refQueryTree->get_path(iter);
 			queryTreeview->get_selection()->select(path);
+			queryTreeview->scroll_to_row(path);
 		}
 	}
 }
@@ -917,7 +918,8 @@
 			return;
 		}
 
-		QueryProperties queryProps(pQueryThread->getQuery());
+		bool wasCorrected;
+		QueryProperties queryProps(pQueryThread->getQuery(wasCorrected));
 		ustring queryName = to_utf8(queryProps.getName());
 		ustring engineName = to_utf8(pQueryThread->getEngineName());
 		string resultsCharset(pQueryThread->getCharset());
@@ -987,6 +989,8 @@
 			pResultsTree->deleteResults(engineName);
 			pResultsTree->addResults(engineName, resultsList,
 				resultsCharset);
+
+			// FIXME: if wasCorrected is true, suggest the correction to the user
 		}
 
 		// Index results ?
@@ -2908,7 +2912,7 @@
 //
 void mainWindow::run_search(const QueryProperties &queryProps)
 {
-	if (queryProps.getFreeQuery().empty() == true)
+	if (queryProps.isEmpty() == true)
 	{
 		set_status(_("Query is not set"));
 		return;
@@ -3158,8 +3162,9 @@
 		locationsByType.insert(pair<string, string>(mimeType, url));
 	}
 
+	vector<MIMEAction> actionsList;
+	vector<string> arguments;
 	MIMEAction action;
-	vector<string> arguments;
 	string currentType;
 
 	arguments.reserve(documentsList.size());
@@ -3200,17 +3205,16 @@
 				cout << "mainWindow::view_documents: defaulting to text/html" << endl;
 #endif
 			}
-			if (MIMEScanner::getDefaultAction(type, action) == false)
+			bool foundAction = MIMEScanner::getDefaultActions(type, actionsList);
+			if (foundAction == false)
 			{
-				bool foundAction = false;
-
 				if ((type.length() > 5) &&
 					(type.substr(0, 5) == "text/"))
 				{
 					// It's a subtype of text
 					// FIXME: MIMEScanner should return parent types !
 					type = "text/plain";
-					foundAction = MIMEScanner::getDefaultAction(type, action);
+					foundAction = MIMEScanner::getDefaultActions(type, actionsList);
 #ifdef DEBUG
 					cout << "mainWindow::view_documents: defaulting to text/plain" << endl;
 #endif
@@ -3247,6 +3251,11 @@
 					}
 				}
 			}
+
+			if (foundAction == true)
+			{
+				action = actionsList.front();
+			}
 		}
 		currentType = type;
 
@@ -3259,17 +3268,15 @@
 		}
 	}
 
-	if ((action.m_exec.empty() == false) &&
-		(arguments.empty() == false))
+	// Run the default program for this type
+	if ((action.m_exec.empty() == true) ||
+		(arguments.empty() == true) ||
+		(CommandLine::runAsync(action, arguments) == false))
 	{
-		// Run the default program for this type
-		if (CommandLine::runAsync(action, arguments) == false)
-		{
 #ifdef DEBUG
-			cout << "mainWindow::view_documents: couldn't view type "
-				<< currentType << endl;
+		cout << "mainWindow::view_documents: couldn't view type "
+			<< currentType << endl;
 #endif
-		}
 	}
 }
 



From fabricecolin at mail.berlios.de  Wed Aug 15 15:50:14 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 15 Aug 2007 15:50:14 +0200
Subject: [Pinot-svn] r928 - trunk/Utils
Message-ID: <200708151350.l7FDoE1t022997@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-15 15:50:14 +0200 (Wed, 15 Aug 2007)
New Revision: 928

Modified:
   trunk/Utils/CommandLine.cpp
Log:
Sanity check.


Modified: trunk/Utils/CommandLine.cpp
===================================================================
--- trunk/Utils/CommandLine.cpp	2007-08-15 13:49:17 UTC (rev 927)
+++ trunk/Utils/CommandLine.cpp	2007-08-15 13:50:14 UTC (rev 928)
@@ -72,6 +72,11 @@
 {
 	string commandLine(action.m_exec);
 
+	if (action.m_exec.empty() == true)
+	{
+		return false;
+	}
+
 	string::size_type equalPos = action.m_exec.find("=");
 	if (equalPos != string::npos)
 	{



From fabricecolin at mail.berlios.de  Wed Aug 15 15:58:38 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 15 Aug 2007 15:58:38 +0200
Subject: [Pinot-svn] r929 - trunk
Message-ID: <200708151358.l7FDwcVP023638@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-15 15:58:38 +0200 (Wed, 15 Aug 2007)
New Revision: 929

Modified:
   trunk/pinot.spec.in
Log:
Simplified files section and added find_lang macro, as per Adel Gadllah's spec
for Fedora 7.


Modified: trunk/pinot.spec.in
===================================================================
--- trunk/pinot.spec.in	2007-08-15 13:50:14 UTC (rev 928)
+++ trunk/pinot.spec.in	2007-08-15 13:58:38 UTC (rev 929)
@@ -78,6 +78,7 @@
 %install
 [ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT
 %makeinstall
+%find_lang %{name}
 
 %post
 gtk-update-icon-cache -q -f %{_datadir}/icons/hicolor || :
@@ -85,13 +86,10 @@
 %clean
 [ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT
 
-%files
+%files -f %{name}.lang
 %defattr(-, root, root, -)
 %doc AUTHORS ChangeLog ChangeLog-dijon COPYING NEWS README TODO
-%config(noreplace) %{_sysconfdir}/pinot/external-filters.xml
-%config(noreplace) %{_sysconfdir}/pinot/globalconfig.xml
-%config(noreplace) %{_sysconfdir}/pinot/textcat_conf.txt
-%config(noreplace) %{_sysconfdir}/pinot/textcat3_conf.txt
+%config(noreplace) %{_sysconfdir}/pinot/
 %{_bindir}/pinot
 %{_bindir}/pinot-dbus-daemon
 %{_bindir}/pinot-index
@@ -103,35 +101,7 @@
 %{_datadir}/pinot/metase-gtk2.gladep
 %{_datadir}/pinot/pinot-dbus-daemon.xml
 %{_datadir}/dbus-1/services/de.berlios.Pinot.service
-%{_datadir}/pinot/*.src
-%dir %{_datadir}/pinot/engines/
-%{_datadir}/pinot/engines/A9.src
-%{_datadir}/pinot/engines/Accoona.src
-%{_datadir}/pinot/engines/BitTorrent.src
-%{_datadir}/pinot/engines/Clusty.src
-%{_datadir}/pinot/engines/CreativeCommons.src
-%{_datadir}/pinot/engines/Exalead.src
-%{_datadir}/pinot/engines/Freshmeat.src
-%{_datadir}/pinot/engines/Google.src
-%{_datadir}/pinot/engines/GoogleCodeSearch.src
-%{_datadir}/pinot/engines/MozDexDescription.xml
-%{_datadir}/pinot/engines/MSN.src
-%{_datadir}/pinot/engines/RollYOTopNews.src
-%{_datadir}/pinot/engines/Topix.src
-%{_datadir}/pinot/engines/WiseNut.src
-%{_datadir}/pinot/engines/Yahoo.src
-%{_datadir}/pinot/engines/YahooAPI.src
-%{_datadir}/pinot/engines/Wikipedia.src
-%{_datadir}/pinot/engines/KodersDescription.xml
-%{_datadir}/locale/de/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/es/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/fr/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/it/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/nl/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/pt/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/pt_BR/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/ru/LC_MESSAGES/pinot.mo
-%{_datadir}/locale/sv/LC_MESSAGES/pinot.mo
+%{_datadir}/pinot/
 %{_datadir}/icons/hicolor/48x48/apps/pinot.png
 %{_datadir}/icons/hicolor/32x32/apps/pinot.png
 %{_datadir}/icons/hicolor/24x24/apps/pinot.png



From fabricecolin at mail.berlios.de  Thu Aug 16 18:25:07 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 16 Aug 2007 18:25:07 +0200
Subject: [Pinot-svn] r930 - trunk/Index
Message-ID: <200708161625.l7GGP7BU007017@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-16 18:25:04 +0200 (Thu, 16 Aug 2007)
New Revision: 930

Modified:
   trunk/Index/DBusXapianIndex.cpp
   trunk/Index/DBusXapianIndex.h
   trunk/Index/IndexInterface.h
   trunk/Index/XapianIndex.cpp
   trunk/Index/XapianIndex.h
Log:
Merged listDocuments...() methods into one.
XapianIndex adds an extra XFILE:-prefixed term to local documents so that the
file monitor can list or delete stuff without having to worry about the protocol.


Modified: trunk/Index/DBusXapianIndex.cpp
===================================================================
--- trunk/Index/DBusXapianIndex.cpp	2007-08-15 13:58:38 UTC (rev 929)
+++ trunk/Index/DBusXapianIndex.cpp	2007-08-16 16:25:04 UTC (rev 930)
@@ -404,7 +404,7 @@
 	return XapianIndex::getDocumentsCount(labelName);
 }
 
-/// Lists document IDs.
+/// Lists documents.
 unsigned int DBusXapianIndex::listDocuments(set<unsigned int> &docIds,
 	unsigned int maxDocsCount, unsigned int startDoc) const
 {
@@ -413,24 +413,15 @@
 	return XapianIndex::listDocuments(docIds, maxDocsCount, startDoc);
 }
 
-/// Lists documents that have a specific label.
-bool DBusXapianIndex::listDocumentsWithLabel(const string &name, set<unsigned int> &docIds,
-	unsigned int maxDocsCount, unsigned int startDoc) const
+/// Lists documents.
+bool DBusXapianIndex::listDocuments(const string &name, set<unsigned int> &docIds,
+	NameType type, unsigned int maxDocsCount, unsigned int startDoc) const
 {
 	reopen();
 
-	return XapianIndex::listDocumentsWithLabel(name, docIds, maxDocsCount, startDoc);
+	return XapianIndex::listDocuments(name, docIds, type, maxDocsCount, startDoc);
 }
 
-/// Lists documents that have a specific directory.
-bool DBusXapianIndex::listDocumentsInDirectory(const string &dirName, set<unsigned int> &docIds,
-	unsigned int maxDocsCount, unsigned int startDoc) const
-{
-	reopen();
-
-	return XapianIndex::listDocumentsWithLabel(dirName, docIds, maxDocsCount, startDoc);
-}
-
 /// Indexes the given data.
 bool DBusXapianIndex::indexDocument(const Document &doc, const set<string> &labels,
 	unsigned int &docId)

Modified: trunk/Index/DBusXapianIndex.h
===================================================================
--- trunk/Index/DBusXapianIndex.h	2007-08-15 13:58:38 UTC (rev 929)
+++ trunk/Index/DBusXapianIndex.h	2007-08-16 16:25:04 UTC (rev 930)
@@ -76,18 +76,14 @@
 		/// Returns the number of documents.
 		virtual unsigned int getDocumentsCount(const std::string &labelName = "") const;
 
-		/// Lists document IDs.
-		virtual unsigned int listDocuments(std::set<unsigned int> &docIds,
+		/// Lists documents.
+		virtual unsigned int listDocuments(std::set<unsigned int> &docIDList,
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
-		/// Lists documents that have a specific label.
-		virtual bool listDocumentsWithLabel(const std::string &name, std::set<unsigned int> &docIds,
-			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
+		/// Lists documents.
+		virtual bool listDocuments(const std::string &name, std::set<unsigned int> &docIds,
+			NameType type, unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
-		/// Lists documents that are in a specific directory.
-		virtual bool listDocumentsInDirectory(const std::string &dirName, std::set<unsigned int> &docIds,
-			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
-
 		/// Indexes the given data.
 		virtual bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId);

Modified: trunk/Index/IndexInterface.h
===================================================================
--- trunk/Index/IndexInterface.h	2007-08-15 13:58:38 UTC (rev 929)
+++ trunk/Index/IndexInterface.h	2007-08-16 16:25:04 UTC (rev 930)
@@ -31,6 +31,8 @@
 		IndexInterface(const IndexInterface &other) {};
 		virtual ~IndexInterface() {};
 
+		typedef enum { BY_LABEL = 0, BY_DIRECTORY, BY_FILE } NameType;
+
 		/// Returns false if the index couldn't be opened.
 		virtual bool isGood(void) const = 0;
 
@@ -67,18 +69,14 @@
 		/// Returns the number of documents.
 		virtual unsigned int getDocumentsCount(const std::string &labelName = "") const = 0;
 
-		/// Lists document IDs.
+		/// Lists documents.
 		virtual unsigned int listDocuments(std::set<unsigned int> &docIDList,
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const = 0;
 
-		/// Lists documents that have a specific label.
-		virtual bool listDocumentsWithLabel(const std::string &name, std::set<unsigned int> &docIds,
-			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const = 0;
+		/// Lists documents.
+		virtual bool listDocuments(const std::string &name, std::set<unsigned int> &docIds,
+			NameType type, unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const = 0;
 
-		/// Lists documents that are in a specific directory.
-		virtual bool listDocumentsInDirectory(const std::string &dirName, std::set<unsigned int> &docIds,
-			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const = 0;
-
 		/// Indexes the given data.
 		virtual bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId) = 0;
@@ -103,8 +101,6 @@
 		/// Unindexes the given document.
 		virtual bool unindexDocument(const std::string &location) = 0;
 
-		typedef enum { BY_LABEL = 0, BY_DIRECTORY, BY_FILE } NameType;
-
 		/// Unindexes documents.
 		virtual bool unindexDocuments(const std::string &name, NameType type) = 0;
 

Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-15 13:58:38 UTC (rev 929)
+++ trunk/Index/XapianIndex.cpp	2007-08-16 16:25:04 UTC (rev 930)
@@ -331,7 +331,17 @@
 	if ((urlObj.isLocal() == true) &&
 		(qmPos != string::npos))
 	{
-		doc.add_term(string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(location.substr(0, qmPos)), true));
+		string fileUrl(location.substr(0, qmPos));
+		string protocol(urlObj.getProtocol());
+
+		doc.add_term(string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(fileUrl), true));
+		if ((urlObj.isLocal() == true) &&
+			(protocol != "file"))
+		{
+			// Add another term with file as protocol
+			fileUrl.replace(0, protocol.length(), "file");
+			doc.add_term(string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(fileUrl), true));
+		}
 	}
 	// ...the host name and included domains with prefix H
 	string hostName(StringManip::toLowerCase(urlObj.getHost()));
@@ -454,7 +464,18 @@
 	if ((urlObj.isLocal() == true) &&
 		(qmPos != string::npos))
 	{
-		commonTerms.insert(string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(location.substr(0, qmPos)), true));
+		string fileUrl(location.substr(0, qmPos));
+		string protocol(urlObj.getProtocol());
+
+		commonTerms.insert(string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(fileUrl), true));
+
+		if ((urlObj.isLocal() == true) &&
+			(protocol != "file"))
+		{
+			// Add another term with file as protocol
+			fileUrl.replace(0, protocol.length(), "file");
+			doc.add_term(string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(fileUrl), true));
+		}
 	}
 	// Host name
 	string hostName(StringManip::toLowerCase(urlObj.getHost()));
@@ -1093,26 +1114,28 @@
 	return listDocumentsWithTerm(MAGIC_TERM, docIds, maxDocsCount, startDoc);
 }
 
-/// Lists documents that have a specific label.
-bool XapianIndex::listDocumentsWithLabel(const string &name, set<unsigned int> &docIds,
-	unsigned int maxDocsCount, unsigned int startDoc) const
+/// Lists documents.
+bool XapianIndex::listDocuments(const string &name, set<unsigned int> &docIds,
+	NameType type, unsigned int maxDocsCount, unsigned int startDoc) const
 {
-	string term("XLABEL:");
+	string term;
 
-	term += XapianDatabase::limitTermLength(Url::escapeUrl(name));
+	if (type == BY_LABEL)
+	{
+		term = string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(name));
+	}
+	else if (type == BY_DIRECTORY)
+	{
+		term = string("XDIR:") + XapianDatabase::limitTermLength(Url::escapeUrl(name), true);
+	}
+	else if (type == BY_FILE)
+	{
+		term = string("XFILE:") + XapianDatabase::limitTermLength(Url::escapeUrl(name), true);
+	}
+
 	return listDocumentsWithTerm(term, docIds, maxDocsCount, startDoc);
 }
 
-/// Lists documents that are in a specific directory.
-bool XapianIndex::listDocumentsInDirectory(const string &dirName, set<unsigned int> &docIds,
-	unsigned int maxDocsCount, unsigned int startDoc) const
-{
-	string term(Url::escapeUrl(dirName));
-
-	return listDocumentsWithTerm(string("XDIR:") + XapianDatabase::limitTermLength(term, true),
-		docIds, maxDocsCount, startDoc);
-}
-
 /// Indexes the given data.
 bool XapianIndex::indexDocument(const Document &document, const std::set<std::string> &labels,
 	unsigned int &docId)
@@ -1164,6 +1187,9 @@
 			{
 				doc.add_term(string("XLABEL:") + XapianDatabase::limitTermLength(Url::escapeUrl(*labelIter)));
 			}
+#ifdef DEBUG
+			cout << "XapianIndex::indexDocument: " << labels.size() << " labels" << endl;
+#endif
 
 			// Set data
 			setDocumentData(docInfo, doc, m_stemLanguage);

Modified: trunk/Index/XapianIndex.h
===================================================================
--- trunk/Index/XapianIndex.h	2007-08-15 13:58:38 UTC (rev 929)
+++ trunk/Index/XapianIndex.h	2007-08-16 16:25:04 UTC (rev 930)
@@ -71,18 +71,14 @@
 		/// Returns the number of documents.
 		virtual unsigned int getDocumentsCount(const std::string &labelName = "") const;
 
-		/// Lists document IDs.
-		virtual unsigned int listDocuments(std::set<unsigned int> &docIds,
+		/// Lists documents.
+		virtual unsigned int listDocuments(std::set<unsigned int> &docIDList,
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
-		/// Lists documents that have a specific label.
-		virtual bool listDocumentsWithLabel(const std::string &name, std::set<unsigned int> &docIds,
-			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
+		/// Lists documents.
+		virtual bool listDocuments(const std::string &name, std::set<unsigned int> &docIds,
+			NameType type, unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
-		/// Lists documents that are in a specific directory.
-		virtual bool listDocumentsInDirectory(const std::string &dirName, std::set<unsigned int> &docIds,
-			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
-
 		/// Indexes the given data.
 		virtual bool indexDocument(const Document &doc, const std::set<std::string> &labels,
 			unsigned int &docId);



From fabricecolin at mail.berlios.de  Thu Aug 16 18:26:36 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 16 Aug 2007 18:26:36 +0200
Subject: [Pinot-svn] r931 - trunk/UI/GTK2/src
Message-ID: <200708161626.l7GGQav1007136@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-16 18:26:35 +0200 (Thu, 16 Aug 2007)
New Revision: 931

Modified:
   trunk/UI/GTK2/src/importDialog.cc
   trunk/UI/GTK2/src/importDialog.hh
Log:
The label was ignored.


Modified: trunk/UI/GTK2/src/importDialog.cc
===================================================================
--- trunk/UI/GTK2/src/importDialog.cc	2007-08-16 16:25:04 UTC (rev 930)
+++ trunk/UI/GTK2/src/importDialog.cc	2007-08-16 16:26:35 UTC (rev 931)
@@ -26,10 +26,10 @@
 #include <gtkmm/stock.h>
 
 #include "config.h"
+#include "DocumentInfo.h"
 #include "MIMEScanner.h"
 #include "NLS.h"
 #include "Url.h"
-#include "MonitorFactory.h"
 #include "PinotSettings.h"
 #include "PinotUtils.h"
 #include "importDialog.hh"
@@ -92,11 +92,21 @@
 	return true;
 }
 
-void importDialog::import_url(const string &location)
+void importDialog::import_url(const string &title, const string &location,
+	const string &labelName)
 {
 	Url urlObj(location);
-	DocumentInfo docInfo(from_utf8(m_title), location, MIMEScanner::scanUrl(urlObj), "");
+	DocumentInfo docInfo(from_utf8(title), location, MIMEScanner::scanUrl(urlObj), "");
 
+	// Any label ?
+	if (labelName.empty() == false)
+	{
+		set<string> labels;
+
+		labels.insert(labelName);
+		docInfo.setLabels(labels);
+	}
+
 	// Was the document queued for indexing ?
 	ustring status = m_state.queue_index(docInfo);
 	if (status.empty() == true)
@@ -210,7 +220,9 @@
 
 void importDialog::on_importButton_clicked()
 {
-	string location = from_utf8(locationEntry->get_text());
+	string title(from_utf8(titleEntry->get_text()));
+	string location(from_utf8(locationEntry->get_text()));
+	string labelName;
 
 	// Rudimentary lock
 	if (m_state.m_importing == true)
@@ -224,21 +236,14 @@
 	// Disable the import button
 	importButton->set_sensitive(false);
 
-	// Title
-	m_title = titleEntry->get_text();
 	// Label
-	m_labelName.clear();
 	int chosenLabel = labelNameCombobox->get_active_row_number();
 	if (chosenLabel > 0)
 	{
-		m_labelName = from_utf8(labelNameCombobox->get_active_text());
+		labelName = from_utf8(labelNameCombobox->get_active_text());
 	}
 
-	import_url(location);
-
-#ifdef DEBUG
-	cout << "importDialog::on_importButton_clicked: done" << endl;
-#endif
+	import_url(title, location, labelName);
 }
 
 void importDialog::on_importDialog_response(int response_id)

Modified: trunk/UI/GTK2/src/importDialog.hh
===================================================================
--- trunk/UI/GTK2/src/importDialog.hh	2007-08-16 16:25:04 UTC (rev 930)
+++ trunk/UI/GTK2/src/importDialog.hh	2007-08-16 16:26:35 UTC (rev 931)
@@ -23,12 +23,8 @@
 #include <set>
 #include <sigc++/slot.h>
 #include <sigc++/connection.h>
-#include <glibmm/refptr.h>
 #include <glibmm/ustring.h>
-#include <gtkmm/button.h>
 
-#include "DocumentInfo.h"
-#include "MonitorInterface.h"
 #include "WorkerThreads.h"
 #include "importDialog_glade.hh"
 
@@ -46,12 +42,11 @@
 	void populate_comboboxes(void);
 
 	bool on_activity_timeout(void);
-	void import_url(const std::string &location);
+	void import_url(const std::string &title, const std::string &location,
+		const std::string &labelName);
 	void on_thread_end(WorkerThread *pThread);
 
 private:
-	Glib::ustring m_title;
-	std::string m_labelName;
 	unsigned int m_docsCount;
 	// Activity timeout
 	SigC::Connection m_timeoutConnection;



From fabricecolin at mail.berlios.de  Thu Aug 16 18:28:33 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 16 Aug 2007 18:28:33 +0200
Subject: [Pinot-svn] r932 - trunk/UI/GTK2/src
Message-ID: <200708161628.l7GGSXvL007232@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-16 18:28:32 +0200 (Thu, 16 Aug 2007)
New Revision: 932

Modified:
   trunk/UI/GTK2/src/OnDiskHandler.cpp
   trunk/UI/GTK2/src/OnDiskHandler.h
Log:
Unified handling of moving and deleting a file or directory.


Modified: trunk/UI/GTK2/src/OnDiskHandler.cpp
===================================================================
--- trunk/UI/GTK2/src/OnDiskHandler.cpp	2007-08-16 16:26:35 UTC (rev 931)
+++ trunk/UI/GTK2/src/OnDiskHandler.cpp	2007-08-16 16:28:32 UTC (rev 932)
@@ -50,6 +50,115 @@
 	pthread_mutex_destroy(&m_mutex);
 }
 
+bool OnDiskHandler::fileMoved(const string &fileName, const string &previousFileName,
+	IndexInterface::NameType type)
+{
+	set<unsigned int> docIdList;
+	bool handledEvent = false;
+
+#ifdef DEBUG
+	cout << "OnDiskHandler::fileMoved: " << fileName << endl;
+#endif
+	pthread_mutex_lock(&m_mutex);
+	// Get a list of documents in that directory/file
+	if (type == IndexInterface::BY_FILE)
+	{
+		m_index.listDocuments(string("file://") + previousFileName, docIdList, type);
+	}
+	else
+	{
+		m_index.listDocuments(previousFileName, docIdList, type);
+	}
+	// ...and the directory/file itself
+	unsigned int baseDocId = m_index.hasDocument(string("file://") + previousFileName);
+	if (baseDocId > 0)
+	{
+		docIdList.insert(baseDocId);
+	}
+	if (docIdList.empty() == false)
+	{
+		for (set<unsigned int>::const_iterator iter = docIdList.begin();
+			iter != docIdList.end(); ++iter)
+		{
+			DocumentInfo docInfo;
+
+#ifdef DEBUG
+			cout << "OnDiskHandler::fileMoved: moving " << *iter << endl;
+#endif
+			if (m_index.getDocumentInfo(*iter, docInfo) == true)
+			{
+				string newLocation(docInfo.getLocation());
+
+				if (baseDocId == *iter)
+				{
+					Url previousUrlObj(previousFileName), urlObj(fileName);
+
+					// Update the title if it was the directory/file name
+					if (docInfo.getTitle() == previousUrlObj.getFile())
+					{
+						docInfo.setTitle(urlObj.getFile());
+					}
+				}
+
+				string::size_type pos = newLocation.find(previousFileName);
+				if (pos != string::npos)
+				{
+					newLocation.replace(pos, previousFileName.length(), fileName);
+
+					// Change the location
+					docInfo.setLocation(newLocation);
+
+					handledEvent = replaceFile(*iter, docInfo);
+#ifdef DEBUG
+					cout << "OnDiskHandler::fileMoved: moved " << *iter << ", " << docInfo.getLocation() << endl;
+#endif
+				}
+#ifdef DEBUG
+				else cout << "OnDiskHandler::fileMoved: skipping " << newLocation << endl;
+#endif
+			}
+		}
+	}
+#ifdef DEBUG
+	else cout << "OnDiskHandler::fileMoved: no documents in " << previousFileName << endl;
+#endif
+	pthread_mutex_unlock(&m_mutex);
+
+	return handledEvent;
+}
+
+bool OnDiskHandler::fileDeleted(const string &fileName, IndexInterface::NameType type)
+{
+	set<unsigned int> docIdList;
+	string location(string("file://") + fileName);
+	bool unindexedDocs = false, handledEvent = false;
+
+#ifdef DEBUG
+	cout << "OnDiskHandler::fileDeleted: " << fileName << endl;
+#endif
+	pthread_mutex_lock(&m_mutex);
+	// Unindex all of the directory/file's documents
+	if (type == IndexInterface::BY_FILE)
+	{
+		unindexedDocs = m_index.unindexDocuments(location, type);
+	}
+	else
+	{
+		unindexedDocs = m_index.unindexDocuments(fileName, type);
+	}
+	if (unindexedDocs == true)
+	{
+		// ...as well as the actual directory/file
+		m_index.unindexDocument(location);
+
+		m_history.deleteItems(location);
+		handledEvent = true;
+	}
+	pthread_mutex_unlock(&m_mutex);
+
+	return handledEvent;
+}
+
 bool OnDiskHandler::indexFile(const string &fileName, bool alwaysUpdate, unsigned int &sourceId)
 {
 	string location(string("file://") + fileName);
@@ -259,142 +368,22 @@
 
 bool OnDiskHandler::fileMoved(const string &fileName, const string &previousFileName)
 {
-	bool handledEvent = false;
-
-#ifdef DEBUG
-	cout << "OnDiskHandler::fileMoved: " << fileName << endl;
-#endif
-	pthread_mutex_lock(&m_mutex);
-	unsigned int oldDocId = m_index.hasDocument(string("file://") + previousFileName);
-	if (oldDocId > 0)
-	{
-		DocumentInfo docInfo;
-
-		if (m_index.getDocumentInfo(oldDocId, docInfo) == true)
-		{
-			// Change the location
-			docInfo.setLocation(string("file://") + fileName);
-
-			handledEvent = replaceFile(oldDocId, docInfo);
-		}
-	}
-	pthread_mutex_unlock(&m_mutex);
-
-	return handledEvent;
+	return fileMoved(fileName, previousFileName, IndexInterface::BY_FILE);
 }
 
 bool OnDiskHandler::directoryMoved(const string &dirName,
 	const string &previousDirName)
 {
-	set<unsigned int> docIdList;
-	bool handledEvent = false;
-
-#ifdef DEBUG
-	cout << "OnDiskHandler::directoryMoved: " << dirName << endl;
-#endif
-	pthread_mutex_lock(&m_mutex);
-	// Get a list of documents in that directory
-	m_index.listDocumentsInDirectory(previousDirName, docIdList);
-	// ...and the directory itself
-	unsigned int dirDocId = m_index.hasDocument(string("file://") + previousDirName);
-	if (dirDocId > 0)
-	{
-		docIdList.insert(dirDocId);
-	}
-	if (docIdList.empty() == false)
-	{
-		// FIXME: check the actual directory is updated too !
-		for (set<unsigned int>::const_iterator iter = docIdList.begin();
-			iter != docIdList.end(); ++iter)
-		{
-			DocumentInfo docInfo;
-
-			if (m_index.getDocumentInfo(*iter, docInfo) == true)
-			{
-				string newLocation(docInfo.getLocation());
-
-				if (dirDocId == *iter)
-				{
-					Url previousUrlObj(previousDirName), urlObj(dirName);
-
-					// Update the title to the new directory
-					if (docInfo.getTitle() == previousUrlObj.getFile())
-					{
-						docInfo.setTitle(urlObj.getFile());
-					}
-				}
-
-				string::size_type pos = newLocation.find(previousDirName);
-				if (pos != string::npos)
-				{
-					newLocation.replace(pos, previousDirName.length(), dirName);
-
-					// Change the location
-					docInfo.setLocation(newLocation);
-
-					replaceFile(*iter, docInfo);
-				}
-#ifdef DEBUG
-				else cout << "OnDiskHandler::directoryMoved: skipping " << newLocation << endl;
-#endif
-			}
-		}
-
-		handledEvent = true;
-	}
-#ifdef DEBUG
-	else cout << "OnDiskHandler::directoryMoved: no documents in " << previousDirName << endl;
-#endif
-	pthread_mutex_unlock(&m_mutex);
-
-	return handledEvent;
+	return fileMoved(dirName, previousDirName, IndexInterface::BY_DIRECTORY);
 }
 
 bool OnDiskHandler::fileDeleted(const string &fileName)
 {
-	FilterWrapper wrapFilter(&m_index);
-	string location(string("file://") + fileName);
-	bool handledEvent = true;
-
-#ifdef DEBUG
-	cout << "OnDiskHandler::fileDeleted: " << fileName << endl;
-#endif
-	pthread_mutex_lock(&m_mutex);
-	unsigned int docId = m_index.hasDocument(location);
-	if (docId > 0)
-	{
-		// Unindex the file
-		handledEvent = wrapFilter.unindexDocument(location);
-		if (handledEvent == true)
-		{
-			m_history.deleteItem(location);
-		}
-	}
-	pthread_mutex_unlock(&m_mutex);
-
-	return handledEvent;
+	return fileDeleted(fileName, IndexInterface::BY_FILE);
 }
 
 bool OnDiskHandler::directoryDeleted(const string &dirName)
 {
-	set<unsigned int> docIdList;
-	bool handledEvent = false;
-
-#ifdef DEBUG
-	cout << "OnDiskHandler::directoryDeleted: " << dirName << endl;
-#endif
-	pthread_mutex_lock(&m_mutex);
-	// Unindex all of the directory's documents
-	if (m_index.unindexDocuments(dirName, IndexInterface::BY_DIRECTORY) == true)
-	{
-		// ...as well as the actual directory
-		m_index.unindexDocument(dirName);
-
-		m_history.deleteItems(string("file://") + dirName);
-		handledEvent = true;
-	}
-	pthread_mutex_unlock(&m_mutex);
-
-	return handledEvent;
+	return fileDeleted(dirName, IndexInterface::BY_DIRECTORY);
 }
 

Modified: trunk/UI/GTK2/src/OnDiskHandler.h
===================================================================
--- trunk/UI/GTK2/src/OnDiskHandler.h	2007-08-16 16:26:35 UTC (rev 931)
+++ trunk/UI/GTK2/src/OnDiskHandler.h	2007-08-16 16:28:32 UTC (rev 932)
@@ -71,6 +71,12 @@
 		CrawlHistory m_history;
 		XapianIndex m_index;
 
+		bool fileMoved(const std::string &fileName,
+			const std::string &previousFileName,
+			IndexInterface::NameType type);
+
+		bool fileDeleted(const std::string &fileName, IndexInterface::NameType type);
+
 		bool indexFile(const std::string &fileName, bool alwaysUpdate, unsigned int &sourceId);
 
 		bool replaceFile(unsigned int docId, DocumentInfo &docInfo);



From fabricecolin at mail.berlios.de  Thu Aug 16 18:30:44 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 16 Aug 2007 18:30:44 +0200
Subject: [Pinot-svn] r933 - in trunk: UI/GTK2/src Utils
Message-ID: <200708161630.l7GGUigT008461@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-16 18:30:37 +0200 (Thu, 16 Aug 2007)
New Revision: 933

Modified:
   trunk/UI/GTK2/src/mainWindow.cc
   trunk/Utils/MIMEScanner.cpp
Log:
Make sure getDefaultActions() really provided a MIMEAction.


Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-08-16 16:28:32 UTC (rev 932)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-08-16 16:30:37 UTC (rev 933)
@@ -3228,8 +3228,7 @@
 					launcher.show();
 					if (launcher.run() == RESPONSE_OK)
 					{
-
-						foundAction = launcher.getInput(action, remember);
+						launcher.getInput(action, remember);
 					}
 
 					if (foundAction == false)
@@ -3252,7 +3251,8 @@
 				}
 			}
 
-			if (foundAction == true)
+			if ((foundAction == true) &&
+				(actionsList.empty() == false))
 			{
 				action = actionsList.front();
 			}

Modified: trunk/Utils/MIMEScanner.cpp
===================================================================
--- trunk/Utils/MIMEScanner.cpp	2007-08-16 16:28:32 UTC (rev 932)
+++ trunk/Utils/MIMEScanner.cpp	2007-08-16 16:30:37 UTC (rev 933)
@@ -408,10 +408,9 @@
 				if (actionIter != m_defaultActions.end())
 				{
 #ifdef DEBUG
-					cout << "MIMEScanner::getDefaultAction: " << mimeType << " has parent type " << pParentTypes[i] << endl;
+					cout << "MIMEScanner::getDefaultActions: " << mimeType << " has parent type " << pParentTypes[i] << endl;
 #endif
 					typeActions.reserve(m_defaultActions.count(pParentTypes[i]));
-					foundAction = true;
 					break;
 				}
 			}
@@ -419,23 +418,23 @@
 			free(pParentTypes);
 		}
 #ifdef DEBUG
-		else cout << "MIMEScanner::getDefaultAction: " << mimeType << " has no parent types" << endl;
+		else cout << "MIMEScanner::getDefaultActions: " << mimeType << " has no parent types" << endl;
 #endif
 	}
 	else
 	{
 		typeActions.reserve(m_defaultActions.count(mimeType));
-		foundAction = true;
 	}
 
 	// Found anything ?
 	for (; actionIter != endActionIter; ++actionIter)
 	{
 #ifdef DEBUG
-		cout << "MIMEScanner::getDefaultAction: action " << actionIter->second.m_name
+		cout << "MIMEScanner::getDefaultActions: action " << actionIter->second.m_name
 			<< ", " << actionIter->second.m_priority << endl;
 #endif
 		typeActions.push_back(actionIter->second);
+		foundAction = true;
 	}
 
 	return foundAction;



From fabricecolin at mail.berlios.de  Thu Aug 16 18:31:14 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 16 Aug 2007 18:31:14 +0200
Subject: [Pinot-svn] r934 - trunk/UI/GTK2/src
Message-ID: <200708161631.l7GGVECx008973@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-16 18:31:13 +0200 (Thu, 16 Aug 2007)
New Revision: 934

Modified:
   trunk/UI/GTK2/src/WorkerThreads.cpp
Log:
Minor mod.


Modified: trunk/UI/GTK2/src/WorkerThreads.cpp
===================================================================
--- trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-16 16:30:37 UTC (rev 933)
+++ trunk/UI/GTK2/src/WorkerThreads.cpp	2007-08-16 16:31:13 UTC (rev 934)
@@ -1486,7 +1486,6 @@
 		if (m_done == false)
 		{
 			FilterWrapper wrapFilter(pIndex);
-			const set<string> &labels = m_docInfo.getLabels();
 
 			// Update an existing document or add to the index ?
 			if (m_update == true)
@@ -1506,6 +1505,7 @@
 			}
 			else
 			{
+				const set<string> &labels = m_docInfo.getLabels();
 				unsigned int docId = 0;
 
 				// Index the document



From fabricecolin at mail.berlios.de  Thu Aug 16 18:47:34 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 16 Aug 2007 18:47:34 +0200
Subject: [Pinot-svn] r935 - trunk/UI/GTK2/src
Message-ID: <200708161647.l7GGlY96031275@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-16 18:47:24 +0200 (Thu, 16 Aug 2007)
New Revision: 935

Modified:
   trunk/UI/GTK2/src/mainWindow.cc
Log:
Forgot case where launcherDialog is used.


Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-08-16 16:31:13 UTC (rev 934)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-08-16 16:47:24 UTC (rev 935)
@@ -3228,7 +3228,7 @@
 					launcher.show();
 					if (launcher.run() == RESPONSE_OK)
 					{
-						launcher.getInput(action, remember);
+						foundAction = launcher.getInput(action, remember);
 					}
 
 					if (foundAction == false)



From fabricecolin at mail.berlios.de  Fri Aug 17 16:54:41 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 17 Aug 2007 16:54:41 +0200
Subject: [Pinot-svn] r936 - in trunk: . Index
Message-ID: <200708171454.l7HEsfXC003468@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-17 16:54:40 +0200 (Fri, 17 Aug 2007)
New Revision: 936

Modified:
   trunk/Index/LanguageDetector.cpp
   trunk/Index/Makefile.am
   trunk/configure.in
Log:
Look for textcat.h in libtextcat.


Modified: trunk/Index/LanguageDetector.cpp
===================================================================
--- trunk/Index/LanguageDetector.cpp	2007-08-16 16:47:24 UTC (rev 935)
+++ trunk/Index/LanguageDetector.cpp	2007-08-17 14:54:40 UTC (rev 936)
@@ -21,9 +21,14 @@
 #include <iostream>
 #include <utility>
 
+#include "config.h"
 extern "C"
 {
+#ifdef HAVE_LIBTEXTCAT_TEXTCAT_H
+#include <libtextcat/textcat.h>
+#else
 #include <textcat.h>
+#endif
 }
 
 #include "StringManip.h"

Modified: trunk/Index/Makefile.am
===================================================================
--- trunk/Index/Makefile.am	2007-08-16 16:47:24 UTC (rev 935)
+++ trunk/Index/Makefile.am	2007-08-17 14:54:40 UTC (rev 936)
@@ -32,7 +32,4 @@
 
 AM_CXXFLAGS = -I$(srcdir)/../Utils -I$(srcdir)/../Tokenize -I$(srcdir)/../Tokenize/filters \
 	-I$(srcdir)/../Collect @HTTP_CFLAGS@ @GMIME_CFLAGS@ @XML_CFLAGS@ @DBUS_CFLAGS@ @INDEX_CFLAGS@
-if HAVE_TEXTCAT_CAT
-AM_CXXFLAGS += -DHAVE_TEXTCAT_CAT
-endif
 

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2007-08-16 16:47:24 UTC (rev 935)
+++ trunk/configure.in	2007-08-17 14:54:40 UTC (rev 936)
@@ -178,7 +178,9 @@
 
 dnl TextCat
 AC_CHECK_HEADERS([textcat.h],,
+   [AC_CHECK_HEADERS([libtextcat/textcat.h],,
    [AC_MSG_ERROR([Can't find textcat.h.])])
+   ])
 AC_CHECK_LIB(textcat, textcat_Cat,
    [AM_CONDITIONAL(HAVE_TEXTCAT_CAT, true)],
    [AM_CONDITIONAL(HAVE_TEXTCAT_CAT, false)]



From fabricecolin at mail.berlios.de  Fri Aug 17 17:54:00 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 17 Aug 2007 17:54:00 +0200
Subject: [Pinot-svn] r937 - trunk/Index
Message-ID: <200708171554.l7HFs0l4007845@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-17 17:54:00 +0200 (Fri, 17 Aug 2007)
New Revision: 937

Modified:
   trunk/Index/XapianIndex.cpp
   trunk/Index/XapianIndex.h
Log:
Spelling suggestions are not supported by all backends, eg Quartz, so try
indexing again without populating the spelling database if we get an
UnimplementedError.


Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-17 14:54:40 UTC (rev 936)
+++ trunk/Index/XapianIndex.cpp	2007-08-17 15:54:00 UTC (rev 937)
@@ -55,7 +55,8 @@
 XapianIndex::XapianIndex(const string &indexName) :
 	IndexInterface(),
 	m_databaseName(indexName),
-	m_goodIndex(false)
+	m_goodIndex(false),
+	m_supportSpellingCorrection(true)
 {
 	// Open in read-only mode
 	XapianDatabase *pDatabase = XapianDatabaseFactory::getDatabase(m_databaseName);
@@ -70,6 +71,7 @@
 	IndexInterface(other),
 	m_databaseName(other.m_databaseName),
 	m_goodIndex(other .m_goodIndex),
+	m_supportSpellingCorrection(other.m_supportSpellingCorrection),
 	m_stemLanguage(other.m_stemLanguage)
 {
 }
@@ -85,6 +87,7 @@
 		IndexInterface::operator=(other);
 		m_databaseName = other.m_databaseName;
 		m_goodIndex = other .m_goodIndex;
+		m_supportSpellingCorrection = other.m_supportSpellingCorrection;
 		m_stemLanguage = other.m_stemLanguage;
 	}
 
@@ -143,7 +146,7 @@
 }
 
 void XapianIndex::addPostingsToDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
-	const Xapian::WritableDatabase &db, const string &prefix, bool noStemming) const
+	const Xapian::WritableDatabase &db, const string &prefix, bool noStemming)
 {
 	Xapian::Stem *pStemmer = NULL;
 	Xapian::TermGenerator generator;
@@ -167,12 +170,34 @@
 		}
 	}
 
-	// The database is required for the spelling dictionary
-	generator.set_flags(Xapian::TermGenerator::FLAG_SPELLING);
-	generator.set_database(db);
-	generator.set_document(doc);
-	generator.index_text(itor, 1, prefix);
+	try
+	{
+		// Older Xapian backends don't support spelling correction
+		if (m_supportSpellingCorrection == true)
+		{
+			// The database is required for the spelling dictionary
+			generator.set_flags(Xapian::TermGenerator::FLAG_SPELLING);
+			generator.set_database(db);
+		}
+		generator.set_document(doc);
+		generator.index_text(itor, 1, prefix);
+	}
+	catch (const Xapian::UnimplementedError &error)
+	{
+		cerr << "Couldn't index with spelling correction: " << error.get_type() << ": " << error.get_msg() << endl;
 
+		if (m_supportSpellingCorrection == true)
+		{
+			m_supportSpellingCorrection = false;
+
+			// Try again without spelling correction
+			// Let the caller catch the exception
+			generator.set_flags(Xapian::TermGenerator::FLAG_SPELLING, Xapian::TermGenerator::FLAG_SPELLING);
+			generator.set_document(doc);
+			generator.index_text(itor, 1, prefix);
+		}
+	}
+
 	if (pStemmer != NULL)
 	{
 		delete pStemmer;
@@ -308,7 +333,7 @@
 }
 
 void XapianIndex::addCommonTerms(const DocumentInfo &info, Xapian::Document &doc,
-	const Xapian::WritableDatabase &db) const
+	const Xapian::WritableDatabase &db)
 {
 	string title(info.getTitle());
 	string location(info.getLocation());

Modified: trunk/Index/XapianIndex.h
===================================================================
--- trunk/Index/XapianIndex.h	2007-08-17 14:54:40 UTC (rev 936)
+++ trunk/Index/XapianIndex.h	2007-08-17 15:54:00 UTC (rev 937)
@@ -122,19 +122,20 @@
 		static const std::string MAGIC_TERM;
 		std::string m_databaseName;
 		bool m_goodIndex;
+		bool m_supportSpellingCorrection;
 		std::string m_stemLanguage;
 
 		bool listDocumentsWithTerm(const std::string &term, std::set<unsigned int> &docIds,
 			unsigned int maxDocsCount = 0, unsigned int startDoc = 0) const;
 
 		void addPostingsToDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
-			const Xapian::WritableDatabase &db, const std::string &prefix, bool noStemming) const;
+			const Xapian::WritableDatabase &db, const std::string &prefix, bool noStemming);
 
 		void removePostingsFromDocument(const Xapian::Utf8Iterator &itor, Xapian::Document &doc,
 			const std::string &prefix, const std::string &language, bool noStemming) const;
 
 		void addCommonTerms(const DocumentInfo &info, Xapian::Document &doc,
-			const Xapian::WritableDatabase &db) const;
+			const Xapian::WritableDatabase &db);
 
 		void removeCommonTerms(Xapian::Document &doc);
 



From fabricecolin at mail.berlios.de  Fri Aug 17 18:17:09 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Fri, 17 Aug 2007 18:17:09 +0200
Subject: [Pinot-svn] r938 - trunk/UI/GTK2/src
Message-ID: <200708171617.l7HGH9UF010332@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-17 18:17:08 +0200 (Fri, 17 Aug 2007)
New Revision: 938

Modified:
   trunk/UI/GTK2/src/ResultsTree.cpp
   trunk/UI/GTK2/src/ResultsTree.h
Log:
Don't open ViewHistory every time appendResult() is called.


Modified: trunk/UI/GTK2/src/ResultsTree.cpp
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.cpp	2007-08-17 15:54:00 UTC (rev 937)
+++ trunk/UI/GTK2/src/ResultsTree.cpp	2007-08-17 16:17:08 UTC (rev 938)
@@ -500,9 +500,10 @@
 	cout << "ResultsTree::addResults: ID for engine " << engineName << " is " << engineId <<  endl;
 #endif
 
-	QueryHistory history(m_settings.getHistoryDatabaseName());
+	QueryHistory queryHistory(m_settings.getHistoryDatabaseName());
+	ViewHistory viewHistory(m_settings.getHistoryDatabaseName());
 	bool isNewQuery = false;
-	if (history.getLastRun(m_treeName, engineName).empty() == true)
+	if (queryHistory.getLastRun(m_treeName, engineName).empty() == true)
 	{
 		isNewQuery = true;
 	}
@@ -539,19 +540,19 @@
 
 			// Has the result's ranking changed ?
 			float oldestScore = 0;
-			float previousScore = history.hasItem(m_treeName, engineName,
+			float previousScore = queryHistory.hasItem(m_treeName, engineName,
 				location, oldestScore);
 			if (previousScore > 0)
 			{
 				// Update this result whatever the current and previous rankings were
-				history.updateItem(m_treeName, engineName, location,
+				queryHistory.updateItem(m_treeName, engineName, location,
 					title, extract, charset, currentScore);
 				rankDiff = (int)(currentScore - previousScore);
 			}
 			else
 			{
 				// No, this is a new result
-				history.insertItem(m_treeName, engineName, location,
+				queryHistory.insertItem(m_treeName, engineName, location,
 					resultIter->getTitle(), extract, charset, currentScore);
 				// New results are displayed as such only if the query has already been run on the engine
 				if (isNewQuery == false)
@@ -572,9 +573,12 @@
 			isIndexed = true;
 		}
 
+		// Has it been already viewed ?
+		bool wasViewed = viewHistory.hasItem(location);
+
 		// OK, add a row for this result within the group
 		TreeModel::iterator titleIter;
-		if (appendResult(title, location, resultIter->getType(), (int)currentScore, rankDiff, isIndexed,
+		if (appendResult(title, location, resultIter->getType(), (int)currentScore, rankDiff, isIndexed, wasViewed,
 			docId, resultIter->getTimestamp(), engineId, indexId, titleIter, groupIter, true) == true)
 		{
 #ifdef DEBUG
@@ -715,6 +719,7 @@
 						childRow[m_resultsColumns.m_score],
 						childRow[m_resultsColumns.m_rankDiff],
 						childRow[m_resultsColumns.m_indexed],
+						childRow[m_resultsColumns.m_viewed],
 						childRow[m_resultsColumns.m_docId],
 						childRow[m_resultsColumns.m_timestamp],
 						engineIds, indexIds,
@@ -789,6 +794,7 @@
 								childRow[m_resultsColumns.m_score],
 								childRow[m_resultsColumns.m_rankDiff],
 								childRow[m_resultsColumns.m_indexed],
+								childRow[m_resultsColumns.m_viewed],
 								childRow[m_resultsColumns.m_docId],
 								childRow[m_resultsColumns.m_timestamp],
 								engineId, indexId,
@@ -1185,7 +1191,7 @@
 //
 void ResultsTree::exportResults(const string &fileName, bool csvFormat)
 {
-	QueryHistory history(m_settings.getHistoryDatabaseName());
+	QueryHistory queryHistory(m_settings.getHistoryDatabaseName());
 	QueryProperties queryProps(m_treeName, "");
 	ResultsExporter *pExporter = NULL;
 	unsigned int maxResultsCount = 0;
@@ -1272,7 +1278,7 @@
 			}
 			if (m_groupMode != FLAT)
 			{
-				result.setExtract(history.getItemExtract(from_utf8(m_treeName),
+				result.setExtract(queryHistory.getItemExtract(from_utf8(m_treeName),
 					engineName, result.getLocation(), charset));
 			}
 
@@ -1307,7 +1313,7 @@
 // Adds a new row in the results tree.
 //
 bool ResultsTree::appendResult(const ustring &text, const ustring &url,
-	const ustring &type, int score, int rankDiff, bool isIndexed,
+	const ustring &type, int score, int rankDiff, bool isIndexed, bool wasViewed,
 	unsigned int docId, const ustring &timestamp, unsigned int engineId,
 	unsigned int indexId, TreeModel::iterator &newRowIter,
 	const TreeModel::iterator &parentIter, bool noDuplicates)
@@ -1353,10 +1359,6 @@
 		newRowIter = m_refStore->append(parentRow.children());
 	}
 
-	// Has it been already viewed ?
-	ViewHistory viewHistory(m_settings.getHistoryDatabaseName());
-	bool wasViewed = viewHistory.hasItem(url);
-
 	TreeModel::Row childRow = *newRowIter;
 	updateRow(childRow, text, url, type, score, engineId, indexId,
 		docId, timestamp, ResultsModelColumns::ROW_RESULT, isIndexed,
@@ -1491,7 +1493,7 @@
 //
 ustring ResultsTree::findResultsExtract(const Gtk::TreeModel::Row &row)
 {
-	QueryHistory history(m_settings.getHistoryDatabaseName());
+	QueryHistory queryHistory(m_settings.getHistoryDatabaseName());
 	set<string> engineNames, indexNames;
 	string url(from_utf8(row[m_resultsColumns.m_url]));
 	string extract, charset;
@@ -1528,7 +1530,7 @@
 #ifdef DEBUG
 		cout << "ResultsTree::findResultsExtract: first engine for " << url << " was " << engineName << endl;
 #endif
-		extract = history.getItemExtract(from_utf8(m_treeName), engineName, url, charset);
+		extract = queryHistory.getItemExtract(from_utf8(m_treeName), engineName, url, charset);
 	}
 
 	return to_utf8(extract, charset);

Modified: trunk/UI/GTK2/src/ResultsTree.h
===================================================================
--- trunk/UI/GTK2/src/ResultsTree.h	2007-08-17 15:54:00 UTC (rev 937)
+++ trunk/UI/GTK2/src/ResultsTree.h	2007-08-17 16:17:08 UTC (rev 938)
@@ -160,7 +160,7 @@
 		/// Adds a new row in the results tree.
 		bool appendResult(const Glib::ustring &text, const Glib::ustring &url,
 			const Glib::ustring &type, int score, int rankDiff,
-			bool isIndexed, unsigned int docId, const Glib::ustring &timestamp,
+			bool isIndexed, bool wasViewed, unsigned int docId, const Glib::ustring &timestamp,
 			unsigned int engineId, unsigned int indexId,
 			Gtk::TreeModel::iterator &newRowIter,
 			const Gtk::TreeModel::iterator &parentIter,



From fabricecolin at mail.berlios.de  Sun Aug 19 12:37:21 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 19 Aug 2007 12:37:21 +0200
Subject: [Pinot-svn] r939 - trunk/Search
Message-ID: <200708191037.l7JAbLfX005739@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-19 12:37:21 +0200 (Sun, 19 Aug 2007)
New Revision: 939

Modified:
   trunk/Search/WebEngine.cpp
Log:
Get the charset from the document's type, as set by the collector, or failing
that from the HTML filter.


Modified: trunk/Search/WebEngine.cpp
===================================================================
--- trunk/Search/WebEngine.cpp	2007-08-17 16:17:08 UTC (rev 938)
+++ trunk/Search/WebEngine.cpp	2007-08-19 10:37:21 UTC (rev 939)
@@ -38,21 +38,6 @@
 using std::set;
 using std::vector;
 
-static string getCharset(const string &contentType)
-{
-	if (contentType.empty() == false)
-	{
-		// Is a charset specified ?
-		string::size_type pos = contentType.find("charset=");
-		if (pos != string::npos)
-		{
-			return StringManip::removeQuotes(contentType.substr(pos + 8));
-		}
-	}
-
-	return "";
-}
-
 WebEngine::WebEngine() :
 	SearchEngineInterface(),
 	m_pDownloader(DownloaderFactory::getDownloader("http"))
@@ -81,30 +66,30 @@
 	{
 		string contentType(pDoc->getType());
 
-		// Found a charset ?
-		m_charset = getCharset(contentType);
+		// Is a charset specified ?
+		string::size_type pos = contentType.find("charset=");
+		if (pos != string::npos)
+		{
+			m_charset = StringManip::removeQuotes(contentType.substr(pos + 8));
+		}
 		if (m_charset.empty() == true)
 		{
 			Dijon::HtmlFilter htmlFilter("text/html");
 
 			if (FilterUtils::feedFilter(*pDoc, &htmlFilter) == true)
 			{
-				// Content-Type might be specified as a META tag
 				const map<string, string> &metaData = htmlFilter.get_meta_data();
-				map<string, string>::const_iterator typeIter = metaData.find("Content-Type");
+				map<string, string>::const_iterator charsetIter = metaData.find("charset");
 
-				if (typeIter != metaData.end())
+				if (charsetIter != metaData.end())
 				{
-					contentType = typeIter->second;
-					m_charset = getCharset(contentType);
-					if (m_charset.empty() == false)
-					{
-						// Reset the document's type
-						pDoc->setType(contentType);
-					}
+					m_charset = charsetIter->second;
 				}
 			}
 		}
+#ifdef DEBUG
+		cout << "WebEngine::downloadPage: charset is " << m_charset << endl;
+#endif
 	}
 
 	return pDoc;



From fabricecolin at mail.berlios.de  Sun Aug 19 16:07:52 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 19 Aug 2007 16:07:52 +0200
Subject: [Pinot-svn] r940 - trunk
Message-ID: <200708191407.l7JE7qA1022548@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-19 16:07:51 +0200 (Sun, 19 Aug 2007)
New Revision: 940

Modified:
   trunk/README
   trunk/TODO
Log:
Added blurb about the location of language models to the FAQ.
Removed some items from the TODO, added some more...


Modified: trunk/README
===================================================================
--- trunk/README	2007-08-19 10:37:21 UTC (rev 939)
+++ trunk/README	2007-08-19 14:07:51 UTC (rev 940)
@@ -493,3 +493,11 @@
   * Upgrading from Xapian 0.9 or older to 1.0 is handled automatically, but
     downgrading back to 0.9 requires resetting the indexes manually. 
 
+  * If you see the message "Failed to open fingerprint file
+    '/usr/share/libtextcat/LM/danish.lm'" or similar in the output of
+    pinot-index, or in one of the logs in ~/.pinot, this means the language
+    models required by libtextcat are not in the expected location. You
+    should edit the file /etc/pinot/textcat_conf.txt and modify the paths to
+    the language models. By default, they are looked for under the directory
+    /usr/share/libtextcat/
+

Modified: trunk/TODO
===================================================================
--- trunk/TODO	2007-08-19 10:37:21 UTC (rev 939)
+++ trunk/TODO	2007-08-19 14:07:51 UTC (rev 940)
@@ -16,7 +16,6 @@
 - Document which query parameters apply to Web engines
 - Extend metadata beyond title,location,language,type,timestamp,size
 - Sync with gtk+'s xdgmime
-- Look for user-specific mimeinfo.cache in .local as suggested by Lee on the mailing list
 - Build against Fedora's patched libtextcat
 
 Tokenize
@@ -31,6 +30,10 @@
  given type
 - XmLFilter is slow-ish, rewrite file parsing with the TextReader interface
 
+SQL
+- Move history files into the index directories
+- Labels are lost when a document is queued for indexing !
+
 Monitor
 - Implement support for Solaris FEM
 
@@ -98,7 +101,6 @@
 - Follow updates to Xesam specs
 - Enable to deactivate D-Bus interface
 - Force full scans on Reload ?
-- When a file or directory is moved, should the history be updated too ?
 
 UI
 - When sorting results by host name, give better score to results that appear
@@ -129,5 +131,5 @@
 - Show which stored queries are fully, partially or not at all Web friendly
 - List viewed URLs
 - Unify ExpandQuery and Querying threads !
-- Are labels preserved on updates and set on imports correctly ?
+- Keep a list of recently used URLs, eg in the import dialog
 



From fabricecolin at mail.berlios.de  Sun Aug 19 16:10:04 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 19 Aug 2007 16:10:04 +0200
Subject: [Pinot-svn] r941 - trunk
Message-ID: <200708191410.l7JEA4Ow022758@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-19 16:10:03 +0200 (Sun, 19 Aug 2007)
New Revision: 941

Modified:
   trunk/AUTHORS
Log:
Updated contributors list. Lee suggested giving priority to local MIME settings
and Adel brought up some issues with packaging.


Modified: trunk/AUTHORS
===================================================================
--- trunk/AUTHORS	2007-08-19 14:07:51 UTC (rev 940)
+++ trunk/AUTHORS	2007-08-19 14:10:03 UTC (rev 941)
@@ -2,7 +2,7 @@
 
 	Fabrice Colin <fabricecolin at users dot berlios dot de>
 
-Patches, bug reports and helpful comments :
+Small patches, bug reports and helpful comments :
 
 	Reini Urban <rurban at x-ray dot at>
 	Marcus Rueckert <darix at web dot de>
@@ -16,6 +16,8 @@
 	Reuben Thomas <rrt at sc3d dot org> 
 	Marco Bazzani <visik7 at tin dot it>
 	Christian Dywan <christian at twotoasts dot de>
+	Lee Marks <ana_cata_hylo at yahoo dot com>
+	Adel Gadllah <adel dot gadllah at gmail dot com>
 
 The file Monitor/linux-inotify-syscalls.h is originally from libinotify
 (Copyright ? 2005 Ryan Lortie <desrt at desrt dot ca>).



From fabricecolin at mail.berlios.de  Sun Aug 19 16:12:20 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 19 Aug 2007 16:12:20 +0200
Subject: [Pinot-svn] r942 - trunk
Message-ID: <200708191412.l7JECKxQ022877@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-19 16:12:19 +0200 (Sun, 19 Aug 2007)
New Revision: 942

Modified:
   trunk/pinot.spec.in
Log:
Some mods imported from Fedora 7's spec file.


Modified: trunk/pinot.spec.in
===================================================================
--- trunk/pinot.spec.in	2007-08-19 14:10:03 UTC (rev 941)
+++ trunk/pinot.spec.in	2007-08-19 14:12:19 UTC (rev 942)
@@ -23,7 +23,7 @@
 Group: Applications/Internet 
 Source: %{name}-%{version}.tar.gz
 URL: http://pinot.berlios.de/
-BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
 Requires: xapian-core-libs >= 1.0.2, libtextcat >= 2.2, sqlite >= 3.3.1, curl >= 7.13, gmime >= 2.1
 Requires: gtkmm24 >= 2.6, libxml++ >= 2.12, %{dbus_pkg} >= 0.60, shared-mime-info
 Requires: unzip, antiword, unrtf, %{pftotext_pkg}
@@ -39,7 +39,7 @@
 Pinot is a D-Bus service that crawls, indexes your documents and monitors them
 for changes, as well as a GTK-based user interface that enables to query
 the index built by the service and your favourite Web engines, and display and
-analyze the results.
+analyze the results
 
 %package audio-docs 
 Summary: Help Pinot handle various audio document formats
@@ -48,7 +48,7 @@
 Requires: taglib >= 1.4
 
 %description audio-docs 
-The included filter adds support for OGG, MP3 and FLAC files.
+The included filter adds support for OGG, MP3 and FLAC files
 
 %package omega 
 Summary: Xapian Omega plugin for Pinot
@@ -57,7 +57,7 @@
 Requires: xapian-omega
 
 %description omega
-The included plugin enables Pinot to use Xapian Omega as a search engine.
+The included plugin enables Pinot to use Xapian Omega as a search engine
 
 %package deskbar
 Summary: Pinot plugin for DeskbarApplet
@@ -66,7 +66,7 @@
 Requires: deskbar-applet
 
 %description deskbar
-The included plugin enables Deskbar to search documents indexed by Pinot.
+The included plugin enables Deskbar to search documents indexed by Pinot
 
 %prep
 %setup -q
@@ -77,11 +77,20 @@
 
 %install
 [ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT
-%makeinstall
+make install DESTDIR=$RPM_BUILD_ROOT
 %find_lang %{name}
 
 %post
-gtk-update-icon-cache -q -f %{_datadir}/icons/hicolor || :
+touch --no-create %{_datadir}/icons/hicolor
+if [ -x %{_bindir}/gtk-update-icon-cache ]; then
+%{_bindir}/gtk-update-icon-cache --quiet %{_datadir}/icons/hicolor || :
+fi
+ 
+%postun
+touch --no-create %{_datadir}/icons/hicolor
+if [ -x %{_bindir}/gtk-update-icon-cache ]; then
+%{_bindir}/gtk-update-icon-cache --quiet %{_datadir}/icons/hicolor || :
+fi
 
 %clean
 [ -n "$RPM_BUILD_ROOT" -a "$RPM_BUILD_ROOT" != / ] && rm -rf $RPM_BUILD_ROOT



From fabricecolin at mail.berlios.de  Mon Aug 20 15:53:18 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 20 Aug 2007 15:53:18 +0200
Subject: [Pinot-svn] r943 - trunk/Search
Message-ID: <200708201353.l7KDrInt017497@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-20 15:53:18 +0200 (Mon, 20 Aug 2007)
New Revision: 943

Modified:
   trunk/Search/XapianEngine.cpp
Log:
Disable spelling suggestions for the time being, it's not yet used.


Modified: trunk/Search/XapianEngine.cpp
===================================================================
--- trunk/Search/XapianEngine.cpp	2007-08-19 14:12:19 UTC (rev 942)
+++ trunk/Search/XapianEngine.cpp	2007-08-20 13:53:18 UTC (rev 943)
@@ -342,7 +342,10 @@
 		Xapian::QueryParser::FLAG_PURE_NOT;
 	if (minimal == false)
 	{
-		flags |= Xapian::QueryParser::FLAG_WILDCARD|Xapian::QueryParser::FLAG_SPELLING_CORRECTION;
+		flags |= Xapian::QueryParser::FLAG_WILDCARD;
+#if 0
+		flags |= Xapian::QueryParser::FLAG_SPELLING_CORRECTION;
+#endif
 	}
 
 	// Parse the query string
@@ -352,11 +355,13 @@
 		return parsedQuery;
 	}
 
+#if 0
 	// Any correction ?
 	correctedFreeQuery = parser.get_corrected_query_string();
 #ifdef DEBUG
 	cout << "XapianEngine::parseQuery: corrected spelling to: " << correctedFreeQuery << endl;
 #endif
+#endif
 
 	// Apply a date range ?
 	bool enableMin = queryProps.getMinimumDate(minDay, minMonth, minYear);



From fabricecolin at mail.berlios.de  Mon Aug 20 16:01:08 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 20 Aug 2007 16:01:08 +0200
Subject: [Pinot-svn] r944 - trunk/UI/GTK2/src
Message-ID: <200708201401.l7KE18m3018157@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-20 16:01:07 +0200 (Mon, 20 Aug 2007)
New Revision: 944

Modified:
   trunk/UI/GTK2/src/mainWindow.cc
   trunk/UI/GTK2/src/queryDialog.cc
   trunk/UI/GTK2/src/queryDialog.hh
Log:
Leave queries' details in UTF-8.


Modified: trunk/UI/GTK2/src/mainWindow.cc
===================================================================
--- trunk/UI/GTK2/src/mainWindow.cc	2007-08-20 13:53:18 UTC (rev 943)
+++ trunk/UI/GTK2/src/mainWindow.cc	2007-08-20 14:01:07 UTC (rev 944)
@@ -247,10 +247,10 @@
 		}
 		row[m_queryColumns.m_lastRun] = to_utf8(lastRun);
 		row[m_queryColumns.m_lastRunTime] = lastRunTime;
-		string summary(StringManip::replaceSubString(queryIter->second.getFreeQuery(), "\n", " "));
+		ustring summary(StringManip::replaceSubString(queryIter->second.getFreeQuery(), "\n", " "));
 		if (summary.empty() == false)
 		{
-			row[m_queryColumns.m_summary] = to_utf8(summary);
+			row[m_queryColumns.m_summary] = summary;
 		}
 		else
 		{
@@ -920,8 +920,8 @@
 
 		bool wasCorrected;
 		QueryProperties queryProps(pQueryThread->getQuery(wasCorrected));
-		ustring queryName = to_utf8(queryProps.getName());
-		ustring engineName = to_utf8(pQueryThread->getEngineName());
+		ustring queryName(queryProps.getName());
+		ustring engineName(to_utf8(pQueryThread->getEngineName()));
 		string resultsCharset(pQueryThread->getCharset());
 		const vector<DocumentInfo> &resultsList = pQueryThread->getDocuments();
 
@@ -1064,7 +1064,7 @@
 		QueryProperties queryProps = pExpandThread->getQuery();
 		const set<string> &expandTerms = pExpandThread->getExpandTerms();
 		string queryName(_("More Like"));
-		string moreLike;
+		ustring moreLike;
 
 		if (queryProps.getName().empty() == true)
 		{
@@ -1782,7 +1782,7 @@
 {
 	QueryProperties queryProps;
 	vector<DocumentInfo> resultsList;
-	string queryName;
+	ustring queryName;
 
 	NotebookPageBox *pNotebookPage = get_current_page();
 	if (pNotebookPage != NULL)
@@ -1796,7 +1796,7 @@
 				pResultsTree->getSelection(resultsList);
 			}
 
-			queryName = from_utf8(pResultsPage->getTitle());
+			queryName = pResultsPage->getTitle();
 		}
 	}
 
@@ -1804,7 +1804,7 @@
 	if (queryName == _("Live query"))
 	{
 		queryProps.setName(queryName);
-		queryProps.setFreeQuery(from_utf8(liveQueryEntry->get_text()));
+		queryProps.setFreeQuery(liveQueryEntry->get_text());
 	}
 	else
 	{
@@ -2463,7 +2463,7 @@
 //
 void mainWindow::on_findButton_clicked()
 {
-	QueryProperties queryProps(_("Live query"), from_utf8(liveQueryEntry->get_text()));
+	QueryProperties queryProps(_("Live query"), liveQueryEntry->get_text());
 
 	run_search(queryProps);
 }
@@ -2475,7 +2475,7 @@
 {
 	// Even though live queries terms are now ANDed together,
 	// use them as OR terms when creating a new stored query
-	QueryProperties queryProps = QueryProperties("", from_utf8(liveQueryEntry->get_text()));
+	QueryProperties queryProps = QueryProperties("", liveQueryEntry->get_text());
 
 	edit_query(queryProps, true);
 }
@@ -2806,7 +2806,7 @@
 //
 void mainWindow::edit_query(QueryProperties &queryProps, bool newQuery)
 {
-	string queryName;
+	ustring queryName;
 
 	if (newQuery == false)
 	{
@@ -2840,7 +2840,7 @@
 	if (newQuery == false)
 	{
 		// Did the name change ?
-		string newQueryName = queryProps.getName();
+		ustring newQueryName(queryProps.getName());
 		if (newQueryName != queryName)
 		{
 			QueryHistory history(m_settings.getHistoryDatabaseName());
@@ -3023,7 +3023,7 @@
 
 		ustring status = _("Running query");
 		status += " \"";
-		status += to_utf8(queryProps.getName());
+		status += queryProps.getName();
 		status += "\" ";
 		status += _("on");
 		status += " ";

Modified: trunk/UI/GTK2/src/queryDialog.cc
===================================================================
--- trunk/UI/GTK2/src/queryDialog.cc	2007-08-20 13:53:18 UTC (rev 943)
+++ trunk/UI/GTK2/src/queryDialog.cc	2007-08-20 14:01:07 UTC (rev 944)
@@ -43,20 +43,19 @@
 	unsigned int day, month, year;
 
 	// Name
-	string name(m_properties.getName());
-	if (name.empty() == true)
+	if (m_name.empty() == true)
 	{
 		queryOkbutton->set_sensitive(false);
 	}
 	else
 	{
-		nameEntry->set_text(to_utf8(name));
+		nameEntry->set_text(m_name);
 	}
 	// Query text
 	RefPtr<TextBuffer> refBuffer = queryTextview->get_buffer();
 	if (refBuffer)
 	{
-		refBuffer->set_text(to_utf8(m_properties.getFreeQuery()));
+		refBuffer->set_text(m_properties.getFreeQuery());
 	}
 	// Maximum number of results
 	resultsCountSpinbutton->set_value((double)m_properties.getMaximumResultsCount());
@@ -157,16 +156,18 @@
 
 void queryDialog::on_queryOkbutton_clicked()
 {
+	ustring newName(nameEntry->get_text());
+
 	// Name
-	m_properties.setName(from_utf8(nameEntry->get_text()));
+	m_properties.setName(newName);
 	m_badName = false;
 	// Did the name change ?
-	if (m_name != m_properties.getName())
+	if (m_name != newName)
 	{
 		const std::map<string, QueryProperties> &queries = PinotSettings::getInstance().getQueries();
 
 		// Is it already used ?
-		std::map<string, QueryProperties>::const_iterator queryIter = queries.find(m_properties.getName());
+		std::map<string, QueryProperties>::const_iterator queryIter = queries.find(newName);
 		if (queryIter != queries.end())
 		{
 			// Yes, it is
@@ -181,7 +182,7 @@
 	RefPtr<TextBuffer> refBuffer = queryTextview->get_buffer();
 	if (refBuffer)
 	{
-		m_properties.setFreeQuery(from_utf8(refBuffer->get_text()));
+		m_properties.setFreeQuery(refBuffer->get_text());
 	}
 	// Maximum number of results
 	m_properties.setMaximumResultsCount((unsigned int)resultsCountSpinbutton->get_value());

Modified: trunk/UI/GTK2/src/queryDialog.hh
===================================================================
--- trunk/UI/GTK2/src/queryDialog.hh	2007-08-20 13:53:18 UTC (rev 943)
+++ trunk/UI/GTK2/src/queryDialog.hh	2007-08-20 14:01:07 UTC (rev 944)
@@ -22,6 +22,7 @@
 #include <string>
 #include <set>
 #include <glibmm/date.h>
+#include <glibmm/ustring.h>
 
 #include "QueryProperties.h"
 #include "PinotSettings.h"
@@ -36,7 +37,7 @@
 	bool badName(void) const;
 
 protected:
-	std::string m_name;
+	Glib::ustring m_name;
 	QueryProperties& m_properties;
 	const std::set<std::string> &m_labels;
 	Glib::Date m_fromDate;



From fabricecolin at mail.berlios.de  Mon Aug 20 16:04:33 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 20 Aug 2007 16:04:33 +0200
Subject: [Pinot-svn] r945 - in trunk: . Index Search UI/GTK2/src
Message-ID: <200708201404.l7KE4Xtx018412@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-20 16:04:32 +0200 (Mon, 20 Aug 2007)
New Revision: 945

Modified:
   trunk/Index/pinot-index.1
   trunk/Search/pinot-search.1
   trunk/UI/GTK2/src/pinot-dbus-daemon.1
   trunk/UI/GTK2/src/pinot.1
   trunk/configure.in
Log:
Upped version number, updated man pages.


Modified: trunk/Index/pinot-index.1
===================================================================
--- trunk/Index/pinot-index.1	2007-08-20 14:01:07 UTC (rev 944)
+++ trunk/Index/pinot-index.1	2007-08-20 14:04:32 UTC (rev 945)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-INDEX "1" "July 2007" "pinot-index - pinot 0.75" "User Commands"
+.TH PINOT-INDEX "1" "August 2007" "pinot-index - pinot 0.76" "User Commands"
 .SH NAME
 pinot-index \- Index documents from the command-line
 .SH SYNOPSIS

Modified: trunk/Search/pinot-search.1
===================================================================
--- trunk/Search/pinot-search.1	2007-08-20 14:01:07 UTC (rev 944)
+++ trunk/Search/pinot-search.1	2007-08-20 14:04:32 UTC (rev 945)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-SEARCH "1" "July 2007" "pinot-search - pinot 0.75" "User Commands"
+.TH PINOT-SEARCH "1" "August 2007" "pinot-search - pinot 0.76" "User Commands"
 .SH NAME
 pinot-search \- Query search engines from the command-line
 .SH SYNOPSIS
@@ -41,7 +41,7 @@
 .PP
 Supported search engine types are googleapi opensearch sherlock xapian
 .SH EXAMPLES
-pinot\-search googleapi mygoogleapikey "clowns" 10
+pinot\-search googleapi mygoogleapikey "clowns"
 .PP
 pinot\-search opensearch /usr/share/pinot/engines/KrustyDescription.xml "clowns"
 .PP

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.1
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.1	2007-08-20 14:01:07 UTC (rev 944)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.1	2007-08-20 14:04:32 UTC (rev 945)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT-DBUS-DAEMON "1" "July 2007" "pinot-dbus-daemon - pinot 0.75" "User Commands"
+.TH PINOT-DBUS-DAEMON "1" "August 2007" "pinot-dbus-daemon - pinot 0.76" "User Commands"
 .SH NAME
 pinot-dbus-daemon \- D-Bus search and index daemon
 .SH SYNOPSIS

Modified: trunk/UI/GTK2/src/pinot.1
===================================================================
--- trunk/UI/GTK2/src/pinot.1	2007-08-20 14:01:07 UTC (rev 944)
+++ trunk/UI/GTK2/src/pinot.1	2007-08-20 14:04:32 UTC (rev 945)
@@ -1,5 +1,5 @@
 .\" DO NOT MODIFY THIS FILE!  It was generated by help2man 1.36.
-.TH PINOT "1" "July 2007" "pinot - pinot 0.75" "User Commands"
+.TH PINOT "1" "August 2007" "pinot - pinot 0.76" "User Commands"
 .SH NAME
 pinot \- A metasearch tool for the Free Desktop
 .SH SYNOPSIS

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2007-08-20 14:01:07 UTC (rev 944)
+++ trunk/configure.in	2007-08-20 14:04:32 UTC (rev 945)
@@ -2,7 +2,7 @@
 # using glademm V2.6.0
 
 AC_PREREQ(2.50)
-AC_INIT(pinot, 0.75,[fabricecolin at users.berlios.de])
+AC_INIT(pinot, 0.76,[fabricecolin at users.berlios.de])
 AM_INIT_AUTOMAKE
 AC_CONFIG_HEADERS(config.h)
 
@@ -16,7 +16,7 @@
 AM_PROG_LIBTOOL
 
 dnl An index with a version older than this should be upgraded
-AC_DEFINE_UNQUOTED(PINOT_INDEX_MIN_VERSION,0.75,
+AC_DEFINE_UNQUOTED(PINOT_INDEX_MIN_VERSION,0.76,
     [Minimum index version])
 
 dnl gettext support



From fabricecolin at mail.berlios.de  Mon Aug 20 16:10:51 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Mon, 20 Aug 2007 16:10:51 +0200
Subject: [Pinot-svn] r946 - trunk/UI/GTK2/src
Message-ID: <200708201410.l7KEApVr019418@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-20 16:10:50 +0200 (Mon, 20 Aug 2007)
New Revision: 946

Modified:
   trunk/UI/GTK2/src/pinot.cc
Log:
Very minor mod.


Modified: trunk/UI/GTK2/src/pinot.cc
===================================================================
--- trunk/UI/GTK2/src/pinot.cc	2007-08-20 14:04:32 UTC (rev 945)
+++ trunk/UI/GTK2/src/pinot.cc	2007-08-20 14:10:50 UTC (rev 946)
@@ -320,7 +320,7 @@
 
 	// What version of the UI is this ?
 	double uiVersion = atof(VERSION);
-	if (uiVersion > 0)
+	if (uiVersion > 0.0)
 	{
 		// What version is the index at ?
 		XapianIndex docsIndex(settings.m_docsIndexLocation);



From fabricecolin at mail.berlios.de  Tue Aug 21 16:19:26 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 21 Aug 2007 16:19:26 +0200
Subject: [Pinot-svn] r947 - trunk/scripts/bash
Message-ID: <200708211419.l7LEJQn0027746@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-21 16:19:25 +0200 (Tue, 21 Aug 2007)
New Revision: 947

Modified:
   trunk/scripts/bash/pinot-enum-index.sh
Log:
List documents whose scheme is not file://.


Modified: trunk/scripts/bash/pinot-enum-index.sh
===================================================================
--- trunk/scripts/bash/pinot-enum-index.sh	2007-08-20 14:10:50 UTC (rev 946)
+++ trunk/scripts/bash/pinot-enum-index.sh	2007-08-21 14:19:25 UTC (rev 947)
@@ -41,24 +41,37 @@
 rm -f "$1/urls.txt" "$1/filesizes.txt"
 
 # Get a list of documents
-DOCIDS=`$DELVE -t X-MetaSE-Doc "$1"`
+DOCIDS=`$DELVE -t X-MetaSE-Doc "$1" | sed -e "s/[^0-9 ]//g"`
 if [ $? != 0 ]; then
   echo "Couldn't query database at $1"
 fi
 
 echo "Listing documents in index"
 echo "0" >> "$1/filesizes.txt"
-for DOCID in `echo $DOCIDS | sed -e "s/[^0-9 ]//g"` ;
+for DOCID in $DOCIDS ;
 do
   # Skip documents with a scheme other than file
   FILENAME=`$DELVE -d -r $DOCID "$1" | grep "url=file" | sed -e "s/url=\(.*\):\/\///g"`
+  #echo "File name is $FILENAME"
   if [ $? == 0 ] && [ ! -z "$FILENAME" ]; then
     FILESIZE=`du -b "$FILENAME" | sed -e "s/\([0-9]*\)\(.*\)/\1/g"`
     if [ ! -z "$FILESIZE" ]; then
-      echo $FILENAME >> "$1/urls.txt"
       echo $FILESIZE >> "$1/filesizes.txt"
       echo "+" >> "$1/filesizes.txt"
     fi
+    echo $FILENAME >> "$1/urls.txt"
+  else
+    # Dump documents with a scheme other than file
+    URL=`$DELVE -d -r $DOCID "$1" | grep "url=" | sed -e "s/url=//g"`
+    #echo "URL is $URL"
+    if [ $? == 0 ] && [ ! -z "$URL" ]; then
+        FILESIZE=`$DELVE -d -r $DOCID "$1" | grep "size=" | sed -e "s/size=//g"`
+        if [ ! -z "$FILESIZE" ]; then
+          echo $FILESIZE >> "$1/filesizes.txt"
+          echo "+" >> "$1/filesizes.txt"
+        fi
+        echo $URL >> "$1/urls.txt"
+    fi
   fi
 done
 echo "n" >> "$1/filesizes.txt"



From fabricecolin at mail.berlios.de  Tue Aug 21 16:24:43 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Tue, 21 Aug 2007 16:24:43 +0200
Subject: [Pinot-svn] r948 - trunk/po
Message-ID: <200708211424.l7LEOhfn028443@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-21 16:24:36 +0200 (Tue, 21 Aug 2007)
New Revision: 948

Modified:
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/it.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
   trunk/po/zh_TW.po
Log:
Updated translations.


Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/de.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-06-21 19:51+0800\n"
 "Last-Translator: Christian Dywan <christian at twotoasts.de>\n"
 "Language-Team: German <de at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:21+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:32+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -32,8 +32,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Meine Webseiten"
@@ -42,8 +42,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Meine Dokumente"
@@ -94,7 +94,7 @@
 msgid "External index"
 msgstr "Externer Index"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr ""
 
@@ -356,7 +356,7 @@
 msgid "Running query"
 msgstr ""
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Keine Standardanwendung f?r Typ angegeben"
 
@@ -459,97 +459,97 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Englisch"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Finnisch"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Franz?sisch"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Deutsch"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italienisch"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Norwegisch"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugiesisch"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Spanisch"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Schwedisch"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "Konnte Index nicht ?ffnen"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Wichtig"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Neu"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Pers?nlich"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr ""
 
@@ -660,7 +660,7 @@
 msgid "Preferences"
 msgstr "Einstellungen"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr ""
 
@@ -684,45 +684,45 @@
 msgid "Terms:"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Rechnername"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Dateiname"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Dateiendung"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr ""
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Verzeichnis"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr ""
 

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/es.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -8,14 +8,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Gar Bage <garbage at openfutura.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:11+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:30+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -33,8 +33,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mis Paginas Web"
@@ -43,8 +43,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mis documentos"
@@ -96,7 +96,7 @@
 msgid "External index"
 msgstr "?ndice externo"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Ninguno"
 
@@ -353,7 +353,7 @@
 msgid "Running query"
 msgstr "Ejecutando la b?squeda"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "No hay aplicaci?n predefinida para el tipo"
 
@@ -456,97 +456,97 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Desconocido"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Dan?s"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Finland?s"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Alem?n"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Noruego"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Ruso"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Espa?ol"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Sueco"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "No se pudo abrir el ?ndice"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "No se pudo crear la base de datos del hist?rico"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Nuevo"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Personal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "No clasificado"
 
@@ -656,7 +656,7 @@
 msgid "Preferences"
 msgstr "Preferencias"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "Etiqueta"
 
@@ -680,45 +680,45 @@
 msgid "Terms:"
 msgstr "T?rminos:"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Nombre de servidor"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Nombre de archivo"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Extensi?n del archivo"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "T?tulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Carpeta"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "Codigo de idioma"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "Fecha inicial"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "Fecha final"
 

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/fr.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -8,14 +8,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-04-03 04:46+0000\n"
 "Last-Translator: FabriceColin <fabrice.colin at gmail.com>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=utf-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:14+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:33+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -33,8 +33,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mes Pages Web"
@@ -43,8 +43,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mes Documents"
@@ -95,7 +95,7 @@
 msgid "External index"
 msgstr "Index externe"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Aucune"
 
@@ -126,7 +126,7 @@
 
 #: UI/GTK2/src/IndexPage.cpp:189
 msgid "All"
-msgstr ""
+msgstr "Tout"
 
 #: UI/GTK2/src/launcherDialog_glade.cc:64
 msgid ""
@@ -193,8 +193,9 @@
 msgstr "Le chemin du document is"
 
 #: UI/GTK2/src/mainWindow.cc:884
+#, fuzzy
 msgid "Showing"
-msgstr ""
+msgstr "Montrant"
 
 #: UI/GTK2/src/mainWindow.cc:889
 msgid "of"
@@ -259,9 +260,8 @@
 msgstr "Edite l'index"
 
 #: UI/GTK2/src/mainWindow.cc:1715
-#, fuzzy
 msgid "Export Results"
-msgstr "resultats"
+msgstr "Exporter Les Resultats"
 
 #. Find this query
 #: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
@@ -354,7 +354,7 @@
 msgid "Running query"
 msgstr "Recherche en cours"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Pas d'application definie pour le type"
 
@@ -457,97 +457,97 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Inconnu"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Danois"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Hollandais"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Anglais"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Finlandais"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Francais"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Allemand"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
-msgstr ""
+msgstr "Hongrois"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italien"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Norvegien"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugais"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
-msgstr ""
+msgstr "Roumain"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Russe"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Espagnol"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Suedois"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
-msgstr ""
+msgstr "Turc"
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "N'a pas pu ouvrir l'index"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "N'a pas pu creer la base d'historiques"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "Il est recommende de mettre a jour tous les documents de Mes Pages Web"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Important"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Nouveau"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Personnel"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "Sans classification"
 
@@ -569,11 +569,11 @@
 
 #: UI/GTK2/src/prefsDialog.cc:315
 msgid "Exclude these patterns from indexing"
-msgstr ""
+msgstr "Ne pas indexer ces motifs"
 
 #: UI/GTK2/src/prefsDialog.cc:316
 msgid "Only index these patterns"
-msgstr ""
+msgstr "Indexer uniquement ces motifs"
 
 #: UI/GTK2/src/prefsDialog.cc:406
 msgid "New Label"
@@ -645,9 +645,8 @@
 msgstr "Ces repertoires seront indexes automatiquement:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:127
-#, fuzzy
 msgid "File patterns:"
-msgstr "Extension de fichier"
+msgstr "Motifs de fichier:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
@@ -657,7 +656,7 @@
 msgid "Preferences"
 msgstr "Preferences"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "Etiquette"
 
@@ -681,45 +680,45 @@
 msgid "Terms:"
 msgstr "Termes:"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Nom de machine"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Nom de fichier"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Extension de fichier"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titre"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Repertoire"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "Code langue"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "Type MIME"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "Debut"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "Fin"
 

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/it.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-06-21 19:51+0800\n"
 "Last-Translator: Marco Bazzani <visitors at libero.it>\n"
 "Language-Team: Italian <it at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:23+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:28+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -32,8 +32,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Pagine web personali"
@@ -42,8 +42,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Documenti personali"
@@ -94,7 +94,7 @@
 msgid "External index"
 msgstr "Indice esterno"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Nessuno"
 
@@ -353,7 +353,7 @@
 msgid "Running query"
 msgstr "Query in esecuzione"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Nessuna applicazione di default ? stata definita per tipo"
 
@@ -456,97 +456,97 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Sconosciuto"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Danese"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Olandese"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Inglese"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Finlandese"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Francese"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Tedesco"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Norvegese"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portoghese"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Spagnolo"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Svedese"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "Impossibile aprire l'indice"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "Impossibile creare una cronologia del database"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "E' consigliato aggiornare tutti le pagine web personali"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Nuovo"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Personale"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "Non classificato"
 
@@ -658,7 +658,7 @@
 msgid "Preferences"
 msgstr "Preferenze"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "Descrizione"
 
@@ -682,45 +682,45 @@
 msgid "Terms:"
 msgstr "Termini:"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Nome host"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Nome file"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Estensione file"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titolo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Directory"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "Codice di linguaggio"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "Data iniziale"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "Data finale"
 

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/nl.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-08-03 19:02+0000\n"
 "Last-Translator: JW <jw00000 at gmail.com>\n"
 "Language-Team: Dutch <nl at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:19+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:25+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -32,8 +32,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mijn webpagina's"
@@ -42,8 +42,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mijn documenten"
@@ -94,7 +94,7 @@
 msgid "External index"
 msgstr "Externe index"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Geen"
 
@@ -353,7 +353,7 @@
 msgid "Running query"
 msgstr "Lopende query"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Geen standaard toepassing gedefinieerd voor het type"
 
@@ -456,98 +456,98 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Niet bekend"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Deens"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Nederlands"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Engels"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Fins"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Frans"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Duits"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italiaans"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Noors"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugees"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Spaans"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Zweeds"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "Kan index niet openen"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "Kon historische database niet maken"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 "Het is aangeraden alle documenten in \"Mijn webpagina's\" te vernieuwen"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Belangrijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Nieuw"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Persoonlijk"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "Niet geclassificeerd"
 
@@ -660,7 +660,7 @@
 msgid "Preferences"
 msgstr "Voorkeuren"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "Bijschrift"
 
@@ -684,45 +684,45 @@
 msgid "Terms:"
 msgstr "Termen:"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Hostnaam"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Bestandsnaam"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Bestandsextensie"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Map"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "Taal code"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "MIME type"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "Begindatum"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "Einddatum"
 

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/pt.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
-"PO-Revision-Date: 2007-08-13 21:13+0000\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"PO-Revision-Date: 2007-08-17 10:07+0000\n"
 "Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:28+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:17+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -33,8 +33,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "As minhas p?ginas Web"
@@ -43,8 +43,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Os Meus Documentos"
@@ -95,7 +95,7 @@
 msgid "External index"
 msgstr "Index externo"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Nenhum"
 
@@ -354,7 +354,7 @@
 msgid "Running query"
 msgstr "A executar consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Nenhuma aplica??o associada ao tipo"
 
@@ -457,97 +457,97 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Dinamarqu?s"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Finl?ndes"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Alem?o"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
-msgstr ""
+msgstr "H?ngaro"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Noruegu?s"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
-msgstr ""
+msgstr "Romeno"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Espanhol"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Sueco"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
-msgstr ""
+msgstr "Turco"
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "N?o foi poss?vel abrir o ?ndice"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "N?o foi poss?vel criar base de dados do hist?rico"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "A actualizar todos os documentos nas Minhas P?ginas Web ? recomendado"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Novo"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -659,7 +659,7 @@
 msgid "Preferences"
 msgstr "Prefer?ncias"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "Etiqueta"
 
@@ -683,45 +683,45 @@
 msgid "Terms:"
 msgstr "Termos:"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Nome da m?quina"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Nome do ficheiro"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Extens?o do ficheiro"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Direct?rio"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "C?digo do idioma"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "Data de in?cio"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "Data de fim"
 

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/pt_BR.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Leonardo Melo <leonardovazmelo at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:25+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:18+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -32,8 +32,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Minhas P?ginas Web"
@@ -42,8 +42,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Meus Documentos"
@@ -96,7 +96,7 @@
 msgid "External index"
 msgstr "?ndice externo"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Nenhum"
 
@@ -354,7 +354,7 @@
 msgid "Running query"
 msgstr "Executando consulta"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Aplica??o associada ao tipo n?o definida"
 
@@ -457,97 +457,97 @@
 msgstr "Pino"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Danish"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Dutch"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "English"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Terminar"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "French"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "German"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italian"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Norwegian"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Russian"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Spanish"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Swedish"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "N?o foi poss?vel abrir ?ndice"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "N?o foi poss?vel criar base de hist?rico"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Importante"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Novo"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Pessoal"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "N?o classificado"
 
@@ -662,7 +662,7 @@
 msgid "Preferences"
 msgstr "Prefer?ncias"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "T?tulo"
 
@@ -686,45 +686,45 @@
 msgid "Terms:"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "Nome do host"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Nome do arquivo"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Extens?o do arquivo"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "T?tulo"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Diret?rio"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "C?digo da l?ngua"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "Tipo MIME"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr ""
 

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/ru.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:26+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:20+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -32,8 +32,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "??? web-????????"
@@ -42,8 +42,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "??? ?????????"
@@ -96,7 +96,7 @@
 msgid "External index"
 msgstr "??????? ??????"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "???"
 
@@ -354,7 +354,7 @@
 msgid "Running query"
 msgstr "?????? ???????"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "?? ???? ?????????? ?? ????????? ?? ?????????? ??? ???? ??????????"
 
@@ -457,97 +457,97 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "?????????????"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "?????????"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "?????????? ??????? ??????"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "?? ??????? ??????? ???? ?????? ???????"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "?????"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "???????"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "??????"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "??????????????"
 
@@ -658,7 +658,7 @@
 msgid "Preferences"
 msgstr "?????????"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "?????"
 
@@ -682,45 +682,45 @@
 msgid "Terms:"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "??? ????"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "????"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "?????????? ?????"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "????????"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "URL"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "???????? ??????????"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "??? ?????"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "??? MIME"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr ""
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr ""
 

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/sv.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -7,14 +7,14 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
 "PO-Revision-Date: 2007-07-29 16:48+0000\n"
 "Last-Translator: Daniel Nylander <yeager at ubuntu.com>\n"
 "Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:16+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:27+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -32,8 +32,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "Mina webbsidor"
@@ -42,8 +42,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "Mina dokument"
@@ -94,7 +94,7 @@
 msgid "External index"
 msgstr "Externt index"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
 msgstr "Ingen"
 
@@ -125,7 +125,7 @@
 
 #: UI/GTK2/src/IndexPage.cpp:189
 msgid "All"
-msgstr ""
+msgstr "Alla"
 
 #: UI/GTK2/src/launcherDialog_glade.cc:64
 msgid ""
@@ -258,9 +258,8 @@
 msgstr "Redigerade index"
 
 #: UI/GTK2/src/mainWindow.cc:1715
-#, fuzzy
 msgid "Export Results"
-msgstr "resultat"
+msgstr "Exportresultat"
 
 #. Find this query
 #: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
@@ -353,7 +352,7 @@
 msgid "Running query"
 msgstr "K?r fr?ga"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
 msgstr "Inget standardprogram definierat f?r typen"
 
@@ -456,97 +455,97 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Ok?nd"
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "Danska"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "Nederl?ndska"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "Engelska"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "Finska"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "Franska"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "Tyska"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
-msgstr ""
+msgstr "Ungerska"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "Italienska"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "Norska"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "Portugisiska"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
-msgstr ""
+msgstr "Rum?nska"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "Ryska"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "Spanska"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "Svenska"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
-msgstr ""
+msgstr "Turkiska"
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "Kunde inte ?ppna index"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "Kunde inte skapa historikdatabas"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "Uppdatering av alla dokument i Mina webbsidor rekommenderas"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
 msgstr "Viktigt"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
 msgstr "Ny"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
 msgstr "Personlig"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
 msgstr "Oklassificerad"
 
@@ -568,11 +567,11 @@
 
 #: UI/GTK2/src/prefsDialog.cc:315
 msgid "Exclude these patterns from indexing"
-msgstr ""
+msgstr "Undanta dessa m?nster fr?n indexering"
 
 #: UI/GTK2/src/prefsDialog.cc:316
 msgid "Only index these patterns"
-msgstr ""
+msgstr "Indexera endast dessa m?nster"
 
 #: UI/GTK2/src/prefsDialog.cc:406
 msgid "New Label"
@@ -646,9 +645,8 @@
 "(valfritt):"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:127
-#, fuzzy
 msgid "File patterns:"
-msgstr "Fil?ndelse"
+msgstr "Film?nster:"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
@@ -658,7 +656,7 @@
 msgid "Preferences"
 msgstr "Inst?llningar"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "Etikett"
 
@@ -682,45 +680,45 @@
 msgid "Terms:"
 msgstr "Villkor:"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "V?rdnamn"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "Filnamn"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "Fil?ndelse"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "Titel"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
 msgstr "Url"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "Katalog"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "Spr?kkod"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "MIME-typ"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "Startdatum"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "Slutdatum"
 

Modified: trunk/po/zh_TW.po
===================================================================
--- trunk/po/zh_TW.po	2007-08-21 14:19:25 UTC (rev 947)
+++ trunk/po/zh_TW.po	2007-08-21 14:24:36 UTC (rev 948)
@@ -8,14 +8,14 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-14 23:27+0800\n"
-"PO-Revision-Date: 2007-07-29 02:41+0000\n"
+"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"PO-Revision-Date: 2007-08-17 15:54+0000\n"
 "Last-Translator: Yung-chung Lin <henearkrxern at gmail.com>\n"
 "Language-Team: Traditional Chinese <zh_TW at li.org>\n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: 8bit\n"
-"X-Rosetta-Export-Date: 2007-08-14 15:18:30+0000\n"
+"X-Rosetta-Export-Date: 2007-08-19 07:58:14+0000\n"
 
 #: UI/GTK2/src/EnginesTree.cpp:68
 msgid "Search Engines"
@@ -33,8 +33,8 @@
 #: UI/GTK2/src/mainWindow.cc:1030 UI/GTK2/src/mainWindow.cc:1201
 #: UI/GTK2/src/mainWindow.cc:1243 UI/GTK2/src/mainWindow.cc:1265
 #: UI/GTK2/src/mainWindow.cc:1296 UI/GTK2/src/mainWindow.cc:1907
-#: UI/GTK2/src/PinotSettings.cpp:304 UI/GTK2/src/PinotSettings.cpp:1361
-#: UI/GTK2/src/PinotSettings.cpp:1417 UI/GTK2/src/statisticsDialog.cc:77
+#: UI/GTK2/src/PinotSettings.cpp:311 UI/GTK2/src/PinotSettings.cpp:1368
+#: UI/GTK2/src/PinotSettings.cpp:1424 UI/GTK2/src/statisticsDialog.cc:77
 #: UI/GTK2/src/WorkerThreads.cpp:821 UI/GTK2/src/WorkerThreads.cpp:880
 msgid "My Web Pages"
 msgstr "????"
@@ -43,8 +43,8 @@
 #. Bind the callback's parameter to the index name
 #: UI/GTK2/src/EnginesTree.cpp:338 UI/GTK2/src/mainWindow.cc:319
 #: UI/GTK2/src/mainWindow.cc:322 UI/GTK2/src/mainWindow.cc:1037
-#: UI/GTK2/src/PinotSettings.cpp:305 UI/GTK2/src/PinotSettings.cpp:1362
-#: UI/GTK2/src/PinotSettings.cpp:1418 UI/GTK2/src/statisticsDialog.cc:82
+#: UI/GTK2/src/PinotSettings.cpp:312 UI/GTK2/src/PinotSettings.cpp:1369
+#: UI/GTK2/src/PinotSettings.cpp:1425 UI/GTK2/src/statisticsDialog.cc:82
 #: UI/GTK2/src/WorkerThreads.cpp:826 UI/GTK2/src/WorkerThreads.cpp:890
 msgid "My Documents"
 msgstr "????"
@@ -73,15 +73,15 @@
 
 #: UI/GTK2/src/indexDialog_glade.cc:67
 msgid "..."
-msgstr ""
+msgstr "..."
 
 #: UI/GTK2/src/indexDialog_glade.cc:70 UI/GTK2/src/prefsDialog_glade.cc:85
 msgid "Type:"
-msgstr ""
+msgstr "???"
 
 #: UI/GTK2/src/indexDialog_glade.cc:71 UI/GTK2/src/importDialog_glade.cc:67
 msgid "Location:"
-msgstr ""
+msgstr "???"
 
 #: UI/GTK2/src/indexDialog_glade.cc:72 UI/GTK2/src/prefsDialog_glade.cc:86
 msgid "Port:"
@@ -95,9 +95,9 @@
 msgid "External index"
 msgstr "????"
 
-#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:120
+#: UI/GTK2/src/importDialog.cc:76 UI/GTK2/src/queryDialog.cc:119
 msgid "None"
-msgstr ""
+msgstr "?"
 
 #: UI/GTK2/src/importDialog_glade.cc:68
 #: UI/GTK2/src/propertiesDialog_glade.cc:67
@@ -126,13 +126,13 @@
 
 #: UI/GTK2/src/IndexPage.cpp:189
 msgid "All"
-msgstr ""
+msgstr "???"
 
 #: UI/GTK2/src/launcherDialog_glade.cc:64
 msgid ""
 "There is no helper application defined for this document's type.\n"
 "Please enter the command to open this document."
-msgstr ""
+msgstr "???????????????????????????"
 
 #: UI/GTK2/src/launcherDialog_glade.cc:67
 msgid "Use this command for other documents of the same type."
@@ -140,7 +140,7 @@
 
 #: UI/GTK2/src/launcherDialog_glade.cc:99
 msgid "Helper application"
-msgstr ""
+msgstr "????"
 
 #: UI/GTK2/src/mainWindow.cc:140
 msgid "Query Name"
@@ -148,7 +148,7 @@
 
 #: UI/GTK2/src/mainWindow.cc:145
 msgid "Last Run"
-msgstr ""
+msgstr "???????"
 
 #: UI/GTK2/src/mainWindow.cc:150
 msgid "Summary"
@@ -183,7 +183,7 @@
 #. Show the URL of the first result in the status bar
 #: UI/GTK2/src/mainWindow.cc:476
 msgid "Result location is"
-msgstr ""
+msgstr "??????"
 
 #. Show the URL in the status bar
 #: UI/GTK2/src/mainWindow.cc:551
@@ -200,7 +200,7 @@
 
 #: UI/GTK2/src/mainWindow.cc:894
 msgid "documents, starting at"
-msgstr ""
+msgstr "??????"
 
 #: UI/GTK2/src/mainWindow.cc:928
 msgid "Query"
@@ -212,11 +212,11 @@
 
 #: UI/GTK2/src/mainWindow.cc:936
 msgid "ended"
-msgstr ""
+msgstr "??"
 
 #: UI/GTK2/src/mainWindow.cc:1066
 msgid "More Like"
-msgstr ""
+msgstr "????"
 
 #: UI/GTK2/src/mainWindow.cc:1127
 msgid "Updated label(s)"
@@ -241,7 +241,7 @@
 
 #: UI/GTK2/src/mainWindow.cc:1359
 msgid "Couldn't rename index, name"
-msgstr ""
+msgstr "????????????"
 
 #: UI/GTK2/src/mainWindow.cc:1363 UI/GTK2/src/mainWindow.cc:2296
 #: UI/GTK2/src/mainWindow.cc:2833
@@ -259,7 +259,7 @@
 #: UI/GTK2/src/mainWindow.cc:1715
 #, fuzzy
 msgid "Export Results"
-msgstr "??"
+msgstr "????"
 
 #. Find this query
 #: UI/GTK2/src/mainWindow.cc:1804 UI/GTK2/src/mainWindow.cc:2466
@@ -290,7 +290,7 @@
 
 #: UI/GTK2/src/mainWindow.cc:2246
 msgid "A metasearch tool for the Free Desktop"
-msgstr ""
+msgstr "Free Desktop ??????"
 
 #: UI/GTK2/src/mainWindow.cc:2247
 msgid "Search the Web and your documents !"
@@ -318,7 +318,7 @@
 
 #: UI/GTK2/src/mainWindow.cc:2829
 msgid "Query name"
-msgstr ""
+msgstr "????"
 
 #: UI/GTK2/src/mainWindow.cc:2856
 msgid "Couldn't update query"
@@ -352,9 +352,9 @@
 msgid "Running query"
 msgstr "???????"
 
-#: UI/GTK2/src/mainWindow.cc:3237
+#: UI/GTK2/src/mainWindow.cc:3236
 msgid "No default application defined for type"
-msgstr ""
+msgstr "????????????"
 
 #: UI/GTK2/src/mainWindow_glade.cc:126
 msgid "Query:"
@@ -387,7 +387,7 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:194
 msgid "Group By"
-msgstr ""
+msgstr "???"
 
 #: UI/GTK2/src/mainWindow_glade.cc:200
 msgid "Clear List"
@@ -395,7 +395,7 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:206
 msgid "Vie_w"
-msgstr ""
+msgstr "??(_w)"
 
 #: UI/GTK2/src/mainWindow_glade.cc:209
 msgid "View Cache"
@@ -403,11 +403,11 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:212
 msgid "More Like This"
-msgstr ""
+msgstr "?????"
 
 #: UI/GTK2/src/mainWindow_glade.cc:215 UI/GTK2/src/mainWindow_glade.cc:251
 msgid "_Index"
-msgstr ""
+msgstr "??(_I)"
 
 #: UI/GTK2/src/mainWindow_glade.cc:218
 msgid "List Contents Of"
@@ -423,7 +423,7 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:233
 msgid "Unindex"
-msgstr ""
+msgstr "????"
 
 #: UI/GTK2/src/mainWindow_glade.cc:236
 #: UI/GTK2/src/propertiesDialog_glade.cc:177
@@ -432,11 +432,11 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:239
 msgid "_About"
-msgstr ""
+msgstr "??(_A)"
 
 #: UI/GTK2/src/mainWindow_glade.cc:242
 msgid "_Session"
-msgstr ""
+msgstr "????(_S)"
 
 #: UI/GTK2/src/mainWindow_glade.cc:245
 msgid "_Edit"
@@ -452,106 +452,106 @@
 
 #: UI/GTK2/src/mainWindow_glade.cc:403
 msgid "Pinot"
-msgstr ""
+msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:227 UI/GTK2/src/pinot-dbus-daemon.cc:301
+#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:228 UI/GTK2/src/pinot-dbus-daemon.cc:302
+#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
 msgid "Danish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:229 UI/GTK2/src/pinot-dbus-daemon.cc:303
+#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
 msgid "Dutch"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:230 UI/GTK2/src/pinot-dbus-daemon.cc:304
+#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
 msgid "English"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:231 UI/GTK2/src/pinot-dbus-daemon.cc:305
+#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
 msgid "Finnish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:232 UI/GTK2/src/pinot-dbus-daemon.cc:306
+#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
 msgid "French"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:233 UI/GTK2/src/pinot-dbus-daemon.cc:307
+#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
 msgid "German"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:234 UI/GTK2/src/pinot-dbus-daemon.cc:308
+#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
 msgid "Hungarian"
-msgstr ""
+msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:235 UI/GTK2/src/pinot-dbus-daemon.cc:309
+#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
 msgid "Italian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:236 UI/GTK2/src/pinot-dbus-daemon.cc:310
+#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
 msgid "Norwegian"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:237 UI/GTK2/src/pinot-dbus-daemon.cc:311
+#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
 msgid "Portuguese"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:238 UI/GTK2/src/pinot-dbus-daemon.cc:312
+#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
 msgid "Romanian"
-msgstr ""
+msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:239 UI/GTK2/src/pinot-dbus-daemon.cc:313
+#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
 msgid "Russian"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
 msgid "Spanish"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
 msgid "Swedish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
 msgid "Turkish"
-msgstr ""
+msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:267
+#: UI/GTK2/src/pinot.cc:280
 msgid "Couldn't open index"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:288
+#: UI/GTK2/src/pinot.cc:301
 msgid "Couldn't create history database"
 msgstr "?????????"
 
-#: UI/GTK2/src/pinot.cc:329
+#: UI/GTK2/src/pinot.cc:342
 msgid "Updating all documents in My Web Pages is recommended"
-msgstr ""
+msgstr "???????????????"
 
 #. Add default labels
-#: UI/GTK2/src/PinotSettings.cpp:310
+#: UI/GTK2/src/PinotSettings.cpp:317
 msgid "Important"
-msgstr ""
+msgstr "???"
 
-#: UI/GTK2/src/PinotSettings.cpp:311
+#: UI/GTK2/src/PinotSettings.cpp:318
 msgid "New"
-msgstr ""
+msgstr "??"
 
-#: UI/GTK2/src/PinotSettings.cpp:312
+#: UI/GTK2/src/PinotSettings.cpp:319
 msgid "Personal"
-msgstr ""
+msgstr "????"
 
-#: UI/GTK2/src/PinotSettings.cpp:1168
+#: UI/GTK2/src/PinotSettings.cpp:1175
 msgid "Unclassified"
-msgstr "???"
+msgstr "????"
 
 #: UI/GTK2/src/prefsDialog.cc:81
 msgid "Name"
-msgstr ""
+msgstr "??"
 
 #: UI/GTK2/src/prefsDialog.cc:89
 msgid "Monitor"
@@ -567,11 +567,11 @@
 
 #: UI/GTK2/src/prefsDialog.cc:315
 msgid "Exclude these patterns from indexing"
-msgstr ""
+msgstr "?????????"
 
 #: UI/GTK2/src/prefsDialog.cc:316
 msgid "Only index these patterns"
-msgstr ""
+msgstr "????????????"
 
 #: UI/GTK2/src/prefsDialog.cc:406
 msgid "New Label"
@@ -587,7 +587,7 @@
 
 #: UI/GTK2/src/prefsDialog_glade.cc:69
 msgid "New results:"
-msgstr ""
+msgstr "?????"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:70
 msgid "Queries:"
@@ -603,11 +603,11 @@
 
 #: UI/GTK2/src/prefsDialog_glade.cc:74
 msgid "HTTP crawling:"
-msgstr ""
+msgstr "?????"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:77
 msgid "General"
-msgstr ""
+msgstr "???"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:79
 msgid "Direct connection to the Internet"
@@ -628,7 +628,7 @@
 #: UI/GTK2/src/prefsDialog_glade.cc:99 UI/GTK2/src/prefsDialog_glade.cc:119
 #: UI/GTK2/src/prefsDialog_glade.cc:135
 msgid "Add"
-msgstr "??"
+msgstr "??"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:105
 msgid "Remove"
@@ -640,12 +640,12 @@
 
 #: UI/GTK2/src/prefsDialog_glade.cc:114
 msgid "These directories will be indexed and optionally monitored for changes:"
-msgstr ""
+msgstr "??????????????????????????"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:127
 #, fuzzy
 msgid "File patterns:"
-msgstr "???"
+msgstr "?????"
 
 #: UI/GTK2/src/prefsDialog_glade.cc:144
 msgid "Indexing"
@@ -653,9 +653,9 @@
 
 #: UI/GTK2/src/prefsDialog_glade.cc:507
 msgid "Preferences"
-msgstr "?????"
+msgstr "????"
 
-#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:149
+#: UI/GTK2/src/propertiesDialog.cc:60 UI/GTK2/src/queryDialog.cc:148
 msgid "Label"
 msgstr "??"
 
@@ -673,57 +673,57 @@
 
 #: UI/GTK2/src/propertiesDialog_glade.cc:70
 msgid "Size:"
-msgstr ""
+msgstr "???"
 
 #: UI/GTK2/src/propertiesDialog_glade.cc:73
 msgid "Terms:"
-msgstr ""
+msgstr "??"
 
-#: UI/GTK2/src/queryDialog.cc:139
+#: UI/GTK2/src/queryDialog.cc:138
 msgid "Host name"
 msgstr "????"
 
-#: UI/GTK2/src/queryDialog.cc:140
+#: UI/GTK2/src/queryDialog.cc:139
 msgid "File name"
 msgstr "????"
 
-#: UI/GTK2/src/queryDialog.cc:143
+#: UI/GTK2/src/queryDialog.cc:142
 msgid "File extension"
 msgstr "???"
 
 #. This is the title column
-#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:133
+#: UI/GTK2/src/queryDialog.cc:143 UI/GTK2/src/ResultsTree.cpp:133
 msgid "Title"
 msgstr "??"
 
 #. URL
-#: UI/GTK2/src/queryDialog.cc:145 UI/GTK2/src/ResultsTree.cpp:143
+#: UI/GTK2/src/queryDialog.cc:144 UI/GTK2/src/ResultsTree.cpp:143
 msgid "URL"
-msgstr ""
+msgstr "??"
 
-#: UI/GTK2/src/queryDialog.cc:146
+#: UI/GTK2/src/queryDialog.cc:145
 msgid "Directory"
 msgstr "??"
 
-#: UI/GTK2/src/queryDialog.cc:147
+#: UI/GTK2/src/queryDialog.cc:146
 msgid "Language code"
 msgstr "????"
 
-#: UI/GTK2/src/queryDialog.cc:148
+#: UI/GTK2/src/queryDialog.cc:147
 msgid "MIME type"
 msgstr "MIME ??"
 
-#: UI/GTK2/src/queryDialog.cc:271
+#: UI/GTK2/src/queryDialog.cc:272
 msgid "Start date"
 msgstr "????"
 
-#: UI/GTK2/src/queryDialog.cc:286
+#: UI/GTK2/src/queryDialog.cc:287
 msgid "End date"
 msgstr "????"
 
 #: UI/GTK2/src/queryDialog_glade.cc:72
 msgid "New filter:"
-msgstr ""
+msgstr "????????"
 
 #: UI/GTK2/src/queryDialog_glade.cc:81
 msgid "Query Text"
@@ -731,7 +731,7 @@
 
 #: UI/GTK2/src/queryDialog_glade.cc:83
 msgid "Index results with label"
-msgstr ""
+msgstr "??????????"
 
 #: UI/GTK2/src/queryDialog_glade.cc:86
 msgid "Number of results:"
@@ -764,7 +764,7 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:87
 msgid "History"
-msgstr ""
+msgstr "????"
 
 #: UI/GTK2/src/statisticsDialog.cc:92
 msgid "Daemon"
@@ -780,7 +780,7 @@
 
 #: UI/GTK2/src/statisticsDialog.cc:154
 msgid "Viewed"
-msgstr ""
+msgstr "????"
 
 #: UI/GTK2/src/statisticsDialog.cc:154
 msgid "results"
@@ -789,7 +789,7 @@
 #. FIXME: check whether it's actually running !
 #: UI/GTK2/src/statisticsDialog.cc:171
 msgid "Running under PID"
-msgstr ""
+msgstr "?????????"
 
 #: UI/GTK2/src/statisticsDialog.cc:175
 msgid "Currently not running"
@@ -824,7 +824,7 @@
 #: UI/GTK2/src/WorkerThreads.cpp:1329 UI/GTK2/src/WorkerThreads.cpp:1599
 #: UI/GTK2/src/WorkerThreads.cpp:1732
 msgid "Index error on"
-msgstr ""
+msgstr "?????"
 
 #: UI/GTK2/src/WorkerThreads.cpp:843
 msgid "No title"
@@ -836,7 +836,7 @@
 
 #: UI/GTK2/src/WorkerThreads.cpp:969 UI/GTK2/src/WorkerThreads.cpp:1084
 msgid "Couldn't run query on search engine"
-msgstr ""
+msgstr "??????????"
 
 #: UI/GTK2/src/WorkerThreads.cpp:1237
 msgid "Couldn't obtain downloader for protocol"
@@ -866,7 +866,7 @@
 #. Be pessimistic and assume something will go wrong ;-)
 #: UI/GTK2/src/WorkerThreads.cpp:1610
 msgid "Couldn't unindex document(s)"
-msgstr ""
+msgstr "?????????"
 
 #: UI/GTK2/src/WorkerThreads.cpp:1744
 msgid "Couldn't update document"



From fabricecolin at mail.berlios.de  Wed Aug 22 16:17:43 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 22 Aug 2007 16:17:43 +0200
Subject: [Pinot-svn] r949 - in trunk: . Index UI/GTK2/src
Message-ID: <200708221417.l7MEHhZ8004630@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-22 16:17:43 +0200 (Wed, 22 Aug 2007)
New Revision: 949

Modified:
   trunk/Index/DBusXapianIndex.cpp
   trunk/Index/DBusXapianIndex.h
   trunk/Index/IndexInterface.h
   trunk/Index/XapianIndex.cpp
   trunk/Index/XapianIndex.h
   trunk/UI/GTK2/src/pinot-dbus-daemon.cc
   trunk/UI/GTK2/src/pinot.cc
   trunk/configure.in
Log:
Use strings for version numbers so that we don't have to worry about the
decimal point.


Modified: trunk/Index/DBusXapianIndex.cpp
===================================================================
--- trunk/Index/DBusXapianIndex.cpp	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/Index/DBusXapianIndex.cpp	2007-08-22 14:17:43 UTC (rev 949)
@@ -342,7 +342,7 @@
 //
 
 /// Sets the version number.
-bool DBusXapianIndex::setVersion(double version) const
+bool DBusXapianIndex::setVersion(const string &version) const
 {
 	cerr << "DBusXapianIndex::setVersion: not allowed" << endl;
 	return false;

Modified: trunk/Index/DBusXapianIndex.h
===================================================================
--- trunk/Index/DBusXapianIndex.h	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/Index/DBusXapianIndex.h	2007-08-22 14:17:43 UTC (rev 949)
@@ -53,7 +53,7 @@
 		static bool reload(void);
 
 		/// Sets the version number.
-		virtual bool setVersion(double version) const;
+		virtual bool setVersion(const std::string &version) const;
 
 		/// Returns a document's properties.
 		virtual bool getDocumentInfo(unsigned int docId, DocumentInfo &docInfo) const;

Modified: trunk/Index/IndexInterface.h
===================================================================
--- trunk/Index/IndexInterface.h	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/Index/IndexInterface.h	2007-08-22 14:17:43 UTC (rev 949)
@@ -37,10 +37,10 @@
 		virtual bool isGood(void) const = 0;
 
 		/// Gets the version number.
-		virtual double getVersion(void) const = 0;
+		virtual std::string getVersion(void) const = 0;
 
 		/// Sets the version number.
-		virtual bool setVersion(double version) const = 0;
+		virtual bool setVersion(const std::string &version) const = 0;
 
 		/// Gets the index location.
 		virtual std::string getLocation(void) const = 0;

Modified: trunk/Index/XapianIndex.cpp
===================================================================
--- trunk/Index/XapianIndex.cpp	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/Index/XapianIndex.cpp	2007-08-22 14:17:43 UTC (rev 949)
@@ -690,11 +690,11 @@
 }
 
 /// Gets the version number.
-double XapianIndex::getVersion(void) const
+string XapianIndex::getVersion(void) const
 {
 	ifstream verFile;
 	string verFileName(m_databaseName + "/version");
-	double version = 0;
+	string version;
 
 	verFile.open(verFileName.c_str());
 	if (verFile.good() == true)
@@ -707,7 +707,7 @@
 }
 
 /// Sets the version number.
-bool XapianIndex::setVersion(double version) const
+bool XapianIndex::setVersion(const string &version) const
 {
 	ofstream verFile, cacheDirFile;
 	string verFileName(m_databaseName + "/version");

Modified: trunk/Index/XapianIndex.h
===================================================================
--- trunk/Index/XapianIndex.h	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/Index/XapianIndex.h	2007-08-22 14:17:43 UTC (rev 949)
@@ -39,10 +39,10 @@
 		virtual bool isGood(void) const;
 
 		/// Gets the version number.
-		virtual double getVersion(void) const;
+		virtual std::string getVersion(void) const;
 
 		/// Sets the version number.
-		virtual bool setVersion(double version) const;
+		virtual bool setVersion(const std::string &version) const;
 
 		/// Gets the index location.
 		virtual std::string getLocation(void) const;

Modified: trunk/UI/GTK2/src/pinot-dbus-daemon.cc
===================================================================
--- trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/UI/GTK2/src/pinot-dbus-daemon.cc	2007-08-22 14:17:43 UTC (rev 949)
@@ -167,6 +167,24 @@
 	return DBUS_HANDLER_RESULT_HANDLED;
 }
 
+static void checkIndexVersion(const string &indexName, bool &overwriteIndex, bool &upgradeIndex)
+{
+	// What version is the index at ?
+	XapianIndex index(indexName);
+	string indexVersion(index.getVersion());
+
+	// Is an upgrade necessary ?
+	if ((indexVersion < PINOT_INDEX_MIN_VERSION) &&
+		(index.getDocumentsCount() > 0))
+	{
+		cout << "Upgrading index from version " << indexVersion << " to " << VERSION << endl;
+
+		// Yes, it is
+		overwriteIndex = upgradeIndex = true;
+	}
+	index.setVersion(VERSION);
+}
+
 int main(int argc, char **argv)
 {
 	string prefixDir(PREFIX);
@@ -391,25 +409,8 @@
 #endif
 
 	// What version of the daemon is this ?
-	double daemonVersion = atof(VERSION);
-	if (daemonVersion > 0.0)
-	{
-		// What version is the index at ?
-		XapianIndex daemonIndex(settings.m_daemonIndexLocation);
-		double indexVersion = daemonIndex.getVersion();
+	checkIndexVersion(settings.m_daemonIndexLocation, overwriteIndex, upgradeIndex);
 
-		// Is an upgrade necessary ?
-		if ((indexVersion < PINOT_INDEX_MIN_VERSION) &&
-			(daemonIndex.getDocumentsCount() > 0))
-		{
-			cout << "Upgrading index from version " << indexVersion << " to " << daemonVersion << endl;
-
-			// Yes, it is
-			overwriteIndex = upgradeIndex = true;
-		}
-		daemonIndex.setVersion(daemonVersion);
-	}
-
 	GError *pError = NULL;
 	DBusGConnection *pBus = dbus_g_bus_get(DBUS_BUS_SESSION, &pError);
 	if (pBus == NULL)

Modified: trunk/UI/GTK2/src/pinot.cc
===================================================================
--- trunk/UI/GTK2/src/pinot.cc	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/UI/GTK2/src/pinot.cc	2007-08-22 14:17:43 UTC (rev 949)
@@ -106,6 +106,22 @@
 	Gtk::Main::quit();
 }
 
+static void checkIndexVersion(const string &indexName, bool &upgradeIndex)
+{
+	// What version is the index at ?
+	XapianIndex index(indexName);
+	string indexVersion(index.getVersion());
+
+	// Is an upgrade necessary ?
+	if ((indexVersion < PINOT_INDEX_MIN_VERSION) &&
+		(index.getDocumentsCount() > 0))
+	{
+		// Yes, it is
+		upgradeIndex = true;
+	}
+	index.setVersion(VERSION);
+}
+
 int main(int argc, char **argv)
 {
 	string prefixDir(PREFIX);
@@ -319,23 +335,8 @@
 	atexit(closeAll);
 
 	// What version of the UI is this ?
-	double uiVersion = atof(VERSION);
-	if (uiVersion > 0.0)
-	{
-		// What version is the index at ?
-		XapianIndex docsIndex(settings.m_docsIndexLocation);
-		double indexVersion = docsIndex.getVersion();
+	checkIndexVersion(settings.m_docsIndexLocation, upgradeIndex);
 
-		// Is an upgrade necessary ?
-		if ((indexVersion < PINOT_INDEX_MIN_VERSION) &&
-			(docsIndex.getDocumentsCount() > 0))
-		{
-			// Yes, it is
-			upgradeIndex = true;
-		}
-		docsIndex.setVersion(uiVersion);
-	}
-
 	if ((upgradeIndex == true) &&
 		(errorMsg.empty() == true))
 	{

Modified: trunk/configure.in
===================================================================
--- trunk/configure.in	2007-08-21 14:24:36 UTC (rev 948)
+++ trunk/configure.in	2007-08-22 14:17:43 UTC (rev 949)
@@ -16,7 +16,7 @@
 AM_PROG_LIBTOOL
 
 dnl An index with a version older than this should be upgraded
-AC_DEFINE_UNQUOTED(PINOT_INDEX_MIN_VERSION,0.76,
+AC_DEFINE_UNQUOTED(PINOT_INDEX_MIN_VERSION,"0.76",
     [Minimum index version])
 
 dnl gettext support



From fabricecolin at mail.berlios.de  Wed Aug 22 16:18:52 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 22 Aug 2007 16:18:52 +0200
Subject: [Pinot-svn] r950 - trunk/Search
Message-ID: <200708221418.l7MEIqNh004945@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-22 16:18:52 +0200 (Wed, 22 Aug 2007)
New Revision: 950

Modified:
   trunk/Search/pinot-search.1
   trunk/Search/pinot-search.cpp
Log:
Corrected example.


Modified: trunk/Search/pinot-search.1
===================================================================
--- trunk/Search/pinot-search.1	2007-08-22 14:17:43 UTC (rev 949)
+++ trunk/Search/pinot-search.1	2007-08-22 14:18:52 UTC (rev 950)
@@ -49,7 +49,7 @@
 .PP
 pinot\-search \fB\-\-max\fR 10 xapian ~/.pinot/index "clowns"
 .PP
-pinot\-search xapian somehostname:12345 "clowns" 10
+pinot\-search xapian somehostname:12345 "clowns"
 .SH "REPORTING BUGS"
 Report bugs to fabricecolin at users.berlios.de
 .PP

Modified: trunk/Search/pinot-search.cpp
===================================================================
--- trunk/Search/pinot-search.cpp	2007-08-22 14:17:43 UTC (rev 949)
+++ trunk/Search/pinot-search.cpp	2007-08-22 14:18:52 UTC (rev 950)
@@ -106,7 +106,7 @@
 		<< "pinot-search opensearch " << PREFIX << "/share/pinot/engines/KrustyDescription.xml \"clowns\"\n\n"
 		<< "pinot-search --max 20 sherlock " << PREFIX << "/share/pinot/engines/Bozo.src \"clowns\"\n\n"
 		<< "pinot-search --max 10 xapian ~/.pinot/index \"clowns\"\n\n"
-		<< "pinot-search xapian somehostname:12345 \"clowns\" 10\n\n"
+		<< "pinot-search xapian somehostname:12345 \"clowns\"\n\n"
 		<< "Report bugs to " << PACKAGE_BUGREPORT << endl;
 }
 



From fabricecolin at mail.berlios.de  Wed Aug 22 17:52:59 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Wed, 22 Aug 2007 17:52:59 +0200
Subject: [Pinot-svn] r951 - in trunk: . po
Message-ID: <200708221552.l7MFqxxg014661@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-22 17:52:57 +0200 (Wed, 22 Aug 2007)
New Revision: 951

Modified:
   trunk/NEWS
   trunk/po/de.po
   trunk/po/es.po
   trunk/po/fr.po
   trunk/po/it.po
   trunk/po/nl.po
   trunk/po/pt.po
   trunk/po/pt_BR.po
   trunk/po/ru.po
   trunk/po/sv.po
   trunk/po/zh_TW.po
Log:
Checking in latest po's and the NEWS file in preparation for 0.76 release.


Modified: trunk/NEWS
===================================================================
--- trunk/NEWS	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/NEWS	2007-08-22 15:52:57 UTC (rev 951)
@@ -1,3 +1,42 @@
+2007/08/23 version_0_7_6
+Build :
+ - also look for textcat.h in libtextcat
+Monitor :
+ - a deletion would deadlock the monitor and prevent from processing any
+  further event
+ - unindex directories' contents when deleted and update when moved
+Collect :
+ - try to open files with NO_ATIME if possible
+ - Neon-based downloader had not been brought up to date
+Index :
+ - replaced na(t)ive tokenizer with Xapian's TermGenerator. No effort is
+  made to convert text to UTF-8 yet, so this depends on document formats
+  and encodings
+ - preliminary support for spelling corrections, without user feedback
+ - index directories are tagged as cache directories that they are skipped
+  by "tar --exclude-caches"
+ - preserve documents' title if possible, use user-specified title on import
+Search :
+ - fixed Sherlock parser for boost 1.34
+ - support for gSOAP 2.7.9e
+ - when searching an index, don't resort to OR'ing all terms if the original
+  query doesn't match anything, this only confused users
+Deskbar :
+ - removed unnecessary shebang in script
+Daemon :
+ - new D-Bus method Reload, that enables to reload the configuration and act
+  upon it whenever modified by the UI
+ - SimpleQuery still resorts to OR'ing all terms if the original query doesn't
+  match anything
+UI :
+ - fixed some minor cosmetic bugs, tweaked a few things
+ - user-specific MIME settings in ~/.local have priority over system settings
+ - queries with at least a start date can be run, and filter a documents list
+ - the label specified on import was ignored
+ - new traditional Chinese translation by Yung-Chung Lin
+ - updated Portuguese translation by _PN_boy
+ - updated Swedish translation by Daniel Nylander
+
 2007/07/28 version_0_7_5
 General :
  - install Dijon's ChangeLog

Modified: trunk/po/de.po
===================================================================
--- trunk/po/de.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/de.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-06-21 19:51+0800\n"
 "Last-Translator: Christian Dywan <christian at twotoasts.de>\n"
 "Language-Team: German <de at li.org>\n"
@@ -459,80 +459,80 @@
 msgstr ""
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Englisch"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Finnisch"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Franz?sisch"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Deutsch"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italienisch"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Norwegisch"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugiesisch"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Spanisch"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Schwedisch"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Konnte Index nicht ?ffnen"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 

Modified: trunk/po/es.po
===================================================================
--- trunk/po/es.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/es.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Gar Bage <garbage at openfutura.com>\n"
 "Language-Team: es <fabricecolin at users.berlios.de>\n"
@@ -456,80 +456,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Desconocido"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Dan?s"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Finland?s"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Alem?n"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Noruego"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Ruso"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Espa?ol"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Sueco"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "No se pudo abrir el ?ndice"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "No se pudo crear la base de datos del hist?rico"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 

Modified: trunk/po/fr.po
===================================================================
--- trunk/po/fr.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/fr.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-04-03 04:46+0000\n"
 "Last-Translator: FabriceColin <fabrice.colin at gmail.com>\n"
 "Language-Team: fr <fabricecolin at users.berlios.de>\n"
@@ -457,80 +457,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Inconnu"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Danois"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Hollandais"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Anglais"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Finlandais"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Francais"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Allemand"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr "Hongrois"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italien"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Norvegien"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugais"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr "Roumain"
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Russe"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Espagnol"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Suedois"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr "Turc"
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "N'a pas pu ouvrir l'index"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "N'a pas pu creer la base d'historiques"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "Il est recommende de mettre a jour tous les documents de Mes Pages Web"
 

Modified: trunk/po/it.po
===================================================================
--- trunk/po/it.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/it.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-06-21 19:51+0800\n"
 "Last-Translator: Marco Bazzani <visitors at libero.it>\n"
 "Language-Team: Italian <it at li.org>\n"
@@ -456,80 +456,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Sconosciuto"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Danese"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Olandese"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Inglese"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Finlandese"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Francese"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Tedesco"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Norvegese"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portoghese"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Spagnolo"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Svedese"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Impossibile aprire l'indice"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Impossibile creare una cronologia del database"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "E' consigliato aggiornare tutti le pagine web personali"
 

Modified: trunk/po/nl.po
===================================================================
--- trunk/po/nl.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/nl.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-08-03 19:02+0000\n"
 "Last-Translator: JW <jw00000 at gmail.com>\n"
 "Language-Team: Dutch <nl at li.org>\n"
@@ -456,80 +456,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Niet bekend"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Deens"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Nederlands"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Engels"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Fins"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Frans"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Duits"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italiaans"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Noors"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugees"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Russisch"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Spaans"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Zweeds"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Kan index niet openen"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Kon historische database niet maken"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 "Het is aangeraden alle documenten in \"Mijn webpagina's\" te vernieuwen"

Modified: trunk/po/pt.po
===================================================================
--- trunk/po/pt.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/pt.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-08-17 10:07+0000\n"
 "Last-Translator: _PN_boy <pedro_nuno_pn at iol.pt>\n"
 "Language-Team: Portuguese <pt at li.org>\n"
@@ -457,80 +457,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Dinamarqu?s"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Holand?s"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Ingl?s"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Finl?ndes"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Franc?s"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Alem?o"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr "H?ngaro"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italiano"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Noruegu?s"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr "Romeno"
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Russo"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Espanhol"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Sueco"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr "Turco"
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "N?o foi poss?vel abrir o ?ndice"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "N?o foi poss?vel criar base de dados do hist?rico"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "A actualizar todos os documentos nas Minhas P?ginas Web ? recomendado"
 

Modified: trunk/po/pt_BR.po
===================================================================
--- trunk/po/pt_BR.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/pt_BR.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Leonardo Melo <leonardovazmelo at gmail.com>\n"
 "Language-Team: Portuguese (Brazil) <pt_BR at li.org>\n"
@@ -457,80 +457,80 @@
 msgstr "Pino"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Desconhecido"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Danish"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Dutch"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "English"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Terminar"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "French"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "German"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italian"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Norwegian"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugu?s"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Russian"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Spanish"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Swedish"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "N?o foi poss?vel abrir ?ndice"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "N?o foi poss?vel criar base de hist?rico"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 

Modified: trunk/po/ru.po
===================================================================
--- trunk/po/ru.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/ru.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot 0.75\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-07-21 12:37+0800\n"
 "Last-Translator: Sergey Vostrikov <s.vostrikov at gmail.com>\n"
 "Language-Team: Russian <ru at li.org>\n"
@@ -457,80 +457,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "???????????"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "??????????"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "?????????????"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "???????"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "?????????"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "????????"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "?????????? ??????? ??????"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "?? ??????? ??????? ???? ?????? ???????"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr ""
 

Modified: trunk/po/sv.po
===================================================================
--- trunk/po/sv.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/sv.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -7,7 +7,7 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-07-29 16:48+0000\n"
 "Last-Translator: Daniel Nylander <yeager at ubuntu.com>\n"
 "Language-Team: Swedish <tp-sv at listor.tp-sv.se>\n"
@@ -455,80 +455,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr "Ok?nd"
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "Danska"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "Nederl?ndska"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "Engelska"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "Finska"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "Franska"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "Tyska"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr "Ungerska"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "Italienska"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "Norska"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "Portugisiska"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr "Rum?nska"
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "Ryska"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "Spanska"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "Svenska"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr "Turkiska"
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "Kunde inte ?ppna index"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "Kunde inte skapa historikdatabas"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "Uppdatering av alla dokument i Mina webbsidor rekommenderas"
 

Modified: trunk/po/zh_TW.po
===================================================================
--- trunk/po/zh_TW.po	2007-08-22 14:18:52 UTC (rev 950)
+++ trunk/po/zh_TW.po	2007-08-22 15:52:57 UTC (rev 951)
@@ -8,7 +8,7 @@
 msgstr ""
 "Project-Id-Version: pinot\n"
 "Report-Msgid-Bugs-To: \n"
-"POT-Creation-Date: 2007-08-19 18:39+0800\n"
+"POT-Creation-Date: 2007-08-22 22:25+0800\n"
 "PO-Revision-Date: 2007-08-17 15:54+0000\n"
 "Last-Translator: Yung-chung Lin <henearkrxern at gmail.com>\n"
 "Language-Team: Traditional Chinese <zh_TW at li.org>\n"
@@ -455,80 +455,80 @@
 msgstr "Pinot"
 
 #. Localize language names
-#: UI/GTK2/src/pinot.cc:240 UI/GTK2/src/pinot-dbus-daemon.cc:314
+#: UI/GTK2/src/pinot.cc:256 UI/GTK2/src/pinot-dbus-daemon.cc:332
 #: UI/GTK2/src/propertiesDialog.cc:72 UI/GTK2/src/propertiesDialog.cc:81
 msgid "Unknown"
 msgstr ""
 
-#: UI/GTK2/src/pinot.cc:241 UI/GTK2/src/pinot-dbus-daemon.cc:315
+#: UI/GTK2/src/pinot.cc:257 UI/GTK2/src/pinot-dbus-daemon.cc:333
 msgid "Danish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:242 UI/GTK2/src/pinot-dbus-daemon.cc:316
+#: UI/GTK2/src/pinot.cc:258 UI/GTK2/src/pinot-dbus-daemon.cc:334
 msgid "Dutch"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:243 UI/GTK2/src/pinot-dbus-daemon.cc:317
+#: UI/GTK2/src/pinot.cc:259 UI/GTK2/src/pinot-dbus-daemon.cc:335
 msgid "English"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:244 UI/GTK2/src/pinot-dbus-daemon.cc:318
+#: UI/GTK2/src/pinot.cc:260 UI/GTK2/src/pinot-dbus-daemon.cc:336
 msgid "Finnish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:245 UI/GTK2/src/pinot-dbus-daemon.cc:319
+#: UI/GTK2/src/pinot.cc:261 UI/GTK2/src/pinot-dbus-daemon.cc:337
 msgid "French"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:246 UI/GTK2/src/pinot-dbus-daemon.cc:320
+#: UI/GTK2/src/pinot.cc:262 UI/GTK2/src/pinot-dbus-daemon.cc:338
 msgid "German"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:247 UI/GTK2/src/pinot-dbus-daemon.cc:321
+#: UI/GTK2/src/pinot.cc:263 UI/GTK2/src/pinot-dbus-daemon.cc:339
 msgid "Hungarian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:248 UI/GTK2/src/pinot-dbus-daemon.cc:322
+#: UI/GTK2/src/pinot.cc:264 UI/GTK2/src/pinot-dbus-daemon.cc:340
 msgid "Italian"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:249 UI/GTK2/src/pinot-dbus-daemon.cc:323
+#: UI/GTK2/src/pinot.cc:265 UI/GTK2/src/pinot-dbus-daemon.cc:341
 msgid "Norwegian"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:250 UI/GTK2/src/pinot-dbus-daemon.cc:324
+#: UI/GTK2/src/pinot.cc:266 UI/GTK2/src/pinot-dbus-daemon.cc:342
 msgid "Portuguese"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:251 UI/GTK2/src/pinot-dbus-daemon.cc:325
+#: UI/GTK2/src/pinot.cc:267 UI/GTK2/src/pinot-dbus-daemon.cc:343
 msgid "Romanian"
 msgstr "?????"
 
-#: UI/GTK2/src/pinot.cc:252 UI/GTK2/src/pinot-dbus-daemon.cc:326
+#: UI/GTK2/src/pinot.cc:268 UI/GTK2/src/pinot-dbus-daemon.cc:344
 msgid "Russian"
 msgstr "??"
 
-#: UI/GTK2/src/pinot.cc:253 UI/GTK2/src/pinot-dbus-daemon.cc:327
+#: UI/GTK2/src/pinot.cc:269 UI/GTK2/src/pinot-dbus-daemon.cc:345
 msgid "Spanish"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:254 UI/GTK2/src/pinot-dbus-daemon.cc:328
+#: UI/GTK2/src/pinot.cc:270 UI/GTK2/src/pinot-dbus-daemon.cc:346
 msgid "Swedish"
 msgstr "???"
 
-#: UI/GTK2/src/pinot.cc:255 UI/GTK2/src/pinot-dbus-daemon.cc:329
+#: UI/GTK2/src/pinot.cc:271 UI/GTK2/src/pinot-dbus-daemon.cc:347
 msgid "Turkish"
 msgstr "????"
 
-#: UI/GTK2/src/pinot.cc:280
+#: UI/GTK2/src/pinot.cc:296
 msgid "Couldn't open index"
 msgstr "??????"
 
-#: UI/GTK2/src/pinot.cc:301
+#: UI/GTK2/src/pinot.cc:317
 msgid "Couldn't create history database"
 msgstr "?????????"
 
-#: UI/GTK2/src/pinot.cc:342
+#: UI/GTK2/src/pinot.cc:343
 msgid "Updating all documents in My Web Pages is recommended"
 msgstr "???????????????"
 



From fabricecolin at mail.berlios.de  Thu Aug 23 15:24:21 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Thu, 23 Aug 2007 15:24:21 +0200
Subject: [Pinot-svn] r952 - tags
Message-ID: <200708231324.l7NDOLQn017561@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-23 15:24:21 +0200 (Thu, 23 Aug 2007)
New Revision: 952

Added:
   tags/version_0_7_6/
Log:
Releasing 0.76.


Copied: tags/version_0_7_6 (from rev 951, trunk)



From fabricecolin at mail.berlios.de  Sun Aug 26 15:31:40 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 26 Aug 2007 15:31:40 +0200
Subject: [Pinot-svn] r953 - trunk/Index
Message-ID: <200708261331.l7QDVe7V009615@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-26 15:31:40 +0200 (Sun, 26 Aug 2007)
New Revision: 953

Modified:
   trunk/Index/DBusXapianIndex.cpp
Log:
Parameter to Reload wasn't a glib type. This could cause a segault.


Modified: trunk/Index/DBusXapianIndex.cpp
===================================================================
--- trunk/Index/DBusXapianIndex.cpp	2007-08-23 13:24:21 UTC (rev 952)
+++ trunk/Index/DBusXapianIndex.cpp	2007-08-26 13:31:40 UTC (rev 953)
@@ -302,7 +302,7 @@
 /// Asks the D-Bus service to reload its configuration.
 bool DBusXapianIndex::reload(void)
 {
-	bool reloading = false;
+	gboolean reloading = FALSE;
 
 	DBusGConnection *pBus = getBusConnection();
 	if (pBus == NULL)
@@ -333,7 +333,12 @@
 	g_object_unref(pBusProxy);
 	// FIXME: don't we have to call dbus_g_connection_unref(pBus); ?
 
-	return reloading;
+	if (reloading == TRUE)
+	{
+		return true;
+	}
+
+	return false;
 }
 
 



From fabricecolin at mail.berlios.de  Sun Aug 26 16:13:42 2007
From: fabricecolin at mail.berlios.de (fabricecolin at BerliOS)
Date: Sun, 26 Aug 2007 16:13:42 +0200
Subject: [Pinot-svn] r954 - trunk/UI/GTK2/src
Message-ID: <200708261413.l7QEDgcb013221@sheep.berlios.de>

Author: fabricecolin
Date: 2007-08-26 16:13:41 +0200 (Sun, 26 Aug 2007)
New Revision: 954

Modified:
   trunk/UI/GTK2/src/PinotSettings.cpp
Log:
Catch exceptions in save(). Most likely, someone deletes ~/.pinot while the
application is running.


Modified: trunk/UI/GTK2/src/PinotSettings.cpp
===================================================================
--- trunk/UI/GTK2/src/PinotSettings.cpp	2007-08-26 13:31:40 UTC (rev 953)
+++ trunk/UI/GTK2/src/PinotSettings.cpp	2007-08-26 14:13:41 UTC (rev 954)
@@ -1194,165 +1194,176 @@
 	Element *pElem = NULL;
 	char numStr[64];
 
-	xmlpp::Document doc("1.0");
-
-	// Create a new node
-	pRootElem = doc.create_root_node("pinot");
-	if (pRootElem == NULL)
+	try
 	{
-		return false;
-	}
-	// ...with text children nodes
-	addChildElement(pRootElem, "version", VERSION);
-	addChildElement(pRootElem, "googleapikey", m_googleAPIKey);
-	// User interface position and size
-	pElem = pRootElem->add_child("ui");
-	if (pElem == NULL)
-	{
-		return false;
-	}
-	sprintf(numStr, "%d", m_xPos);
-	addChildElement(pElem, "xpos", numStr);
-	sprintf(numStr, "%d", m_yPos);
-	addChildElement(pElem, "ypos", numStr);
-	sprintf(numStr, "%d", m_width);
-	addChildElement(pElem, "width", numStr);
-	sprintf(numStr, "%d", m_height);
-	addChildElement(pElem, "height", numStr);
-	sprintf(numStr, "%d", m_panePos);
-	addChildElement(pElem, "panepos", numStr);
-	addChildElement(pElem, "expandqueries", (m_expandQueries ? "YES" : "NO"));
-	addChildElement(pElem, "showengines", (m_showEngines ? "YES" : "NO"));
-	// User-defined indexes
-	for (map<string, string>::iterator indexIter = m_indexNames.begin(); indexIter != m_indexNames.end(); ++indexIter)
-	{
-		string indexName = indexIter->first;
+		xmlpp::Document doc("1.0");
 
-		if (isInternalIndex(indexName) == true)
+		// Create a new node
+		pRootElem = doc.create_root_node("pinot");
+		if (pRootElem == NULL)
 		{
-			continue;
+			return false;
 		}
-
-		pElem = pRootElem->add_child("extraindex");
+		// ...with text children nodes
+		addChildElement(pRootElem, "version", VERSION);
+		addChildElement(pRootElem, "googleapikey", m_googleAPIKey);
+		// User interface position and size
+		pElem = pRootElem->add_child("ui");
 		if (pElem == NULL)
 		{
 			return false;
 		}
-		addChildElement(pElem, "name", indexIter->first);
-		addChildElement(pElem, "location", indexIter->second);
-	}
-	// Engine channels
-	for (map<string, bool>::iterator channelIter = m_engineChannels.begin();
-		channelIter != m_engineChannels.end(); ++channelIter)
-	{
-		// Only save those whose group was collapsed
-		if (channelIter->second == false)
+		sprintf(numStr, "%d", m_xPos);
+		addChildElement(pElem, "xpos", numStr);
+		sprintf(numStr, "%d", m_yPos);
+		addChildElement(pElem, "ypos", numStr);
+		sprintf(numStr, "%d", m_width);
+		addChildElement(pElem, "width", numStr);
+		sprintf(numStr, "%d", m_height);
+		addChildElement(pElem, "height", numStr);
+		sprintf(numStr, "%d", m_panePos);
+		addChildElement(pElem, "panepos", numStr);
+		addChildElement(pElem, "expandqueries", (m_expandQueries ? "YES" : "NO"));
+		addChildElement(pElem, "showengines", (m_showEngines ? "YES" : "NO"));
+		// User-defined indexes
+		for (map<string, string>::iterator indexIter = m_indexNames.begin(); indexIter != m_indexNames.end(); ++indexIter)
 		{
-			pElem = pRootElem->add_child("channel");
+			string indexName = indexIter->first;
+
+			if (isInternalIndex(indexName) == true)
+			{
+				continue;
+			}
+
+			pElem = pRootElem->add_child("extraindex");
 			if (pElem == NULL)
 			{
 				return false;
 			}
-			addChildElement(pElem, "name", channelIter->first);
+			addChildElement(pElem, "name", indexIter->first);
+			addChildElement(pElem, "location", indexIter->second);
 		}
-	}
-	// User-defined queries
-	for (map<string, QueryProperties>::iterator queryIter = m_queries.begin();
-		queryIter != m_queries.end(); ++queryIter)
-	{
-		pElem = pRootElem->add_child("storedquery");
-		if (pElem == NULL)
+		// Engine channels
+		for (map<string, bool>::iterator channelIter = m_engineChannels.begin();
+			channelIter != m_engineChannels.end(); ++channelIter)
 		{
-			return false;
+			// Only save those whose group was collapsed
+			if (channelIter->second == false)
+			{
+				pElem = pRootElem->add_child("channel");
+				if (pElem == NULL)
+				{
+					return false;
+				}
+				addChildElement(pElem, "name", channelIter->first);
+			}
 		}
+		// User-defined queries
+		for (map<string, QueryProperties>::iterator queryIter = m_queries.begin();
+			queryIter != m_queries.end(); ++queryIter)
+		{
+			pElem = pRootElem->add_child("storedquery");
+			if (pElem == NULL)
+			{
+				return false;
+			}
 
-		Date aDate;
-		unsigned int day, month, year;
+			Date aDate;
+			unsigned int day, month, year;
 
-		addChildElement(pElem, "name", queryIter->first);
-		addChildElement(pElem, "text", queryIter->second.getFreeQuery());
-		sprintf(numStr, "%u", queryIter->second.getMaximumResultsCount());
-		addChildElement(pElem, "maxresults", numStr);
-		bool enable = queryIter->second.getMinimumDate(day, month, year);
-		if (year > 0)
+			addChildElement(pElem, "name", queryIter->first);
+			addChildElement(pElem, "text", queryIter->second.getFreeQuery());
+			sprintf(numStr, "%u", queryIter->second.getMaximumResultsCount());
+			addChildElement(pElem, "maxresults", numStr);
+			bool enable = queryIter->second.getMinimumDate(day, month, year);
+			if (year > 0)
+			{
+				addChildElement(pElem, "enablemindate", (enable ? "YES" : "NO"));
+				aDate.set_dmy((Date::Day )day, (Date::Month )month, (Date::Year )year);
+				addChildElement(pElem, "mindate", aDate.format_string("%F"));
+			}
+			enable = queryIter->second.getMaximumDate(day, month, year);
+			if (year > 0)
+			{
+				addChildElement(pElem, "enablemaxdate", (enable ? "YES" : "NO"));
+				aDate.set_dmy((Date::Day )day, (Date::Month )month, (Date::Year )year);
+				addChildElement(pElem, "maxdate", aDate.format_string("%F"));
+			}
+			addChildElement(pElem, "index", (queryIter->second.getIndexResults() ? "ALL" : "NONE"));
+			addChildElement(pElem, "label", queryIter->second.getLabelName());
+		}
+		// Labels
+		for (set<string>::iterator labelIter = m_labels.begin(); labelIter != m_labels.end(); ++labelIter)
 		{
-			addChildElement(pElem, "enablemindate", (enable ? "YES" : "NO"));
-			aDate.set_dmy((Date::Day )day, (Date::Month )month, (Date::Year )year);
-			addChildElement(pElem, "mindate", aDate.format_string("%F"));
+			pElem = pRootElem->add_child("label");
+			if (pElem == NULL)
+			{
+				return false;
+			}
+			addChildElement(pElem, "name", *labelIter);
 		}
-		enable = queryIter->second.getMaximumDate(day, month, year);
-		if (year > 0)
+		// Ignore robots directives
+		addChildElement(pRootElem, "robots", (m_ignoreRobotsDirectives ? "IGNORE" : "OBEY"));
+		// Enable terms suggestion
+		addChildElement(pRootElem, "suggestterms", (m_suggestQueryTerms ? "YES" : "NO"));
+		// New results colour
+		pElem = pRootElem->add_child("newresults");
+		if (pElem == NULL)
 		{
-			addChildElement(pElem, "enablemaxdate", (enable ? "YES" : "NO"));
-			aDate.set_dmy((Date::Day )day, (Date::Month )month, (Date::Year )year);
-			addChildElement(pElem, "maxdate", aDate.format_string("%F"));
+			return false;
 		}
-		addChildElement(pElem, "index", (queryIter->second.getIndexResults() ? "ALL" : "NONE"));
-		addChildElement(pElem, "label", queryIter->second.getLabelName());
-	}
-	// Labels
-	for (set<string>::iterator labelIter = m_labels.begin(); labelIter != m_labels.end(); ++labelIter)
-	{
-		pElem = pRootElem->add_child("label");
+		sprintf(numStr, "%u", m_newResultsColourRed);
+		addChildElement(pElem, "red", numStr);
+		sprintf(numStr, "%u", m_newResultsColourGreen);
+		addChildElement(pElem, "green", numStr);
+		sprintf(numStr, "%u", m_newResultsColourBlue);
+		addChildElement(pElem, "blue", numStr);
+		// Proxy
+		pElem = pRootElem->add_child("proxy");
 		if (pElem == NULL)
 		{
 			return false;
 		}
-		addChildElement(pElem, "name", *labelIter);
-	}
-	// Ignore robots directives
-	addChildElement(pRootElem, "robots", (m_ignoreRobotsDirectives ? "IGNORE" : "OBEY"));
-	// Enable terms suggestion
-	addChildElement(pRootElem, "suggestterms", (m_suggestQueryTerms ? "YES" : "NO"));
-	// New results colour
-	pElem = pRootElem->add_child("newresults");
-	if (pElem == NULL)
-	{
-		return false;
-	}
-	sprintf(numStr, "%u", m_newResultsColourRed);
-	addChildElement(pElem, "red", numStr);
-	sprintf(numStr, "%u", m_newResultsColourGreen);
-	addChildElement(pElem, "green", numStr);
-	sprintf(numStr, "%u", m_newResultsColourBlue);
-	addChildElement(pElem, "blue", numStr);
-	// Proxy
-	pElem = pRootElem->add_child("proxy");
-	if (pElem == NULL)
-	{
-		return false;
-	}
-	addChildElement(pElem, "address", m_proxyAddress);
-	sprintf(numStr, "%u", m_proxyPort);
-	addChildElement(pElem, "port", numStr);
-	addChildElement(pElem, "type", m_proxyType);
-	addChildElement(pElem, "enable", (m_proxyEnabled ? "YES" : "NO"));
-	// Locations to index 
-	for (set<IndexableLocation>::iterator locationIter = m_indexableLocations.begin(); locationIter != m_indexableLocations.end(); ++locationIter)
-	{
-		pElem = pRootElem->add_child("indexable");
+		addChildElement(pElem, "address", m_proxyAddress);
+		sprintf(numStr, "%u", m_proxyPort);
+		addChildElement(pElem, "port", numStr);
+		addChildElement(pElem, "type", m_proxyType);
+		addChildElement(pElem, "enable", (m_proxyEnabled ? "YES" : "NO"));
+		// Locations to index 
+		for (set<IndexableLocation>::iterator locationIter = m_indexableLocations.begin();
+			locationIter != m_indexableLocations.end(); ++locationIter)
+		{
+			pElem = pRootElem->add_child("indexable");
+			if (pElem == NULL)
+			{
+				return false;
+			}
+			addChildElement(pElem, "name", locationIter->m_name);
+			addChildElement(pElem, "monitor", (locationIter->m_monitor ? "YES" : "NO"));
+		}
+		// File patterns
+		pElem = pRootElem->add_child("patterns");
 		if (pElem == NULL)
 		{
 			return false;
 		}
-		addChildElement(pElem, "name", locationIter->m_name);
-		addChildElement(pElem, "monitor", (locationIter->m_monitor ? "YES" : "NO"));
+		for (set<ustring>::iterator patternIter = m_filePatternsList.begin();
+			patternIter != m_filePatternsList.end() ; ++patternIter)
+		{
+			addChildElement(pElem, "pattern", *patternIter);
+		}
+		addChildElement(pElem, "forbid", (m_isBlackList ? "YES" : "NO"));
+
+		// Save to file
+		doc.write_to_file_formatted(getConfigurationFileName());
 	}
-	// File patterns
-	pElem = pRootElem->add_child("patterns");
-	if (pElem == NULL)
+	catch (const std::exception& ex)
 	{
+		cerr << "Couldn't save configuration file: "
+			<< ex.what() << endl;
 		return false;
 	}
-	for (set<ustring>::iterator patternIter = m_filePatternsList.begin(); patternIter != m_filePatternsList.end() ; ++patternIter)
-	{
-		addChildElement(pElem, "pattern", *patternIter);
-	}
-	addChildElement(pElem, "forbid", (m_isBlackList ? "YES" : "NO"));
 
-	// Save to file
-	doc.write_to_file_formatted(getConfigurationFileName());
-
 	return true;
 }
 



