<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pinot-svn] r506 - in trunk/UI/GTK2: . src
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pinot-svn/2006-October/index.html" >
   <LINK REL="made" HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r506%20-%20in%20trunk/UI/GTK2%3A%20.%20src&In-Reply-To=%3C200610131309.k9DD9eOM010637%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000498.html">
   <LINK REL="Next"  HREF="000500.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pinot-svn] r506 - in trunk/UI/GTK2: . src</H1>
    <B>fabricecolin at BerliOS</B> 
    <A HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r506%20-%20in%20trunk/UI/GTK2%3A%20.%20src&In-Reply-To=%3C200610131309.k9DD9eOM010637%40sheep.berlios.de%3E"
       TITLE="[Pinot-svn] r506 - in trunk/UI/GTK2: . src">fabricecolin at mail.berlios.de
       </A><BR>
    <I>Fri Oct 13 15:09:40 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="000498.html">[Pinot-svn] r505 - trunk
</A></li>
        <LI>Next message: <A HREF="000500.html">[Pinot-svn] r507 - trunk/UI/GTK2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#499">[ date ]</a>
              <a href="thread.html#499">[ thread ]</a>
              <a href="subject.html#499">[ subject ]</a>
              <a href="author.html#499">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fabricecolin
Date: 2006-10-13 15:09:39 +0200 (Fri, 13 Oct 2006)
New Revision: 506

Modified:
   trunk/UI/GTK2/metase-gtk2.glade
   trunk/UI/GTK2/src/prefsDialog.cc
   trunk/UI/GTK2/src/prefsDialog.hh
   trunk/UI/GTK2/src/prefsDialog_glade.cc
   trunk/UI/GTK2/src/prefsDialog_glade.hh
Log:
Removed Edit buttons from prefsDialog Indexing tab.


Modified: trunk/UI/GTK2/metase-gtk2.glade
===================================================================
--- trunk/UI/GTK2/metase-gtk2.glade	2006-10-12 14:57:08 UTC (rev 505)
+++ trunk/UI/GTK2/metase-gtk2.glade	2006-10-13 13:09:39 UTC (rev 506)
@@ -1556,7 +1556,6 @@
 			  &lt;property name=&quot;fixed_height_mode&quot;&gt;True&lt;/property&gt;
 			  &lt;property name=&quot;hover_selection&quot;&gt;False&lt;/property&gt;
 			  &lt;property name=&quot;hover_expand&quot;&gt;False&lt;/property&gt;
-			  &lt;signal name=&quot;button_press_event&quot; handler=&quot;on_mailTreeview_button_press_event&quot; last_modification_time=&quot;Sat, 19 Mar 2005 10:05:34 GMT&quot;/&gt;
 			&lt;/widget&gt;
 		      &lt;/child&gt;
 		    &lt;/widget&gt;
@@ -1651,21 +1650,6 @@
 		      &lt;/child&gt;
 
 		      &lt;child&gt;
-			&lt;widget class=&quot;GtkButton&quot; id=&quot;editDirectoryButton&quot;&gt;
-			  &lt;property name=&quot;border_width&quot;&gt;4&lt;/property&gt;
-			  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
-			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;label&quot;&gt;gtk-edit&lt;/property&gt;
-			  &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
-			  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
-			  &lt;signal name=&quot;clicked&quot; handler=&quot;on_editDirectoryButton_clicked&quot; last_modification_time=&quot;Sun, 20 Aug 2006 07:34:03 GMT&quot;/&gt;
-			&lt;/widget&gt;
-		      &lt;/child&gt;
-
-		      &lt;child&gt;
 			&lt;widget class=&quot;GtkButton&quot; id=&quot;removeDirectoryButton&quot;&gt;
 			  &lt;property name=&quot;border_width&quot;&gt;4&lt;/property&gt;
 			  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
@@ -1747,7 +1731,6 @@
 			  &lt;property name=&quot;fixed_height_mode&quot;&gt;True&lt;/property&gt;
 			  &lt;property name=&quot;hover_selection&quot;&gt;False&lt;/property&gt;
 			  &lt;property name=&quot;hover_expand&quot;&gt;False&lt;/property&gt;
-			  &lt;signal name=&quot;button_press_event&quot; handler=&quot;on_mailTreeview_button_press_event&quot; last_modification_time=&quot;Sat, 19 Mar 2005 10:05:34 GMT&quot;/&gt;
 			&lt;/widget&gt;
 		      &lt;/child&gt;
 		    &lt;/widget&gt;
@@ -1842,21 +1825,6 @@
 		      &lt;/child&gt;
 
 		      &lt;child&gt;
-			&lt;widget class=&quot;GtkButton&quot; id=&quot;editAccountButton&quot;&gt;
-			  &lt;property name=&quot;border_width&quot;&gt;4&lt;/property&gt;
-			  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;
-			  &lt;property name=&quot;visible&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;can_default&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;can_focus&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;label&quot;&gt;gtk-edit&lt;/property&gt;
-			  &lt;property name=&quot;use_stock&quot;&gt;True&lt;/property&gt;
-			  &lt;property name=&quot;relief&quot;&gt;GTK_RELIEF_NORMAL&lt;/property&gt;
-			  &lt;property name=&quot;focus_on_click&quot;&gt;True&lt;/property&gt;
-			  &lt;signal name=&quot;clicked&quot; handler=&quot;on_editAccountButton_clicked&quot; last_modification_time=&quot;Fri, 02 Sep 2005 21:58:38 GMT&quot;/&gt;
-			&lt;/widget&gt;
-		      &lt;/child&gt;
-
-		      &lt;child&gt;
 			&lt;widget class=&quot;GtkButton&quot; id=&quot;removeAccountButton&quot;&gt;
 			  &lt;property name=&quot;border_width&quot;&gt;4&lt;/property&gt;
 			  &lt;property agent=&quot;glademm&quot; name=&quot;cxx_visibility&quot;&gt;protected&lt;/property&gt;

Modified: trunk/UI/GTK2/src/prefsDialog.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.cc	2006-10-12 14:57:08 UTC (rev 505)
+++ trunk/UI/GTK2/src/prefsDialog.cc	2006-10-13 13:09:39 UTC (rev 506)
@@ -114,7 +114,7 @@
 	const set&lt;string&gt; &amp;labels = m_settings.getLabels();
 	if (labels.empty() == true)
 	{
-		// These buttons will stay disabled until labels are added to the list
+		// This button will stay disabled until labels are added to the list
 		removeLabelButton-&gt;set_sensitive(false);
 		return;
 	}
@@ -183,8 +183,7 @@
 
 	if (m_settings.m_indexableLocations.empty() == true)
 	{
-		// These buttons will stay disabled until directories are added to the list
-		editDirectoryButton-&gt;set_sensitive(false);
+		// This button will stay disabled until directories are added to the list
 		removeDirectoryButton-&gt;set_sensitive(false);
 		return;
 	}
@@ -201,7 +200,6 @@
 		row[m_directoriesColumns.m_location] = dirIter-&gt;m_name;
 	}
 
-	editDirectoryButton-&gt;set_sensitive(true);
 	removeDirectoryButton-&gt;set_sensitive(true);
 }
 
@@ -254,8 +252,7 @@
 
 	if (m_settings.m_mailAccounts.empty() == true)
 	{
-		// These buttons will stay disabled until mail is added to the list
-		editAccountButton-&gt;set_sensitive(false);
+		// This button will stay disabled until mail is added to the list
 		removeAccountButton-&gt;set_sensitive(false);
 		return;
 	}
@@ -273,7 +270,6 @@
 		row[m_mailColumns.m_mTime] = mailIter-&gt;m_modTime;
 	}
 
-	editAccountButton-&gt;set_sensitive(true);
 	removeAccountButton-&gt;set_sensitive(true);
 }
 
@@ -360,7 +356,7 @@
 	// This marks the label as new
 	row[m_labelsColumns.m_enabled] = false;
 
-	// Enable these buttons
+	// Enable this button
 	removeLabelButton-&gt;set_sensitive(true);
 }
 
@@ -384,23 +380,12 @@
 		TreeModel::Children children = m_refLabelsTree-&gt;children();
 		if (children.empty() == true)
 		{
-			// Disable these buttons
+			// Disable this button
 			removeLabelButton-&gt;set_sensitive(false);
 		}
 	}
 }
 
-bool prefsDialog::on_mailTreeview_button_press_event(GdkEventButton *ev)
-{
-	// Check for double clicks
-	if (ev-&gt;type == GDK_2BUTTON_PRESS)
-	{
-		on_editAccountButton_clicked();
-	}
-
-	return false;
-}
-
 void prefsDialog::on_addDirectoryButton_clicked()
 {
 	ustring dirName;
@@ -423,29 +408,12 @@
 
 		if (wasEmpty == true)
 		{
-			// Enable these buttons
-			editDirectoryButton-&gt;set_sensitive(true);
+			// Enable this button
 			removeDirectoryButton-&gt;set_sensitive(true);
 		}
 	}
 }
 
-void prefsDialog::on_editDirectoryButton_clicked()
-{
-	// Get the selected directory in the list
-	TreeModel::iterator iter = directoriesTreeview-&gt;get_selection()-&gt;get_selected();
-	if (iter)
-	{
-		TreeModel::Row row = *iter;
-		ustring dirName = row[m_directoriesColumns.m_location];
-		// Let the user edit the location
-		if (select_file_name(*this, _(&quot;Directory to index&quot;), dirName, true, true) == true)
-		{
-			row[m_directoriesColumns.m_location] = dirName;
-		}
-	}
-}
-
 void prefsDialog::on_removeDirectoryButton_clicked()
 {
 	// Get the selected directory in the list
@@ -470,8 +438,7 @@
 		TreeModel::Children children = m_refDirectoriesTree-&gt;children();
 		if (children.empty() == true)
 		{
-			// Disable these buttons
-			editDirectoryButton-&gt;set_sensitive(false);
+			// Disable this button
 			removeDirectoryButton-&gt;set_sensitive(false);
 		}
 	}
@@ -503,29 +470,12 @@
 
 		if (wasEmpty == true)
 		{
-			// Enable these buttons
-			editAccountButton-&gt;set_sensitive(true);
+			// Enable this button
 			removeAccountButton-&gt;set_sensitive(true);
 		}
 	}
 }
 
-void prefsDialog::on_editAccountButton_clicked()
-{
-	// Get the selected mail account in the list
-	TreeModel::iterator iter = mailTreeview-&gt;get_selection()-&gt;get_selected();
-	if (iter)
-	{
-		TreeModel::Row row = *iter;
-		ustring fileName = row[m_mailColumns.m_location];
-		// Let the user edit the location
-		if (select_file_name(*this, _(&quot;Mbox File Location&quot;), fileName, true) == true)
-		{
-			row[m_mailColumns.m_location] = fileName;
-		}
-	}
-}
-
 void prefsDialog::on_removeAccountButton_clicked()
 {
 	// Get the selected mail account in the list
@@ -550,8 +500,7 @@
 		TreeModel::Children children = m_refMailTree-&gt;children();
 		if (children.empty() == true)
 		{
-			// Disable these buttons
-			editAccountButton-&gt;set_sensitive(false);
+			// Disable this button
 			removeAccountButton-&gt;set_sensitive(false);
 		}
 	}

Modified: trunk/UI/GTK2/src/prefsDialog.hh
===================================================================
--- trunk/UI/GTK2/src/prefsDialog.hh	2006-10-12 14:57:08 UTC (rev 505)
+++ trunk/UI/GTK2/src/prefsDialog.hh	2006-10-13 13:09:39 UTC (rev 506)
@@ -42,12 +42,9 @@
 	virtual void on_prefsOkbutton_clicked();
 	virtual void on_addLabelButton_clicked();
 	virtual void on_removeLabelButton_clicked();
-	virtual bool on_mailTreeview_button_press_event(GdkEventButton *ev);
 	virtual void on_addDirectoryButton_clicked();
-	virtual void on_editDirectoryButton_clicked();
 	virtual void on_removeDirectoryButton_clicked();
 	virtual void on_addAccountButton_clicked();
-	virtual void on_editAccountButton_clicked();
 	virtual void on_removeAccountButton_clicked();
 
 	void populate_labelsTreeview();

Modified: trunk/UI/GTK2/src/prefsDialog_glade.cc
===================================================================
--- trunk/UI/GTK2/src/prefsDialog_glade.cc	2006-10-12 14:57:08 UTC (rev 505)
+++ trunk/UI/GTK2/src/prefsDialog_glade.cc	2006-10-13 13:09:39 UTC (rev 506)
@@ -1,4 +1,4 @@
-// generated 2006/10/12 22:44:57 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
+// generated 2006/10/13 21:02:13 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
 // using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
@@ -103,7 +103,6 @@
    Gtk::HBox *hbox54 = Gtk::manage(new class Gtk::HBox(false, 2));
    Gtk::Alignment *alignment35 = Gtk::manage(new class Gtk::Alignment(0.5, 0.5, 0, 0));
    addDirectoryButton = Gtk::manage(new class Gtk::Button());
-   editDirectoryButton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-edit&quot;)));
    removeDirectoryButton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-remove&quot;)));
    
    Gtk::VButtonBox *directoriesVbuttonbox = Gtk::manage(new class Gtk::VButtonBox(Gtk::BUTTONBOX_START, 0));
@@ -117,7 +116,6 @@
    Gtk::HBox *hbox42 = Gtk::manage(new class Gtk::HBox(false, 2));
    Gtk::Alignment *alignment28 = Gtk::manage(new class Gtk::Alignment(0.5, 0.5, 0, 0));
    addAccountButton = Gtk::manage(new class Gtk::Button());
-   editAccountButton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-edit&quot;)));
    removeAccountButton = Gtk::manage(new class Gtk::Button(Gtk::StockID(&quot;gtk-remove&quot;)));
    
    Gtk::VButtonBox *mailVbuttonbox = Gtk::manage(new class Gtk::VButtonBox(Gtk::BUTTONBOX_START, 0));
@@ -281,16 +279,11 @@
    addDirectoryButton-&gt;set_border_width(4);
    addDirectoryButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    addDirectoryButton-&gt;add(*alignment35);
-   editDirectoryButton-&gt;set_flags(Gtk::CAN_FOCUS);
-   editDirectoryButton-&gt;set_flags(Gtk::CAN_DEFAULT);
-   editDirectoryButton-&gt;set_border_width(4);
-   editDirectoryButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    removeDirectoryButton-&gt;set_flags(Gtk::CAN_FOCUS);
    removeDirectoryButton-&gt;set_flags(Gtk::CAN_DEFAULT);
    removeDirectoryButton-&gt;set_border_width(4);
    removeDirectoryButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    directoriesVbuttonbox-&gt;pack_start(*addDirectoryButton);
-   directoriesVbuttonbox-&gt;pack_start(*editDirectoryButton);
    directoriesVbuttonbox-&gt;pack_start(*removeDirectoryButton);
    directoriesHbox-&gt;pack_start(*directoriesScrolledwindow);
    directoriesHbox-&gt;pack_start(*directoriesVbuttonbox, Gtk::PACK_SHRINK, 0);
@@ -327,16 +320,11 @@
    addAccountButton-&gt;set_border_width(4);
    addAccountButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    addAccountButton-&gt;add(*alignment28);
-   editAccountButton-&gt;set_flags(Gtk::CAN_FOCUS);
-   editAccountButton-&gt;set_flags(Gtk::CAN_DEFAULT);
-   editAccountButton-&gt;set_border_width(4);
-   editAccountButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    removeAccountButton-&gt;set_flags(Gtk::CAN_FOCUS);
    removeAccountButton-&gt;set_flags(Gtk::CAN_DEFAULT);
    removeAccountButton-&gt;set_border_width(4);
    removeAccountButton-&gt;set_relief(Gtk::RELIEF_NORMAL);
    mailVbuttonbox-&gt;pack_start(*addAccountButton);
-   mailVbuttonbox-&gt;pack_start(*editAccountButton);
    mailVbuttonbox-&gt;pack_start(*removeAccountButton);
    mailHbox-&gt;pack_start(*mailScrolledwindow);
    mailHbox-&gt;pack_start(*mailVbuttonbox, Gtk::PACK_SHRINK, 0);
@@ -409,7 +397,6 @@
    hbox54-&gt;show();
    alignment35-&gt;show();
    addDirectoryButton-&gt;show();
-   editDirectoryButton-&gt;show();
    removeDirectoryButton-&gt;show();
    directoriesVbuttonbox-&gt;show();
    directoriesHbox-&gt;show();
@@ -421,7 +408,6 @@
    hbox42-&gt;show();
    alignment28-&gt;show();
    addAccountButton-&gt;show();
-   editAccountButton-&gt;show();
    removeAccountButton-&gt;show();
    mailVbuttonbox-&gt;show();
    mailHbox-&gt;show();
@@ -432,13 +418,9 @@
    prefsOkbutton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_prefsOkbutton_clicked), false);
    addLabelButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_addLabelButton_clicked), false);
    removeLabelButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_removeLabelButton_clicked), false);
-   directoriesTreeview-&gt;signal_button_press_event().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_mailTreeview_button_press_event), false);
    addDirectoryButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_addDirectoryButton_clicked), false);
-   editDirectoryButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_editDirectoryButton_clicked), false);
    removeDirectoryButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_removeDirectoryButton_clicked), false);
-   mailTreeview-&gt;signal_button_press_event().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_mailTreeview_button_press_event), false);
    addAccountButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_addAccountButton_clicked), false);
-   editAccountButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_editAccountButton_clicked), false);
    removeAccountButton-&gt;signal_clicked().connect(SigC::slot(*this, &amp;prefsDialog_glade::on_removeAccountButton_clicked), false);
 }
 

Modified: trunk/UI/GTK2/src/prefsDialog_glade.hh
===================================================================
--- trunk/UI/GTK2/src/prefsDialog_glade.hh	2006-10-12 14:57:08 UTC (rev 505)
+++ trunk/UI/GTK2/src/prefsDialog_glade.hh	2006-10-13 13:09:39 UTC (rev 506)
@@ -1,4 +1,4 @@
-// generated 2006/10/12 22:44:57 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
+// generated 2006/10/13 21:02:13 SGT by <A HREF="https://lists.berlios.de/mailman/listinfo/pinot-svn">fabrice at amra.dyndns.org.</A>(none)
 // using glademm V2.12.1
 //
 // DO NOT EDIT THIS FILE ! It was created using
@@ -59,11 +59,9 @@
         class Gtk::Button * removeLabelButton;
         class Gtk::TreeView * directoriesTreeview;
         class Gtk::Button * addDirectoryButton;
-        class Gtk::Button * editDirectoryButton;
         class Gtk::Button * removeDirectoryButton;
         class Gtk::TreeView * mailTreeview;
         class Gtk::Button * addAccountButton;
-        class Gtk::Button * editAccountButton;
         class Gtk::Button * removeAccountButton;
         class Gtk::Notebook * prefsNotebook;
         
@@ -74,12 +72,9 @@
         virtual void on_prefsOkbutton_clicked() = 0;
         virtual void on_addLabelButton_clicked() = 0;
         virtual void on_removeLabelButton_clicked() = 0;
-        virtual bool on_mailTreeview_button_press_event(GdkEventButton *ev) = 0;
         virtual void on_addDirectoryButton_clicked() = 0;
-        virtual void on_editDirectoryButton_clicked() = 0;
         virtual void on_removeDirectoryButton_clicked() = 0;
         virtual void on_addAccountButton_clicked() = 0;
-        virtual void on_editAccountButton_clicked() = 0;
         virtual void on_removeAccountButton_clicked() = 0;
 };
 #endif


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000498.html">[Pinot-svn] r505 - trunk
</A></li>
	<LI>Next message: <A HREF="000500.html">[Pinot-svn] r507 - trunk/UI/GTK2/src
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#499">[ date ]</a>
              <a href="thread.html#499">[ thread ]</a>
              <a href="subject.html#499">[ subject ]</a>
              <a href="author.html#499">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pinot-svn">More information about the Pinot-svn
mailing list</a><br>
</body></html>
