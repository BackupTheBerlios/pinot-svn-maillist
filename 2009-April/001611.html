<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pinot-svn] r1621 - trunk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pinot-svn/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r1621%20-%20trunk&In-Reply-To=%3C200904091538.n39FcGMr007011%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001610.html">
   <LINK REL="Next"  HREF="001612.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pinot-svn] r1621 - trunk</H1>
    <B>fabricecolin at mail.berlios.de</B> 
    <A HREF="mailto:pinot-svn%40lists.berlios.de?Subject=Re%3A%20%5BPinot-svn%5D%20r1621%20-%20trunk&In-Reply-To=%3C200904091538.n39FcGMr007011%40sheep.berlios.de%3E"
       TITLE="[Pinot-svn] r1621 - trunk">fabricecolin at mail.berlios.de
       </A><BR>
    <I>Thu Apr  9 17:38:16 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="001610.html">[Pinot-svn] r1620 - trunk
</A></li>
        <LI>Next message: <A HREF="001612.html">[Pinot-svn] r1622 - tags
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1611">[ date ]</a>
              <a href="thread.html#1611">[ thread ]</a>
              <a href="subject.html#1611">[ subject ]</a>
              <a href="author.html#1611">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: fabricecolin
Date: 2009-04-09 17:38:04 +0200 (Thu, 09 Apr 2009)
New Revision: 1621

Modified:
   trunk/ChangeLog
   trunk/ChangeLog-dijon
Log:
Current logs.


Modified: trunk/ChangeLog
===================================================================
--- trunk/ChangeLog	2009-04-09 15:34:40 UTC (rev 1620)
+++ trunk/ChangeLog	2009-04-09 15:38:04 UTC (rev 1621)
@@ -1,4 +1,353 @@
 ------------------------------------------------------------------------
+r1620 | fabricecolin | 2009-04-09 23:34:40 +0800 (Thu, 09 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/NEWS
+   M /trunk/TODO
+
+Current state.
+
+------------------------------------------------------------------------
+r1619 | fabricecolin | 2009-04-09 20:59:15 +0800 (Thu, 09 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/po/de.po
+   M /trunk/po/es.po
+   M /trunk/po/fr.po
+   M /trunk/po/he.po
+   M /trunk/po/it.po
+   M /trunk/po/ja.po
+   M /trunk/po/nl.po
+   M /trunk/po/pt.po
+   M /trunk/po/pt_BR.po
+   M /trunk/po/ru.po
+   M /trunk/po/sv.po
+   M /trunk/po/zh_CN.po
+   M /trunk/po/zh_TW.po
+
+Updated po's.
+
+------------------------------------------------------------------------
+r1618 | fabricecolin | 2009-04-08 20:34:15 +0800 (Wed, 08 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-dbus-daemon.1
+   M /trunk/Core/pinot-index.1
+   M /trunk/Core/pinot-search.1
+   M /trunk/IndexSearch/pinot-label.1
+   M /trunk/UI/GTK2/src/pinot.1
+   M /trunk/configure.in
+
+Bumped version number to 0.92, set as minimum index version.
+
+------------------------------------------------------------------------
+r1617 | fabricecolin | 2009-04-07 22:32:55 +0800 (Tue, 07 Apr 2009) | 5 lines
+Changed paths:
+   M /trunk/README
+   M /trunk/Tokenize/Makefile.am
+   M /trunk/configure.in
+   M /trunk/pinot.spec.in
+
+The archive filter causes issues with libarchive 2.5.5 so to be on the safe side
+it's now enabled only if --enable-libarchive is passed to configure.
+Version 2.6.2 is recommended.
+When building RPMs, pass &quot;--with libarchive&quot;.
+
+------------------------------------------------------------------------
+r1616 | fabricecolin | 2009-04-07 21:50:43 +0800 (Tue, 07 Apr 2009) | 2 lines
+Changed paths:
+   D /trunk/IndexSearch/Plugins/MozDexDescription.xml
+
+Removed.
+
+------------------------------------------------------------------------
+r1615 | fabricecolin | 2009-04-06 23:01:09 +0800 (Mon, 06 Apr 2009) | 5 lines
+Changed paths:
+   M /trunk/FAQ
+   M /trunk/README
+
+Updated following changes to the number of indexing threads, memory usage.
+List libarchive as a dependency.
+There was no clue as to where the stopwords should be installed and how they
+are useful.
+
+------------------------------------------------------------------------
+r1614 | fabricecolin | 2009-04-06 22:52:07 +0800 (Mon, 06 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/Makefile.am
+   M /trunk/pinot.spec.in
+
+Build and package libarchivefilter.
+
+------------------------------------------------------------------------
+r1613 | fabricecolin | 2009-04-06 22:50:39 +0800 (Mon, 06 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/FilterUtils.cpp
+
+Don't forget to provide a default title to documents not gone through a filter.
+
+------------------------------------------------------------------------
+r1612 | fabricecolin | 2009-04-05 10:22:43 +0800 (Sun, 05 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/configure.in
+
+The memory pool can be optionally disabled.
+
+------------------------------------------------------------------------
+r1611 | fabricecolin | 2009-04-05 10:21:33 +0800 (Sun, 05 Apr 2009) | 4 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/ResultsTree.cc
+   M /trunk/UI/GTK2/src/UIThreads.cc
+   M /trunk/UI/GTK2/src/mainWindow.cc
+   M /trunk/UI/GTK2/src/mainWindow.hh
+
+Updated following changes for documents ipath.
+When a new document is indexed, don't simply append it to the My Web Pages list,
+refresh the list.
+
+------------------------------------------------------------------------
+r1610 | fabricecolin | 2009-04-05 10:19:27 +0800 (Sun, 05 Apr 2009) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
+
+Updated to cope with documents ipath.
+Don't parse documents data here, let XapianDatabase::recordToProps() do it.
+
+------------------------------------------------------------------------
+r1609 | fabricecolin | 2009-04-05 10:16:33 +0800 (Sun, 05 Apr 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/DaemonState.cpp
+   M /trunk/Core/WorkerThreads.cpp
+
+Try and reclaim memory more often, after flushing the index.
+Some changes to cope with documents ipath.
+
+------------------------------------------------------------------------
+r1608 | fabricecolin | 2009-04-05 10:14:08 +0800 (Sun, 05 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/pinot.spec.in
+
+Removed dependency on libtar.
+
+------------------------------------------------------------------------
+r1607 | fabricecolin | 2009-04-05 10:12:55 +0800 (Sun, 05 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/Makefile.am
+
+Don't build TarFilter, libtar is unmaintained.
+
+------------------------------------------------------------------------
+r1606 | fabricecolin | 2009-04-02 23:31:30 +0800 (Thu, 02 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/FilterWrapper.cpp
+
+Safety check.
+
+------------------------------------------------------------------------
+r1605 | fabricecolin | 2009-04-02 23:27:47 +0800 (Thu, 02 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/OpenSearchParser.cpp
+
+Removed a bunch of superfluous headers.
+
+------------------------------------------------------------------------
+r1604 | fabricecolin | 2009-04-02 23:25:40 +0800 (Thu, 02 Apr 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/PinotSettings.cpp
+
+Initialize and cleanup libxml2 when PinotSettings is constructed/destroyed.
+Added mp4 to the default blacklist, removed Z.
+
+------------------------------------------------------------------------
+r1603 | fabricecolin | 2009-03-31 21:04:29 +0800 (Tue, 31 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Collect/DownloaderFactory.cpp
+   M /trunk/Collect/Makefile.am
+   D /trunk/Collect/MboxCollector.cpp
+   D /trunk/Collect/MboxCollector.h
+
+Dropped MboxCollector.
+
+------------------------------------------------------------------------
+r1602 | fabricecolin | 2009-03-31 21:00:45 +0800 (Tue, 31 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/SQL/MetaDataBackup.cpp
+   M /trunk/SQL/MetaDataBackup.h
+
+Changes to accomodate ipath.
+
+------------------------------------------------------------------------
+r1601 | fabricecolin | 2009-03-28 11:50:41 +0800 (Sat, 28 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/IndexSearch/FilterWrapper.cpp
+   M /trunk/Tokenize/TextConverter.cpp
+   M /trunk/Tokenize/TextConverter.h
+
+Work-around documents that declare an invalid charset, eg iso_8859_1 instead of
+iso-8859-1.
+
+------------------------------------------------------------------------
+r1600 | fabricecolin | 2009-03-28 10:46:32 +0800 (Sat, 28 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/Utils/Memory.cpp
+   M /trunk/Utils/Memory.h
+
+Added getUsage().
+In reclaim(), call umem_reap() if umem support is on.
+
+------------------------------------------------------------------------
+r1599 | fabricecolin | 2009-03-28 10:36:40 +0800 (Sat, 28 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Collect/FileCollector.cpp
+
+If ipath isn't empty, drill down with FilterUtils::reduceDocument(). 
+
+------------------------------------------------------------------------
+r1598 | fabricecolin | 2009-03-28 10:33:16 +0800 (Sat, 28 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/FilterWrapper.cpp
+   M /trunk/IndexSearch/FilterWrapper.h
+   M /trunk/Tokenize/FilterUtils.cpp
+   M /trunk/Tokenize/FilterUtils.h
+
+Moved filterDocument() and related to FilterUtils.
+
+------------------------------------------------------------------------
+r1597 | fabricecolin | 2009-03-25 21:41:00 +0800 (Wed, 25 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/DBusIndex.cpp
+   M /trunk/IndexSearch/Xapian/XapianDatabase.cpp
+   M /trunk/Utils/DocumentInfo.cpp
+   M /trunk/Utils/DocumentInfo.h
+
+ipath is a property of DocumentInfo.
+
+------------------------------------------------------------------------
+r1596 | fabricecolin | 2009-03-22 22:07:25 +0800 (Sun, 22 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/UI/GTK2/src/Makefile.am
+
+Link against libBasicUtils first.
+
+------------------------------------------------------------------------
+r1595 | fabricecolin | 2009-03-22 22:06:39 +0800 (Sun, 22 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/Makefile.am
+   M /trunk/Core/WorkerThreads.cpp
+
+Attempt to reclaim, or rather let the OS reclaim, memory every 1000 threads.
+Link against libBasicUtils first.
+
+------------------------------------------------------------------------
+r1594 | fabricecolin | 2009-03-22 22:04:23 +0800 (Sun, 22 Mar 2009) | 4 lines
+Changed paths:
+   M /trunk/IndexSearch/FilterWrapper.cpp
+   M /trunk/Tokenize/FilterUtils.cpp
+
+Retrieve content out with Filter::get_content().
+Don't set dummy documents when the file is empty or of an unsupported type, just
+go ahead and index its metadata.
+
+------------------------------------------------------------------------
+r1593 | fabricecolin | 2009-03-22 22:01:54 +0800 (Sun, 22 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/TextConverter.cpp
+
+Clear the output on exception.
+
+------------------------------------------------------------------------
+r1592 | fabricecolin | 2009-03-22 22:01:22 +0800 (Sun, 22 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Utils/Memory.h
+
+Better include config.h since the whole thing is driven by ifdef's.
+
+------------------------------------------------------------------------
+r1591 | fabricecolin | 2009-03-22 09:31:09 +0800 (Sun, 22 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/Utils/Document.cpp
+   M /trunk/Utils/Document.h
+   M /trunk/Utils/Makefile.am
+
+Document relies on Memory for its internal buffer, uses madvise() if available
+whenever mmap'ing a file.
+
+------------------------------------------------------------------------
+r1590 | fabricecolin | 2009-03-21 19:00:39 +0800 (Sat, 21 Mar 2009) | 5 lines
+Changed paths:
+   M /trunk/Core/DaemonState.cpp
+   M /trunk/Core/WorkerThreads.cpp
+   M /trunk/UI/GTK2/src/mainWindow.cc
+   M /trunk/UI/GTK2/src/mainWindow.hh
+
+Set the number of daemon's indexing threads to 2, unless overriden with the
+environment variable PINOT_MAXIMUM_INDEX_THREADS.
+Changed flushing again, this time to happen when the queue is empty. This means
+that the index will be flushed when everything has been indexed.
+
+------------------------------------------------------------------------
+r1589 | fabricecolin | 2009-03-21 13:03:11 +0800 (Sat, 21 Mar 2009) | 8 lines
+Changed paths:
+   A /trunk/Utils/Memory.cpp
+   A /trunk/Utils/Memory.h
+   M /trunk/configure.in
+
+Check for boost/pool/poolfwd.hpp, ext/malloc_allocator.h, mallinfo(),
+malloc_trim() and madvise().
+Memory wraps all this together. It provides dstring, a basic_string class
+backed by a boost::pool memory pool, and either malloc() or umem as allocators,
+functions to allocate and free buffers out of the same pool, and a function to
+let the OS reclaim memory.
+Support for umem is untested at the moment.
+
+------------------------------------------------------------------------
+r1588 | fabricecolin | 2009-03-17 22:37:13 +0800 (Tue, 17 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/IndexSearch/Xapian/LanguageDetector.cpp
+   M /trunk/IndexSearch/Xapian/LanguageDetector.h
+   M /trunk/IndexSearch/Xapian/XapianDatabaseFactory.h
+   M /trunk/IndexSearch/Xapian/XapianIndex.cpp
+
+LanguageDetector is a singleton, and textcat is initialized once.
+
+------------------------------------------------------------------------
+r1587 | fabricecolin | 2009-03-11 22:30:17 +0800 (Wed, 11 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Core/pinot-index.cpp
+
+Missing include signal.h. Reported by Robert Wotzlaw.
+
+------------------------------------------------------------------------
+r1586 | fabricecolin | 2009-03-10 20:08:56 +0800 (Tue, 10 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/Tokenize/Makefile.am
+   M /trunk/pinot.spec.in
+
+Build the new tar filter by default. This requires libtar &gt;= 1.2.11.
+
+------------------------------------------------------------------------
+r1585 | fabricecolin | 2009-03-10 20:07:31 +0800 (Tue, 10 Mar 2009) | 5 lines
+Changed paths:
+   M /trunk/Tokenize/FilterUtils.cpp
+
+Feeding the data through a temporary file is the second most preferred way to
+feed filters as having the data very likely means that the original file
+already went through one filter.
+There's no point trying to convert to UTF8 stuff that's not plain text.
+
+------------------------------------------------------------------------
+r1584 | fabricecolin | 2009-03-08 06:47:58 +0800 (Sun, 08 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/Core/pinot-index.cpp
+
+Don't start the main loop if the document wasn't queued for indexing, eg
+because it's black-listed.
+
+------------------------------------------------------------------------
+r1582 | fabricecolin | 2009-03-07 11:15:02 +0800 (Sat, 07 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/ChangeLog
+
+Current ChangeLog.
+
+------------------------------------------------------------------------
 r1581 | fabricecolin | 2009-03-07 11:11:11 +0800 (Sat, 07 Mar 2009) | 2 lines
 Changed paths:
    M /trunk/NEWS

Modified: trunk/ChangeLog-dijon
===================================================================
--- trunk/ChangeLog-dijon	2009-04-09 15:34:40 UTC (rev 1620)
+++ trunk/ChangeLog-dijon	2009-04-09 15:38:04 UTC (rev 1621)
@@ -1,4 +1,125 @@
 ------------------------------------------------------------------------
+r153 | fabricecolin | 2009-04-07 22:27:22 +0800 (Tue, 07 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/GMimeMboxFilter.cc
+
+Ensure the data buffer isn't accidentally lost on calls to skip_to_document().
+
+------------------------------------------------------------------------
+r152 | fabricecolin | 2009-04-06 21:19:07 +0800 (Mon, 06 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/ArchiveFilter.cc
+
+Removed cpio and zip.
+
+------------------------------------------------------------------------
+r151 | fabricecolin | 2009-04-05 09:54:34 +0800 (Sun, 05 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/ArchiveFilter.cc
+   M /trunk/filters/ArchiveFilter.h
+   M /trunk/filters/TarFilter.cc
+
+Completed ArchiveFilter. Minor changes to TarFilter.
+
+------------------------------------------------------------------------
+r150 | fabricecolin | 2009-04-02 23:30:22 +0800 (Thu, 02 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/GMimeMboxFilter.cc
+
+Minor changes.
+
+------------------------------------------------------------------------
+r149 | fabricecolin | 2009-04-02 23:29:17 +0800 (Thu, 02 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/external-filters.xml
+
+Type application/x-compress was missing.
+
+------------------------------------------------------------------------
+r148 | fabricecolin | 2009-04-02 23:23:28 +0800 (Thu, 02 Apr 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/ExternalFilter.cc
+
+Don't initialize and cleanup libxml2, let the application handle that.
+
+------------------------------------------------------------------------
+r147 | fabricecolin | 2009-03-29 17:03:04 +0800 (Sun, 29 Mar 2009) | 4 lines
+Changed paths:
+   M /trunk/filters/GMimeMboxFilter.cc
+   M /trunk/filters/GMimeMboxFilter.h
+
+Use the memory stream functions when passed a buffer, instead of dealing only
+with files. Free the stream after freeing the parser.
+Don't set the URI to &quot;<A HREF="mailbox://...">mailbox://...</A>&quot;.
+
+------------------------------------------------------------------------
+r146 | fabricecolin | 2009-03-29 17:00:13 +0800 (Sun, 29 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/ExifImageFilter.cc
+
+Minor change.
+
+------------------------------------------------------------------------
+r145 | fabricecolin | 2009-03-25 21:38:25 +0800 (Wed, 25 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/ArchiveFilter.cc
+
+Set ipath to &quot;f=file_name&quot;.
+
+------------------------------------------------------------------------
+r144 | fabricecolin | 2009-03-23 23:22:16 +0800 (Mon, 23 Mar 2009) | 3 lines
+Changed paths:
+   A /trunk/filters/ArchiveFilter.cc
+   A /trunk/filters/ArchiveFilter.h
+   M /trunk/filters/external-filters.xml
+
+Filter based on libarchive for tar and cpio files, compressed or not, zip files
+and ISO images.
+
+------------------------------------------------------------------------
+r143 | fabricecolin | 2009-03-23 23:13:30 +0800 (Mon, 23 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/TarFilter.cc
+
+Reset the handle on rewind().
+
+------------------------------------------------------------------------
+r142 | fabricecolin | 2009-03-22 22:00:47 +0800 (Sun, 22 Mar 2009) | 3 lines
+Changed paths:
+   M /trunk/filters/ExifImageFilter.cc
+   M /trunk/filters/ExternalFilter.cc
+   M /trunk/filters/Filter.cc
+   M /trunk/filters/Filter.h
+   M /trunk/filters/GMimeMboxFilter.cc
+   M /trunk/filters/GMimeMboxFilter.h
+   M /trunk/filters/HtmlFilter.cc
+   M /trunk/filters/HtmlFilter.h
+   M /trunk/filters/TagLibMusicFilter.cc
+   M /trunk/filters/TarFilter.cc
+   M /trunk/filters/TextFilter.cc
+   M /trunk/filters/XmlFilter.cc
+
+Content is handled separately from metadata. Filters expect the application to
+provide a Memory.h that define a basic_string subclass named dstring.
+
+------------------------------------------------------------------------
+r141 | fabricecolin | 2009-03-22 16:24:10 +0800 (Sun, 22 Mar 2009) | 2 lines
+Changed paths:
+   M /trunk/filters/external-filters.xml
+
+For OpenXML Presentation and Sheet we didn't get the right file(s) out.
+
+------------------------------------------------------------------------
+r140 | fabricecolin | 2009-03-10 19:56:28 +0800 (Tue, 10 Mar 2009) | 3 lines
+Changed paths:
+   A /trunk/filters/TarFilter.cc
+   A /trunk/filters/TarFilter.h
+   M /trunk/filters/external-filters.xml
+
+TarFilter is a libtar-based filter to extract files from tar archives.
+Modified the rules for compressed tar files in external-filters.xml accordingly.
+
+------------------------------------------------------------------------
 r138 | fabricecolin | 2009-03-05 21:51:00 +0800 (Thu, 05 Mar 2009) | 2 lines
 Changed paths:
    M /trunk/filters/HtmlFilter.cc


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001610.html">[Pinot-svn] r1620 - trunk
</A></li>
	<LI>Next message: <A HREF="001612.html">[Pinot-svn] r1622 - tags
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1611">[ date ]</a>
              <a href="thread.html#1611">[ thread ]</a>
              <a href="subject.html#1611">[ subject ]</a>
              <a href="author.html#1611">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pinot-svn">More information about the Pinot-svn
mailing list</a><br>
</body></html>
